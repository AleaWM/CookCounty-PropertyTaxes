[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Property Taxes in Cook County",
    "section": "",
    "text": "Background Information\nThe following materials are a work in progress based on property tax data released by the Cook County Assessor’s Office (CCAO) and other publicly available data sources. Much of the incorporated data and analysis was prepared, in part, for Cook County’s Property Tax Working Group. This data and analysis accompanies and supplements information in the Exemption White Paper and Addendum, available on GFRC’s website.\nWe are especially indebted to Dan Snow, Rob Ross, and Mike Wu at CCAO for the development and release of PTAXSIM, a package in the R programming language which provides the public with a trove of historical property tax data, without which this analysis would not be possible.\nWe would also like to thank Professors Merriman, Weber, Carroll, and Drucker from UIC’s College of Urban Planning and Public Policy for their support as well as the Chicago Metropolitan Agency for Planning (CMAP) for providing supplemental and background analysis.\nAll data was originally posted by the Cook County Assessor’s Office (CCAO).\nTax data for Cook County was gathered using CCAO’s ptaxsim package and corresponding database.\nAll summarizing of data was done by Research Assistants working for the Government Finance Research Center at the University of Illinois Chicago.\nPlease note that dollars are not inflation adjusted.\nIf ignoring TIFs, the residential share of EAV is:\n\\[\nResidentrialShare = \\frac{TaxableEAV_{residential} - ExemptEAV_{residential}} {TaxableEAV}\n\\]\n\\[\nResidentialShare = \\frac{1-\\lambda}{1-\\lambda-\\psi}\n\\]\n\\[\nTaxableBase = AV_{equalized} - TIFincrement - EAV_{exempt}\n\\]\n\\[\nTIFincrement = AV_{equalized} - EAV_{frozen}\n\\]\nThe aggregate, or composite, tax rate is the sum of the individual taxing agency tax rates, or \\(\\sum(rate_{agency})\\), for all taxing agencies that tax a location. Each unique combination of taxing agencies is assigned a tax code by the assessor’s office.\n\n\nExemption Report Summary of Findings\nUIC’s research led to several main findings:\n\nWhile historical records provide clear reasons for the adoption of homeowner exemptions as a policy tool, current stakeholders throughout Cook County government cannot agree on the public purpose of homestead exemptions, a problem that flows through to properly acknowledging relevant costs, benefits, and stakeholders. Indeed, given divergent policy goals by different stakeholders, any construct of “effectiveness” would be challenging to measure.\nCook County’s property tax system allocates revenue to local governments based on each property owners’ share of that jurisdiction’s total tax base.\nCC’s system of dividing the levy among property owners creates a “zero-sum” game where one taxpayer’s bill must necessarily increase for another taxpayer’s bill to decrease.\nHomeowner exemptions, designed to provide tax release to certain classes of homeowners, decrease property tax bills through a flat reduction in the taxpayer’s contribution to the tax base in EAV.\nExemptions also reduce the tax base, thereby driving tax rates up for all taxpayers (even those that receive exemptions). This push-pull effect causes the true amount of tax liability reduction to be sometimes significantly lower than suggested by government tax bills.\nExemptions are theoretically and practically progressive, bringing greater tax relief to those with the lowest ability to pay (as imperfectly measured by their property’s value).\nAnomalous outcomes can occur due to Cook County’s socio-economic homogeneity. A handful of taxpayers would benefit more from exemptions’ elimination (and the resulting decrease in tax rate) than from the exemption itself.\nThere is no obvious solution to the detrimental effects of exemptions that are endogenous to the property tax system. Any “fix” must come from other revenue.\n\nWe have also appended an explanation of our data sources and how we prepared that data for analysis as well as a mathematical appendix of tedious equations.\n\n\nIncentive Report Summary of Findings\nOur report on incentive property classifications will be released in early 2025.",
    "crumbs": [
      "Background Information"
    ]
  },
  {
    "objectID": "exemp_report_2021.html",
    "href": "exemp_report_2021.html",
    "title": "Tax Year 2021",
    "section": "",
    "text": "County-Wide Exemption Summary Statistics (Tax Year 2021)\nCode\ntbl &lt;- muni_cl_sums |&gt;\n    filter(year == params$year) |&gt;\n    group_by(year) |&gt;\n    summarize(\n      'PINs' = sum(muni_c_pins_in_muni),\n      'PINs (w/ exemps.)' = sum(muni_c_has_HO_exemp),\n      \"EqAV\" = sum(muni_c_equalized_av),\n      'Taxed EAV' = sum(muni_c_current_taxable_eav),\n      'Exempt EAV' = sum(muni_c_all_exemptions),\n      'GHE' = sum(muni_c_exe_homeowner),\n      'Senior' = sum(muni_c_exe_senior),\n      'Senior Freeze' = sum(muni_c_exe_freeze),\n      'Other Exemps.' = sum(muni_c_all_exemptions -muni_c_exe_homeowner- muni_c_exe_senior - muni_c_exe_freeze )\n      ) |&gt;\n    pivot_longer(cols = c('PINs':'Other Exemps.'),\n                 names_to = \"Metric\", values_to = \"Total\") |&gt;\n    select(-year) |&gt; \n    mutate(\n      Total = case_when(\n        Metric %in% c(\"Other Exemps.\", \"EAV\", \"EqAV\", \"Taxed EAV\", \"Exempt EAV\",\"GHE\", \"Senior\", \"Senior Freeze\") ~ \n          paste0(format(round(`Total` / 1e9, 2), big.mark = \",\"), \" B\"),\n        TRUE ~ format(`Total`, big.mark = \",\")\n      )\n    )\n\n\nft &lt;- tbl |&gt;\n    flextable(cwidth = c(1, 1)) |&gt;\n    align(j = 2, align = \"right\", part = \"header\") |&gt;  # Align header\n    align(j = 2, align = \"right\", part = \"body\") |&gt;  # Align body\n    align(i = 6:9, j = 1, align = \"center\", part = \"body\") |&gt;  # Align body\n\n    footnote(i = 1, j = 2, value = as_paragraph(\"EAV in billions.\"), ref_symbols = \"*\", part='header') #Footnote in new header\n  \n\nft\n\n\n\n\nTable 1.1: Summary of Homestead Exemption Use in Cook County (Tax Year 2021\n\n\n\nMetricTotal*PINs      1,864,594PINs (w/ exemps.)      1,028,964EqAV212.39 BTaxed EAV175.16 BExempt EAV 16.11 BGHE 10.16 BSenior  2.63 BSenior Freeze  3.23 BOther Exemps.  0.09 B*EAV in billions.\nEqAV is the 2021 equalization factor multiplied by assessed value. Thus, Taxed EAV and Exempt EAV equal EqAV. It can be thought of as the “maximum available tax base” in a world without exemptions.",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "exemp_report_2021.html#county-wide-exemption-summary-statistics-tax-year-2021",
    "href": "exemp_report_2021.html#county-wide-exemption-summary-statistics-tax-year-2021",
    "title": "Tax Year 2021",
    "section": "",
    "text": "Figure 3. using EAV\n\n\nCode\nmedian_exempt &lt;- muni_sums |&gt;\n  filter(year== params$year)|&gt;\n  mutate(muni_pct_eav_exempt =(muni_eav - muni_eav_taxed) / muni_eav) |&gt; \n  select(muni_pct_eav_exempt, clean_name, agency_name)\n\n\nmidpoint = scales::percent(median(median_exempt$muni_pct_eav_exempt), accuracy = 0.01)\n\nmedian_muni = median_exempt |&gt;\n  arrange(muni_pct_eav_exempt) |&gt;\n  filter(muni_pct_eav_exempt == median(muni_pct_eav_exempt)) |&gt;\n  select(clean_name) |&gt; as.character()\n\nprint(median_exempt |&gt;\n    mutate(agency_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name) ) |&gt;\n full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) |&gt;\n  ggplot(aes(fill = muni_pct_eav_exempt)) + \n  geom_sf(aes(geometry = geom), color = \"black\") + \n  theme_void()+ \n  labs(title = \"Exempt EAV as a Percent of Municipality EAV\") +\n  theme(axis.ticks = element_blank(), \n        axis.text = element_blank())\n +\n    scale_fill_stepsn(colors = c(\"#ffffcc\",\n                                 \"lightblue\",\n                                 \"#41b6c4\", \n                                 \"#253494\",\n                                 \"navy\"\n                                 ),\n                        show.limits=TRUE, \n                  breaks = c(0.075, 0.15, 0.225, 0.30, max(median_exempt$muni_pct_eav_exempt)),\n                       na.value = \"gray50\",\n                    nice.breaks = FALSE,\n                        name = \"% Exempt\", label = scales::percent))\n\n\n\n\n\nFigure 1.1: Share of EAV that is tax exempt due to homestead exemptions\n\n\n\n\n\n\n\n\nThe County-wide municipal-median percent of EAV exempt from property taxes in tax year 2021 was Melrose Park with 15.64%.\n\nFigure 3. Using FMV\n\n\nCode\nmedian_exempt &lt;- muni_sums |&gt;\n  filter(year == params$year)|&gt;\n  mutate(pct_fmv_exempt = muni_fmv_exempt / muni_fmv\n) |&gt; \n  select(pct_fmv_exempt, clean_name)\n\nmidpoint = scales::percent(median(median_exempt$pct_fmv_exempt), accuracy = 0.01)\n\nmedian_muni = median_exempt |&gt;\n  arrange(pct_fmv_exempt) |&gt;\n  filter(pct_fmv_exempt == median(pct_fmv_exempt)) |&gt;\n  select(clean_name) |&gt; as.character()\n\nprint(muni_sums |&gt;\n  filter(year == params$year)|&gt;\n  mutate(pct_fmv_exempt = muni_fmv_exempt / muni_fmv ) |&gt;\n    mutate(agency_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name) ) |&gt;\n full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) |&gt;\n  ggplot(aes(fill = pct_fmv_exempt)) + \n  geom_sf(aes(geometry = geom), color = \"black\") + \n  theme_void()+ \n  labs(title = \"Exempt FMV as a Percent of Municipality FMV\",\n       caption = sprintf(\"The County-wide municipal-median is %s\", midpoint)) +\n    theme_void() + \n  theme(axis.ticks = element_blank(), \n        axis.text = element_blank())+\n   scale_fill_steps2(high = \"darkblue\", low = \"black\",  mid = \"beige\",\n                       n.breaks = 5, show.limits=TRUE,\n                       na.value = NA,\n                    nice.breaks = FALSE,\n                   midpoint = median(median_exempt$pct_fmv_exempt),\n                        name = \"% Exempt\", label = scales::percent))\n\n\n\n\n\nFigure 1.2: Share of FMV that is tax exempt due to Homestead Exemptions Same as previous image but in different color scheme that indicates high and low instead of using a midpoint for the color gradient.\n\n\n\n\n\n\n\n\nThe County-wide municipal-median percent of FMV exempt from property taxes in tax year 2021 was Harwood Heights with 14.40%.\nThe percent of municipal EAV exempt from property taxes are greatest across Cook County’s south suburbs and lowest in the northern most suburbs of the county.\n\n\n\nFigure 4. Exempt EAV: City vs. Suburbs\n\n\nCode\n## makes table in margin for suburbs and city\ngeom_sums &lt;- muni_cl_sums |&gt; \n  filter(year == params$year) |&gt; \n  select(clean_name, muni_c_all_exemptions) |&gt;\n  mutate(clean_name = ifelse(is.na(clean_name), \"Unincorporated\", clean_name),\n         Geography = ifelse(clean_name == \"Chicago\", \"City\", \"Suburbs\"),\n         Geography = ifelse(is.na(clean_name), \"Unincorporated\", Geography),\n         Geography = factor(Geography, levels = c(\"Suburbs\", \"City\", \"Unincorporated\"))) |&gt;\n  group_by(Geography) |&gt;\n  summarize(\"ExemptEAV\" = sum(muni_c_all_exemptions, na.rm=TRUE))\n\ngeom_sums |&gt; \n  flextable() |&gt;\n  flextable::set_caption(caption =\"Includes all exemption types.\")\n\n\n\nGeographyExemptEAVSuburbs9,271,492,116City6,839,135,255\n\n\n\nCode\nmuni_cl_sums |&gt; \n  filter(year == params$year) |&gt; \n  select(clean_name, muni_c_exe_homeowner:muni_c_exe_vet_dis) |&gt;\n  mutate(clean_name = ifelse(is.na(clean_name), \"Unincorporated\", clean_name),\n    Geography = ifelse(clean_name == \"Chicago\", \"City\", \"Suburbs\"),\n         Geography = ifelse(is.na(clean_name), \"Unincorporated\", Geography),\n         Geography = factor(Geography, levels = c(\"Suburbs\", \"City\", \"Unincorporated\"))) |&gt;\n  group_by(Geography) |&gt;\n  summarize(\"GHE\" = sum(muni_c_exe_homeowner, na.rm=TRUE),\n            \"Senior Homestead\" = sum(muni_c_exe_senior, na.rm=TRUE),\n            \"Senior Freeze\" = sum(muni_c_exe_freeze, na.rm=TRUE),\n            \"Other Exemptions\" = sum(muni_c_exe_longtime_homeowner+muni_c_exe_disabled+muni_c_exe_vet_returning+ muni_c_exe_vet_dis_lt50 + muni_c_exe_vet_dis_50_69+muni_c_exe_vet_dis_ge70)) |&gt;\n  \n  pivot_longer(cols = c(`GHE`:`Other Exemptions`), names_to = \"Type\" ) |&gt;\n   mutate(Type = factor(Type, levels = c(\"GHE\", \"Senior Homestead\", \"Senior Freeze\", \"Other Exemptions\" \n                                         #\"Senior Freeze\", \"Senior Homestead\", \"GHE\"\n                                        )\n                                        )) |&gt;\n  ggplot(aes(x=Type, y = value/1e9, fill = Geography\n             )) +\n  \n  geom_col( position = \"dodge\" ) +\n  geom_text(aes(label = round(value/1e9, digits=1)), vjust=-0.5, position = position_dodge(.9)) +\n  theme_minimal() +\n  labs(title = paste0(\"Exempt EAV in Cook County, Tax Year \", params$year), \n       subtitle = \"by Type and Geography\", \n       y = \"EAV (Billions)\", x = \"Exemption Type\") + \n  scale_y_continuous(limits = c(0, 8)) +\n  scale_fill_manual(values = c(\"blue3\", \"deepskyblue3\", \"gray\") )\n\n\n\n\n\nFigure 1.3: Exempt EAV in Cook County Exemption use varies between suburban Cook County and the City of Chicago which may point to broader socioeconomic patterns as well as residents’ eligibility and update. Note: Our current calculations undervalue the disabled veterans exemption.\n\n\n\n\n\n\n\n\nExemption use varies between suburban Cook County (9,271,492,116 EAV) and the City of Chicago (6,839,135,255 EAV) , which may point to broader socioeconomic patterns as well as residents’ eligibility and uptake.\n\n\nFigure 5. Value of residential exemptions by type in Cook County over time, Tax Years 2006 - 2021\n\n\nCode\nmuni_cl_sums |&gt; \n  select(year, muni_c_exe_homeowner:muni_c_exe_vet_dis) |&gt;\n  filter(year &lt;= params$year) |&gt;\n  group_by(year) |&gt;\n  summarize(\"GHE\" = sum(muni_c_exe_homeowner, na.rm=TRUE),\n            \"Senior Homestead\" = sum(muni_c_exe_senior, na.rm=TRUE),\n            \"Senior Freeze\" = sum(muni_c_exe_freeze, na.rm=TRUE),\n            \"Other Exemptions\" = sum(muni_c_exe_longtime_homeowner + muni_c_exe_disabled + muni_c_exe_vet_returning+ muni_c_exe_vet_dis_lt50 + muni_c_exe_vet_dis_50_69+muni_c_exe_vet_dis_ge70, na.rm = T)) |&gt;\n  pivot_longer(cols = c(`GHE`:`Other Exemptions`), names_to = \"Type\" ) |&gt;\n  mutate(Type = factor(Type, levels = c(#\"GHE\", \"Senior Homestead\", \"Senior Freeze\", \n                                        \"Other Exemptions\", \"Senior Freeze\", \"Senior Homestead\", \"GHE\"))) |&gt;\n  ggplot(aes(x=year, y = value/1000000000, fill = Type)) +\n  \n  geom_bar( stat = \"identity\" ) + \n  theme_minimal() +\n  labs(title = \"Residential Exempt EAV in Cook County\", \n       subtitle = paste0(\"by Type and Geography, 2006-\", params$year), \n       y = \"EAV (Billions)\", x =\"\") +\n  scale_fill_manual(values = c(\"chartreuse2\",  \"darksalmon\", \"brown2\", \"blue4\" )) +\n                    scale_x_continuous(breaks = c(2006, 2010, 2015, 2020))\n\n\n\n\n\nFigure 1.4: Residential Exempt EAV in Cook County\n\n\n\n\n\n\n\n\nTrends in the total EAV reductions due to homestead exemptions reflect both real estate market shifts and the legislative changes in their availability, eligibility, and value.",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "exemp_report_2021.html#effect-on-composite-tax-rates",
    "href": "exemp_report_2021.html#effect-on-composite-tax-rates",
    "title": "Tax Year 2021",
    "section": "Effect on Composite Tax Rates",
    "text": "Effect on Composite Tax Rates\nFigure 6 will not be recreated but is just a bar chart of the change in tax rate in the table below\n\nTable 1. Change in composite property tax rates due to exemptions, tax year 2021.\n\n\nCode\nmuni_ratechange &lt;- read_csv(paste0(\"../Output/muni_ratechange_\", params$year, \"_test.csv\"))\n\n\nmuni_ratechange |&gt; \n  select(clean_name,  current_rate_avg, rate_noExe, change_noExe, final_tax_to_dist) |&gt; \n  mutate(change_noExe = round(change_noExe * 100, digits = 2)) |&gt;\n  DT::datatable(rownames = FALSE, colnames = c('Municipality' = 'clean_name','Current Comp. Rate' = 'current_rate_avg', 'Hypothetical Rate' = 'rate_noExe',  'Composite Tax Rate Change'='change_noExe', \n\n                       'Composite Levy' = 'final_tax_to_dist'),\n          caption = \"Table 1 in Report for all Municipalities: Current and Hypothetical Composite Tax Rates if GHE $0\") |&gt;\n  formatCurrency('Composite Levy', digits = 0) |&gt;\n  formatPercentage(columns = c(2,3), digits = 2)\n\n\n\n\nTable 1.2: Searchable table containing all municipalities and the hypothetical tax rate change if exempt EAV became taxable.\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nmuni_ratechange |&gt;\n  filter(!is.na(clean_name)) |&gt; \n  select(clean_name,  current_rate_avg, rate_noExe, change_noExe \n) |&gt;\n  mutate(across(c(current_rate_avg, rate_noExe, change_noExe ), ~.*100)) |&gt;\n  arrange(desc(change_noExe)) |&gt;\n  slice(c(1:5, 69:73, 121:125)) |&gt;\n    #slice(c(1:5, 58:62, 115:119)) |&gt;\n\n  flextable() |&gt; \n  border_remove() |&gt;\n  hline_top() |&gt;\n  hline(i = c(5,10)) |&gt;\n  \n  set_header_labels(\n    clean_name = \"Municipality\", \n    current_rate_avg = \"With Exemptions\",\n    rate_noExe = \"Without Exemptions\",\n    change_noExe = \"Percent Point Difference\"\n    \n  ) |&gt;\n  align(j = 2, align = \"right\") |&gt;\n  align(j=2, align = \"right\", part = \"header\") |&gt;\n  set_table_properties( layout = \"autofit\") |&gt; bold(i = 8)\n\n\n\n\nTable 1.3: Table 1 in Exemption Report. Shows the top 5, bottom 5, and median 5 municipalities, ranked by change in composite tax rate. Includes all exemption types in calculation of rate change.\n\n\n\nMunicipalityWith ExemptionsWithout ExemptionsPercent Point DifferencePark Forest41.7827.8113.75Phoenix29.9520.059.82Riverdale31.0523.946.72Hazelcrest24.9917.866.39Dolton25.2018.626.19Willow Springs11.138.781.30Roselle10.489.221.27Broadview12.2110.931.25Morton Grove10.679.241.23Bridgeview13.0211.921.20Barrington Hills9.028.680.32Kenilworth9.849.570.27Winnetka8.668.390.26Hinsdale7.497.280.24Rosemont10.5710.730.09\n\n\n\n\n\n\n\nFigure 7. Map of Spatial Patterns in Composite Tax Rate Change\nChange in composite tax rate if exempt EAV was added back to the the taxable tax base (i.e. if there were no exemptions).\n\n\nCode\nmuni_ratechange  |&gt;\n    mutate(across(c(current_rate_avg, rate_noExe, change_noExe ), ~.*100)) |&gt;\n\n  left_join(nicknames, by = \"clean_name\") |&gt;\n  mutate(agency_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name),\n         shpfile_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name) ) |&gt;\n  full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) |&gt;\n\n  ggplot(aes(fill = change_noExe)) + \n  geom_sf(aes(geometry = geom), color = \"black\") + \n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n   scale_fill_stepsn(colors = c( \"#F7FEF5\",\n                                # \"#e4f1e0\",\n                                \"#d4f6cc\",\n                                \"#47ba24\",\n                                \"#1F6805\",\n                                \"#133C04\"),\n                        show.limits=TRUE, \n                     limits = c(0, 15),\n                     breaks = c(0, 2.5, 5, 7.5, 10, 15),\n                     na.value = NA,\n                        name = \"Rate Change from \\nExemptions\"  \n                    )\n\n\n\n\n\n\n\n\n\n\n\nCode\norder &lt;- burden_shift %&gt;% \n  as_tibble() %&gt;%\n  group_by(agency_name, clean_name) %&gt;%\n    summarize(tax_rate_current = median(tax_rate_current), \n            taxrate_new = median(taxrate_new),\n            taxrate_change = median(taxrate_change)) %&gt;%\n  arrange(taxrate_change)\n\nmedian(order$taxrate_change)\n\nburden_shift %&gt;%  \n  filter(taxrate_change &lt; 0.0027 |taxrate_change &gt; 0.06  |\n           taxrate_change &lt; (median(taxrate_change))+0.0007 & taxrate_change &gt; (median(taxrate_change))-0.00075\n         ) %&gt;% \n    filter(Alea_cat == \"Owner Occupied\") %&gt;%\n\n # filter(PropType == \"Single-Family\") %&gt;%\n  ungroup() %&gt;% \n  select(clean_name, tax_rate_current, taxrate_new, agency_name) %&gt;% \n  pivot_longer(c(\"tax_rate_current\", \"taxrate_new\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  left_join(order) %&gt;%\n  ggplot(aes(x = tax_rate*100, y= reorder(clean_name, taxrate_change)))+\n  geom_line(aes(group = clean_name))+ \n   geom_point(aes(color=type), size=3 )+\n  geom_hline(yintercept = 10.5, linetype =2)+\n    geom_hline(yintercept = 5.5, linetype =2)+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n               plot.title.position = \"plot\",\n    legend.position = \"none\",\n     #   panel.background = element_rect(fill='transparent'), #transparent panel bg\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n   )+\n        scale_color_brewer(palette=\"Paired\", labels = c(\"Exemptions\", \"No Exemptions\"), direction = 1)+\n\n  labs(title = \"Difference in Composite Tax Rate if there were No Exemptions\", \n       subtitle = \"Ordered by Change in Tax Rate: Highest, Median, and Smallest Differences\",\n       caption = \"Median change is 1.38 percentage points\",\n       x = \"Composite Tax Rate (%)\", y = \"\" )",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "exemp_report_2021.html#effect-on-tax-burdens",
    "href": "exemp_report_2021.html#effect-on-tax-burdens",
    "title": "Tax Year 2021",
    "section": "Effect on Tax Burdens",
    "text": "Effect on Tax Burdens\n\nFigure 8. Dolton example of Share of levy paid by property type\n\n\n\nCode\n#read_csv(paste0(\"../../Output/Dont_Upload/0_Joined_PIN_data_\", params$year, \".csv\") )\n\npin_data &lt;- read_csv(paste0(\"../Output/Dont_Upload/0_joined_PIN_data_\", params$year, \"_test.csv\"))\n\n\nmc_burden &lt;- read_csv(paste0(\"../Output/muni_mc_burden_\", params$year, \"_test.csv\"))\n\n\nburden_shift &lt;- read_csv(paste0(\"../Output/muni_burden_shift_\", params$year, \"_test.csv\"))\n\n\n\n\nCode\nmc_burden |&gt; \n  mutate(group = case_when(class_1dig == 2 ~ \"Class 2\",\n                         class_1dig == 3 ~ \"Class 3\",\n                         T ~ \"All Other Classes\"))|&gt;\n  \n  select(clean_name, group,  \n         pct_taxburden_current, hyp_pct_taxburden) |&gt;\n  group_by(clean_name, group) |&gt;\n  summarize(`Current Tax Burden Share` = sum(pct_taxburden_current),\n           `Tax Burden Share without Exemptions` =sum(hyp_pct_taxburden)) |&gt;\n  filter(clean_name==\"Dolton\") |&gt;\n  pivot_longer(cols = c(`Current Tax Burden Share`, `Tax Burden Share without Exemptions`), \n                names_to = \"type\", values_to = \"value\") |&gt;\n  ggplot(aes(x = group, y= value, group = type, fill = type) )+ \n  geom_col(position = \"dodge\") +  \n  geom_text(aes(label = scales::percent(round(value, digits=3))), \n              vjust=-0.5, position = position_dodge(.9)) + \n  theme_classic()+\n  theme(legend.title = element_blank(), legend.position = \"bottom\",\n        axis.title.x  = element_blank()) + \n  scale_y_continuous(label = scales::percent, name = \"Share of Levy\")\n\n\n\n\n\n\n\n\n\n\n\nCode\nburden_c2 &lt;- mc_burden |&gt; \n  filter(class_1dig == 2) |&gt; \n  select(clean_name, #pct_taxbase, \n         burden_shift,  pct_taxburden_current, hyp_pct_taxburden)\n\nburden_shift |&gt;  \n  select(-c(muni_levy, muni_taxbase,))|&gt;\n  select(clean_name, Group, pct_taxburden_current, hyp_pct_taxburden, everything()) |&gt;\n  DT::datatable(rownames = FALSE, \n                colnames = c(\n                  'Municipality' = 'clean_name',\n                  'Current Taxbase' = 'group_taxbase', \n                  'Hyp. Taxbase' = 'hyp_group_taxbase',  \n                  'Taxes Paid'='group_taxes_current', \n                  'Hyp Taxes Paid' = 'hyp_group_taxes',\n                  'Share of Levy'='pct_taxburden_current',\n                  'Share of Taxbase' = 'pct_taxbase_current',\n              \"Hyp. Share of Levy\"  =  'hyp_pct_taxburden',\n              \"Burden Shift\" = 'burden_shift'\n                  ),\n                caption = \"Table 2 in Report for all Municipalities: Current and Hypothetical Composite Tax Rates if GHE $0\"\n      ) |&gt;\n  formatCurrency(columns = c(5:8), digits = 0) |&gt;\n  formatPercentage(columns = c(3,4,9,10), digits = 2)\n\n\n\n\n\n\n\n\nCode\nmc_burden |&gt; \n    mutate(pct_taxburden_current = round(pct_taxburden_current * 100, digits = 2),\n           hyp_pct_taxburden = round(hyp_pct_taxburden * 100, digits = 2) ) |&gt;\n\n  filter(clean_name == \"Dolton\") |&gt; \n  select(`Major Class`= class_1dig, `Current Tax Burden` = pct_taxburden_current, `Alt. Burden` = hyp_pct_taxburden) |&gt; \n  arrange(desc(`Current Tax Burden`)) |&gt;\n  flextable::flextable()\n\n\n\n\nTable 1.4: Ungrouped values for donut chart in report. Tax Burden is the Revenue Collected from a Major Class / the combined levy from local taxing agencies (non-TIF) in Dolton, IL.\n\n\n\nMajor ClassCurrent Tax BurdenAlt. Burden263.6372.71531.2323.4412.041.5381.180.8930.900.6860.590.4490.350.2640.070.0500.000.00\n\n\n\n\n\n\n\nFigure 9. Change in Share of Tax Burden\nWas made in Excel. Not recoded for website yet.\n\n\n\nTable 2. Change in share of property tax burden\n\nTable 2: Change in the share of property tax burden due to exemptions for single-family, multi-family, and commercial and industrial properties, tax year 2021\n\n\nCode\nburden_shift |&gt;  \n    select(clean_name, Group, burden_shift) |&gt;\n  mutate(burden_shift = round(burden_shift, digits =4)) |&gt;\npivot_wider(id_cols=clean_name, names_from = Group, values_from = burden_shift) |&gt;\n  arrange((`Single-family`)) |&gt; \n  DT::datatable(rownames = FALSE) \n\n\n\n\nTable 1.5: Supporting Table for Table 2 Change in tax burden if EAV that is current tax exempt due to homestead exemptions became taxable. Measured in percentage point change.\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nburden_c2 |&gt; \n  mutate(burden_shift = burden_shift*100) |&gt; # multiply by 100 to make it percentage point change without formatting to percent below.\n  datatable(rownames = FALSE,\n          colnames = c('Municipality' = 'clean_name', \n                       'Burden Shift, Pct Pt Change' = 'burden_shift', \n                       'Current Tax Burden\\nC2 Tax Collected / Muni Levy' = 'pct_taxburden_current', \n                       \"Hypothetical Tax Burden\\nHyp. C2 Tax Collected / Muni Levy\" = 'hyp_pct_taxburden'),\n          caption = \"Table 2 in Exemption Report: Current Share of Taxable EAV and Share of Levy Paid by Class 2 Properties\"\n           ) |&gt;\n  formatPercentage(c(2,3,4), digits = 2) |&gt;\n  formatRound(c(2), digits = 2)\n\n\n\n\n\n\n\nFigure 9 Follow up. Current Tax Burden Map\n\n\nCode\nburden_c2 |&gt;\n  left_join(nicknames) |&gt;\n  mutate(agency_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name) ) |&gt;\n  full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) |&gt;\n\n  ggplot(aes(fill = pct_taxburden_current)) + \n  geom_sf(aes(geometry = geom), color = \"black\") + \n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n   scale_fill_stepsn(colors = c(\"#ffffcc\",\"#a1dab4\" ,\"#41b6c4\",\"#2c7fb8\", \"#253494\"),\n                        show.limits=TRUE, \n                     limits = c(0,1),\n                     na.value = \"gray70\",\n                     n.breaks = 6,\n                        name = \"Burden with \\nExemptions\", \n                     labels = scales::percent\n                     \n                    )+\n  labs(title = \"Current share of property tax burden\", \n       subtitle = \"for Class = 2 Property Types\")\n\n\n\n\n\n\n\n\n\n\n\n\nTable 3.\nDifference in taxbills for those that do and do not claim homeowner exemption\n\n\n\nCode\n## removes properties that have more than one exemption type\nC2_munistats_filtered &lt;- pin_data |&gt; \n  filter(class &gt; 199 & class &lt; 300) |&gt;\n    filter(exe_senior == 0 & \n           exe_freeze == 0 & \n           exe_longtime_homeowner == 0 & \n           exe_disabled == 0 & \n           exe_vet_returning == 0 & \n           exe_vet_dis_lt50 == 0 & \n           exe_vet_dis_50_69 == 0 & \n           exe_vet_dis_ge70 == 0 & \n           exe_abate == 0) |&gt;\n  group_by(clean_name)  |&gt;\n  arrange(av) |&gt;\nsummarize(\n    median_eq_av = round(median(eq_av)),\n    median_taxed_eav = round(median(eq_av-all_exemptions)),\n    median_av = round(median(av)), \n    avg_av = round(mean(av)),\n    avg_eq_av = round(mean(eq_av)),\n    avg_taxed_eav = round(mean(eq_av-all_exemptions)),\n\n    C2_pins_in_muni = n(),\n    C2_current_exemptions = sum(all_exemptions, na.rm = TRUE),\n    C2_HO_exemps = sum(exe_homeowner, na.rm = TRUE),\n  )\n\nC2_munistats_filtered |&gt;  \n  DT::datatable(rownames = FALSE, \n                colnames = c(\n                  'Median AV*eq_factor' = 'median_eq_av',\n                  'Average Eq.AV' = 'avg_eq_av',\n                  'Median Taxed EAV' = 'median_taxed_eav', \n                  'Median AV' = 'median_av',  \n                  'Average AV'='avg_av', \n                  'Class 2 Hyp Taxes Paid' = 'avg_taxed_eav',\n                  'Class 2 Pin Count'='C2_pins_in_muni',\n                  'Class 2 Exempt EAV' = 'C2_current_exemptions'\n                  ),\n                caption = \"Class 2 Descriptive Statistics\"\n      ) |&gt;\n  formatCurrency(columns = c(2:7, 9,10), digits = 0)\n\n\n\n\n\n\n\n\nCode\n## Grouped by if they have a $0 tax bill and had the GHE per muni\n\n\nmuni_median_summarytable &lt;- pin_data |&gt; \n  select(pin, av, class, tax_code_num, tax_bill_total, av_certified, exe_homeowner:exe_abate, clean_name, eq_av, all_exemptions, zero_bill, has_HO_exemp, taxed_eav, final_tax_to_dist, final_tax_to_tif) |&gt;\n\n  filter(class &gt; 199 & class &lt; 300) |&gt; \n  \n  # merge in muni residential median AV\n  left_join(C2_munistats_filtered |&gt; select(clean_name, median_av, median_eq_av, median_taxed_eav)) |&gt;\n  \n  left_join(muni_ratechange |&gt; select(clean_name, rate_noExe, rate_noGHE, rate_current)) |&gt;\n  # +/- 500 from municipalities median residential AV\n  filter(av &lt; median_av+200 & av &gt; median_av-200) |&gt;\n  \n  # Removes properties that received other types of exemptions\n  filter(exe_senior == 0 & \n           exe_freeze == 0 & \n           exe_longtime_homeowner == 0 & \n           exe_disabled == 0 & \n           exe_vet_returning == 0 & \n           exe_vet_dis_lt50 == 0 & \n           exe_vet_dis_50_69 == 0 & \n           exe_vet_dis_ge70 == 0 & \n           exe_abate == 0) |&gt;\n  \n  arrange(av) |&gt;\n  \n  mutate(#bill_current = (final_tax_to_dist + final_tax_to_tif),\n         bill_current = rate_current* taxed_eav,\n         bill_noexemps =  rate_noGHE*(eq_av-all_exemptions+exe_homeowner),\n         bill_change = bill_noexemps - bill_current) |&gt;\n  # \n  group_by(clean_name, \n           has_HO_exemp) |&gt; \n  \n  summarize(AV = median(median_av), # median_av was calculated earlier: C2 median AV for the muni \n            `Taxable EAV` = round(median(eq_av)),\n            `Taxed EAV` = round(median(taxed_eav)),\n            bill_cur = round(median(bill_current)),\n            bill_new = round(median(bill_noexemps)),\n            bill_change = round(median(bill_change)),\n            pincount=n(),\n            perceived_savings = round(median(all_exemptions*rate_current))\n            ) |&gt; \n  \n  # merge in clean_names variable\n  left_join(nicknames) |&gt;\n  \n  select(clean_name, has_HO_exemp, bill_cur, bill_new, bill_change, perceived_savings,  AV, `Taxable EAV`, `Taxed EAV`, \n         #everything() \n         ) #|&gt; select(-c(agency_number, agency_name))\n\nmuni_median_summarytable |&gt;\n  DT::datatable(rownames = FALSE, \n                colnames = c(\n                  'Claims GHE' = 'has_HO_exemp',\n                  'Current Bill' = 'bill_cur',\n                  'Hyp. Bill' = 'bill_new', \n                  'Bill Change' = 'bill_change',  \n                  'Perceived Savings'='perceived_savings'),\n                caption = \"Change in Tax Bill if Exempt EAV from GHE were added back to tax base.\")  |&gt;\n  formatCurrency(columns = c(3:9), digits = 0)\n\n\n\n\n\n\n\n\nCode\nmuni_median_summarytable |&gt;\n  filter(clean_name %in% c(\"Chicago\", \"Dolton\", \"Glencoe\")) |&gt;\n  mutate(across(bill_cur:`Taxed EAV`, scales::dollar )) |&gt;\n rename(Municipality = clean_name,\n                  'Claims GHE' = 'has_HO_exemp',\n                  'Current Bill' = 'bill_cur',\n                  'Hyp. Bill' = 'bill_new', \n                  'Bill Change' = 'bill_change',  \n                  'Perceived Savings'='perceived_savings' )  |&gt;\n  \n  flextable() \n\n\n\n\nTable 1.6: Table 3. Estimated Bill Change for a municipality’s median valued property if exempt EAV from the GHE were added to back to the tax base.\n\n\n\nMunicipalityClaims GHECurrent BillHyp. BillBill ChangePerceived SavingsAVTaxable EAVTaxed EAVChicago0$4,250$4,105-$145$0$21,000$63,054$63,054Chicago1$3,576$4,105$529$674$21,000$63,057$53,057Dolton0$6,642$5,373-$1,269$0$8,940$26,772$26,772Dolton1$4,182$5,389$1,208$2,481$8,940$26,850$16,856Glencoe0$20,889$20,341-$548$0$73,170$219,197$219,197Glencoe1$19,985$20,385$404$953$73,170$219,663$209,708\n\n\n\n\n\n\n\nCode\ncholton_15000_summarytable &lt;- pin_data |&gt; \n  \n  select(pin, av, class, tax_code_num, tax_bill_total, av_certified, exe_homeowner:exe_abate, clean_name, eq_av, all_exemptions, zero_bill, has_HO_exemp, taxed_eav, final_tax_to_dist, final_tax_to_tif) |&gt;\n  filter(clean_name %in% c(\"Chicago\", \"Dolton\", \"Glencoe\")) |&gt;\n  filter(between(av, 14800, 15200)) |&gt;\n\n  filter(class &gt; 199 & class &lt; 300) |&gt; \n  \n  # merge in muni residential median AV\n  left_join(C2_munistats_filtered |&gt; select(clean_name, median_av)) |&gt;\n  \n  left_join(muni_ratechange |&gt; select(clean_name, rate_noExe, rate_noGHE, rate_current)) |&gt;\n  # +/- 500 from municipalities median residential AV\n  # Removes properties that received other types of exemptions\n  filter(exe_senior == 0 & \n           exe_freeze == 0 & \n           exe_longtime_homeowner == 0 & \n           exe_disabled == 0 & \n           exe_vet_returning == 0 & \n           exe_vet_dis_lt50 == 0 & \n           exe_vet_dis_50_69 == 0 & \n           exe_vet_dis_ge70 == 0 & \n           exe_abate == 0 ) |&gt;\n  \n  arrange(av) |&gt;\n  \n  mutate(\n         bill_current = rate_current* taxed_eav,\n         bill_noexemps =  rate_noGHE*(eq_av-all_exemptions+exe_homeowner),\n         bill_change = bill_noexemps - bill_current) |&gt;\n  # \n  group_by(clean_name, \n           has_HO_exemp) |&gt; \n  \n  summarize(AV = median(av),\n    `Median AV in Muni` = first(median_av), # median_av was calculated earlier: C2 median AV for the muni \n            `EqAV` = round(median(eq_av)),\n            `Taxed EAV` = round(median(taxed_eav)),\n            bill_cur = round(median(bill_current)),\n            bill_new = round(median(bill_noexemps)),\n            bill_change = round(median(bill_change)),\n            pincount=n(),\n            perceived_savings = round(median(all_exemptions*rate_current))\n            ) |&gt; \n  \n  # merge in clean_names variable\n  left_join(nicknames) |&gt;\n  \n  select(clean_name, AV, has_HO_exemp, bill_cur, bill_new, bill_change, perceived_savings,  `Median AV in Muni`, `EqAV`, `Taxed EAV`\n         #everything() \n         ) |&gt;\n  mutate(across(bill_cur:`Taxed EAV`, scales::dollar )) |&gt;\n rename(Municipality = clean_name,\n                  'Claims GHE' = 'has_HO_exemp',\n                  'Current Bill' = 'bill_cur',\n                  'Hyp. Bill' = 'bill_new', \n                  'Bill Change' = 'bill_change',  \n                  'Perceived Savings'='perceived_savings' )  |&gt;\n  \n  flextable()\n  # DT::datatable(rownames = FALSE, \n  #               colnames = c(\n  #                 'Claims GHE' = 'has_HO_exemp',\n  #                 'Current Bill' = 'bill_cur',\n  #                 'Hyp. Bill' = 'bill_new', \n  #                 'Bill Change' = 'bill_change',  \n  #                 'Perceived Savings'='perceived_savings'),\n  #               caption = \"Change in Tax Bill for Properties with an Assessed Value of $15,000.\")  |&gt;\n  # formatCurrency(columns = c(2, 4:9), digits = 0)\n\ncholton_15000_summarytable\n\n\nTable that uses pins valued at ~$15,000. Creates unrealistic bill\nchange for some municipalities if they do not have properties valued at\n15K.MunicipalityAVClaims GHECurrent BillHyp. BillBill ChangePerceived SavingsMedian AV in MuniEqAVTaxed EAVChicago14,9990$3,036$2,932-$104$0$21,000$45,037$45,037Chicago14,9991$2,362$2,932$570$674$21,000$45,037$35,037Dolton14,9750$11,156$9,025-$2,131$0$8,940$44,965$44,965Dolton14,9451$8,653$9,006$354$2,481$8,940$44,875$34,875Glencoe15,0670$4,312$4,198-$113$0$73,170$45,242$45,242Glencoe15,0671$3,359$4,198$840$953$73,170$45,242$35,242\n\n\n\n\nTable 4.\nMunicipalities with the largest and smallest reductions in tax base (as a share of residential EAV due to exemptions) and median property values\n\n\n\nCode\nmuni_sums |&gt; \n  filter(year == params$year) |&gt;\n  group_by(clean_name) |&gt; \n  summarize(pct_res_exempt = muni_fmv_exempt / muni_fmv_residential) |&gt;  \n  arrange(desc(pct_res_exempt) ) |&gt;\n    left_join(C2_munistats_filtered) |&gt; \n  mutate(prop_value = median_av*10,\n         pct_res_exempt = scales::percent(pct_res_exempt, accuracy = 0.01) ) |&gt;\n  mutate(across(c(median_eq_av:avg_taxed_eav, prop_value), scales::dollar)) |&gt;\n  select(Municipality = clean_name, `Share Res. Exempt` = pct_res_exempt,\n         `Median Prop. Value` = prop_value, everything())\n\n\n\n  \n\n\n\n\n\nFigure 10. Tax Burden Shift from Current GHE\nShare of municipal property tax levy paid by Class 2 properties with and without homestead exemptions, tax year 2021\n\n\nCode\n# as a dot graph ## \n\norder &lt;- mc_burden |&gt;\n  filter(class_1dig == 2) |&gt;\n    select(clean_name, pct_taxburden_current, burden_shift)\n\nslice &lt;-  mc_burden |&gt;\n  filter(class_1dig == 2) |&gt;\n    select(clean_name, pct_taxburden_current, burden_shift) |&gt;\n  arrange(pct_taxburden_current) |&gt;\n  slice(1:5, 63:67, 127:131)\n\n\n\nmedian_burden &lt;- median(order$pct_taxburden_current)\nmedian_shift &lt;- median(order$burden_shift)\n\n# median burden change is 5.9 percentage points\n# current median burden is 70.3% of the levy\n\nmc_burden |&gt; \n  filter(clean_name %in% slice$clean_name) |&gt;\n#filter(!clean_name %in% cross_county_lines$clean_name)|&gt;\n  filter(class_1dig == 2) |&gt;\n#  filter(burden_current &gt; 0.938 |burden_current &lt; .17 |\n #          ( (burden_current &lt; median(burden_current) + 0.01 )& (burden_current &gt; median(burden_current) - 0.01)) )|&gt; \n  ungroup() |&gt; \n      select(clean_name, pct_taxburden_current, hyp_pct_taxburden, burden_shift) |&gt;\n  arrange(burden_shift) |&gt;\n  pivot_longer(c(\"pct_taxburden_current\", \"hyp_pct_taxburden\"), \n               names_to = \"type\", values_to = \"pct_burden\") |&gt; \n  inner_join(order) |&gt;\n  ggplot(aes(x = pct_burden, \n             y= reorder(clean_name, - pct_taxburden_current)))+\n  # y= reorder(clean_name, burden_current)))+\n  geom_vline(xintercept = median_burden, linetype = 3)+\n  geom_line(aes(group = clean_name))+ \n  geom_hline(yintercept = 5.5, linetype = 2)+\n  geom_hline(yintercept = 10.5, linetype = 2)+\n  geom_point(aes(color=type), size=3 )+\n\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n plot.background = element_rect(fill='transparent', color=NA) \n  )+\n  scale_color_brewer(palette=\"Paired\", labels = c(\"Current Burden\", \"Burden if \\nNo Exemptions\" ), direction = 1) +\n  scale_x_continuous(labels = scales::percent) +\n\n  \n  labs(title = \"Change in Class 2 Residential Tax Burden\", \n       subtitle = \"Ordered by Current Tax Burden\",\n  x = \"Share of Levy (%)\", y = \"\" , \n  caption = paste0(\"Dotted line represents median Class 2 burden (\", round(median_burden*100), \"% of the levy).  \\nResidential Tax Burden is theshare of the property tax collected that was paid for by property owners with Class 2 properties.\")) +\n  \n    geom_label(label = \"Class 2 pays small share of \\nlevy; very little residential\", x=.32, y = 13, label.size = 1, size = 3)+\n  \n    geom_label(label = paste0(\"Class 2 pays median share of \\nlevy (\", round(median_burden*100), \"%), mix of land use\"), x=.42, y = 7.5, label.size = 1, size = 3) +\n  \n    geom_label(label = \"Class 2 pays nearly all of levy, \\nhighly residential\", x=.70, y = 3, label.size = 1,size = 3)\n\n\n\n\n\nFigure 1.5\n\n\n\n\n\n\n\n\n\n\nFigure 11. Zero Dollar Bills\n\n\nCode\nmuni_mc_sums |&gt; \n  left_join(nicknames) |&gt;\n  filter(major_class_code == 2) |&gt; \n  group_by(year, Triad) |&gt;\n  summarize(zerodollar_count = sum(zero_bill)) |&gt; \n  ggplot(aes(x=year, y = zerodollar_count, fill = Triad)) + \n  geom_bar(position = \"stack\", stat = \"identity\") + theme_minimal()+\n  theme(legend.position = \"top\")+\n  labs(title = element_text(\"Number of $0 Taxbills\")) +\n  scale_y_continuous(labels = scales::comma, limits = c(0, 35000), name = \"\")\n\n\n\n\n\nFigure 1.6: Number of tax bills that were $0 shown here is different than the value shown in the exemption report. This is due to missing disabeled veteran exemption amounts that were not identified when writing the original report.",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "exemp_report_2021.html#table-6---cost-of-covering-cook-countys-current-homestead-exemptions",
    "href": "exemp_report_2021.html#table-6---cost-of-covering-cook-countys-current-homestead-exemptions",
    "title": "Tax Year 2021",
    "section": "Table 6 - Cost of Covering Cook County’s current Homestead Exemptions",
    "text": "Table 6 - Cost of Covering Cook County’s current Homestead Exemptions\n\n\n\nCode\nclass8munis &lt;- read_csv(\"../Output/datarequests_Class8Munis.csv\")\n\n\ncross_county_lines &lt;- c(\"030440000\", \"030585000\", \"030890000\", \"030320000\", \"031280000\",\n                        \"030080000\", \"030560000\", \"031120000\", \"030280000\", \"030340000\",\n                        \"030150000\",\"030050000\", \"030180000\",\"030500000\", \"031210000\")\n\ntaxcodes_current &lt;- pin_data %&gt;% \n  group_by(tax_code_num)  %&gt;%\n  summarize(\n    av = sum(av),\n    taxed_eav = sum(taxed_eav),\n    equalized_AV = sum(eq_av),\n    pins_in_class = n(),\n    current_exemptions = sum(all_exemptions),\n    HO_exemps = sum(exe_homeowner),\n    tax_code_rate = first(tax_code_rate), \n    final_tax_to_dist = sum(final_tax_to_dist, na.rm = TRUE), # used as LEVY amount!!\n    final_tax_to_dist_AWM = sum(final_tax_to_dist_AWM, na.rm=TRUE),\n    final_tax_to_tif = sum(final_tax_to_tif, na.rm = TRUE),\n    tax_amt_exe = sum(tax_amt_exe, na.rm = TRUE), \n    tax_amt_pre_exe = sum(tax_amt_pre_exe, na.rm = TRUE), \n    tax_amt_post_exe = sum(tax_amt_post_exe, na.rm = TRUE),\n   # tif_share = mean(tif_share, na.rm=TRUE), # not used\n  ) %&gt;%\n  \n  mutate(total_bill_current = final_tax_to_dist + final_tax_to_tif) %&gt;%\n  rename(cur_comp_TC_rate = tax_code_rate) %&gt;%\n  mutate(current_taxable_eav = final_tax_to_dist/(cur_comp_TC_rate),\n         new_taxable_eav = final_tax_to_dist/(cur_comp_TC_rate) + HO_exemps,\n         new_taxable_eav2 = final_tax_to_dist/(cur_comp_TC_rate) + current_exemptions,\n\n         ) %&gt;%\n  mutate(\n    new_comp_TC_rate = (final_tax_to_dist / new_taxable_eav),\n        new_comp_TC_rate2 = (final_tax_to_dist / new_taxable_eav2),\n\n         ) %&gt;%\n  mutate(\n    new_comp_TC_rate = ifelse(is.nan(new_comp_TC_rate), cur_comp_TC_rate, new_comp_TC_rate),\n        new_comp_TC_rate2 = ifelse(is.nan(new_comp_TC_rate2), cur_comp_TC_rate, new_comp_TC_rate2),\n\n         ) %&gt;%\n  select(tax_code_num, cur_comp_TC_rate, new_comp_TC_rate, current_taxable_eav, new_taxable_eav, new_taxable_eav2, new_comp_TC_rate2, everything())\n\nbetter_cost_est_ghe = taxcodes_current |&gt; \n  summarize(better_cost_est = sum(new_comp_TC_rate*(HO_exemps)))\n                                            \nbetter_cost_est_allexe = taxcodes_current |&gt; \n  summarize(better_cost_est = sum(new_comp_TC_rate2*(current_exemptions)))\n\n\n\ntbl_southtriad_exemps &lt;- muni_cl_sums |&gt;\n  filter(Triad == \"South\") |&gt;\n  filter(!clean_name %in% cross_county_lines) |&gt;\n  filter(year == params$year) |&gt;\n  group_by(year) |&gt;\n  summarize(\n    'PINs' = sum(muni_c_pins_in_muni),\n    'PINs (w/ exemps.)' = sum(muni_c_has_HO_exemp),\n    \"EqAV\" = sum(muni_c_equalized_av),\n    'Taxed EAV' = sum(muni_c_current_taxable_eav),\n    'Exempt EAV' = sum(muni_c_all_exemptions),\n    'GHE' = sum(muni_c_exe_homeowner),\n    'Senior' = sum(muni_c_exe_senior),\n    'Senior Freeze' = sum(muni_c_exe_freeze),\n    'Other Exemps.' = sum(muni_c_all_exemptions - muni_c_exe_homeowner - muni_c_exe_senior - muni_c_exe_freeze )\n  ) |&gt;\n  pivot_longer(cols = c('PINs':'Other Exemps.'),\n               names_to = \"Metric\", values_to = \"Total\") |&gt;\n  select(-year)\ntbl_southtriad_exemps\n\n\n South Triad PIN Counts, Taxbase, &\nExemptions\n  \n\n\n\n\n\nCode\ntbl_class8muni_exemps &lt;- muni_cl_sums |&gt;\n  filter(clean_name %in% class8munis$clean_name) |&gt;\n  filter(!clean_name %in% cross_county_lines) |&gt;\n  filter(year == params$year) |&gt;\n  group_by(year) |&gt;\n  summarize(\n    'PINs' = sum(muni_c_pins_in_muni),\n    'PINs (w/ exemps.)' = sum(muni_c_has_HO_exemp),\n    \"EqAV\" = sum(muni_c_equalized_av),\n    'Taxed EAV' = sum(muni_c_current_taxable_eav),\n    'Exempt EAV' = sum(muni_c_all_exemptions),\n    'GHE' = sum(muni_c_exe_homeowner),\n    'Senior' = sum(muni_c_exe_senior),\n    'Senior Freeze' = sum(muni_c_exe_freeze),\n    'Other Exemps.' = sum(muni_c_all_exemptions -muni_c_exe_homeowner- muni_c_exe_senior - muni_c_exe_freeze )\n  ) |&gt;\n  pivot_longer(cols = c('PINs':'Other Exemps.'),\n               names_to = \"Metric\", values_to = \"Total\") |&gt;\n  select(-year)\ntbl_class8muni_exemps\n\n\n Municipalities Eligiblef or Class 8 Incentive Properties -\nPIN Counts, Taxbase, & Exemptions\n  \n\n\n\n\n\nCode\ntbl &lt;- muni_cl_sums |&gt;\n  filter(!clean_name %in% cross_county_lines) |&gt;\n  filter(year == params$year) |&gt;\n  group_by(year) |&gt;\n  summarize(\n    'PINs' = sum(muni_c_pins_in_muni),\n    'PINs (w/ exemps.)' = sum(muni_c_has_HO_exemp),\n    \"EqAV\" = sum(muni_c_equalized_av),\n    'Taxed EAV' = sum(muni_c_current_taxable_eav),\n    'Exempt EAV' = sum(muni_c_all_exemptions),\n    'GHE' = sum(muni_c_exe_homeowner),\n    'Senior' = sum(muni_c_exe_senior),\n    'Senior Freeze' = sum(muni_c_exe_freeze),\n    'Other Exemps.' = sum(muni_c_all_exemptions - muni_c_exe_homeowner- muni_c_exe_senior - muni_c_exe_freeze )\n  ) |&gt;\n  pivot_longer(cols = c('PINs':'Other Exemps.'),\n               names_to = \"Metric\", values_to = \"Total\") |&gt;\n  select(-year) \ntbl\n\n\n PIN Counts, Taxbase, & Exemptions for Municipalities with\na majority of their Taxbase within Cook County\n  \n\n\n\nIt would take $928,267,406 to cover the cost of the GHE without the tax rate increasing from the hypothetical rate to the current rate.\nIt would take $1,365,145,469 to cover the cost of all exemption without the tax rate increasing from the hypothetical rate to the current rate.\n\nNot finished for class 8 munis or south triad totals. But done the same way as GHE and all exemption scenarios.\n\n\nAdditional notes\nMultiple ways to measure “burden”:\n\nShare of tax base = (taxed EAV / taxed EAV in Muni)\n\nTax Burden = tax paid / levy\n\nEffective rate = tax paid / property value",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "exemp_report_2022.html",
    "href": "exemp_report_2022.html",
    "title": "Tax Year 2022",
    "section": "",
    "text": "County-Wide Exemption Summary Statistics (Tax Year 2022)\nCode\ntbl &lt;- muni_cl_sums |&gt;\n    filter(year == params$year) |&gt;\n    group_by(year) |&gt;\n    summarize(\n      'PINs' = sum(muni_c_pins_in_muni),\n      'PINs (w/ exemps.)' = sum(muni_c_has_HO_exemp),\n      \"EqAV\" = sum(muni_c_equalized_av),\n      'Taxed EAV' = sum(muni_c_current_taxable_eav),\n      'Exempt EAV' = sum(muni_c_all_exemptions),\n      'GHE' = sum(muni_c_exe_homeowner),\n      'Senior' = sum(muni_c_exe_senior),\n      'Senior Freeze' = sum(muni_c_exe_freeze),\n      'Other Exemps.' = sum(muni_c_all_exemptions -muni_c_exe_homeowner- muni_c_exe_senior - muni_c_exe_freeze )\n      ) |&gt;\n    pivot_longer(cols = c('PINs':'Other Exemps.'),\n                 names_to = \"Metric\", values_to = \"Total\") |&gt;\n    select(-year) |&gt; \n    mutate(\n      Total = case_when(\n        Metric %in% c(\"Other Exemps.\", \"EAV\", \"EqAV\", \"Taxed EAV\", \"Exempt EAV\",\"GHE\", \"Senior\", \"Senior Freeze\") ~ \n          paste0(format(round(`Total` / 1e9, 2), big.mark = \",\"), \" B\"),\n        TRUE ~ format(`Total`, big.mark = \",\")\n      )\n    )\n\n\nft &lt;- tbl |&gt;\n    flextable(cwidth = c(1, 1)) |&gt;\n    align(j = 2, align = \"right\", part = \"header\") |&gt;  # Align header\n    align(j = 2, align = \"right\", part = \"body\") |&gt;  # Align body\n    align(i = 6:9, j = 1, align = \"center\", part = \"body\") |&gt;  # Align body\n\n    footnote(i = 1, j = 2, value = as_paragraph(\"EAV in billions.\"), ref_symbols = \"*\", part='header') #Footnote in new header\n  \n\nft\n\n\n\n\nTable 2.1: Summary of Homestead Exemption Use in Cook County (Tax Year 2022\n\n\n\nMetricTotal*PINs      1,865,016PINs (w/ exemps.)      1,010,623EqAV221.25 BTaxed EAV184.15 BExempt EAV 15.20 BGHE  9.97 BSenior  2.69 BSenior Freeze  2.45 BOther Exemps.  0.09 B*EAV in billions.\nEqAV is the 2022 equalization factor multiplied by assessed value. Thus, Taxed EAV and Exempt EAV equal EqAV. It can be thought of as the “maximum available tax base” in a world without exemptions.",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "exemp_report_2022.html#county-wide-exemption-summary-statistics-tax-year-2022",
    "href": "exemp_report_2022.html#county-wide-exemption-summary-statistics-tax-year-2022",
    "title": "Tax Year 2022",
    "section": "",
    "text": "Figure 3. using EAV\n\n\nCode\nmedian_exempt &lt;- muni_sums |&gt;\n  filter(year== params$year)|&gt;\n  mutate(muni_pct_eav_exempt =(muni_eav - muni_eav_taxed) / muni_eav) |&gt; \n  select(muni_pct_eav_exempt, clean_name, agency_name)\n\n\nmidpoint = scales::percent(median(median_exempt$muni_pct_eav_exempt), accuracy = 0.01)\n\nmedian_muni = median_exempt |&gt;\n  arrange(muni_pct_eav_exempt) |&gt;\n  filter(muni_pct_eav_exempt == median(muni_pct_eav_exempt)) |&gt;\n  select(clean_name) |&gt; as.character()\n\nprint(median_exempt |&gt;\n    mutate(agency_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name) ) |&gt;\n full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) |&gt;\n  ggplot(aes(fill = muni_pct_eav_exempt)) + \n  geom_sf(aes(geometry = geom), color = \"black\") + \n  theme_void()+ \n  labs(title = \"Exempt EAV as a Percent of Municipality EAV\") +\n  theme(axis.ticks = element_blank(), \n        axis.text = element_blank())\n +\n    scale_fill_stepsn(colors = c(\"#ffffcc\",\n                                 \"lightblue\",\n                                 \"#41b6c4\", \n                                 \"#253494\",\n                                 \"navy\"\n                                 ),\n                        show.limits=TRUE, \n                  breaks = c(0.075, 0.15, 0.225, 0.30, max(median_exempt$muni_pct_eav_exempt)),\n                       na.value = \"gray50\",\n                    nice.breaks = FALSE,\n                        name = \"% Exempt\", label = scales::percent))\n\n\n\n\n\nFigure 2.1: Share of EAV that is tax exempt due to homestead exemptions\n\n\n\n\n\n\n\n\nThe County-wide municipal-median percent of EAV exempt from property taxes in tax year 2022 was Bridgeview with 14.48%.\n\nFigure 3. Using FMV\n\n\nCode\nmedian_exempt &lt;- muni_sums |&gt;\n  filter(year == params$year)|&gt;\n  mutate(pct_fmv_exempt = muni_fmv_exempt / muni_fmv\n) |&gt; \n  select(pct_fmv_exempt, clean_name)\n\nmidpoint = scales::percent(median(median_exempt$pct_fmv_exempt), accuracy = 0.01)\n\nmedian_muni = median_exempt |&gt;\n  arrange(pct_fmv_exempt) |&gt;\n  filter(pct_fmv_exempt == median(pct_fmv_exempt)) |&gt;\n  select(clean_name) |&gt; as.character()\n\nprint(muni_sums |&gt;\n  filter(year == params$year)|&gt;\n  mutate(pct_fmv_exempt = muni_fmv_exempt / muni_fmv ) |&gt;\n    mutate(agency_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name) ) |&gt;\n full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) |&gt;\n  ggplot(aes(fill = pct_fmv_exempt)) + \n  geom_sf(aes(geometry = geom), color = \"black\") + \n  theme_void()+ \n  labs(title = \"Exempt FMV as a Percent of Municipality FMV\",\n       caption = sprintf(\"The County-wide municipal-median is %s\", midpoint)) +\n    theme_void() + \n  theme(axis.ticks = element_blank(), \n        axis.text = element_blank())+\n   scale_fill_steps2(high = \"darkblue\", low = \"black\",  mid = \"beige\",\n                       n.breaks = 5, show.limits=TRUE,\n                       na.value = NA,\n                    nice.breaks = FALSE,\n                   midpoint = median(median_exempt$pct_fmv_exempt),\n                        name = \"% Exempt\", label = scales::percent))\n\n\n\n\n\nFigure 2.2: Share of FMV that is tax exempt due to Homestead Exemptions Same as previous image but in different color scheme that indicates high and low instead of using a midpoint for the color gradient.\n\n\n\n\n\n\n\n\nThe County-wide municipal-median percent of FMV exempt from property taxes in tax year 2022 was North Riverside with 13.43%.\nThe percent of municipal EAV exempt from property taxes are greatest across Cook County’s south suburbs and lowest in the northern most suburbs of the county.\n\n\n\nFigure 4. Exempt EAV: City vs. Suburbs\n\n\nCode\n## makes table in margin for suburbs and city\ngeom_sums &lt;- muni_cl_sums |&gt; \n  filter(year == params$year) |&gt; \n  select(clean_name, muni_c_all_exemptions) |&gt;\n  mutate(clean_name = ifelse(is.na(clean_name), \"Unincorporated\", clean_name),\n         Geography = ifelse(clean_name == \"Chicago\", \"City\", \"Suburbs\"),\n         Geography = ifelse(is.na(clean_name), \"Unincorporated\", Geography),\n         Geography = factor(Geography, levels = c(\"Suburbs\", \"City\", \"Unincorporated\"))) |&gt;\n  group_by(Geography) |&gt;\n  summarize(\"ExemptEAV\" = sum(muni_c_all_exemptions, na.rm=TRUE))\n\ngeom_sums |&gt; \n  flextable() |&gt;\n  flextable::set_caption(caption =\"Includes all exemption types.\")\n\n\n\nGeographyExemptEAVSuburbs9,166,789,350City6,035,672,661\n\n\n\nCode\nmuni_cl_sums |&gt; \n  filter(year == params$year) |&gt; \n  select(clean_name, muni_c_exe_homeowner:muni_c_exe_vet_dis) |&gt;\n  mutate(clean_name = ifelse(is.na(clean_name), \"Unincorporated\", clean_name),\n    Geography = ifelse(clean_name == \"Chicago\", \"City\", \"Suburbs\"),\n         Geography = ifelse(is.na(clean_name), \"Unincorporated\", Geography),\n         Geography = factor(Geography, levels = c(\"Suburbs\", \"City\", \"Unincorporated\"))) |&gt;\n  group_by(Geography) |&gt;\n  summarize(\"GHE\" = sum(muni_c_exe_homeowner, na.rm=TRUE),\n            \"Senior Homestead\" = sum(muni_c_exe_senior, na.rm=TRUE),\n            \"Senior Freeze\" = sum(muni_c_exe_freeze, na.rm=TRUE),\n            \"Other Exemptions\" = sum(muni_c_exe_longtime_homeowner+muni_c_exe_disabled+muni_c_exe_vet_returning+ muni_c_exe_vet_dis_lt50 + muni_c_exe_vet_dis_50_69+muni_c_exe_vet_dis_ge70)) |&gt;\n  \n  pivot_longer(cols = c(`GHE`:`Other Exemptions`), names_to = \"Type\" ) |&gt;\n   mutate(Type = factor(Type, levels = c(\"GHE\", \"Senior Homestead\", \"Senior Freeze\", \"Other Exemptions\" \n                                         #\"Senior Freeze\", \"Senior Homestead\", \"GHE\"\n                                        )\n                                        )) |&gt;\n  ggplot(aes(x=Type, y = value/1e9, fill = Geography\n             )) +\n  \n  geom_col( position = \"dodge\" ) +\n  geom_text(aes(label = round(value/1e9, digits=1)), vjust=-0.5, position = position_dodge(.9)) +\n  theme_minimal() +\n  labs(title = paste0(\"Exempt EAV in Cook County, Tax Year \", params$year), \n       subtitle = \"by Type and Geography\", \n       y = \"EAV (Billions)\", x = \"Exemption Type\") + \n  scale_y_continuous(limits = c(0, 8)) +\n  scale_fill_manual(values = c(\"blue3\", \"deepskyblue3\", \"gray\") )\n\n\n\n\n\nFigure 2.3: Exempt EAV in Cook County Exemption use varies between suburban Cook County and the City of Chicago which may point to broader socioeconomic patterns as well as residents’ eligibility and update. Note: Our current calculations undervalue the disabled veterans exemption.\n\n\n\n\n\n\n\n\nExemption use varies between suburban Cook County (9,166,789,350 EAV) and the City of Chicago (6,035,672,661 EAV) , which may point to broader socioeconomic patterns as well as residents’ eligibility and uptake.\n\n\nFigure 5. Value of residential exemptions by type in Cook County over time, Tax Years 2006 - 2022\n\n\nCode\nmuni_cl_sums |&gt; \n  select(year, muni_c_exe_homeowner:muni_c_exe_vet_dis) |&gt;\n  filter(year &lt;= params$year) |&gt;\n  group_by(year) |&gt;\n  summarize(\"GHE\" = sum(muni_c_exe_homeowner, na.rm=TRUE),\n            \"Senior Homestead\" = sum(muni_c_exe_senior, na.rm=TRUE),\n            \"Senior Freeze\" = sum(muni_c_exe_freeze, na.rm=TRUE),\n            \"Other Exemptions\" = sum(muni_c_exe_longtime_homeowner + muni_c_exe_disabled + muni_c_exe_vet_returning+ muni_c_exe_vet_dis_lt50 + muni_c_exe_vet_dis_50_69+muni_c_exe_vet_dis_ge70, na.rm = T)) |&gt;\n  pivot_longer(cols = c(`GHE`:`Other Exemptions`), names_to = \"Type\" ) |&gt;\n  mutate(Type = factor(Type, levels = c(#\"GHE\", \"Senior Homestead\", \"Senior Freeze\", \n                                        \"Other Exemptions\", \"Senior Freeze\", \"Senior Homestead\", \"GHE\"))) |&gt;\n  ggplot(aes(x=year, y = value/1000000000, fill = Type)) +\n  \n  geom_bar( stat = \"identity\" ) + \n  theme_minimal() +\n  labs(title = \"Residential Exempt EAV in Cook County\", \n       subtitle = paste0(\"by Type and Geography, 2006-\", params$year), \n       y = \"EAV (Billions)\", x =\"\") +\n  scale_fill_manual(values = c(\"chartreuse2\",  \"darksalmon\", \"brown2\", \"blue4\" )) +\n                    scale_x_continuous(breaks = c(2006, 2010, 2015, 2020))\n\n\n\n\n\nFigure 2.4: Residential Exempt EAV in Cook County\n\n\n\n\n\n\n\n\nTrends in the total EAV reductions due to homestead exemptions reflect both real estate market shifts and the legislative changes in their availability, eligibility, and value.",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "exemp_report_2022.html#effect-on-composite-tax-rates",
    "href": "exemp_report_2022.html#effect-on-composite-tax-rates",
    "title": "Tax Year 2022",
    "section": "Effect on Composite Tax Rates",
    "text": "Effect on Composite Tax Rates\nFigure 6 will not be recreated but is just a bar chart of the change in tax rate in the table below\n\nTable 1. Change in composite property tax rates due to exemptions, tax year 2022.\n\n\nCode\nmuni_ratechange &lt;- read_csv(paste0(\"../Output/muni_ratechange_\", params$year, \"_test.csv\"))\n\n\nmuni_ratechange |&gt; \n  select(clean_name,  current_rate_avg, rate_noExe, change_noExe, final_tax_to_dist) |&gt; \n  mutate(change_noExe = round(change_noExe * 100, digits = 2)) |&gt;\n  DT::datatable(rownames = FALSE, colnames = c('Municipality' = 'clean_name','Current Comp. Rate' = 'current_rate_avg', 'Hypothetical Rate' = 'rate_noExe',  'Composite Tax Rate Change'='change_noExe', \n\n                       'Composite Levy' = 'final_tax_to_dist'),\n          caption = \"Table 1 in Report for all Municipalities: Current and Hypothetical Composite Tax Rates if GHE $0\") |&gt;\n  formatCurrency('Composite Levy', digits = 0) |&gt;\n  formatPercentage(columns = c(2,3), digits = 2)\n\n\n\n\nTable 2.2: Searchable table containing all municipalities and the hypothetical tax rate change if exempt EAV became taxable.\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nmuni_ratechange |&gt;\n  filter(!is.na(clean_name)) |&gt; \n  select(clean_name,  current_rate_avg, rate_noExe, change_noExe \n) |&gt;\n  mutate(across(c(current_rate_avg, rate_noExe, change_noExe ), ~.*100)) |&gt;\n  arrange(desc(change_noExe)) |&gt;\n  slice(c(1:5, 69:73, 121:125)) |&gt;\n    #slice(c(1:5, 58:62, 115:119)) |&gt;\n\n  flextable() |&gt; \n  border_remove() |&gt;\n  hline_top() |&gt;\n  hline(i = c(5,10)) |&gt;\n  \n  set_header_labels(\n    clean_name = \"Municipality\", \n    current_rate_avg = \"With Exemptions\",\n    rate_noExe = \"Without Exemptions\",\n    change_noExe = \"Percent Point Difference\"\n    \n  ) |&gt;\n  align(j = 2, align = \"right\") |&gt;\n  align(j=2, align = \"right\", part = \"header\") |&gt;\n  set_table_properties( layout = \"autofit\") |&gt; bold(i = 8)\n\n\n\n\nTable 2.3: Table 1 in Exemption Report. Shows the top 5, bottom 5, and median 5 municipalities, ranked by change in composite tax rate. Includes all exemption types in calculation of rate change.\n\n\n\nMunicipalityWith ExemptionsWithout ExemptionsPercent Point DifferencePark Forest43.6028.7714.56Phoenix30.7720.3210.40Riverdale32.6825.037.25Dolton26.6819.746.61Hazelcrest26.4619.216.42Indian Head Park8.977.781.23Merrionette Park12.0310.811.22La Grange Park10.819.491.21Bridgeview13.8212.721.19Forest Park12.2611.031.14Hinsdale8.077.830.23Glencoe7.827.620.20Kenilworth8.097.900.18Winnetka7.477.280.18Hodgkins10.9810.520.08\n\n\n\n\n\n\n\nFigure 7. Map of Spatial Patterns in Composite Tax Rate Change\nChange in composite tax rate if exempt EAV was added back to the the taxable tax base (i.e. if there were no exemptions).\n\n\nCode\nmuni_ratechange  |&gt;\n    mutate(across(c(current_rate_avg, rate_noExe, change_noExe ), ~.*100)) |&gt;\n\n  left_join(nicknames, by = \"clean_name\") |&gt;\n  mutate(agency_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name),\n         shpfile_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name) ) |&gt;\n  full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) |&gt;\n\n  ggplot(aes(fill = change_noExe)) + \n  geom_sf(aes(geometry = geom), color = \"black\") + \n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n   scale_fill_stepsn(colors = c( \"#F7FEF5\",\n                                # \"#e4f1e0\",\n                                \"#d4f6cc\",\n                                \"#47ba24\",\n                                \"#1F6805\",\n                                \"#133C04\"),\n                        show.limits=TRUE, \n                     limits = c(0, 15),\n                     breaks = c(0, 2.5, 5, 7.5, 10, 15),\n                     na.value = NA,\n                        name = \"Rate Change from \\nExemptions\"  \n                    )\n\n\n\n\n\n\n\n\n\n\n\nCode\norder &lt;- burden_shift %&gt;% \n  as_tibble() %&gt;%\n  group_by(agency_name, clean_name) %&gt;%\n    summarize(tax_rate_current = median(tax_rate_current), \n            taxrate_new = median(taxrate_new),\n            taxrate_change = median(taxrate_change)) %&gt;%\n  arrange(taxrate_change)\n\nmedian(order$taxrate_change)\n\nburden_shift %&gt;%  \n  filter(taxrate_change &lt; 0.0027 |taxrate_change &gt; 0.06  |\n           taxrate_change &lt; (median(taxrate_change))+0.0007 & taxrate_change &gt; (median(taxrate_change))-0.00075\n         ) %&gt;% \n    filter(Alea_cat == \"Owner Occupied\") %&gt;%\n\n # filter(PropType == \"Single-Family\") %&gt;%\n  ungroup() %&gt;% \n  select(clean_name, tax_rate_current, taxrate_new, agency_name) %&gt;% \n  pivot_longer(c(\"tax_rate_current\", \"taxrate_new\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  left_join(order) %&gt;%\n  ggplot(aes(x = tax_rate*100, y= reorder(clean_name, taxrate_change)))+\n  geom_line(aes(group = clean_name))+ \n   geom_point(aes(color=type), size=3 )+\n  geom_hline(yintercept = 10.5, linetype =2)+\n    geom_hline(yintercept = 5.5, linetype =2)+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n               plot.title.position = \"plot\",\n    legend.position = \"none\",\n     #   panel.background = element_rect(fill='transparent'), #transparent panel bg\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n   )+\n        scale_color_brewer(palette=\"Paired\", labels = c(\"Exemptions\", \"No Exemptions\"), direction = 1)+\n\n  labs(title = \"Difference in Composite Tax Rate if there were No Exemptions\", \n       subtitle = \"Ordered by Change in Tax Rate: Highest, Median, and Smallest Differences\",\n       caption = \"Median change is 1.38 percentage points\",\n       x = \"Composite Tax Rate (%)\", y = \"\" )",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "exemp_report_2022.html#effect-on-tax-burdens",
    "href": "exemp_report_2022.html#effect-on-tax-burdens",
    "title": "Tax Year 2022",
    "section": "Effect on Tax Burdens",
    "text": "Effect on Tax Burdens\n\nFigure 8. Dolton example of Share of levy paid by property type\n\n\n\nCode\n#read_csv(paste0(\"../../Output/Dont_Upload/0_Joined_PIN_data_\", params$year, \".csv\") )\n\npin_data &lt;- read_csv(paste0(\"../Output/Dont_Upload/0_joined_PIN_data_\", params$year, \"_test.csv\"))\n\n\nmc_burden &lt;- read_csv(paste0(\"../Output/muni_mc_burden_\", params$year, \"_test.csv\"))\n\n\nburden_shift &lt;- read_csv(paste0(\"../Output/muni_burden_shift_\", params$year, \"_test.csv\"))\n\n\n\n\nCode\nmc_burden |&gt; \n  mutate(group = case_when(class_1dig == 2 ~ \"Class 2\",\n                         class_1dig == 3 ~ \"Class 3\",\n                         T ~ \"All Other Classes\"))|&gt;\n  \n  select(clean_name, group,  \n         pct_taxburden_current, hyp_pct_taxburden) |&gt;\n  group_by(clean_name, group) |&gt;\n  summarize(`Current Tax Burden Share` = sum(pct_taxburden_current),\n           `Tax Burden Share without Exemptions` =sum(hyp_pct_taxburden)) |&gt;\n  filter(clean_name==\"Dolton\") |&gt;\n  pivot_longer(cols = c(`Current Tax Burden Share`, `Tax Burden Share without Exemptions`), \n                names_to = \"type\", values_to = \"value\") |&gt;\n  ggplot(aes(x = group, y= value, group = type, fill = type) )+ \n  geom_col(position = \"dodge\") +  \n  geom_text(aes(label = scales::percent(round(value, digits=3))), \n              vjust=-0.5, position = position_dodge(.9)) + \n  theme_classic()+\n  theme(legend.title = element_blank(), legend.position = \"bottom\",\n        axis.title.x  = element_blank()) + \n  scale_y_continuous(label = scales::percent, name = \"Share of Levy\")\n\n\n\n\n\n\n\n\n\n\n\nCode\nburden_c2 &lt;- mc_burden |&gt; \n  filter(class_1dig == 2) |&gt; \n  select(clean_name, #pct_taxbase, \n         burden_shift,  pct_taxburden_current, hyp_pct_taxburden)\n\nburden_shift |&gt;  \n  select(-c(muni_levy, muni_taxbase,))|&gt;\n  select(clean_name, Group, pct_taxburden_current, hyp_pct_taxburden, everything()) |&gt;\n  DT::datatable(rownames = FALSE, \n                colnames = c(\n                  'Municipality' = 'clean_name',\n                  'Current Taxbase' = 'group_taxbase', \n                  'Hyp. Taxbase' = 'hyp_group_taxbase',  \n                  'Taxes Paid'='group_taxes_current', \n                  'Hyp Taxes Paid' = 'hyp_group_taxes',\n                  'Share of Levy'='pct_taxburden_current',\n                  'Share of Taxbase' = 'pct_taxbase_current',\n              \"Hyp. Share of Levy\"  =  'hyp_pct_taxburden',\n              \"Burden Shift\" = 'burden_shift'\n                  ),\n                caption = \"Table 2 in Report for all Municipalities: Current and Hypothetical Composite Tax Rates if GHE $0\"\n      ) |&gt;\n  formatCurrency(columns = c(5:8), digits = 0) |&gt;\n  formatPercentage(columns = c(3,4,9,10), digits = 2)\n\n\n\n\n\n\n\n\nCode\nmc_burden |&gt; \n    mutate(pct_taxburden_current = round(pct_taxburden_current * 100, digits = 2),\n           hyp_pct_taxburden = round(hyp_pct_taxburden * 100, digits = 2) ) |&gt;\n\n  filter(clean_name == \"Dolton\") |&gt; \n  select(`Major Class`= class_1dig, `Current Tax Burden` = pct_taxburden_current, `Alt. Burden` = hyp_pct_taxburden) |&gt; \n  arrange(desc(`Current Tax Burden`)) |&gt;\n  flextable::flextable()\n\n\n\n\nTable 2.4: Ungrouped values for donut chart in report. Tax Burden is the Revenue Collected from a Major Class / the combined levy from local taxing agencies (non-TIF) in Dolton, IL.\n\n\n\nMajor ClassCurrent Tax BurdenAlt. Burden264.1573.16530.3222.7212.061.5481.521.1430.920.6960.600.4590.360.2740.070.0500.000.00\n\n\n\n\n\n\n\nFigure 9. Change in Share of Tax Burden\nWas made in Excel. Not recoded for website yet.\n\n\n\nTable 2. Change in share of property tax burden\n\nTable 2: Change in the share of property tax burden due to exemptions for single-family, multi-family, and commercial and industrial properties, tax year 2022\n\n\nCode\nburden_shift |&gt;  \n    select(clean_name, Group, burden_shift) |&gt;\n  mutate(burden_shift = round(burden_shift, digits =4)) |&gt;\npivot_wider(id_cols=clean_name, names_from = Group, values_from = burden_shift) |&gt;\n  arrange((`Single-family`)) |&gt; \n  DT::datatable(rownames = FALSE) \n\n\n\n\nTable 2.5: Supporting Table for Table 2 Change in tax burden if EAV that is current tax exempt due to homestead exemptions became taxable. Measured in percentage point change.\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nburden_c2 |&gt; \n  mutate(burden_shift = burden_shift*100) |&gt; # multiply by 100 to make it percentage point change without formatting to percent below.\n  datatable(rownames = FALSE,\n          colnames = c('Municipality' = 'clean_name', \n                       'Burden Shift, Pct Pt Change' = 'burden_shift', \n                       'Current Tax Burden\\nC2 Tax Collected / Muni Levy' = 'pct_taxburden_current', \n                       \"Hypothetical Tax Burden\\nHyp. C2 Tax Collected / Muni Levy\" = 'hyp_pct_taxburden'),\n          caption = \"Table 2 in Exemption Report: Current Share of Taxable EAV and Share of Levy Paid by Class 2 Properties\"\n           ) |&gt;\n  formatPercentage(c(2,3,4), digits = 2) |&gt;\n  formatRound(c(2), digits = 2)\n\n\n\n\n\n\n\nFigure 9 Follow up. Current Tax Burden Map\n\n\nCode\nburden_c2 |&gt;\n  left_join(nicknames) |&gt;\n  mutate(agency_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name) ) |&gt;\n  full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) |&gt;\n\n  ggplot(aes(fill = pct_taxburden_current)) + \n  geom_sf(aes(geometry = geom), color = \"black\") + \n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n   scale_fill_stepsn(colors = c(\"#ffffcc\",\"#a1dab4\" ,\"#41b6c4\",\"#2c7fb8\", \"#253494\"),\n                        show.limits=TRUE, \n                     limits = c(0,1),\n                     na.value = \"gray70\",\n                     n.breaks = 6,\n                        name = \"Burden with \\nExemptions\", \n                     labels = scales::percent\n                     \n                    )+\n  labs(title = \"Current share of property tax burden\", \n       subtitle = \"for Class = 2 Property Types\")\n\n\n\n\n\n\n\n\n\n\n\n\nTable 3.\nDifference in taxbills for those that do and do not claim homeowner exemption\n\n\n\nCode\n## removes properties that have more than one exemption type\nC2_munistats_filtered &lt;- pin_data |&gt; \n  filter(class &gt; 199 & class &lt; 300) |&gt;\n    filter(exe_senior == 0 & \n           exe_freeze == 0 & \n           exe_longtime_homeowner == 0 & \n           exe_disabled == 0 & \n           exe_vet_returning == 0 & \n           exe_vet_dis_lt50 == 0 & \n           exe_vet_dis_50_69 == 0 & \n           exe_vet_dis_ge70 == 0 & \n           exe_abate == 0) |&gt;\n  group_by(clean_name)  |&gt;\n  arrange(av) |&gt;\nsummarize(\n    median_eq_av = round(median(eq_av)),\n    median_taxed_eav = round(median(eq_av-all_exemptions)),\n    median_av = round(median(av)), \n    avg_av = round(mean(av)),\n    avg_eq_av = round(mean(eq_av)),\n    avg_taxed_eav = round(mean(eq_av-all_exemptions)),\n\n    C2_pins_in_muni = n(),\n    C2_current_exemptions = sum(all_exemptions, na.rm = TRUE),\n    C2_HO_exemps = sum(exe_homeowner, na.rm = TRUE),\n  )\n\nC2_munistats_filtered |&gt;  \n  DT::datatable(rownames = FALSE, \n                colnames = c(\n                  'Median AV*eq_factor' = 'median_eq_av',\n                  'Average Eq.AV' = 'avg_eq_av',\n                  'Median Taxed EAV' = 'median_taxed_eav', \n                  'Median AV' = 'median_av',  \n                  'Average AV'='avg_av', \n                  'Class 2 Hyp Taxes Paid' = 'avg_taxed_eav',\n                  'Class 2 Pin Count'='C2_pins_in_muni',\n                  'Class 2 Exempt EAV' = 'C2_current_exemptions'\n                  ),\n                caption = \"Class 2 Descriptive Statistics\"\n      ) |&gt;\n  formatCurrency(columns = c(2:7, 9,10), digits = 0)\n\n\n\n\n\n\n\n\nCode\n## Grouped by if they have a $0 tax bill and had the GHE per muni\n\n\nmuni_median_summarytable &lt;- pin_data |&gt; \n  select(pin, av, class, tax_code_num, tax_bill_total, av_certified, exe_homeowner:exe_abate, clean_name, eq_av, all_exemptions, zero_bill, has_HO_exemp, taxed_eav, final_tax_to_dist, final_tax_to_tif) |&gt;\n\n  filter(class &gt; 199 & class &lt; 300) |&gt; \n  \n  # merge in muni residential median AV\n  left_join(C2_munistats_filtered |&gt; select(clean_name, median_av, median_eq_av, median_taxed_eav)) |&gt;\n  \n  left_join(muni_ratechange |&gt; select(clean_name, rate_noExe, rate_noGHE, rate_current)) |&gt;\n  # +/- 500 from municipalities median residential AV\n  filter(av &lt; median_av+200 & av &gt; median_av-200) |&gt;\n  \n  # Removes properties that received other types of exemptions\n  filter(exe_senior == 0 & \n           exe_freeze == 0 & \n           exe_longtime_homeowner == 0 & \n           exe_disabled == 0 & \n           exe_vet_returning == 0 & \n           exe_vet_dis_lt50 == 0 & \n           exe_vet_dis_50_69 == 0 & \n           exe_vet_dis_ge70 == 0 & \n           exe_abate == 0) |&gt;\n  \n  arrange(av) |&gt;\n  \n  mutate(#bill_current = (final_tax_to_dist + final_tax_to_tif),\n         bill_current = rate_current* taxed_eav,\n         bill_noexemps =  rate_noGHE*(eq_av-all_exemptions+exe_homeowner),\n         bill_change = bill_noexemps - bill_current) |&gt;\n  # \n  group_by(clean_name, \n           has_HO_exemp) |&gt; \n  \n  summarize(AV = median(median_av), # median_av was calculated earlier: C2 median AV for the muni \n            `Taxable EAV` = round(median(eq_av)),\n            `Taxed EAV` = round(median(taxed_eav)),\n            bill_cur = round(median(bill_current)),\n            bill_new = round(median(bill_noexemps)),\n            bill_change = round(median(bill_change)),\n            pincount=n(),\n            perceived_savings = round(median(all_exemptions*rate_current))\n            ) |&gt; \n  \n  # merge in clean_names variable\n  left_join(nicknames) |&gt;\n  \n  select(clean_name, has_HO_exemp, bill_cur, bill_new, bill_change, perceived_savings,  AV, `Taxable EAV`, `Taxed EAV`, \n         #everything() \n         ) #|&gt; select(-c(agency_number, agency_name))\n\nmuni_median_summarytable |&gt;\n  DT::datatable(rownames = FALSE, \n                colnames = c(\n                  'Claims GHE' = 'has_HO_exemp',\n                  'Current Bill' = 'bill_cur',\n                  'Hyp. Bill' = 'bill_new', \n                  'Bill Change' = 'bill_change',  \n                  'Perceived Savings'='perceived_savings'),\n                caption = \"Change in Tax Bill if Exempt EAV from GHE were added back to tax base.\")  |&gt;\n  formatCurrency(columns = c(3:9), digits = 0)\n\n\n\n\n\n\n\n\nCode\nmuni_median_summarytable |&gt;\n  filter(clean_name %in% c(\"Chicago\", \"Dolton\", \"Glencoe\")) |&gt;\n  mutate(across(bill_cur:`Taxed EAV`, scales::dollar )) |&gt;\n rename(Municipality = clean_name,\n                  'Claims GHE' = 'has_HO_exemp',\n                  'Current Bill' = 'bill_cur',\n                  'Hyp. Bill' = 'bill_new', \n                  'Bill Change' = 'bill_change',  \n                  'Perceived Savings'='perceived_savings' )  |&gt;\n  \n  flextable() \n\n\n\n\nTable 2.6: Table 3. Estimated Bill Change for a municipality’s median valued property if exempt EAV from the GHE were added to back to the tax base.\n\n\n\nMunicipalityClaims GHECurrent BillHyp. BillBill ChangePerceived SavingsAVTaxable EAVTaxed EAVChicago0$4,347$4,199-$147$0$21,000$61,395$61,395Chicago1$3,639$4,200$561$708$21,000$61,398$51,398Dolton0$6,841$5,501-$1,340$0$8,889$25,962$25,962Dolton1$4,220$5,513$1,293$2,635$8,889$26,015$16,015Glencoe1$22,157$22,499$342$782$100,210$293,332$283,332\n\n\n\n\n\n\n\nCode\ncholton_15000_summarytable &lt;- pin_data |&gt; \n  \n  select(pin, av, class, tax_code_num, tax_bill_total, av_certified, exe_homeowner:exe_abate, clean_name, eq_av, all_exemptions, zero_bill, has_HO_exemp, taxed_eav, final_tax_to_dist, final_tax_to_tif) |&gt;\n  filter(clean_name %in% c(\"Chicago\", \"Dolton\", \"Glencoe\")) |&gt;\n  filter(between(av, 14800, 15200)) |&gt;\n\n  filter(class &gt; 199 & class &lt; 300) |&gt; \n  \n  # merge in muni residential median AV\n  left_join(C2_munistats_filtered |&gt; select(clean_name, median_av)) |&gt;\n  \n  left_join(muni_ratechange |&gt; select(clean_name, rate_noExe, rate_noGHE, rate_current)) |&gt;\n  # +/- 500 from municipalities median residential AV\n  # Removes properties that received other types of exemptions\n  filter(exe_senior == 0 & \n           exe_freeze == 0 & \n           exe_longtime_homeowner == 0 & \n           exe_disabled == 0 & \n           exe_vet_returning == 0 & \n           exe_vet_dis_lt50 == 0 & \n           exe_vet_dis_50_69 == 0 & \n           exe_vet_dis_ge70 == 0 & \n           exe_abate == 0 ) |&gt;\n  \n  arrange(av) |&gt;\n  \n  mutate(\n         bill_current = rate_current* taxed_eav,\n         bill_noexemps =  rate_noGHE*(eq_av-all_exemptions+exe_homeowner),\n         bill_change = bill_noexemps - bill_current) |&gt;\n  # \n  group_by(clean_name, \n           has_HO_exemp) |&gt; \n  \n  summarize(AV = median(av),\n    `Median AV in Muni` = first(median_av), # median_av was calculated earlier: C2 median AV for the muni \n            `EqAV` = round(median(eq_av)),\n            `Taxed EAV` = round(median(taxed_eav)),\n            bill_cur = round(median(bill_current)),\n            bill_new = round(median(bill_noexemps)),\n            bill_change = round(median(bill_change)),\n            pincount=n(),\n            perceived_savings = round(median(all_exemptions*rate_current))\n            ) |&gt; \n  \n  # merge in clean_names variable\n  left_join(nicknames) |&gt;\n  \n  select(clean_name, AV, has_HO_exemp, bill_cur, bill_new, bill_change, perceived_savings,  `Median AV in Muni`, `EqAV`, `Taxed EAV`\n         #everything() \n         ) |&gt;\n  mutate(across(bill_cur:`Taxed EAV`, scales::dollar )) |&gt;\n rename(Municipality = clean_name,\n                  'Claims GHE' = 'has_HO_exemp',\n                  'Current Bill' = 'bill_cur',\n                  'Hyp. Bill' = 'bill_new', \n                  'Bill Change' = 'bill_change',  \n                  'Perceived Savings'='perceived_savings' )  |&gt;\n  \n  flextable()\n  # DT::datatable(rownames = FALSE, \n  #               colnames = c(\n  #                 'Claims GHE' = 'has_HO_exemp',\n  #                 'Current Bill' = 'bill_cur',\n  #                 'Hyp. Bill' = 'bill_new', \n  #                 'Bill Change' = 'bill_change',  \n  #                 'Perceived Savings'='perceived_savings'),\n  #               caption = \"Change in Tax Bill for Properties with an Assessed Value of $15,000.\")  |&gt;\n  # formatCurrency(columns = c(2, 4:9), digits = 0)\n\ncholton_15000_summarytable\n\n\nTable that uses pins valued at ~$15,000. Creates unrealistic bill\nchange for some municipalities if they do not have properties valued at\n15K.MunicipalityAVClaims GHECurrent BillHyp. BillBill ChangePerceived SavingsMedian AV in MuniEqAVTaxed EAVChicago14,999.00$3,105$3,000-$105$0$21,000$43,853$43,853Chicago14,999.01$2,397$3,000$603$708$21,000$43,853$33,853Dolton14,991.00$11,549$9,287-$2,262$0$8,889$43,829$43,829Dolton14,907.51$8,850$9,236$386$2,635$8,889$43,585$33,585Glencoe14,976.00$3,424$3,358-$66$0$100,210$43,785$43,785\n\n\n\n\nTable 4.\nMunicipalities with the largest and smallest reductions in tax base (as a share of residential EAV due to exemptions) and median property values\n\n\n\nCode\nmuni_sums |&gt; \n  filter(year == params$year) |&gt;\n  group_by(clean_name) |&gt; \n  summarize(pct_res_exempt = muni_fmv_exempt / muni_fmv_residential) |&gt;  \n  arrange(desc(pct_res_exempt) ) |&gt;\n    left_join(C2_munistats_filtered) |&gt; \n  mutate(prop_value = median_av*10,\n         pct_res_exempt = scales::percent(pct_res_exempt, accuracy = 0.01) ) |&gt;\n  mutate(across(c(median_eq_av:avg_taxed_eav, prop_value), scales::dollar)) |&gt;\n  select(Municipality = clean_name, `Share Res. Exempt` = pct_res_exempt,\n         `Median Prop. Value` = prop_value, everything())\n\n\n\n  \n\n\n\n\n\nFigure 10. Tax Burden Shift from Current GHE\nShare of municipal property tax levy paid by Class 2 properties with and without homestead exemptions, tax year 2022\n\n\nCode\n# as a dot graph ## \n\norder &lt;- mc_burden |&gt;\n  filter(class_1dig == 2) |&gt;\n    select(clean_name, pct_taxburden_current, burden_shift)\n\nslice &lt;-  mc_burden |&gt;\n  filter(class_1dig == 2) |&gt;\n    select(clean_name, pct_taxburden_current, burden_shift) |&gt;\n  arrange(pct_taxburden_current) |&gt;\n  slice(1:5, 63:67, 127:131)\n\n\n\nmedian_burden &lt;- median(order$pct_taxburden_current)\nmedian_shift &lt;- median(order$burden_shift)\n\n# median burden change is 5.9 percentage points\n# current median burden is 70.3% of the levy\n\nmc_burden |&gt; \n  filter(clean_name %in% slice$clean_name) |&gt;\n#filter(!clean_name %in% cross_county_lines$clean_name)|&gt;\n  filter(class_1dig == 2) |&gt;\n#  filter(burden_current &gt; 0.938 |burden_current &lt; .17 |\n #          ( (burden_current &lt; median(burden_current) + 0.01 )& (burden_current &gt; median(burden_current) - 0.01)) )|&gt; \n  ungroup() |&gt; \n      select(clean_name, pct_taxburden_current, hyp_pct_taxburden, burden_shift) |&gt;\n  arrange(burden_shift) |&gt;\n  pivot_longer(c(\"pct_taxburden_current\", \"hyp_pct_taxburden\"), \n               names_to = \"type\", values_to = \"pct_burden\") |&gt; \n  inner_join(order) |&gt;\n  ggplot(aes(x = pct_burden, \n             y= reorder(clean_name, - pct_taxburden_current)))+\n  # y= reorder(clean_name, burden_current)))+\n  geom_vline(xintercept = median_burden, linetype = 3)+\n  geom_line(aes(group = clean_name))+ \n  geom_hline(yintercept = 5.5, linetype = 2)+\n  geom_hline(yintercept = 10.5, linetype = 2)+\n  geom_point(aes(color=type), size=3 )+\n\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n plot.background = element_rect(fill='transparent', color=NA) \n  )+\n  scale_color_brewer(palette=\"Paired\", labels = c(\"Current Burden\", \"Burden if \\nNo Exemptions\" ), direction = 1) +\n  scale_x_continuous(labels = scales::percent) +\n\n  \n  labs(title = \"Change in Class 2 Residential Tax Burden\", \n       subtitle = \"Ordered by Current Tax Burden\",\n  x = \"Share of Levy (%)\", y = \"\" , \n  caption = paste0(\"Dotted line represents median Class 2 burden (\", round(median_burden*100), \"% of the levy).  \\nResidential Tax Burden is theshare of the property tax collected that was paid for by property owners with Class 2 properties.\")) +\n  \n    geom_label(label = \"Class 2 pays small share of \\nlevy; very little residential\", x=.32, y = 13, label.size = 1, size = 3)+\n  \n    geom_label(label = paste0(\"Class 2 pays median share of \\nlevy (\", round(median_burden*100), \"%), mix of land use\"), x=.42, y = 7.5, label.size = 1, size = 3) +\n  \n    geom_label(label = \"Class 2 pays nearly all of levy, \\nhighly residential\", x=.70, y = 3, label.size = 1,size = 3)\n\n\n\n\n\nFigure 2.5\n\n\n\n\n\n\n\n\n\n\nFigure 11. Zero Dollar Bills\n\n\nCode\nmuni_mc_sums |&gt; \n  left_join(nicknames) |&gt;\n  filter(major_class_code == 2) |&gt; \n  group_by(year, Triad) |&gt;\n  summarize(zerodollar_count = sum(zero_bill)) |&gt; \n  ggplot(aes(x=year, y = zerodollar_count, fill = Triad)) + \n  geom_bar(position = \"stack\", stat = \"identity\") + theme_minimal()+\n  theme(legend.position = \"top\")+\n  labs(title = element_text(\"Number of $0 Taxbills\")) +\n  scale_y_continuous(labels = scales::comma, limits = c(0, 35000), name = \"\")\n\n\n\n\n\nFigure 2.6: Number of tax bills that were $0 shown here is different than the value shown in the exemption report. This is due to missing disabeled veteran exemption amounts that were not identified when writing the original report.",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "exemp_report_2022.html#table-6---cost-of-covering-cook-countys-current-homestead-exemptions",
    "href": "exemp_report_2022.html#table-6---cost-of-covering-cook-countys-current-homestead-exemptions",
    "title": "Tax Year 2022",
    "section": "Table 6 - Cost of Covering Cook County’s current Homestead Exemptions",
    "text": "Table 6 - Cost of Covering Cook County’s current Homestead Exemptions\n\n\n\nCode\nclass8munis &lt;- read_csv(\"../Output/datarequests_Class8Munis.csv\")\n\n\ncross_county_lines &lt;- c(\"030440000\", \"030585000\", \"030890000\", \"030320000\", \"031280000\",\n                        \"030080000\", \"030560000\", \"031120000\", \"030280000\", \"030340000\",\n                        \"030150000\",\"030050000\", \"030180000\",\"030500000\", \"031210000\")\n\ntaxcodes_current &lt;- pin_data %&gt;% \n  group_by(tax_code_num)  %&gt;%\n  summarize(\n    av = sum(av),\n    taxed_eav = sum(taxed_eav),\n    equalized_AV = sum(eq_av),\n    pins_in_class = n(),\n    current_exemptions = sum(all_exemptions),\n    HO_exemps = sum(exe_homeowner),\n    tax_code_rate = first(tax_code_rate), \n    final_tax_to_dist = sum(final_tax_to_dist, na.rm = TRUE), # used as LEVY amount!!\n    final_tax_to_dist_AWM = sum(final_tax_to_dist_AWM, na.rm=TRUE),\n    final_tax_to_tif = sum(final_tax_to_tif, na.rm = TRUE),\n    tax_amt_exe = sum(tax_amt_exe, na.rm = TRUE), \n    tax_amt_pre_exe = sum(tax_amt_pre_exe, na.rm = TRUE), \n    tax_amt_post_exe = sum(tax_amt_post_exe, na.rm = TRUE),\n   # tif_share = mean(tif_share, na.rm=TRUE), # not used\n  ) %&gt;%\n  \n  mutate(total_bill_current = final_tax_to_dist + final_tax_to_tif) %&gt;%\n  rename(cur_comp_TC_rate = tax_code_rate) %&gt;%\n  mutate(current_taxable_eav = final_tax_to_dist/(cur_comp_TC_rate),\n         new_taxable_eav = final_tax_to_dist/(cur_comp_TC_rate) + HO_exemps,\n         new_taxable_eav2 = final_tax_to_dist/(cur_comp_TC_rate) + current_exemptions,\n\n         ) %&gt;%\n  mutate(\n    new_comp_TC_rate = (final_tax_to_dist / new_taxable_eav),\n        new_comp_TC_rate2 = (final_tax_to_dist / new_taxable_eav2),\n\n         ) %&gt;%\n  mutate(\n    new_comp_TC_rate = ifelse(is.nan(new_comp_TC_rate), cur_comp_TC_rate, new_comp_TC_rate),\n        new_comp_TC_rate2 = ifelse(is.nan(new_comp_TC_rate2), cur_comp_TC_rate, new_comp_TC_rate2),\n\n         ) %&gt;%\n  select(tax_code_num, cur_comp_TC_rate, new_comp_TC_rate, current_taxable_eav, new_taxable_eav, new_taxable_eav2, new_comp_TC_rate2, everything())\n\nbetter_cost_est_ghe = taxcodes_current |&gt; \n  summarize(better_cost_est = sum(new_comp_TC_rate*(HO_exemps)))\n                                            \nbetter_cost_est_allexe = taxcodes_current |&gt; \n  summarize(better_cost_est = sum(new_comp_TC_rate2*(current_exemptions)))\n\n\n\ntbl_southtriad_exemps &lt;- muni_cl_sums |&gt;\n  filter(Triad == \"South\") |&gt;\n  filter(!clean_name %in% cross_county_lines) |&gt;\n  filter(year == params$year) |&gt;\n  group_by(year) |&gt;\n  summarize(\n    'PINs' = sum(muni_c_pins_in_muni),\n    'PINs (w/ exemps.)' = sum(muni_c_has_HO_exemp),\n    \"EqAV\" = sum(muni_c_equalized_av),\n    'Taxed EAV' = sum(muni_c_current_taxable_eav),\n    'Exempt EAV' = sum(muni_c_all_exemptions),\n    'GHE' = sum(muni_c_exe_homeowner),\n    'Senior' = sum(muni_c_exe_senior),\n    'Senior Freeze' = sum(muni_c_exe_freeze),\n    'Other Exemps.' = sum(muni_c_all_exemptions - muni_c_exe_homeowner - muni_c_exe_senior - muni_c_exe_freeze )\n  ) |&gt;\n  pivot_longer(cols = c('PINs':'Other Exemps.'),\n               names_to = \"Metric\", values_to = \"Total\") |&gt;\n  select(-year)\ntbl_southtriad_exemps\n\n\n South Triad PIN Counts, Taxbase, &\nExemptions\n  \n\n\n\n\n\nCode\ntbl_class8muni_exemps &lt;- muni_cl_sums |&gt;\n  filter(clean_name %in% class8munis$clean_name) |&gt;\n  filter(!clean_name %in% cross_county_lines) |&gt;\n  filter(year == params$year) |&gt;\n  group_by(year) |&gt;\n  summarize(\n    'PINs' = sum(muni_c_pins_in_muni),\n    'PINs (w/ exemps.)' = sum(muni_c_has_HO_exemp),\n    \"EqAV\" = sum(muni_c_equalized_av),\n    'Taxed EAV' = sum(muni_c_current_taxable_eav),\n    'Exempt EAV' = sum(muni_c_all_exemptions),\n    'GHE' = sum(muni_c_exe_homeowner),\n    'Senior' = sum(muni_c_exe_senior),\n    'Senior Freeze' = sum(muni_c_exe_freeze),\n    'Other Exemps.' = sum(muni_c_all_exemptions -muni_c_exe_homeowner- muni_c_exe_senior - muni_c_exe_freeze )\n  ) |&gt;\n  pivot_longer(cols = c('PINs':'Other Exemps.'),\n               names_to = \"Metric\", values_to = \"Total\") |&gt;\n  select(-year)\ntbl_class8muni_exemps\n\n\n Municipalities Eligiblef or Class 8 Incentive Properties -\nPIN Counts, Taxbase, & Exemptions\n  \n\n\n\n\n\nCode\ntbl &lt;- muni_cl_sums |&gt;\n  filter(!clean_name %in% cross_county_lines) |&gt;\n  filter(year == params$year) |&gt;\n  group_by(year) |&gt;\n  summarize(\n    'PINs' = sum(muni_c_pins_in_muni),\n    'PINs (w/ exemps.)' = sum(muni_c_has_HO_exemp),\n    \"EqAV\" = sum(muni_c_equalized_av),\n    'Taxed EAV' = sum(muni_c_current_taxable_eav),\n    'Exempt EAV' = sum(muni_c_all_exemptions),\n    'GHE' = sum(muni_c_exe_homeowner),\n    'Senior' = sum(muni_c_exe_senior),\n    'Senior Freeze' = sum(muni_c_exe_freeze),\n    'Other Exemps.' = sum(muni_c_all_exemptions - muni_c_exe_homeowner- muni_c_exe_senior - muni_c_exe_freeze )\n  ) |&gt;\n  pivot_longer(cols = c('PINs':'Other Exemps.'),\n               names_to = \"Metric\", values_to = \"Total\") |&gt;\n  select(-year) \ntbl\n\n\n PIN Counts, Taxbase, & Exemptions for Municipalities with\na majority of their Taxbase within Cook County\n  \n\n\n\nIt would take $916,620,689 to cover the cost of the GHE without the tax rate increasing from the hypothetical rate to the current rate.\nIt would take $1,314,521,807 to cover the cost of all exemption without the tax rate increasing from the hypothetical rate to the current rate.\n\nNot finished for class 8 munis or south triad totals. But done the same way as GHE and all exemption scenarios.\n\n\nAdditional notes\nMultiple ways to measure “burden”:\n\nShare of tax base = (taxed EAV / taxed EAV in Muni)\n\nTax Burden = tax paid / levy\n\nEffective rate = tax paid / property value",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "exemp_report_2023.html",
    "href": "exemp_report_2023.html",
    "title": "Tax Year 2023",
    "section": "",
    "text": "County-Wide Exemption Summary Statistics (Tax Year 2023)\nCode\ntbl &lt;- muni_cl_sums |&gt;\n    filter(year == params$year) |&gt;\n    group_by(year) |&gt;\n    summarize(\n      'PINs' = sum(muni_c_pins_in_muni),\n      'PINs (w/ exemps.)' = sum(muni_c_has_HO_exemp),\n      \"EqAV\" = sum(muni_c_equalized_av),\n      'Taxed EAV' = sum(muni_c_current_taxable_eav),\n      'Exempt EAV' = sum(muni_c_all_exemptions),\n      'GHE' = sum(muni_c_exe_homeowner),\n      'Senior' = sum(muni_c_exe_senior),\n      'Senior Freeze' = sum(muni_c_exe_freeze),\n      'Other Exemps.' = sum(muni_c_all_exemptions -muni_c_exe_homeowner- muni_c_exe_senior - muni_c_exe_freeze )\n      ) |&gt;\n    pivot_longer(cols = c('PINs':'Other Exemps.'),\n                 names_to = \"Metric\", values_to = \"Total\") |&gt;\n    select(-year) |&gt; \n    mutate(\n      Total = case_when(\n        Metric %in% c(\"Other Exemps.\", \"EAV\", \"EqAV\", \"Taxed EAV\", \"Exempt EAV\",\"GHE\", \"Senior\", \"Senior Freeze\") ~ \n          paste0(format(round(`Total` / 1e9, 2), big.mark = \",\"), \" B\"),\n        TRUE ~ format(`Total`, big.mark = \",\")\n      )\n    )\n\n\nft &lt;- tbl |&gt;\n    flextable(cwidth = c(1, 1)) |&gt;\n    align(j = 2, align = \"right\", part = \"header\") |&gt;  # Align header\n    align(j = 2, align = \"right\", part = \"body\") |&gt;  # Align body\n    align(i = 6:9, j = 1, align = \"center\", part = \"body\") |&gt;  # Align body\n\n    footnote(i = 1, j = 2, value = as_paragraph(\"EAV in billions.\"), ref_symbols = \"*\", part='header') #Footnote in new header\n  \n\nft\n\n\n\n\nTable 3.1: Summary of Homestead Exemption Use in Cook County (Tax Year 2023\n\n\n\nMetricTotal*PINs      1,864,161PINs (w/ exemps.)      1,000,590EqAV237.91 BTaxed EAV198.84 BExempt EAV 15.58 BGHE  9.89 BSenior  2.71 BSenior Freeze  2.88 BOther Exemps.  0.09 B*EAV in billions.\nEqAV is the 2023 equalization factor multiplied by assessed value. Thus, Taxed EAV and Exempt EAV equal EqAV. It can be thought of as the “maximum available tax base” in a world without exemptions.",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "exemp_report_2023.html#county-wide-exemption-summary-statistics-tax-year-2023",
    "href": "exemp_report_2023.html#county-wide-exemption-summary-statistics-tax-year-2023",
    "title": "Tax Year 2023",
    "section": "",
    "text": "Figure 3. using EAV\n\n\nCode\nmedian_exempt &lt;- muni_sums |&gt;\n  filter(year== params$year)|&gt;\n  mutate(muni_pct_eav_exempt =(muni_eav - muni_eav_taxed) / muni_eav) |&gt; \n  select(muni_pct_eav_exempt, clean_name, agency_name)\n\n\nmidpoint = scales::percent(median(median_exempt$muni_pct_eav_exempt), accuracy = 0.01)\n\nmedian_muni = median_exempt |&gt;\n  arrange(muni_pct_eav_exempt) |&gt;\n  filter(muni_pct_eav_exempt == median(muni_pct_eav_exempt)) |&gt;\n  select(clean_name) |&gt; as.character()\n\nprint(median_exempt |&gt;\n    mutate(agency_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name) ) |&gt;\n full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) |&gt;\n  ggplot(aes(fill = muni_pct_eav_exempt)) + \n  geom_sf(aes(geometry = geom), color = \"black\") + \n  theme_void()+ \n  labs(title = \"Exempt EAV as a Percent of Municipality EAV\") +\n  theme(axis.ticks = element_blank(), \n        axis.text = element_blank())\n +\n    scale_fill_stepsn(colors = c(\"#ffffcc\",\n                                 \"lightblue\",\n                                 \"#41b6c4\", \n                                 \"#253494\",\n                                 \"navy\"\n                                 ),\n                        show.limits=TRUE, \n                  breaks = c(0.075, 0.15, 0.225, 0.30, max(median_exempt$muni_pct_eav_exempt)),\n                       na.value = \"gray50\",\n                    nice.breaks = FALSE,\n                        name = \"% Exempt\", label = scales::percent))\n\n\n\n\n\nFigure 3.1: Share of EAV that is tax exempt due to homestead exemptions\n\n\n\n\n\n\n\n\nThe County-wide municipal-median percent of EAV exempt from property taxes in tax year 2023 was Chicago Ridge with 13.39%.\n\nFigure 3. Using FMV\n\n\nCode\nmedian_exempt &lt;- muni_sums |&gt;\n  filter(year == params$year)|&gt;\n  mutate(pct_fmv_exempt = muni_fmv_exempt / muni_fmv\n) |&gt; \n  select(pct_fmv_exempt, clean_name)\n\nmidpoint = scales::percent(median(median_exempt$pct_fmv_exempt), accuracy = 0.01)\n\nmedian_muni = median_exempt |&gt;\n  arrange(pct_fmv_exempt) |&gt;\n  filter(pct_fmv_exempt == median(pct_fmv_exempt)) |&gt;\n  select(clean_name) |&gt; as.character()\n\nprint(muni_sums |&gt;\n  filter(year == params$year)|&gt;\n  mutate(pct_fmv_exempt = muni_fmv_exempt / muni_fmv ) |&gt;\n    mutate(agency_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name) ) |&gt;\n full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) |&gt;\n  ggplot(aes(fill = pct_fmv_exempt)) + \n  geom_sf(aes(geometry = geom), color = \"black\") + \n  theme_void()+ \n  labs(title = \"Exempt FMV as a Percent of Municipality FMV\",\n       caption = sprintf(\"The County-wide municipal-median is %s\", midpoint)) +\n    theme_void() + \n  theme(axis.ticks = element_blank(), \n        axis.text = element_blank())+\n   scale_fill_steps2(high = \"darkblue\", low = \"black\",  mid = \"beige\",\n                       n.breaks = 5, show.limits=TRUE,\n                       na.value = NA,\n                    nice.breaks = FALSE,\n                   midpoint = median(median_exempt$pct_fmv_exempt),\n                        name = \"% Exempt\", label = scales::percent))\n\n\n\n\n\nFigure 3.2: Share of FMV that is tax exempt due to Homestead Exemptions Same as previous image but in different color scheme that indicates high and low instead of using a midpoint for the color gradient.\n\n\n\n\n\n\n\n\nThe County-wide municipal-median percent of FMV exempt from property taxes in tax year 2023 was Orland Hills with 12.06%.\nThe percent of municipal EAV exempt from property taxes are greatest across Cook County’s south suburbs and lowest in the northern most suburbs of the county.\n\n\n\nFigure 4. Exempt EAV: City vs. Suburbs\n\n\nCode\n## makes table in margin for suburbs and city\ngeom_sums &lt;- muni_cl_sums |&gt; \n  filter(year == params$year) |&gt; \n  select(clean_name, muni_c_all_exemptions) |&gt;\n  mutate(clean_name = ifelse(is.na(clean_name), \"Unincorporated\", clean_name),\n         Geography = ifelse(clean_name == \"Chicago\", \"City\", \"Suburbs\"),\n         Geography = ifelse(is.na(clean_name), \"Unincorporated\", Geography),\n         Geography = factor(Geography, levels = c(\"Suburbs\", \"City\", \"Unincorporated\"))) |&gt;\n  group_by(Geography) |&gt;\n  summarize(\"ExemptEAV\" = sum(muni_c_all_exemptions, na.rm=TRUE))\n\ngeom_sums |&gt; \n  flextable() |&gt;\n  flextable::set_caption(caption =\"Includes all exemption types.\")\n\n\n\nGeographyExemptEAVSuburbs9,633,250,071City5,942,859,453\n\n\n\nCode\nmuni_cl_sums |&gt; \n  filter(year == params$year) |&gt; \n  select(clean_name, muni_c_exe_homeowner:muni_c_exe_vet_dis) |&gt;\n  mutate(clean_name = ifelse(is.na(clean_name), \"Unincorporated\", clean_name),\n    Geography = ifelse(clean_name == \"Chicago\", \"City\", \"Suburbs\"),\n         Geography = ifelse(is.na(clean_name), \"Unincorporated\", Geography),\n         Geography = factor(Geography, levels = c(\"Suburbs\", \"City\", \"Unincorporated\"))) |&gt;\n  group_by(Geography) |&gt;\n  summarize(\"GHE\" = sum(muni_c_exe_homeowner, na.rm=TRUE),\n            \"Senior Homestead\" = sum(muni_c_exe_senior, na.rm=TRUE),\n            \"Senior Freeze\" = sum(muni_c_exe_freeze, na.rm=TRUE),\n            \"Other Exemptions\" = sum(muni_c_exe_longtime_homeowner+muni_c_exe_disabled+muni_c_exe_vet_returning+ muni_c_exe_vet_dis_lt50 + muni_c_exe_vet_dis_50_69+muni_c_exe_vet_dis_ge70)) |&gt;\n  \n  pivot_longer(cols = c(`GHE`:`Other Exemptions`), names_to = \"Type\" ) |&gt;\n   mutate(Type = factor(Type, levels = c(\"GHE\", \"Senior Homestead\", \"Senior Freeze\", \"Other Exemptions\" \n                                         #\"Senior Freeze\", \"Senior Homestead\", \"GHE\"\n                                        )\n                                        )) |&gt;\n  ggplot(aes(x=Type, y = value/1e9, fill = Geography\n             )) +\n  \n  geom_col( position = \"dodge\" ) +\n  geom_text(aes(label = round(value/1e9, digits=1)), vjust=-0.5, position = position_dodge(.9)) +\n  theme_minimal() +\n  labs(title = paste0(\"Exempt EAV in Cook County, Tax Year \", params$year), \n       subtitle = \"by Type and Geography\", \n       y = \"EAV (Billions)\", x = \"Exemption Type\") + \n  scale_y_continuous(limits = c(0, 8)) +\n  scale_fill_manual(values = c(\"blue3\", \"deepskyblue3\", \"gray\") )\n\n\n\n\n\nFigure 3.3: Exempt EAV in Cook County Exemption use varies between suburban Cook County and the City of Chicago which may point to broader socioeconomic patterns as well as residents’ eligibility and update. Note: Our current calculations undervalue the disabled veterans exemption.\n\n\n\n\n\n\n\n\nExemption use varies between suburban Cook County (9,633,250,071 EAV) and the City of Chicago (5,942,859,453 EAV) , which may point to broader socioeconomic patterns as well as residents’ eligibility and uptake.\n\n\nFigure 5. Value of residential exemptions by type in Cook County over time, Tax Years 2006 - 2023\n\n\nCode\nmuni_cl_sums |&gt; \n  select(year, muni_c_exe_homeowner:muni_c_exe_vet_dis) |&gt;\n  filter(year &lt;= params$year) |&gt;\n  group_by(year) |&gt;\n  summarize(\"GHE\" = sum(muni_c_exe_homeowner, na.rm=TRUE),\n            \"Senior Homestead\" = sum(muni_c_exe_senior, na.rm=TRUE),\n            \"Senior Freeze\" = sum(muni_c_exe_freeze, na.rm=TRUE),\n            \"Other Exemptions\" = sum(muni_c_exe_longtime_homeowner + muni_c_exe_disabled + muni_c_exe_vet_returning+ muni_c_exe_vet_dis_lt50 + muni_c_exe_vet_dis_50_69+muni_c_exe_vet_dis_ge70, na.rm = T)) |&gt;\n  pivot_longer(cols = c(`GHE`:`Other Exemptions`), names_to = \"Type\" ) |&gt;\n  mutate(Type = factor(Type, levels = c(#\"GHE\", \"Senior Homestead\", \"Senior Freeze\", \n                                        \"Other Exemptions\", \"Senior Freeze\", \"Senior Homestead\", \"GHE\"))) |&gt;\n  ggplot(aes(x=year, y = value/1000000000, fill = Type)) +\n  \n  geom_bar( stat = \"identity\" ) + \n  theme_minimal() +\n  labs(title = \"Residential Exempt EAV in Cook County\", \n       subtitle = paste0(\"by Type and Geography, 2006-\", params$year), \n       y = \"EAV (Billions)\", x =\"\") +\n  scale_fill_manual(values = c(\"chartreuse2\",  \"darksalmon\", \"brown2\", \"blue4\" )) +\n                    scale_x_continuous(breaks = c(2006, 2010, 2015, 2020))\n\n\n\n\n\nFigure 3.4: Residential Exempt EAV in Cook County\n\n\n\n\n\n\n\n\nTrends in the total EAV reductions due to homestead exemptions reflect both real estate market shifts and the legislative changes in their availability, eligibility, and value.",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "exemp_report_2023.html#effect-on-composite-tax-rates",
    "href": "exemp_report_2023.html#effect-on-composite-tax-rates",
    "title": "Tax Year 2023",
    "section": "Effect on Composite Tax Rates",
    "text": "Effect on Composite Tax Rates\nFigure 6 will not be recreated but is just a bar chart of the change in tax rate in the table below\n\nTable 1. Change in composite property tax rates due to exemptions, tax year 2023.\n\n\nCode\nmuni_ratechange &lt;- read_csv(paste0(\"../Output/muni_ratechange_\", params$year, \"_test.csv\"))\n\n\nmuni_ratechange |&gt; \n  select(clean_name,  current_rate_avg, rate_noExe, change_noExe, final_tax_to_dist) |&gt; \n  mutate(change_noExe = round(change_noExe * 100, digits = 2)) |&gt;\n  DT::datatable(rownames = FALSE, colnames = c('Municipality' = 'clean_name','Current Comp. Rate' = 'current_rate_avg', 'Hypothetical Rate' = 'rate_noExe',  'Composite Tax Rate Change'='change_noExe', \n\n                       'Composite Levy' = 'final_tax_to_dist'),\n          caption = \"Table 1 in Report for all Municipalities: Current and Hypothetical Composite Tax Rates if GHE $0\") |&gt;\n  formatCurrency('Composite Levy', digits = 0) |&gt;\n  formatPercentage(columns = c(2,3), digits = 2)\n\n\n\n\nTable 3.2: Searchable table containing all municipalities and the hypothetical tax rate change if exempt EAV became taxable.\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nmuni_ratechange |&gt;\n  filter(!is.na(clean_name)) |&gt; \n  select(clean_name,  current_rate_avg, rate_noExe, change_noExe \n) |&gt;\n  mutate(across(c(current_rate_avg, rate_noExe, change_noExe ), ~.*100)) |&gt;\n  arrange(desc(change_noExe)) |&gt;\n  slice(c(1:5, 69:73, 121:125)) |&gt;\n    #slice(c(1:5, 58:62, 115:119)) |&gt;\n\n  flextable() |&gt; \n  border_remove() |&gt;\n  hline_top() |&gt;\n  hline(i = c(5,10)) |&gt;\n  \n  set_header_labels(\n    clean_name = \"Municipality\", \n    current_rate_avg = \"With Exemptions\",\n    rate_noExe = \"Without Exemptions\",\n    change_noExe = \"Percent Point Difference\"\n    \n  ) |&gt;\n  align(j = 2, align = \"right\") |&gt;\n  align(j=2, align = \"right\", part = \"header\") |&gt;\n  set_table_properties( layout = \"autofit\") |&gt; bold(i = 8)\n\n\n\n\nTable 3.3: Table 1 in Exemption Report. Shows the top 5, bottom 5, and median 5 municipalities, ranked by change in composite tax rate. Includes all exemption types in calculation of rate change.\n\n\n\nMunicipalityWith ExemptionsWithout ExemptionsPercent Point DifferencePhoenix27.4819.777.68Park Forest23.6118.505.07Riverdale25.3820.225.01Dolton20.1115.684.25Calumet City20.6917.023.96Roselle9.618.670.94Orland Hills9.047.950.93Bridgeview11.3710.440.92Morton Grove9.518.460.92Merrionette Park9.758.850.90Glencoe8.127.910.21Kenilworth8.348.160.18Winnetka7.697.510.18Hinsdale6.866.690.17Hodgkins9.148.760.06\n\n\n\n\n\n\n\nFigure 7. Map of Spatial Patterns in Composite Tax Rate Change\nChange in composite tax rate if exempt EAV was added back to the the taxable tax base (i.e. if there were no exemptions).\n\n\nCode\nmuni_ratechange  |&gt;\n    mutate(across(c(current_rate_avg, rate_noExe, change_noExe ), ~.*100)) |&gt;\n\n  left_join(nicknames, by = \"clean_name\") |&gt;\n  mutate(agency_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name),\n         shpfile_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name) ) |&gt;\n  full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) |&gt;\n\n  ggplot(aes(fill = change_noExe)) + \n  geom_sf(aes(geometry = geom), color = \"black\") + \n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n   scale_fill_stepsn(colors = c( \"#F7FEF5\",\n                                # \"#e4f1e0\",\n                                \"#d4f6cc\",\n                                \"#47ba24\",\n                                \"#1F6805\",\n                                \"#133C04\"),\n                        show.limits=TRUE, \n                     limits = c(0, 15),\n                     breaks = c(0, 2.5, 5, 7.5, 10, 15),\n                     na.value = NA,\n                        name = \"Rate Change from \\nExemptions\"  \n                    )\n\n\n\n\n\n\n\n\n\n\n\nCode\norder &lt;- burden_shift %&gt;% \n  as_tibble() %&gt;%\n  group_by(agency_name, clean_name) %&gt;%\n    summarize(tax_rate_current = median(tax_rate_current), \n            taxrate_new = median(taxrate_new),\n            taxrate_change = median(taxrate_change)) %&gt;%\n  arrange(taxrate_change)\n\nmedian(order$taxrate_change)\n\nburden_shift %&gt;%  \n  filter(taxrate_change &lt; 0.0027 |taxrate_change &gt; 0.06  |\n           taxrate_change &lt; (median(taxrate_change))+0.0007 & taxrate_change &gt; (median(taxrate_change))-0.00075\n         ) %&gt;% \n    filter(Alea_cat == \"Owner Occupied\") %&gt;%\n\n # filter(PropType == \"Single-Family\") %&gt;%\n  ungroup() %&gt;% \n  select(clean_name, tax_rate_current, taxrate_new, agency_name) %&gt;% \n  pivot_longer(c(\"tax_rate_current\", \"taxrate_new\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  left_join(order) %&gt;%\n  ggplot(aes(x = tax_rate*100, y= reorder(clean_name, taxrate_change)))+\n  geom_line(aes(group = clean_name))+ \n   geom_point(aes(color=type), size=3 )+\n  geom_hline(yintercept = 10.5, linetype =2)+\n    geom_hline(yintercept = 5.5, linetype =2)+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n               plot.title.position = \"plot\",\n    legend.position = \"none\",\n     #   panel.background = element_rect(fill='transparent'), #transparent panel bg\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n   )+\n        scale_color_brewer(palette=\"Paired\", labels = c(\"Exemptions\", \"No Exemptions\"), direction = 1)+\n\n  labs(title = \"Difference in Composite Tax Rate if there were No Exemptions\", \n       subtitle = \"Ordered by Change in Tax Rate: Highest, Median, and Smallest Differences\",\n       caption = \"Median change is 1.38 percentage points\",\n       x = \"Composite Tax Rate (%)\", y = \"\" )",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "exemp_report_2023.html#effect-on-tax-burdens",
    "href": "exemp_report_2023.html#effect-on-tax-burdens",
    "title": "Tax Year 2023",
    "section": "Effect on Tax Burdens",
    "text": "Effect on Tax Burdens\n\nFigure 8. Dolton example of Share of levy paid by property type\n\n\n\nCode\n#read_csv(paste0(\"../../Output/Dont_Upload/0_Joined_PIN_data_\", params$year, \".csv\") )\n\npin_data &lt;- read_csv(paste0(\"../Output/Dont_Upload/0_joined_PIN_data_\", params$year, \"_test.csv\"))\n\n\nmc_burden &lt;- read_csv(paste0(\"../Output/muni_mc_burden_\", params$year, \"_test.csv\"))\n\n\nburden_shift &lt;- read_csv(paste0(\"../Output/muni_burden_shift_\", params$year, \"_test.csv\"))\n\n\n\n\nCode\nmc_burden |&gt; \n  mutate(group = case_when(class_1dig == 2 ~ \"Class 2\",\n                         class_1dig == 3 ~ \"Class 3\",\n                         T ~ \"All Other Classes\"))|&gt;\n  \n  select(clean_name, group,  \n         pct_taxburden_current, hyp_pct_taxburden) |&gt;\n  group_by(clean_name, group) |&gt;\n  summarize(`Current Tax Burden Share` = sum(pct_taxburden_current),\n           `Tax Burden Share without Exemptions` =sum(hyp_pct_taxburden)) |&gt;\n  filter(clean_name==\"Dolton\") |&gt;\n  pivot_longer(cols = c(`Current Tax Burden Share`, `Tax Burden Share without Exemptions`), \n                names_to = \"type\", values_to = \"value\") |&gt;\n  ggplot(aes(x = group, y= value, group = type, fill = type) )+ \n  geom_col(position = \"dodge\") +  \n  geom_text(aes(label = scales::percent(round(value, digits=3))), \n              vjust=-0.5, position = position_dodge(.9)) + \n  theme_classic()+\n  theme(legend.title = element_blank(), legend.position = \"bottom\",\n        axis.title.x  = element_blank()) + \n  scale_y_continuous(label = scales::percent, name = \"Share of Levy\")\n\n\n\n\n\n\n\n\n\n\n\nCode\nburden_c2 &lt;- mc_burden |&gt; \n  filter(class_1dig == 2) |&gt; \n  select(clean_name, #pct_taxbase, \n         burden_shift,  pct_taxburden_current, hyp_pct_taxburden)\n\nburden_shift |&gt;  \n  select(-c(muni_levy, muni_taxbase,))|&gt;\n  select(clean_name, Group, pct_taxburden_current, hyp_pct_taxburden, everything()) |&gt;\n  DT::datatable(rownames = FALSE, \n                colnames = c(\n                  'Municipality' = 'clean_name',\n                  'Current Taxbase' = 'group_taxbase', \n                  'Hyp. Taxbase' = 'hyp_group_taxbase',  \n                  'Taxes Paid'='group_taxes_current', \n                  'Hyp Taxes Paid' = 'hyp_group_taxes',\n                  'Share of Levy'='pct_taxburden_current',\n                  'Share of Taxbase' = 'pct_taxbase_current',\n              \"Hyp. Share of Levy\"  =  'hyp_pct_taxburden',\n              \"Burden Shift\" = 'burden_shift'\n                  ),\n                caption = \"Table 2 in Report for all Municipalities: Current and Hypothetical Composite Tax Rates if GHE $0\"\n      ) |&gt;\n  formatCurrency(columns = c(5:8), digits = 0) |&gt;\n  formatPercentage(columns = c(3,4,9,10), digits = 2)\n\n\n\n\n\n\n\n\nCode\nmc_burden |&gt; \n    mutate(pct_taxburden_current = round(pct_taxburden_current * 100, digits = 2),\n           hyp_pct_taxburden = round(hyp_pct_taxburden * 100, digits = 2) ) |&gt;\n\n  filter(clean_name == \"Dolton\") |&gt; \n  select(`Major Class`= class_1dig, `Current Tax Burden` = pct_taxburden_current, `Alt. Burden` = hyp_pct_taxburden) |&gt; \n  arrange(desc(`Current Tax Burden`)) |&gt;\n  flextable::flextable()\n\n\n\n\nTable 3.4: Ungrouped values for donut chart in report. Tax Burden is the Revenue Collected from a Major Class / the combined levy from local taxing agencies (non-TIF) in Dolton, IL.\n\n\n\nMajor ClassCurrent Tax BurdenAlt. Burden272.2378.14523.2618.3011.511.1981.160.9130.810.6460.740.5990.250.2040.060.0500.000.00\n\n\n\n\n\n\n\nFigure 9. Change in Share of Tax Burden\nWas made in Excel. Not recoded for website yet.\n\n\n\nTable 2. Change in share of property tax burden\n\nTable 2: Change in the share of property tax burden due to exemptions for single-family, multi-family, and commercial and industrial properties, tax year 2023\n\n\nCode\nburden_shift |&gt;  \n    select(clean_name, Group, burden_shift) |&gt;\n  mutate(burden_shift = round(burden_shift, digits =4)) |&gt;\npivot_wider(id_cols=clean_name, names_from = Group, values_from = burden_shift) |&gt;\n  arrange((`Single-family`)) |&gt; \n  DT::datatable(rownames = FALSE) \n\n\n\n\nTable 3.5: Supporting Table for Table 2 Change in tax burden if EAV that is current tax exempt due to homestead exemptions became taxable. Measured in percentage point change.\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nburden_c2 |&gt; \n  mutate(burden_shift = burden_shift*100) |&gt; # multiply by 100 to make it percentage point change without formatting to percent below.\n  datatable(rownames = FALSE,\n          colnames = c('Municipality' = 'clean_name', \n                       'Burden Shift, Pct Pt Change' = 'burden_shift', \n                       'Current Tax Burden\\nC2 Tax Collected / Muni Levy' = 'pct_taxburden_current', \n                       \"Hypothetical Tax Burden\\nHyp. C2 Tax Collected / Muni Levy\" = 'hyp_pct_taxburden'),\n          caption = \"Table 2 in Exemption Report: Current Share of Taxable EAV and Share of Levy Paid by Class 2 Properties\"\n           ) |&gt;\n  formatPercentage(c(2,3,4), digits = 2) |&gt;\n  formatRound(c(2), digits = 2)\n\n\n\n\n\n\n\nFigure 9 Follow up. Current Tax Burden Map\n\n\nCode\nburden_c2 |&gt;\n  left_join(nicknames) |&gt;\n  mutate(agency_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name) ) |&gt;\n  full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) |&gt;\n\n  ggplot(aes(fill = pct_taxburden_current)) + \n  geom_sf(aes(geometry = geom), color = \"black\") + \n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n   scale_fill_stepsn(colors = c(\"#ffffcc\",\"#a1dab4\" ,\"#41b6c4\",\"#2c7fb8\", \"#253494\"),\n                        show.limits=TRUE, \n                     limits = c(0,1),\n                     na.value = \"gray70\",\n                     n.breaks = 6,\n                        name = \"Burden with \\nExemptions\", \n                     labels = scales::percent\n                     \n                    )+\n  labs(title = \"Current share of property tax burden\", \n       subtitle = \"for Class = 2 Property Types\")\n\n\n\n\n\n\n\n\n\n\n\n\nTable 3.\nDifference in taxbills for those that do and do not claim homeowner exemption\n\n\n\nCode\n## removes properties that have more than one exemption type\nC2_munistats_filtered &lt;- pin_data |&gt; \n  filter(class &gt; 199 & class &lt; 300) |&gt;\n    filter(exe_senior == 0 & \n           exe_freeze == 0 & \n           exe_longtime_homeowner == 0 & \n           exe_disabled == 0 & \n           exe_vet_returning == 0 & \n           exe_vet_dis_lt50 == 0 & \n           exe_vet_dis_50_69 == 0 & \n           exe_vet_dis_ge70 == 0 & \n           exe_abate == 0) |&gt;\n  group_by(clean_name)  |&gt;\n  arrange(av) |&gt;\nsummarize(\n    median_eq_av = round(median(eq_av)),\n    median_taxed_eav = round(median(eq_av-all_exemptions)),\n    median_av = round(median(av)), \n    avg_av = round(mean(av)),\n    avg_eq_av = round(mean(eq_av)),\n    avg_taxed_eav = round(mean(eq_av-all_exemptions)),\n\n    C2_pins_in_muni = n(),\n    C2_current_exemptions = sum(all_exemptions, na.rm = TRUE),\n    C2_HO_exemps = sum(exe_homeowner, na.rm = TRUE),\n  )\n\nC2_munistats_filtered |&gt;  \n  DT::datatable(rownames = FALSE, \n                colnames = c(\n                  'Median AV*eq_factor' = 'median_eq_av',\n                  'Average Eq.AV' = 'avg_eq_av',\n                  'Median Taxed EAV' = 'median_taxed_eav', \n                  'Median AV' = 'median_av',  \n                  'Average AV'='avg_av', \n                  'Class 2 Hyp Taxes Paid' = 'avg_taxed_eav',\n                  'Class 2 Pin Count'='C2_pins_in_muni',\n                  'Class 2 Exempt EAV' = 'C2_current_exemptions'\n                  ),\n                caption = \"Class 2 Descriptive Statistics\"\n      ) |&gt;\n  formatCurrency(columns = c(2:7, 9,10), digits = 0)\n\n\n\n\n\n\n\n\nCode\n## Grouped by if they have a $0 tax bill and had the GHE per muni\n\n\nmuni_median_summarytable &lt;- pin_data |&gt; \n  select(pin, av, class, tax_code_num, tax_bill_total, av_certified, exe_homeowner:exe_abate, clean_name, eq_av, all_exemptions, zero_bill, has_HO_exemp, taxed_eav, final_tax_to_dist, final_tax_to_tif) |&gt;\n\n  filter(class &gt; 199 & class &lt; 300) |&gt; \n  \n  # merge in muni residential median AV\n  left_join(C2_munistats_filtered |&gt; select(clean_name, median_av, median_eq_av, median_taxed_eav)) |&gt;\n  \n  left_join(muni_ratechange |&gt; select(clean_name, rate_noExe, rate_noGHE, rate_current)) |&gt;\n  # +/- 500 from municipalities median residential AV\n  filter(av &lt; median_av+200 & av &gt; median_av-200) |&gt;\n  \n  # Removes properties that received other types of exemptions\n  filter(exe_senior == 0 & \n           exe_freeze == 0 & \n           exe_longtime_homeowner == 0 & \n           exe_disabled == 0 & \n           exe_vet_returning == 0 & \n           exe_vet_dis_lt50 == 0 & \n           exe_vet_dis_50_69 == 0 & \n           exe_vet_dis_ge70 == 0 & \n           exe_abate == 0) |&gt;\n  \n  arrange(av) |&gt;\n  \n  mutate(#bill_current = (final_tax_to_dist + final_tax_to_tif),\n         bill_current = rate_current* taxed_eav,\n         bill_noexemps =  rate_noGHE*(eq_av-all_exemptions+exe_homeowner),\n         bill_change = bill_noexemps - bill_current) |&gt;\n  # \n  group_by(clean_name, \n           has_HO_exemp) |&gt; \n  \n  summarize(AV = median(median_av), # median_av was calculated earlier: C2 median AV for the muni \n            `Taxable EAV` = round(median(eq_av)),\n            `Taxed EAV` = round(median(taxed_eav)),\n            bill_cur = round(median(bill_current)),\n            bill_new = round(median(bill_noexemps)),\n            bill_change = round(median(bill_change)),\n            pincount=n(),\n            perceived_savings = round(median(all_exemptions*rate_current))\n            ) |&gt; \n  \n  # merge in clean_names variable\n  left_join(nicknames) |&gt;\n  \n  select(clean_name, has_HO_exemp, bill_cur, bill_new, bill_change, perceived_savings,  AV, `Taxable EAV`, `Taxed EAV`, \n         #everything() \n         ) #|&gt; select(-c(agency_number, agency_name))\n\nmuni_median_summarytable |&gt;\n  DT::datatable(rownames = FALSE, \n                colnames = c(\n                  'Claims GHE' = 'has_HO_exemp',\n                  'Current Bill' = 'bill_cur',\n                  'Hyp. Bill' = 'bill_new', \n                  'Bill Change' = 'bill_change',  \n                  'Perceived Savings'='perceived_savings'),\n                caption = \"Change in Tax Bill if Exempt EAV from GHE were added back to tax base.\")  |&gt;\n  formatCurrency(columns = c(3:9), digits = 0)\n\n\n\n\n\n\n\n\nCode\nmuni_median_summarytable |&gt;\n  filter(clean_name %in% c(\"Chicago\", \"Dolton\", \"Glencoe\")) |&gt;\n  mutate(across(bill_cur:`Taxed EAV`, scales::dollar )) |&gt;\n rename(Municipality = clean_name,\n                  'Claims GHE' = 'has_HO_exemp',\n                  'Current Bill' = 'bill_cur',\n                  'Hyp. Bill' = 'bill_new', \n                  'Bill Change' = 'bill_change',  \n                  'Perceived Savings'='perceived_savings' )  |&gt;\n  \n  flextable() \n\n\n\n\nTable 3.6: Table 3. Estimated Bill Change for a municipality’s median valued property if exempt EAV from the GHE were added to back to the tax base.\n\n\n\nMunicipalityClaims GHECurrent BillHyp. BillBill ChangePerceived SavingsAVTaxable EAVTaxed EAVChicago0$4,459$4,320-$139$0$20,999$63,339$63,339Chicago1$3,755$4,320$565$704$20,999$63,342$53,342Dolton0$7,214$6,135-$1,079$0$12,000$36,196$36,196Dolton1$5,221$6,135$914$1,993$12,000$36,196$26,196Glencoe0$24,247$23,770-$478$0$99,000$298,614$298,614Glencoe1$23,435$23,770$334$812$99,000$298,614$288,614\n\n\n\n\n\n\n\nCode\ncholton_15000_summarytable &lt;- pin_data |&gt; \n  \n  select(pin, av, class, tax_code_num, tax_bill_total, av_certified, exe_homeowner:exe_abate, clean_name, eq_av, all_exemptions, zero_bill, has_HO_exemp, taxed_eav, final_tax_to_dist, final_tax_to_tif) |&gt;\n  filter(clean_name %in% c(\"Chicago\", \"Dolton\", \"Glencoe\")) |&gt;\n  filter(between(av, 14800, 15200)) |&gt;\n\n  filter(class &gt; 199 & class &lt; 300) |&gt; \n  \n  # merge in muni residential median AV\n  left_join(C2_munistats_filtered |&gt; select(clean_name, median_av)) |&gt;\n  \n  left_join(muni_ratechange |&gt; select(clean_name, rate_noExe, rate_noGHE, rate_current)) |&gt;\n  # +/- 500 from municipalities median residential AV\n  # Removes properties that received other types of exemptions\n  filter(exe_senior == 0 & \n           exe_freeze == 0 & \n           exe_longtime_homeowner == 0 & \n           exe_disabled == 0 & \n           exe_vet_returning == 0 & \n           exe_vet_dis_lt50 == 0 & \n           exe_vet_dis_50_69 == 0 & \n           exe_vet_dis_ge70 == 0 & \n           exe_abate == 0 ) |&gt;\n  \n  arrange(av) |&gt;\n  \n  mutate(\n         bill_current = rate_current* taxed_eav,\n         bill_noexemps =  rate_noGHE*(eq_av-all_exemptions+exe_homeowner),\n         bill_change = bill_noexemps - bill_current) |&gt;\n  # \n  group_by(clean_name, \n           has_HO_exemp) |&gt; \n  \n  summarize(AV = median(av),\n    `Median AV in Muni` = first(median_av), # median_av was calculated earlier: C2 median AV for the muni \n            `EqAV` = round(median(eq_av)),\n            `Taxed EAV` = round(median(taxed_eav)),\n            bill_cur = round(median(bill_current)),\n            bill_new = round(median(bill_noexemps)),\n            bill_change = round(median(bill_change)),\n            pincount=n(),\n            perceived_savings = round(median(all_exemptions*rate_current))\n            ) |&gt; \n  \n  # merge in clean_names variable\n  left_join(nicknames) |&gt;\n  \n  select(clean_name, AV, has_HO_exemp, bill_cur, bill_new, bill_change, perceived_savings,  `Median AV in Muni`, `EqAV`, `Taxed EAV`\n         #everything() \n         ) |&gt;\n  mutate(across(bill_cur:`Taxed EAV`, scales::dollar )) |&gt;\n rename(Municipality = clean_name,\n                  'Claims GHE' = 'has_HO_exemp',\n                  'Current Bill' = 'bill_cur',\n                  'Hyp. Bill' = 'bill_new', \n                  'Bill Change' = 'bill_change',  \n                  'Perceived Savings'='perceived_savings' )  |&gt;\n  \n  flextable()\n  # DT::datatable(rownames = FALSE, \n  #               colnames = c(\n  #                 'Claims GHE' = 'has_HO_exemp',\n  #                 'Current Bill' = 'bill_cur',\n  #                 'Hyp. Bill' = 'bill_new', \n  #                 'Bill Change' = 'bill_change',  \n  #                 'Perceived Savings'='perceived_savings'),\n  #               caption = \"Change in Tax Bill for Properties with an Assessed Value of $15,000.\")  |&gt;\n  # formatCurrency(columns = c(2, 4:9), digits = 0)\n\ncholton_15000_summarytable\n\n\nTable that uses pins valued at ~$15,000. Creates unrealistic bill\nchange for some municipalities if they do not have properties valued at\n15K.MunicipalityAVClaims GHECurrent BillHyp. BillBill ChangePerceived SavingsMedian AV in MuniEqAVTaxed EAVChicago14,9990$3,185$3,085-$100$0$20,999$45,241$45,241Chicago14,9991$2,481$3,085$604$704$20,999$45,241$35,241Dolton15,0000$9,017$7,669-$1,348$0$12,000$45,244$45,244Dolton14,9991$7,024$7,668$645$1,993$12,000$45,241$35,241Glencoe14,9760$3,668$3,596-$72$0$99,000$45,172$45,172\n\n\n\n\nTable 4.\nMunicipalities with the largest and smallest reductions in tax base (as a share of residential EAV due to exemptions) and median property values\n\n\n\nCode\nmuni_sums |&gt; \n  filter(year == params$year) |&gt;\n  group_by(clean_name) |&gt; \n  summarize(pct_res_exempt = muni_fmv_exempt / muni_fmv_residential) |&gt;  \n  arrange(desc(pct_res_exempt) ) |&gt;\n    left_join(C2_munistats_filtered) |&gt; \n  mutate(prop_value = median_av*10,\n         pct_res_exempt = scales::percent(pct_res_exempt, accuracy = 0.01) ) |&gt;\n  mutate(across(c(median_eq_av:avg_taxed_eav, prop_value), scales::dollar)) |&gt;\n  select(Municipality = clean_name, `Share Res. Exempt` = pct_res_exempt,\n         `Median Prop. Value` = prop_value, everything())\n\n\n\n  \n\n\n\n\n\nFigure 10. Tax Burden Shift from Current GHE\nShare of municipal property tax levy paid by Class 2 properties with and without homestead exemptions, tax year 2023\n\n\nCode\n# as a dot graph ## \n\norder &lt;- mc_burden |&gt;\n  filter(class_1dig == 2) |&gt;\n    select(clean_name, pct_taxburden_current, burden_shift)\n\nslice &lt;-  mc_burden |&gt;\n  filter(class_1dig == 2) |&gt;\n    select(clean_name, pct_taxburden_current, burden_shift) |&gt;\n  arrange(pct_taxburden_current) |&gt;\n  slice(1:5, 63:67, 127:131)\n\n\n\nmedian_burden &lt;- median(order$pct_taxburden_current)\nmedian_shift &lt;- median(order$burden_shift)\n\n# median burden change is 5.9 percentage points\n# current median burden is 70.3% of the levy\n\nmc_burden |&gt; \n  filter(clean_name %in% slice$clean_name) |&gt;\n#filter(!clean_name %in% cross_county_lines$clean_name)|&gt;\n  filter(class_1dig == 2) |&gt;\n#  filter(burden_current &gt; 0.938 |burden_current &lt; .17 |\n #          ( (burden_current &lt; median(burden_current) + 0.01 )& (burden_current &gt; median(burden_current) - 0.01)) )|&gt; \n  ungroup() |&gt; \n      select(clean_name, pct_taxburden_current, hyp_pct_taxburden, burden_shift) |&gt;\n  arrange(burden_shift) |&gt;\n  pivot_longer(c(\"pct_taxburden_current\", \"hyp_pct_taxburden\"), \n               names_to = \"type\", values_to = \"pct_burden\") |&gt; \n  inner_join(order) |&gt;\n  ggplot(aes(x = pct_burden, \n             y= reorder(clean_name, - pct_taxburden_current)))+\n  # y= reorder(clean_name, burden_current)))+\n  geom_vline(xintercept = median_burden, linetype = 3)+\n  geom_line(aes(group = clean_name))+ \n  geom_hline(yintercept = 5.5, linetype = 2)+\n  geom_hline(yintercept = 10.5, linetype = 2)+\n  geom_point(aes(color=type), size=3 )+\n\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n plot.background = element_rect(fill='transparent', color=NA) \n  )+\n  scale_color_brewer(palette=\"Paired\", labels = c(\"Current Burden\", \"Burden if \\nNo Exemptions\" ), direction = 1) +\n  scale_x_continuous(labels = scales::percent) +\n\n  \n  labs(title = \"Change in Class 2 Residential Tax Burden\", \n       subtitle = \"Ordered by Current Tax Burden\",\n  x = \"Share of Levy (%)\", y = \"\" , \n  caption = paste0(\"Dotted line represents median Class 2 burden (\", round(median_burden*100), \"% of the levy).  \\nResidential Tax Burden is theshare of the property tax collected that was paid for by property owners with Class 2 properties.\")) +\n  \n    geom_label(label = \"Class 2 pays small share of \\nlevy; very little residential\", x=.32, y = 13, label.size = 1, size = 3)+\n  \n    geom_label(label = paste0(\"Class 2 pays median share of \\nlevy (\", round(median_burden*100), \"%), mix of land use\"), x=.42, y = 7.5, label.size = 1, size = 3) +\n  \n    geom_label(label = \"Class 2 pays nearly all of levy, \\nhighly residential\", x=.70, y = 3, label.size = 1,size = 3)\n\n\n\n\n\nFigure 3.5\n\n\n\n\n\n\n\n\n\n\nFigure 11. Zero Dollar Bills\n\n\nCode\nmuni_mc_sums |&gt; \n  left_join(nicknames) |&gt;\n  filter(major_class_code == 2) |&gt; \n  group_by(year, Triad) |&gt;\n  summarize(zerodollar_count = sum(zero_bill)) |&gt; \n  ggplot(aes(x=year, y = zerodollar_count, fill = Triad)) + \n  geom_bar(position = \"stack\", stat = \"identity\") + theme_minimal()+\n  theme(legend.position = \"top\")+\n  labs(title = element_text(\"Number of $0 Taxbills\")) +\n  scale_y_continuous(labels = scales::comma, limits = c(0, 35000), name = \"\")\n\n\n\n\n\nFigure 3.6: Number of tax bills that were $0 shown here is different than the value shown in the exemption report. This is due to missing disabeled veteran exemption amounts that were not identified when writing the original report.",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "exemp_report_2023.html#table-6---cost-of-covering-cook-countys-current-homestead-exemptions",
    "href": "exemp_report_2023.html#table-6---cost-of-covering-cook-countys-current-homestead-exemptions",
    "title": "Tax Year 2023",
    "section": "Table 6 - Cost of Covering Cook County’s current Homestead Exemptions",
    "text": "Table 6 - Cost of Covering Cook County’s current Homestead Exemptions\n\n\n\nCode\nclass8munis &lt;- read_csv(\"../Output/datarequests_Class8Munis.csv\")\n\n\ncross_county_lines &lt;- c(\"030440000\", \"030585000\", \"030890000\", \"030320000\", \"031280000\",\n                        \"030080000\", \"030560000\", \"031120000\", \"030280000\", \"030340000\",\n                        \"030150000\",\"030050000\", \"030180000\",\"030500000\", \"031210000\")\n\ntaxcodes_current &lt;- pin_data %&gt;% \n  group_by(tax_code_num)  %&gt;%\n  summarize(\n    av = sum(av),\n    taxed_eav = sum(taxed_eav),\n    equalized_AV = sum(eq_av),\n    pins_in_class = n(),\n    current_exemptions = sum(all_exemptions),\n    HO_exemps = sum(exe_homeowner),\n    tax_code_rate = first(tax_code_rate), \n    final_tax_to_dist = sum(final_tax_to_dist, na.rm = TRUE), # used as LEVY amount!!\n    final_tax_to_dist_AWM = sum(final_tax_to_dist_AWM, na.rm=TRUE),\n    final_tax_to_tif = sum(final_tax_to_tif, na.rm = TRUE),\n    tax_amt_exe = sum(tax_amt_exe, na.rm = TRUE), \n    tax_amt_pre_exe = sum(tax_amt_pre_exe, na.rm = TRUE), \n    tax_amt_post_exe = sum(tax_amt_post_exe, na.rm = TRUE),\n   # tif_share = mean(tif_share, na.rm=TRUE), # not used\n  ) %&gt;%\n  \n  mutate(total_bill_current = final_tax_to_dist + final_tax_to_tif) %&gt;%\n  rename(cur_comp_TC_rate = tax_code_rate) %&gt;%\n  mutate(current_taxable_eav = final_tax_to_dist/(cur_comp_TC_rate),\n         new_taxable_eav = final_tax_to_dist/(cur_comp_TC_rate) + HO_exemps,\n         new_taxable_eav2 = final_tax_to_dist/(cur_comp_TC_rate) + current_exemptions,\n\n         ) %&gt;%\n  mutate(\n    new_comp_TC_rate = (final_tax_to_dist / new_taxable_eav),\n        new_comp_TC_rate2 = (final_tax_to_dist / new_taxable_eav2),\n\n         ) %&gt;%\n  mutate(\n    new_comp_TC_rate = ifelse(is.nan(new_comp_TC_rate), cur_comp_TC_rate, new_comp_TC_rate),\n        new_comp_TC_rate2 = ifelse(is.nan(new_comp_TC_rate2), cur_comp_TC_rate, new_comp_TC_rate2),\n\n         ) %&gt;%\n  select(tax_code_num, cur_comp_TC_rate, new_comp_TC_rate, current_taxable_eav, new_taxable_eav, new_taxable_eav2, new_comp_TC_rate2, everything())\n\nbetter_cost_est_ghe = taxcodes_current |&gt; \n  summarize(better_cost_est = sum(new_comp_TC_rate*(HO_exemps)))\n                                            \nbetter_cost_est_allexe = taxcodes_current |&gt; \n  summarize(better_cost_est = sum(new_comp_TC_rate2*(current_exemptions)))\n\n\n\ntbl_southtriad_exemps &lt;- muni_cl_sums |&gt;\n  filter(Triad == \"South\") |&gt;\n  filter(!clean_name %in% cross_county_lines) |&gt;\n  filter(year == params$year) |&gt;\n  group_by(year) |&gt;\n  summarize(\n    'PINs' = sum(muni_c_pins_in_muni),\n    'PINs (w/ exemps.)' = sum(muni_c_has_HO_exemp),\n    \"EqAV\" = sum(muni_c_equalized_av),\n    'Taxed EAV' = sum(muni_c_current_taxable_eav),\n    'Exempt EAV' = sum(muni_c_all_exemptions),\n    'GHE' = sum(muni_c_exe_homeowner),\n    'Senior' = sum(muni_c_exe_senior),\n    'Senior Freeze' = sum(muni_c_exe_freeze),\n    'Other Exemps.' = sum(muni_c_all_exemptions - muni_c_exe_homeowner - muni_c_exe_senior - muni_c_exe_freeze )\n  ) |&gt;\n  pivot_longer(cols = c('PINs':'Other Exemps.'),\n               names_to = \"Metric\", values_to = \"Total\") |&gt;\n  select(-year)\ntbl_southtriad_exemps\n\n\n South Triad PIN Counts, Taxbase, &\nExemptions\n  \n\n\n\n\n\nCode\ntbl_class8muni_exemps &lt;- muni_cl_sums |&gt;\n  filter(clean_name %in% class8munis$clean_name) |&gt;\n  filter(!clean_name %in% cross_county_lines) |&gt;\n  filter(year == params$year) |&gt;\n  group_by(year) |&gt;\n  summarize(\n    'PINs' = sum(muni_c_pins_in_muni),\n    'PINs (w/ exemps.)' = sum(muni_c_has_HO_exemp),\n    \"EqAV\" = sum(muni_c_equalized_av),\n    'Taxed EAV' = sum(muni_c_current_taxable_eav),\n    'Exempt EAV' = sum(muni_c_all_exemptions),\n    'GHE' = sum(muni_c_exe_homeowner),\n    'Senior' = sum(muni_c_exe_senior),\n    'Senior Freeze' = sum(muni_c_exe_freeze),\n    'Other Exemps.' = sum(muni_c_all_exemptions -muni_c_exe_homeowner- muni_c_exe_senior - muni_c_exe_freeze )\n  ) |&gt;\n  pivot_longer(cols = c('PINs':'Other Exemps.'),\n               names_to = \"Metric\", values_to = \"Total\") |&gt;\n  select(-year)\ntbl_class8muni_exemps\n\n\n Municipalities Eligiblef or Class 8 Incentive Properties -\nPIN Counts, Taxbase, & Exemptions\n  \n\n\n\n\n\nCode\ntbl &lt;- muni_cl_sums |&gt;\n  filter(!clean_name %in% cross_county_lines) |&gt;\n  filter(year == params$year) |&gt;\n  group_by(year) |&gt;\n  summarize(\n    'PINs' = sum(muni_c_pins_in_muni),\n    'PINs (w/ exemps.)' = sum(muni_c_has_HO_exemp),\n    \"EqAV\" = sum(muni_c_equalized_av),\n    'Taxed EAV' = sum(muni_c_current_taxable_eav),\n    'Exempt EAV' = sum(muni_c_all_exemptions),\n    'GHE' = sum(muni_c_exe_homeowner),\n    'Senior' = sum(muni_c_exe_senior),\n    'Senior Freeze' = sum(muni_c_exe_freeze),\n    'Other Exemps.' = sum(muni_c_all_exemptions - muni_c_exe_homeowner- muni_c_exe_senior - muni_c_exe_freeze )\n  ) |&gt;\n  pivot_longer(cols = c('PINs':'Other Exemps.'),\n               names_to = \"Metric\", values_to = \"Total\") |&gt;\n  select(-year) \ntbl\n\n\n PIN Counts, Taxbase, & Exemptions for Municipalities with\na majority of their Taxbase within Cook County\n  \n\n\n\nIt would take $833,230,725 to cover the cost of the GHE without the tax rate increasing from the hypothetical rate to the current rate.\nIt would take $1,254,058,131 to cover the cost of all exemption without the tax rate increasing from the hypothetical rate to the current rate.\n\nNot finished for class 8 munis or south triad totals. But done the same way as GHE and all exemption scenarios.\n\n\nAdditional notes\nMultiple ways to measure “burden”:\n\nShare of tax base = (taxed EAV / taxed EAV in Muni)\n\nTax Burden = tax paid / levy\n\nEffective rate = tax paid / property value",
    "crumbs": [
      "Exemption Whitepaper",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2021.html",
    "href": "exemption_addendum_2021.html",
    "title": "Tax Year 2021",
    "section": "",
    "text": "Which taxpayers benefit the most and least from homestead exemptions?",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2021.html#which-taxpayers-benefit-the-most-and-least-from-homestead-exemptions",
    "href": "exemption_addendum_2021.html#which-taxpayers-benefit-the-most-and-least-from-homestead-exemptions",
    "title": "Tax Year 2021",
    "section": "",
    "text": "Table 1. Comparison of Tax Bills for Median Assessed Value (AV) Class 2 Properties in Selected Municpalities under the Status Quo and Alternative Scenario\n\n\n\nCode\ntax_bill_change_HO &lt;- c2pins %&gt;% \n  left_join(muni_rates) |&gt;\n  filter(av &gt; 0) %&gt;% \n  arrange(av) %&gt;%\n  mutate(#eq_av = av_clerk*eq_factor,\n         bill_current = (taxed_eav*tax_code_rate),\n         bill_noexemps =  rate_noGHE*(taxed_eav+exe_homeowner),\n         bill_change = bill_noexemps - bill_current) %&gt;%\n  group_by(clean_name, has_HO_exemp) %&gt;% \n  summarize(median_AV = median(av),\n            median_EAV = median(taxed_eav),\n            median_bill_cur = round(median(bill_current)),\n            median_bill_new = round(median(bill_noexemps)),\n            median_change = round(median(bill_change)),\n            pincount=n(),\n            perceived_savings = median(exe_homeowner*tax_code_rate)\n  )\n\ntax_bill_change_HO |&gt; \n  filter(clean_name %in% c(\"Park Forest\", \"Phoenix\", \"Winnetka\", \"Riverdale\")) |&gt;\n  mutate(across(c(median_AV:median_change, perceived_savings), scales::dollar) ) |&gt;\n  rename( 'Municipality' = 'clean_name',\n                  'Claims GHE' = 'has_HO_exemp',\n                  'Current Bill' = 'median_bill_cur',\n                  'Hyp. Bill' = 'median_bill_new', \n                  'Bill Change' = 'median_change',  \n                  'Perceived Savings'='perceived_savings') |&gt;\n  flextable::flextable()\n\n\n\n\nTable 4.1: Change in Tax Bill for Properties with an Assessed Value of $15,000. AV stands for “assessed value” “Tax calculator reduction” refers to the exemption values shown on the tax bill received by taxpayers. Values are estimated using an average of the properties with an AV within $1,000 of it’s municipality’s median AV to enlarge the number of observations. Thus, our calculations do not precisely represent the median.\n\n\n\nMunicipalityClaims GHEmedian_AVmedian_EAVCurrent BillHyp. BillBill ChangepincountPerceived SavingsPark Forest0$5,703.50$17,125.90$7,511$5,316-$1,5341,840$0.00Park Forest1$6,968.00$7,611.83$3,311$5,462$2,3153,436$4,394.30Phoenix0$2,000.50$6,006.90$1,799$1,267-$532522$0.00Phoenix1$3,668.00$884.71$265$2,110$1,700474$2,995.40Riverdale0$5,534$16,616.94$5,201$4,141-$1,0571,544$0.00Riverdale1$6,056$6,634.96$2,082$4,130$1,9792,391$3,137.50Winnetka0$71,071.00$213,405$18,652$18,033-$4221,316$0.00Winnetka1$85,822.50$245,686$21,252$21,601$3573,162$864.30\n\n\n\n\n\n\n\nFigure 2. Value of Median Residential Property Indifferent to Elimination of GHE\n\n\nCode\nmuni_breakeven_points &lt;- c2pins |&gt;\n  left_join(muni_rates) |&gt;\n  filter(exe_homeowner == 10000) %&gt;% \n  filter(exe_senior == 0 & \n           exe_freeze == 0 & \n           exe_longtime_homeowner == 0 & \n           exe_disabled == 0 & \n           exe_vet_returning == 0 & \n           exe_vet_dis_lt50 == 0 & \n           exe_vet_dis_50_69 == 0 & \n           exe_vet_dis_ge70 == 0 & \n           exe_abate == 0  &\n           exe_missing_disvet == 0) %&gt;%\n  \n  group_by(clean_name) %&gt;%\n  summarize(\n    median_AV = median(av),     # median class 2 AV for properties that did claim the GHE but not other exemptions\n    bill_current = mean(eav_postexemptions * tax_code_rate), # money collected by non-TIF agencies\n    \n    bill_noGHE = mean(rate_noGHE * (eav_postexemptions+exe_homeowner)), # this uses tax code tax rate\n   # rate_change = mean(tax_code_rate - tc_hyp_taxrate),   # avg tax code level rate change \n    muni_avg_rate_change = mean(tax_code_rate - rate_noGHE),\n    # nobillchange_propertyEAV = round(mean(exe_homeowner * \n    #                                         (tax_code_rate / (tax_code_rate-tc_hyp_taxrate)))), #   \n     nobillchange_propertyEAV_muni = round(mean(exe_homeowner *\n                                                 (rate_current/(rate_current-rate_noGHE) )))\n  ) |&gt; \n  mutate(nochange_av = nobillchange_propertyEAV_muni / eq_factor,\n         nochange_av_muni = nobillchange_propertyEAV_muni/ eq_factor,\n         ) \n\n\n\n\nmuni_breakeven_points %&gt;%       \n  filter(clean_name %in% c(\"Chicago\",\"Park Forest\", \"Phoenix\", \"Riverdale\", \"Winnetka\")) |&gt;\n  ggplot(aes(y=median_AV, x = clean_name)) +\n  geom_col()+\n    geom_text(aes(y=median_AV + 3000, label = round(median_AV) ) ) +\n  scale_y_continuous(labels = scales::dollar) +\n  theme_classic() +\n  scale_x_discrete(label = c(\"Chicago\",\"Park Forest\", \"Phoenix\", \"Riverdale\", \"Winnetka\")) + \n  labs(y = \"Median Residential AV\", x = \"\", \n       title = \"Median Residential Property Assessed Value - All Class 2 property Types\")\n\nmuni_breakeven_points %&gt;%       \n  filter(clean_name %in% c(\"Chicago\",\"Park Forest\", \"Phoenix\", \"Riverdale\", \"Winnetka\")) |&gt;\n  ggplot(aes(y=nochange_av, x = clean_name)) +\n  geom_col() +\n  geom_text(aes(y=nochange_av + 3000, label = round(nochange_av)) ) +\n  scale_y_continuous(labels = scales::dollar) +\n  theme_classic() +\n  scale_x_discrete(label = c(\"Chicago\", \"Park Forest\", \"Phoenix\", \"Riverdale\", \"Winnetka\")) + \n  labs(y = \"Breakeven Point - AV\", x = \"\", \n  title = \"Residential Property AV Breakeven Point\", \n  caption = \"Residential properties above these values would have their bills decrease if the GHE were eliminated\n       (if they had claimed the GHE before)\")\n\n\n\n\nMedian property values vary widely across Cook County.\n\n\n\n\n\n\n\nBreak even points also vary across municipalities, sometimes by orders of magnitude. Breakeven points are always higher than the median property within a municipality.\n\n\n\n\nMedian Residential Property and Breakeven Point\n\nOf homeowners who take the GHE, those that gain the largest monetary benefit from the exemption in proportion to their home values are those who own below-average valued properties that are in a municipality with relatively high tax rates. Property owners who benefit the least from taking the exemption (again, relative to the value of their homes) are those with above-average valued homes in jurisdictions with low tax rates. Note that these are not the same homeowners who benefit the most in absolute dollar terms—that outcome depends on both the absolute and relative value of the property and the composition of properties within the jurisdiction.\n\n\nCode\nmuni_breakeven_points %&gt;%\n # filter(nochange_av &lt; 300000) %&gt;%\n  ggplot(aes(y=nochange_av, \n             x = median_AV, \n             label=clean_name\n             )) +\n  geom_abline(intercept = 0, slope = 1, lty = 2, alpha = .4) +\n  geom_point(aes(alpha = .5)) +\n # geom_smooth(method = \"lm\" )+\n  geom_text(aes(y = (nochange_av-5000), x = (median_AV)), size = 2)+\n  theme_classic() +\n  scale_x_continuous(labels = scales::dollar) +\n  scale_y_continuous(labels = scales::dollar) +\n  theme(legend.position = \"none\")+\n  labs(y = \" Breakeven Point\", \n       x = \"Median AV - Class 2 Properties in Municipality\", \n      # title = \"Some highly valued homes would have lower tax bills if the GHE were eliminated\", \n       #caption = \"The breakeven point is the assessed values at which a major class 2 \n     #  property would not have their taxbill change if the GHE were eliminated.\"\n     )\n\n\n\n\n\n\nFigure 4.1: Includes all municipalities\n\n\n\n\n\n\n\n\n\nCode\nmuni_breakeven_points %&gt;%\n  filter(nochange_av &lt; 300000) %&gt;%\n  ggplot(aes(y=nochange_av, \n             x = median_AV, \n             label=clean_name\n             )) +\n  geom_abline(intercept = 0, slope = 1, lty = 2, alpha = .4) +\n\n  geom_point(aes(alpha = .5)) +\n  \n  geom_point(data = (muni_breakeven_points %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Riverdale\",\"Dolton\"))), aes(y = nochange_av, x = median_AV, color = \"red\"), size = 3) +\n  ggrepel::geom_label_repel(data = (muni_breakeven_points %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Riverdale\", \"Dolton\"))), aes(y = (nochange_av), x = (median_AV)), size = 3)+\n  theme_classic() +\n  theme(panel.background = element_blank()) + \n  scale_x_continuous(labels = scales::dollar, expand = c(0,0), limits = c(0,170000) ) +\n  scale_y_continuous(labels = scales::dollar, expand = c(0,0), limits = c(0,170000) ) +\n    theme(legend.position = \"none\") +\n\n  labs(title = \"Municipalities' Median AV & Breakeven Point \\nClass 2 Properties Only\",\n    y = \"Breakeven Point\", \n       x = \"Median AV\", \n # caption = \"The breakeven point is the assessed values at which a major class 2 property would not have their taxbill change if the \n # GHE were eliminated. Excludes outliers: University Park, Bedford Park, McCook, Hodgkins, and Rosemont. Class 2 properties that had\n # claimed the GHE would have lower taxbills even if the GHE were removed if the AV is above the breakeven point.\"\n ) + coord_fixed()\n\n#ggsave(\"breakevenpoint.svg\", bg = \"transparent\")\n\n\n\n\n\nFigure 4.2: The breakeven point is the assessed values at which a major class 2 property would not have their taxbill change if the GHE were eliminated.",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2021.html#how-progressive-are-exemptions",
    "href": "exemption_addendum_2021.html#how-progressive-are-exemptions",
    "title": "Tax Year 2021",
    "section": "How progressive are exemptions?",
    "text": "How progressive are exemptions?\n\nFigure 3. Ratio of Tax Bills to AV for 25th and 75th Percentile AV Class 2 Properties with $10,000 GHE\nFor the different exemption scenarios, we created new exemption variables for alternate exemption amounts that can be subtracted from a properties equalized AV.\n\nex. For exe_neg10 all exemption amounts are equal to zero.\nFor exe_0, This variable should be the same as the current tax system since we did not add or remove any exempt EAV to the PIN. If the EAV for a PIN is less than 10000 EAV and they did claim the general homestead exemption, then their exempt EAV is equal to their EAV.\nIf the exempt EAV allowable for the GHE was increased to 20,000 EAV, then the variable exe_plus10 is used.\n\n\n\nCode\npin_data &lt;- pin_data %&gt;% \n  left_join(class_dict, by = c(\"class\" = \"class_code\")) %&gt;%\n  mutate(\n \n    tif_increment_eav = final_tax_to_tif / tax_code_rate,\n    \n    nontif_eav_preexe = av_clerk*eq_factor - tif_increment_eav,\n    nontif_eav_postexe = av_clerk*eq_factor - tif_increment_eav - all_exemptions,\n    \n    eav_postexemptions = av_clerk*eq_factor - all_exemptions,\n    eav_preexemptions = av_clerk*eq_factor) |&gt;\n  ## Create variables for alternate exemption amounts that can be subtracted from a properties equalized AV\n  mutate(\n    eav = eav_preexemptions,\n    exe_neg10 = 0,\n         \n      # exe_0 implies no additional or removed EAV. Current tax system. \n         exe_0 = ifelse(eav &lt; 10000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;10000 & exe_homeowner!=0, 10000, 0 )),  # no change in current exemptions\n         exe_plus10 = ifelse(eav &lt; 20000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;20000 & exe_homeowner!=0, 20000, 0 )),\n         exe_plus20 = ifelse(eav &lt; 30000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;30000 & exe_homeowner!=0, 30000, 0 ) ),\n         exe_plus30 = ifelse(eav &lt; 40000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;40000 & exe_homeowner!=0, 40000, 0) ),\n         exe_plus40 = ifelse(eav &lt; 50000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;50000 & exe_homeowner!=0, 50000, 0) ),\n         mil_home = ifelse(major_class_code == 2 & av*10 &gt; 1000000, 1, 0))\n\n\n# all pins in munis fully within cook county that are some form of single-family, detached home\nsingfam_pins &lt;- pin_data %&gt;% \n  filter(Option2 == \"Single-Family\")\n\n\n\n\nCode\n# Calculates tax rates for all exemption scenarios.\nscenario_calcs &lt;- pin_data %&gt;%    \n  group_by(clean_name) %&gt;%\n\n    summarize(MuniLevy = round(sum(final_tax_to_dist, na.rm = TRUE)), # amount billed by munis with current exemptions in place\n            current_nonTIF_EAV_post_exemps = sum(final_tax_to_dist/(tax_code_rate), na.rm = TRUE),\n            current_TIF_increment_EAV = sum(final_tax_to_tif/(tax_code_rate), na.rm=TRUE),  \n            current_Exempt_EAV = sum(all_exemptions, na.rm=T), \n            current_GHE = sum(exe_homeowner, na.rm=TRUE),\n            Total_EAV = sum(all_exemptions+(final_tax_to_dist+final_tax_to_tif)/(tax_code_rate), na.rm = TRUE),\n            exe_neg10 = sum(exe_neg10),\n            exe_0 = sum(exe_0), # no change, for comparison\n            exe_plus10 = sum(exe_plus10),\n            exe_plus20 = sum(exe_plus20),\n            exe_plus30 = sum(exe_plus30),\n            exe_plus40 = sum(exe_plus40),\n            mil_home = sum(mil_home)\n            ) %&gt;%\n\n  # remove all GHE (up to 10,000 EAV added back to base per PIN), \n  # add exe_homeowner back to taxable base\n  mutate(neg10_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE,    # adds GHE exempt EAV back to taxable base and decreases tax rates\n         plus10_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE - exe_plus10, # will increase tax rates\n         plus20_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE - exe_plus20,\n         plus30_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE - exe_plus30,\n         plus40_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE - exe_plus40,\n         scenario_noexemptions_taxable_eav = Total_EAV - current_TIF_increment_EAV) %&gt;%\n  \n  mutate(tr_neg10 = MuniLevy / neg10_taxable_eav,\n         tr_nochange = MuniLevy / current_nonTIF_EAV_post_exemps,\n         tr_plus10 = MuniLevy / plus10_taxable_eav,\n         tr_plus20 = MuniLevy / plus20_taxable_eav,\n         tr_plus30 = MuniLevy / plus30_taxable_eav,\n         tr_plus40 = MuniLevy / plus40_taxable_eav, \n         tax_rate_current = MuniLevy/current_nonTIF_EAV_post_exemps,\n         taxrate_noexemps = MuniLevy /(Total_EAV - current_TIF_increment_EAV  ),\n         taxrate_noTIFs = MuniLevy / (Total_EAV - current_Exempt_EAV),\n         taxrate_noTIFs_orExemps = MuniLevy / Total_EAV) %&gt;%\n  select(clean_name, MuniLevy, tr_neg10:taxrate_noTIFs_orExemps, everything())\n\nscenario_taxrates &lt;- scenario_calcs %&gt;%  \n  select(clean_name, MuniLevy, tr_neg10:taxrate_noTIFs_orExemps) \n\nscenario_taxrates |&gt; \n  select(-c(tax_rate_current:taxrate_noTIFs_orExemps)) |&gt;\n  #mutate(across(.cols=(tr_neg10:tr_plus40), s, accuracy = 0.01)) |&gt;\n  rename(Municipality = clean_name,\n        `Composite Levy` = MuniLevy,\n    `Rate if \\nGHE=0K` = tr_neg10, \n         `Current\\nTax Rate`= tr_nochange, \n         `Rate if\\nGHE=20K`= tr_plus10, \n         `Rate if\\nGHE=30K` = tr_plus20, \n         `Rate if\\nGHE=40K` = tr_plus30, \n         `Rate if\\nGHE=50K` = tr_plus40) |&gt; \n  DT::datatable(rownames = FALSE)  |&gt;\n  formatCurrency(columns = c(2), digits = 0) |&gt;\n  formatPercentage(3:8, digits = 1)\n\n\n\n\n\n\n\n\nCode\nmunis_billchange &lt;- munis_ranked %&gt;% \n    left_join(scenario_taxrates) %&gt;%\n\n  mutate(\n    eav = eq_av,\n    exe_neg10 = 0,\n         \n      # exe_0 implies no additional or removed EAV. Current tax system. \n         exe_0 = ifelse(eav &lt; 10000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;10000 & exe_homeowner!=0, 10000, 0 )),  # no change in current exemptions\n         exe_plus10 = ifelse(eav &lt; 20000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;20000 & exe_homeowner!=0, 20000, 0 )),\n         exe_plus20 = ifelse(eav &lt; 30000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;30000 & exe_homeowner!=0, 30000, 0 ) ),\n         exe_plus30 = ifelse(eav &lt; 40000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;40000 & exe_homeowner!=0, 40000, 0) ),\n         exe_plus40 = ifelse(eav &lt; 50000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;50000 & exe_homeowner!=0, 50000, 0) ),\n         mil_home = ifelse(av*10 &gt; 1000000, 1, 0)) |&gt;\n    mutate(,\n    # current bill = current tax rate * portion of levy billed\n         equalized_AV = av_clerk*eq_factor,\n         \n   # ## Made negative tax bills!! ## #\n          bill_neg10 = tr_neg10*(equalized_AV-all_exemptions+ exe_homeowner -exe_neg10),\n\n         bill_current = tax_code_rate*(equalized_AV-all_exemptions),\n         bill_plus10 =  tr_plus10*(equalized_AV-all_exemptions+ exe_homeowner -exe_plus10),\n         bill_plus20 = tr_plus20*(equalized_AV-all_exemptions+ exe_homeowner -exe_plus20),\n         bill_plus30 = tr_plus20*(equalized_AV-all_exemptions+ exe_homeowner -exe_plus30),\n         bill_plus40 = tr_plus20*(equalized_AV-all_exemptions+ exe_homeowner -exe_plus40),\n    \n    # ## make bills $1 if they had been negative.\n         bill_neg10 = ifelse(bill_neg10 &lt; 1, 1, bill_neg10),\n         bill_current = ifelse(bill_current &lt; 1, 1, bill_current),\n         bill_plus10 = ifelse(bill_plus10 &lt; 1, 1, bill_plus10),\n         bill_plus20 = ifelse(bill_plus20 &lt; 1, 1, bill_plus20),\n         bill_plus30 = ifelse(bill_plus30 &lt; 1, 1, bill_plus30),\n         bill_plus40 = ifelse(bill_plus40 &lt; 1, 1, bill_plus40),\n\n         )%&gt;%\n  mutate(\n         zerodol_bills_ghe0 = ifelse(bill_neg10 &lt; 5, 1, 0),\n         zerodol_bills_current = ifelse(bill_current &lt; 5, 1, 0),\n         zerodol_bills_ghe20 = ifelse(bill_plus10 &lt; 5, 1, 0),\n         zerodol_bills_ghe30 = ifelse(bill_plus20 &lt; 5, 1, 0),\n         zerodol_bills_ghe40 = ifelse(bill_plus30 &lt; 5, 1, 0),\n         zerodol_bills_ghe50 = ifelse(bill_plus40 &lt; 5, 1, 0),\n  ) %&gt;%\n  ungroup() |&gt;\n  group_by(clean_name, rank, has_HO_exemp) %&gt;% \n  summarize(median_AV = round(median(av)),\n            median_EAV = round(median(eav)),\n            mean_bill_neg10 = round(mean(bill_neg10, na.rm=TRUE)),\n            mean_bill_cur = round(mean(bill_current, na.rm=TRUE)),\n            mean_bill_plus10 = round(mean(bill_plus10, na.rm=TRUE)),\n            mean_bill_plus20 = round(mean(bill_plus20, na.rm=TRUE)),\n            mean_bill_plus30 = round(mean(bill_plus30, na.rm=TRUE)),\n            mean_bill_plus40 = round(mean(bill_plus40, na.rm=TRUE)),\n            \n            tr_neg10 = round(mean(tr_neg10*100), digits = 2), \n            cur_comp_TC_rate = round(mean(tax_code_rate*100), digits = 2),\n            tr_plus10 = round(mean(tr_plus10*100), digits = 2),\n            tr_plus20 = round(mean(tr_plus20*100), digits = 2),\n            tr_plus30 = round(mean(tr_plus30*100), digits = 2),\n            tr_plus40 = round(mean(tr_plus40*100), digits = 2),\n            pincount=n(),\n            zerodol_bills_ghe0 = sum(zerodol_bills_ghe0),           \n            zerodol_bills_current = sum(zerodol_bills_current),\n            zerodol_bills_ghe20 = sum(zerodol_bills_ghe20),\n            zerodol_bills_ghe30 = sum(zerodol_bills_ghe30),\n            zerodol_bills_ghe40 = sum(zerodol_bills_ghe40),\n            zerodol_bills_ghe50 = sum(zerodol_bills_ghe50),\n\n\n  ) %&gt;%\n  mutate(clean_name = ifelse(clean_name == \"Hazelcrest\", \"Hazel Crest\", clean_name)) %&gt;%\n  arrange(has_HO_exemp, rank)\n\n\n\n\n\nratios &lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(currbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_cur/median_AV, NA)) %&gt;%\n  mutate(currbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_cur/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(currbill_to_AV_25 = max(currbill_to_AV_25, na.rm=TRUE),\n            currbill_to_AV_75 = max(currbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = currbill_to_AV_25/currbill_to_AV_75) %&gt;% filter(muni_ratio_25to75 &gt; 0.01)\n\n\n\nggplot(data = ratios, aes(y = currbill_to_AV_25, x = currbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1, lty = 2, alpha = .4) +\n  geom_point(data = ratios, aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = currbill_to_AV_25, x = currbill_to_AV_75), size = 2, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = currbill_to_AV_25, x = currbill_to_AV_75, color = \"red\"), size = 2)+\n\n  theme_classic() +\n  theme(legend.background = element_rect(fill = \"transparent\"), \n        legend.box.background = element_rect(fill = \"transparent\"), \n        panel.background = element_rect(fill = \"transparent\"), \n        panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank(), \n        plot.background = element_rect(fill = \"transparent\", \n                                       color = NA) ) +\n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n   scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") +\n  labs(title=\"\", y=\"Tax Burden as a Share of AV \\n(25th Percentile)\", x=\"Tax Burden as a Share of AV \\n(75th Percentile)\", subtitle = \"Current Tax System, GHE = 10,000 EAV\") + coord_fixed()\n\n\n\n\n\n\n\n\n\n\nCode\npin_data %&gt;%\n  filter(av &lt; 300000) %&gt;% # just to see the histogram better\n  ggplot( aes(x=av)) +\n  geom_histogram(bins = 50)  +\n  theme_classic()+\n  labs(title = \"Cook County Class 2 Residential PIN Distribution of AV\", \n       x = \"Assessed Value ($)\", y=\"# of Pins\", \n       caption = \"Dropped PINs with AVs over $300,000 for better visual of histogram bins.\") +\n  scale_x_continuous(label = scales::dollar) +\n  scale_y_continuous(label = scales::comma)\n\n\nsingfam_pins %&gt;%\n filter(av &lt; 300000) %&gt;% # just to see the histogram better\n  \n  ggplot( aes(x=av)) +\n  geom_histogram(bins = 50)  +\n  theme_classic()+\n  labs(title = \"Cook County Single-Family PIN Distribution of AV\", \n       x = \"Assessed Value ($)\", y=\"# of Pins\", \n       caption = \"Dropped PINs with AVs over $300,000 for better visual of histogram bins.\"\n       ) +\n  scale_x_continuous(label = scales::dollar)+\n  scale_y_continuous(label = scales::comma)\n\n\n\n\n\n\nMajor Class 2 Properties\n\n\n\n\n\n\n\nSingle-family subgroup of C2 Properties\n\n\n\n\n\n\n\nDistribution of Assessed Values: Class 2 Properties vs Single-Family Properties There is a difference in the assessed values depending on if you use all 200 level properties or only a subset of them. All figures and tables were created for both options when writing the report as a robustness check.",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2021.html#what-would-happen-if-the-ghe-value-were-increased",
    "href": "exemption_addendum_2021.html#what-would-happen-if-the-ghe-value-were-increased",
    "title": "Tax Year 2021",
    "section": "What would happen if the GHE value were increased?",
    "text": "What would happen if the GHE value were increased?\n\nFigure 4. Effect of Changing the GHE on Progressivity\n\nCode\nratios &lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(currbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_neg10/median_AV, NA)) %&gt;%\n  mutate(currbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_neg10/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(GHE_0_bill_to_AV_25 = max(currbill_to_AV_25, na.rm=TRUE),\n            GHE_0_bill_to_AV_75 = max(currbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = GHE_0_bill_to_AV_25/GHE_0_bill_to_AV_75) \n\n\nggplot(data = ratios, aes(y = GHE_0_bill_to_AV_25, x = GHE_0_bill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = GHE_0_bill_to_AV_25, x = GHE_0_bill_to_AV_75, label = clean_name), size = 3)+\n    geom_point(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = GHE_0_bill_to_AV_25, x = GHE_0_bill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") +\n  labs(title = \"GHE = $0 EAV\", x = \"\", y = \"\")\nratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(currbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_cur/median_AV, NA)) %&gt;%\n  mutate(currbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_cur/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(currbill_to_AV_25 = max(currbill_to_AV_25, na.rm=TRUE),\n            currbill_to_AV_75 = max(currbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = currbill_to_AV_25/currbill_to_AV_75) %&gt;% filter(muni_ratio_25to75 &gt; 0.01)\n\n\n\nggplot(data = ratios, aes(y = currbill_to_AV_25, x = currbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(data = ratios, aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = currbill_to_AV_25, x = currbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = currbill_to_AV_25, x = currbill_to_AV_75, color = \"red\"), size = 2)+\n\n  theme_classic() +\n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n   scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") +\n  labs(title = \"GHE = $10,000 EAV (Current)\", x=\"\", y=\"\")\nnew_ratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(newbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_plus10/median_AV, NA)) %&gt;%\n  mutate(newbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_plus10/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(newbill_to_AV_25 = max(newbill_to_AV_25, na.rm=TRUE),\n            newbill_to_AV_75 = max(newbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = newbill_to_AV_25/newbill_to_AV_75) %&gt;% \n  filter(muni_ratio_25to75 &gt; 0.01)\n\n\nggplot(data = new_ratios, aes(y = newbill_to_AV_25, x = newbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(data = new_ratios, aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n  scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") + \n  labs(title = \"GHE = $20,000 EAV\", x= \"\", y=\"\")\nnew_ratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(newbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_plus20/median_AV, NA)) %&gt;%\n  mutate(newbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_plus20/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(newbill_to_AV_25 = max(newbill_to_AV_25, na.rm=TRUE),\n            newbill_to_AV_75 = max(newbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = newbill_to_AV_25/newbill_to_AV_75) %&gt;% \n  \n  filter(muni_ratio_25to75 &gt; 0.01)\n\n\nggplot(data = new_ratios, aes(y = newbill_to_AV_25, x = newbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") + \n  labs(title = \"GHE = $30,000 EAV\",\n                                        x = \"\", y = \"\")\nnew_ratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(newbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_plus30/median_AV, NA)) %&gt;%\n  mutate(newbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_plus30/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(newbill_to_AV_25 = max(newbill_to_AV_25, na.rm=TRUE),\n            newbill_to_AV_75 = max(newbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = newbill_to_AV_25/newbill_to_AV_75) %&gt;% \n  filter(muni_ratio_25to75 &gt; 0.01)\n\n\nggplot(data = new_ratios, aes(y = newbill_to_AV_25, x = newbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") + \n  labs(title = \"GHE = $40,000 EAV\", \n                                     x= \"\", y = \"\")\nnew_ratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(newbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_plus40/median_AV, NA)) %&gt;%\n  mutate(newbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_plus40/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(newbill_to_AV_25 = max(newbill_to_AV_25, na.rm=TRUE),\n            newbill_to_AV_75 = max(newbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = newbill_to_AV_25/newbill_to_AV_75) %&gt;% filter(muni_ratio_25to75 &gt; 0.01)\n\n\nggplot(data = new_ratios, aes(y = newbill_to_AV_25, x = newbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") + labs(title = \"GHE = $50,000\", \n                                      x = \"\", y = \"\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTable 3. Revenue Neutral Tax Rates\nRevenue Neutral Tax Rates (Percent) for Select Municipalities as a Function of GHE Value\n\n\nCode\nscenario_taxrates %&gt;% \n  filter(clean_name %in% c(\"Chicago\", \"Dolton\", \"Glencoe\")) |&gt;\n  mutate(across(starts_with(\"tr_\"), scales::percent, accuracy = 0.01))|&gt;\n  select(Municipality = clean_name,\n         \"0 GHE\" = tr_neg10,\n         \"10,000 GHE (Current)\" = tr_nochange,\n         \"20,000 GHE\" = tr_plus10,\n         \"30,000 GHE\" = tr_plus20,\n         \"40,000 GHE\" = tr_plus30,\n         \"50,000 GHE\" = tr_plus40) |&gt;\n  flextable::flextable()\n\n\nMunicipality0 GHE10,000 GHE (Current)20,000 GHE30,000 GHE40,000 GHE50,000 GHEChicago6.51%6.74%6.97%7.21%7.45%7.68%Dolton20.07%24.81%31.99%40.35%45.06%45.56%Glencoe9.28%9.53%9.80%10.09%10.39%10.70%\n\n\n\n\nFigure 5. GHE Value and Revenue Neutral Tax Rates\nRelationship of GHE Value and Revenue Neutral Tax Rates in Chicago, Dolton, and Glencoe\n\n\nCode\nscenario_taxrates %&gt;% \n  filter(clean_name %in% c(\"Chicago\", \"Dolton\", \"Glencoe\")) |&gt;\n  select(Municipality = clean_name,\n         \"0 GHE\" = tr_neg10,\n         \"10,000 GHE\\n(Current)\" = tr_nochange,\n         \"20,000 GHE\" = tr_plus10,\n         \"30,000 GHE\" = tr_plus20,\n         \"40,000 GHE\" = tr_plus30,\n         \"50,000 GHE\" = tr_plus40) %&gt;%\n  pivot_longer(cols = c(`0 GHE`:`50,000 GHE`), names_to = \"Scenarios\") %&gt;%\n\n  ggplot() +\n  geom_line(aes(x=Scenarios, y = value, group = Municipality, color = Municipality)) + theme_classic() + \n  labs(title = \"Tax Rates for GHE Scenarios\", x = \"GHE Amount\", y = \"Tax Rate\") +\n  scale_y_continuous(label = scales::percent)",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2021.html#paying-for-the-inequitable-effects-of-exemptions",
    "href": "exemption_addendum_2021.html#paying-for-the-inequitable-effects-of-exemptions",
    "title": "Tax Year 2021",
    "section": "Paying for the inequitable effects of exemptions",
    "text": "Paying for the inequitable effects of exemptions\n\nFigure 6. Exemptions by Value in Class 8 Municipalities\n\n\nCode\npin_data %&gt;% \n  group_by(clean_name) %&gt;% \n  summarize(\n    Homeowner = sum(exe_homeowner),\n    Senior = sum(exe_senior),\n    `Senior Freeze` = sum(exe_freeze),\n   # exe_longtime_homeowner = sum(exe_longtime_homeowner),\n    Other = sum(exe_disabled),\n    \n  ) %&gt;%\n  filter(clean_name %in% c(\"Blue Island\", \"Markham\", \"Matteson\", \"Park Forest\")) %&gt;%\n  pivot_longer(cols = c(Homeowner:Other), names_to = \"Exemption Type\") %&gt;%\n  ggplot() + \n  geom_col(aes(x=clean_name, y = value, fill = `Exemption Type`), position = \"dodge\") +\n  scale_y_continuous(label = scales::dollar) + \n  theme_classic() + \n  labs(x = element_blank(), y = \"Exempt EAV\")\n\n\n\n\n\nFigure 4.3: Exempt EAV by Type in Select Municipalities. Shows values as calculated in original report that undercounted disabled veteran exemptions.\n\n\n\n\n\n\n\n\n\n\nCode\npin_data %&gt;% \n  group_by(clean_name) %&gt;% \n  summarize(\n    Homeowner = sum(exe_homeowner),\n    Senior = sum(exe_senior),\n    `Senior Freeze` = sum(exe_freeze),\n   # exe_longtime_homeowner = sum(exe_longtime_homeowner),\n    Other = sum(exe_missing_disvet+exe_disabled),\n    \n  ) %&gt;%\n  filter(clean_name %in% c(\"Blue Island\", \"Markham\", \"Matteson\", \"Park Forest\")) %&gt;%\n  pivot_longer(cols = c(Homeowner:Other), names_to = \"Exemption Type\") %&gt;%\n  ggplot() + \n  geom_col(aes(x=clean_name, y = value, fill = `Exemption Type`), position = \"dodge\") +\n  scale_y_continuous(label = scales::dollar) + \n  theme_classic() + \n  labs(x = element_blank(), y = \"Exempt EAV\")\n\n\n\n\n\nFigure 4.4: Exempt EAV by Type in Select Municipalities. Shows adjusted values of exemption amounts after finding data error.\n\n\n\n\n\n\n\n\n\n\nCode\n#\npin_data %&gt;% \n  group_by(clean_name) %&gt;% \n  summarize(\n    Homeowner = sum(exe_homeowner),\n    Senior = sum(exe_senior),\n    `Senior Freeze` = sum(exe_freeze),\n   # exe_longtime_homeowner = sum(exe_longtime_homeowner),\n    Other = sum(exe_missing_disvet+exe_disabled),\n    \n  ) %&gt;%\n  ungroup()  |&gt; \n  mutate(across(Homeowner:Other, scales::comma)) |&gt;\n  rename(Municipality = clean_name) |&gt;\n  arrange(desc(Other)) |&gt; \n  DT::datatable(rownames = FALSE)\n\n\n\n\n\n\n\n\nFigure 7. Exemption Share in Class 8 Municipalities\n\n\nCode\npin_data %&gt;% \n  group_by(clean_name) %&gt;% \n  summarize(\n    all_exemptions = sum(exe_total_adj),\n    eq_av = sum(av_clerk*eq_factor),\n    tif_increment_eav = sum(final_tax_to_tif/tax_code_rate)\n  ) %&gt;%\n  mutate(taxable_eav = eq_av - tif_increment_eav - all_exemptions) |&gt;\n  filter(clean_name %in% c(\"Blue Island\", \"Markham\", \"Matteson\", \"Park Forest\")) %&gt;%\n  pivot_longer(cols = c(all_exemptions:taxable_eav), names_to = \"exe_type\") %&gt;%\n    # all exemptions includes all exemptions, but adjusted for missing disabled veteran exemptions \n\n  filter(exe_type %in% c(\"taxable_eav\", \"all_exemptions\"))|&gt;\n  mutate(EAV = factor(exe_type, levels = c(\"taxable_eav\", \"all_exemptions\"), labels = c(\"Taxed EAV\", \"Exempt EAV\")) ) |&gt;\n  ggplot() + \n  geom_col(aes(x=clean_name, y = value, fill = EAV), position = \"stack\") +\n  scale_y_continuous(label = scales::dollar, limits = c(0,600000000)) + \n  theme_classic() + \n  geom_text(aes(x=clean_name, y = value, label = scales::comma(value)), \n            position = \"stack\",  vjust=1.1)+\n  labs(x = element_blank(), y = \"Non-TIF Increment EAV in Municipality\")\n\n\n\n\nWith adjusted exemption values and calculating allvalues from the pin datatable instead of using ptaxsim::tax_bill() values. Would be more correct than original ways values were calculated.\n\n\n\n\n\n\n\nMillion dollar homes\nAddendum mentions scenario where homes valued at $1 million were ineligible for the GHE.\n\n\nCode\nmil_homes_total &lt;- munis_ranked %&gt;% mutate(mil_home = ifelse(class_1dig == 2 & av*10 &gt; 1000000, 1, 0) ) %&gt;% summarize(million_dollar_homes = sum(mil_home))\n\nmil_homes_w_ghe &lt;- munis_ranked %&gt;% mutate(mil_home = ifelse(class_1dig == 2 & av*10 &gt; 1000000,1,0) ) %&gt;% filter(has_HO_exemp == 1)  %&gt;% summarize(million_dollar_homes = sum(mil_home))\n\nmil_home_count &lt;- munis_ranked %&gt;% \n  mutate(mil_home = ifelse(class_1dig == 2 &av*10 &gt; 1000000,1,0) ) %&gt;%\n  filter(has_HO_exemp == 1) %&gt;% \n  summarize(million_dollar_homes = sum(mil_home))\n\nmilhomes_w_exemps &lt;- munis_ranked %&gt;% \n  mutate(mil_home = ifelse(class_1dig == 2 & av*10 &gt; 1000000, 1, 0) ) %&gt;%\n  filter(has_HO_exemp == 1 & mil_home == 1) %&gt;% \n  summarize(\n    exempt_eav  = sum(exe_total),\n    million_dollar_homes = sum(mil_home),\n    bonus_rev = sum(tax_code_rate*exe_homeowner))\n\n\nThere are 29,044 homes worth $1 million dollars in Cook County, IL.\nOf those homes, 17,228 claim the GHE, which reduces 10,000 EAV from the properties equalized AV.\nAmount of money that could be “transferred” to areas impacted by high tax rates =\nSum of (tax code rate * exempt EAV) = $20,819,143",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2022.html",
    "href": "exemption_addendum_2022.html",
    "title": "Tax Year 2022",
    "section": "",
    "text": "Which taxpayers benefit the most and least from homestead exemptions?",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2022.html#which-taxpayers-benefit-the-most-and-least-from-homestead-exemptions",
    "href": "exemption_addendum_2022.html#which-taxpayers-benefit-the-most-and-least-from-homestead-exemptions",
    "title": "Tax Year 2022",
    "section": "",
    "text": "Table 1. Comparison of Tax Bills for Median Assessed Value (AV) Class 2 Properties in Selected Municpalities under the Status Quo and Alternative Scenario\n\n\n\nCode\ntax_bill_change_HO &lt;- c2pins %&gt;% \n  left_join(muni_rates) |&gt;\n  filter(av &gt; 0) %&gt;% \n  arrange(av) %&gt;%\n  mutate(#eq_av = av_clerk*eq_factor,\n         bill_current = (taxed_eav*tax_code_rate),\n         bill_noexemps =  rate_noGHE*(taxed_eav+exe_homeowner),\n         bill_change = bill_noexemps - bill_current) %&gt;%\n  group_by(clean_name, has_HO_exemp) %&gt;% \n  summarize(median_AV = median(av),\n            median_EAV = median(taxed_eav),\n            median_bill_cur = round(median(bill_current)),\n            median_bill_new = round(median(bill_noexemps)),\n            median_change = round(median(bill_change)),\n            pincount=n(),\n            perceived_savings = median(exe_homeowner*tax_code_rate)\n  )\n\ntax_bill_change_HO |&gt; \n  filter(clean_name %in% c(\"Park Forest\", \"Phoenix\", \"Winnetka\", \"Riverdale\")) |&gt;\n  mutate(across(c(median_AV:median_change, perceived_savings), scales::dollar) ) |&gt;\n  rename( 'Municipality' = 'clean_name',\n                  'Claims GHE' = 'has_HO_exemp',\n                  'Current Bill' = 'median_bill_cur',\n                  'Hyp. Bill' = 'median_bill_new', \n                  'Bill Change' = 'median_change',  \n                  'Perceived Savings'='perceived_savings') |&gt;\n  flextable::flextable()\n\n\n\n\nTable 5.1: Change in Tax Bill for Properties with an Assessed Value of $15,000. AV stands for “assessed value” “Tax calculator reduction” refers to the exemption values shown on the tax bill received by taxpayers. Values are estimated using an average of the properties with an AV within $1,000 of it’s municipality’s median AV to enlarge the number of observations. Thus, our calculations do not precisely represent the median.\n\n\n\nMunicipalityClaims GHEmedian_AVmedian_EAVCurrent BillHyp. BillBill ChangepincountPerceived SavingsPark Forest0$5,663.00$16,556.91$7,597$5,313-$1,6051,858$0.00Park Forest1$6,947.50$7,109.49$3,227$5,486$2,4433,414$4,599.20Phoenix0$2,014$5,888.33$1,812$1,255-$557517$0.00Phoenix1$3,661$520.93$160$2,132$1,782478$3,077.10Riverdale0$5,534.00$16,179.76$5,324$4,216-$1,1041,565$0.00Riverdale1$5,995.50$6,118.36$2,018$4,177$2,1112,366$3,298.30Winnetka0$94,999$277,749$20,734$20,387-$3541,423$0.00Winnetka1$111,090$311,683$23,321$23,606$3303,060$746.50\n\n\n\n\n\n\n\nFigure 2. Value of Median Residential Property Indifferent to Elimination of GHE\n\n\nCode\nmuni_breakeven_points &lt;- c2pins |&gt;\n  left_join(muni_rates) |&gt;\n  filter(exe_homeowner == 10000) %&gt;% \n  filter(exe_senior == 0 & \n           exe_freeze == 0 & \n           exe_longtime_homeowner == 0 & \n           exe_disabled == 0 & \n           exe_vet_returning == 0 & \n           exe_vet_dis_lt50 == 0 & \n           exe_vet_dis_50_69 == 0 & \n           exe_vet_dis_ge70 == 0 & \n           exe_abate == 0  &\n           exe_missing_disvet == 0) %&gt;%\n  \n  group_by(clean_name) %&gt;%\n  summarize(\n    median_AV = median(av),     # median class 2 AV for properties that did claim the GHE but not other exemptions\n    bill_current = mean(eav_postexemptions * tax_code_rate), # money collected by non-TIF agencies\n    \n    bill_noGHE = mean(rate_noGHE * (eav_postexemptions+exe_homeowner)), # this uses tax code tax rate\n   # rate_change = mean(tax_code_rate - tc_hyp_taxrate),   # avg tax code level rate change \n    muni_avg_rate_change = mean(tax_code_rate - rate_noGHE),\n    # nobillchange_propertyEAV = round(mean(exe_homeowner * \n    #                                         (tax_code_rate / (tax_code_rate-tc_hyp_taxrate)))), #   \n     nobillchange_propertyEAV_muni = round(mean(exe_homeowner *\n                                                 (rate_current/(rate_current-rate_noGHE) )))\n  ) |&gt; \n  mutate(nochange_av = nobillchange_propertyEAV_muni / eq_factor,\n         nochange_av_muni = nobillchange_propertyEAV_muni/ eq_factor,\n         ) \n\n\n\n\nmuni_breakeven_points %&gt;%       \n  filter(clean_name %in% c(\"Chicago\",\"Park Forest\", \"Phoenix\", \"Riverdale\", \"Winnetka\")) |&gt;\n  ggplot(aes(y=median_AV, x = clean_name)) +\n  geom_col()+\n    geom_text(aes(y=median_AV + 3000, label = round(median_AV) ) ) +\n  scale_y_continuous(labels = scales::dollar) +\n  theme_classic() +\n  scale_x_discrete(label = c(\"Chicago\",\"Park Forest\", \"Phoenix\", \"Riverdale\", \"Winnetka\")) + \n  labs(y = \"Median Residential AV\", x = \"\", \n       title = \"Median Residential Property Assessed Value - All Class 2 property Types\")\n\nmuni_breakeven_points %&gt;%       \n  filter(clean_name %in% c(\"Chicago\",\"Park Forest\", \"Phoenix\", \"Riverdale\", \"Winnetka\")) |&gt;\n  ggplot(aes(y=nochange_av, x = clean_name)) +\n  geom_col() +\n  geom_text(aes(y=nochange_av + 3000, label = round(nochange_av)) ) +\n  scale_y_continuous(labels = scales::dollar) +\n  theme_classic() +\n  scale_x_discrete(label = c(\"Chicago\", \"Park Forest\", \"Phoenix\", \"Riverdale\", \"Winnetka\")) + \n  labs(y = \"Breakeven Point - AV\", x = \"\", \n  title = \"Residential Property AV Breakeven Point\", \n  caption = \"Residential properties above these values would have their bills decrease if the GHE were eliminated\n       (if they had claimed the GHE before)\")\n\n\n\n\nMedian property values vary widely across Cook County.\n\n\n\n\n\n\n\nBreak even points also vary across municipalities, sometimes by orders of magnitude. Breakeven points are always higher than the median property within a municipality.\n\n\n\n\nMedian Residential Property and Breakeven Point\n\nOf homeowners who take the GHE, those that gain the largest monetary benefit from the exemption in proportion to their home values are those who own below-average valued properties that are in a municipality with relatively high tax rates. Property owners who benefit the least from taking the exemption (again, relative to the value of their homes) are those with above-average valued homes in jurisdictions with low tax rates. Note that these are not the same homeowners who benefit the most in absolute dollar terms—that outcome depends on both the absolute and relative value of the property and the composition of properties within the jurisdiction.\n\n\nCode\nmuni_breakeven_points %&gt;%\n # filter(nochange_av &lt; 300000) %&gt;%\n  ggplot(aes(y=nochange_av, \n             x = median_AV, \n             label=clean_name\n             )) +\n  geom_abline(intercept = 0, slope = 1, lty = 2, alpha = .4) +\n  geom_point(aes(alpha = .5)) +\n # geom_smooth(method = \"lm\" )+\n  geom_text(aes(y = (nochange_av-5000), x = (median_AV)), size = 2)+\n  theme_classic() +\n  scale_x_continuous(labels = scales::dollar) +\n  scale_y_continuous(labels = scales::dollar) +\n  theme(legend.position = \"none\")+\n  labs(y = \" Breakeven Point\", \n       x = \"Median AV - Class 2 Properties in Municipality\", \n      # title = \"Some highly valued homes would have lower tax bills if the GHE were eliminated\", \n       #caption = \"The breakeven point is the assessed values at which a major class 2 \n     #  property would not have their taxbill change if the GHE were eliminated.\"\n     )\n\n\n\n\n\n\nFigure 5.1: Includes all municipalities\n\n\n\n\n\n\n\n\n\nCode\nmuni_breakeven_points %&gt;%\n  filter(nochange_av &lt; 300000) %&gt;%\n  ggplot(aes(y=nochange_av, \n             x = median_AV, \n             label=clean_name\n             )) +\n  geom_abline(intercept = 0, slope = 1, lty = 2, alpha = .4) +\n\n  geom_point(aes(alpha = .5)) +\n  \n  geom_point(data = (muni_breakeven_points %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Riverdale\",\"Dolton\"))), aes(y = nochange_av, x = median_AV, color = \"red\"), size = 3) +\n  ggrepel::geom_label_repel(data = (muni_breakeven_points %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Riverdale\", \"Dolton\"))), aes(y = (nochange_av), x = (median_AV)), size = 3)+\n  theme_classic() +\n  theme(panel.background = element_blank()) + \n  scale_x_continuous(labels = scales::dollar, expand = c(0,0), limits = c(0,170000) ) +\n  scale_y_continuous(labels = scales::dollar, expand = c(0,0), limits = c(0,170000) ) +\n    theme(legend.position = \"none\") +\n\n  labs(title = \"Municipalities' Median AV & Breakeven Point \\nClass 2 Properties Only\",\n    y = \"Breakeven Point\", \n       x = \"Median AV\", \n # caption = \"The breakeven point is the assessed values at which a major class 2 property would not have their taxbill change if the \n # GHE were eliminated. Excludes outliers: University Park, Bedford Park, McCook, Hodgkins, and Rosemont. Class 2 properties that had\n # claimed the GHE would have lower taxbills even if the GHE were removed if the AV is above the breakeven point.\"\n ) + coord_fixed()\n\n#ggsave(\"breakevenpoint.svg\", bg = \"transparent\")\n\n\n\n\n\nFigure 5.2: The breakeven point is the assessed values at which a major class 2 property would not have their taxbill change if the GHE were eliminated.",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2022.html#how-progressive-are-exemptions",
    "href": "exemption_addendum_2022.html#how-progressive-are-exemptions",
    "title": "Tax Year 2022",
    "section": "How progressive are exemptions?",
    "text": "How progressive are exemptions?\n\nFigure 3. Ratio of Tax Bills to AV for 25th and 75th Percentile AV Class 2 Properties with $10,000 GHE\nFor the different exemption scenarios, we created new exemption variables for alternate exemption amounts that can be subtracted from a properties equalized AV.\n\nex. For exe_neg10 all exemption amounts are equal to zero.\nFor exe_0, This variable should be the same as the current tax system since we did not add or remove any exempt EAV to the PIN. If the EAV for a PIN is less than 10000 EAV and they did claim the general homestead exemption, then their exempt EAV is equal to their EAV.\nIf the exempt EAV allowable for the GHE was increased to 20,000 EAV, then the variable exe_plus10 is used.\n\n\n\nCode\npin_data &lt;- pin_data %&gt;% \n  left_join(class_dict, by = c(\"class\" = \"class_code\")) %&gt;%\n  mutate(\n \n    tif_increment_eav = final_tax_to_tif / tax_code_rate,\n    \n    nontif_eav_preexe = av_clerk*eq_factor - tif_increment_eav,\n    nontif_eav_postexe = av_clerk*eq_factor - tif_increment_eav - all_exemptions,\n    \n    eav_postexemptions = av_clerk*eq_factor - all_exemptions,\n    eav_preexemptions = av_clerk*eq_factor) |&gt;\n  ## Create variables for alternate exemption amounts that can be subtracted from a properties equalized AV\n  mutate(\n    eav = eav_preexemptions,\n    exe_neg10 = 0,\n         \n      # exe_0 implies no additional or removed EAV. Current tax system. \n         exe_0 = ifelse(eav &lt; 10000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;10000 & exe_homeowner!=0, 10000, 0 )),  # no change in current exemptions\n         exe_plus10 = ifelse(eav &lt; 20000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;20000 & exe_homeowner!=0, 20000, 0 )),\n         exe_plus20 = ifelse(eav &lt; 30000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;30000 & exe_homeowner!=0, 30000, 0 ) ),\n         exe_plus30 = ifelse(eav &lt; 40000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;40000 & exe_homeowner!=0, 40000, 0) ),\n         exe_plus40 = ifelse(eav &lt; 50000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;50000 & exe_homeowner!=0, 50000, 0) ),\n         mil_home = ifelse(major_class_code == 2 & av*10 &gt; 1000000, 1, 0))\n\n\n# all pins in munis fully within cook county that are some form of single-family, detached home\nsingfam_pins &lt;- pin_data %&gt;% \n  filter(Option2 == \"Single-Family\")\n\n\n\n\nCode\n# Calculates tax rates for all exemption scenarios.\nscenario_calcs &lt;- pin_data %&gt;%    \n  group_by(clean_name) %&gt;%\n\n    summarize(MuniLevy = round(sum(final_tax_to_dist, na.rm = TRUE)), # amount billed by munis with current exemptions in place\n            current_nonTIF_EAV_post_exemps = sum(final_tax_to_dist/(tax_code_rate), na.rm = TRUE),\n            current_TIF_increment_EAV = sum(final_tax_to_tif/(tax_code_rate), na.rm=TRUE),  \n            current_Exempt_EAV = sum(all_exemptions, na.rm=T), \n            current_GHE = sum(exe_homeowner, na.rm=TRUE),\n            Total_EAV = sum(all_exemptions+(final_tax_to_dist+final_tax_to_tif)/(tax_code_rate), na.rm = TRUE),\n            exe_neg10 = sum(exe_neg10),\n            exe_0 = sum(exe_0), # no change, for comparison\n            exe_plus10 = sum(exe_plus10),\n            exe_plus20 = sum(exe_plus20),\n            exe_plus30 = sum(exe_plus30),\n            exe_plus40 = sum(exe_plus40),\n            mil_home = sum(mil_home)\n            ) %&gt;%\n\n  # remove all GHE (up to 10,000 EAV added back to base per PIN), \n  # add exe_homeowner back to taxable base\n  mutate(neg10_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE,    # adds GHE exempt EAV back to taxable base and decreases tax rates\n         plus10_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE - exe_plus10, # will increase tax rates\n         plus20_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE - exe_plus20,\n         plus30_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE - exe_plus30,\n         plus40_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE - exe_plus40,\n         scenario_noexemptions_taxable_eav = Total_EAV - current_TIF_increment_EAV) %&gt;%\n  \n  mutate(tr_neg10 = MuniLevy / neg10_taxable_eav,\n         tr_nochange = MuniLevy / current_nonTIF_EAV_post_exemps,\n         tr_plus10 = MuniLevy / plus10_taxable_eav,\n         tr_plus20 = MuniLevy / plus20_taxable_eav,\n         tr_plus30 = MuniLevy / plus30_taxable_eav,\n         tr_plus40 = MuniLevy / plus40_taxable_eav, \n         tax_rate_current = MuniLevy/current_nonTIF_EAV_post_exemps,\n         taxrate_noexemps = MuniLevy /(Total_EAV - current_TIF_increment_EAV  ),\n         taxrate_noTIFs = MuniLevy / (Total_EAV - current_Exempt_EAV),\n         taxrate_noTIFs_orExemps = MuniLevy / Total_EAV) %&gt;%\n  select(clean_name, MuniLevy, tr_neg10:taxrate_noTIFs_orExemps, everything())\n\nscenario_taxrates &lt;- scenario_calcs %&gt;%  \n  select(clean_name, MuniLevy, tr_neg10:taxrate_noTIFs_orExemps) \n\nscenario_taxrates |&gt; \n  select(-c(tax_rate_current:taxrate_noTIFs_orExemps)) |&gt;\n  #mutate(across(.cols=(tr_neg10:tr_plus40), s, accuracy = 0.01)) |&gt;\n  rename(Municipality = clean_name,\n        `Composite Levy` = MuniLevy,\n    `Rate if \\nGHE=0K` = tr_neg10, \n         `Current\\nTax Rate`= tr_nochange, \n         `Rate if\\nGHE=20K`= tr_plus10, \n         `Rate if\\nGHE=30K` = tr_plus20, \n         `Rate if\\nGHE=40K` = tr_plus30, \n         `Rate if\\nGHE=50K` = tr_plus40) |&gt; \n  DT::datatable(rownames = FALSE)  |&gt;\n  formatCurrency(columns = c(2), digits = 0) |&gt;\n  formatPercentage(3:8, digits = 1)\n\n\n\n\n\n\n\n\nCode\nmunis_billchange &lt;- munis_ranked %&gt;% \n    left_join(scenario_taxrates) %&gt;%\n\n  mutate(\n    eav = eq_av,\n    exe_neg10 = 0,\n         \n      # exe_0 implies no additional or removed EAV. Current tax system. \n         exe_0 = ifelse(eav &lt; 10000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;10000 & exe_homeowner!=0, 10000, 0 )),  # no change in current exemptions\n         exe_plus10 = ifelse(eav &lt; 20000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;20000 & exe_homeowner!=0, 20000, 0 )),\n         exe_plus20 = ifelse(eav &lt; 30000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;30000 & exe_homeowner!=0, 30000, 0 ) ),\n         exe_plus30 = ifelse(eav &lt; 40000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;40000 & exe_homeowner!=0, 40000, 0) ),\n         exe_plus40 = ifelse(eav &lt; 50000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;50000 & exe_homeowner!=0, 50000, 0) ),\n         mil_home = ifelse(av*10 &gt; 1000000, 1, 0)) |&gt;\n    mutate(,\n    # current bill = current tax rate * portion of levy billed\n         equalized_AV = av_clerk*eq_factor,\n         \n   # ## Made negative tax bills!! ## #\n          bill_neg10 = tr_neg10*(equalized_AV-all_exemptions+ exe_homeowner -exe_neg10),\n\n         bill_current = tax_code_rate*(equalized_AV-all_exemptions),\n         bill_plus10 =  tr_plus10*(equalized_AV-all_exemptions+ exe_homeowner -exe_plus10),\n         bill_plus20 = tr_plus20*(equalized_AV-all_exemptions+ exe_homeowner -exe_plus20),\n         bill_plus30 = tr_plus20*(equalized_AV-all_exemptions+ exe_homeowner -exe_plus30),\n         bill_plus40 = tr_plus20*(equalized_AV-all_exemptions+ exe_homeowner -exe_plus40),\n    \n    # ## make bills $1 if they had been negative.\n         bill_neg10 = ifelse(bill_neg10 &lt; 1, 1, bill_neg10),\n         bill_current = ifelse(bill_current &lt; 1, 1, bill_current),\n         bill_plus10 = ifelse(bill_plus10 &lt; 1, 1, bill_plus10),\n         bill_plus20 = ifelse(bill_plus20 &lt; 1, 1, bill_plus20),\n         bill_plus30 = ifelse(bill_plus30 &lt; 1, 1, bill_plus30),\n         bill_plus40 = ifelse(bill_plus40 &lt; 1, 1, bill_plus40),\n\n         )%&gt;%\n  mutate(\n         zerodol_bills_ghe0 = ifelse(bill_neg10 &lt; 5, 1, 0),\n         zerodol_bills_current = ifelse(bill_current &lt; 5, 1, 0),\n         zerodol_bills_ghe20 = ifelse(bill_plus10 &lt; 5, 1, 0),\n         zerodol_bills_ghe30 = ifelse(bill_plus20 &lt; 5, 1, 0),\n         zerodol_bills_ghe40 = ifelse(bill_plus30 &lt; 5, 1, 0),\n         zerodol_bills_ghe50 = ifelse(bill_plus40 &lt; 5, 1, 0),\n  ) %&gt;%\n  ungroup() |&gt;\n  group_by(clean_name, rank, has_HO_exemp) %&gt;% \n  summarize(median_AV = round(median(av)),\n            median_EAV = round(median(eav)),\n            mean_bill_neg10 = round(mean(bill_neg10, na.rm=TRUE)),\n            mean_bill_cur = round(mean(bill_current, na.rm=TRUE)),\n            mean_bill_plus10 = round(mean(bill_plus10, na.rm=TRUE)),\n            mean_bill_plus20 = round(mean(bill_plus20, na.rm=TRUE)),\n            mean_bill_plus30 = round(mean(bill_plus30, na.rm=TRUE)),\n            mean_bill_plus40 = round(mean(bill_plus40, na.rm=TRUE)),\n            \n            tr_neg10 = round(mean(tr_neg10*100), digits = 2), \n            cur_comp_TC_rate = round(mean(tax_code_rate*100), digits = 2),\n            tr_plus10 = round(mean(tr_plus10*100), digits = 2),\n            tr_plus20 = round(mean(tr_plus20*100), digits = 2),\n            tr_plus30 = round(mean(tr_plus30*100), digits = 2),\n            tr_plus40 = round(mean(tr_plus40*100), digits = 2),\n            pincount=n(),\n            zerodol_bills_ghe0 = sum(zerodol_bills_ghe0),           \n            zerodol_bills_current = sum(zerodol_bills_current),\n            zerodol_bills_ghe20 = sum(zerodol_bills_ghe20),\n            zerodol_bills_ghe30 = sum(zerodol_bills_ghe30),\n            zerodol_bills_ghe40 = sum(zerodol_bills_ghe40),\n            zerodol_bills_ghe50 = sum(zerodol_bills_ghe50),\n\n\n  ) %&gt;%\n  mutate(clean_name = ifelse(clean_name == \"Hazelcrest\", \"Hazel Crest\", clean_name)) %&gt;%\n  arrange(has_HO_exemp, rank)\n\n\n\n\n\nratios &lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(currbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_cur/median_AV, NA)) %&gt;%\n  mutate(currbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_cur/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(currbill_to_AV_25 = max(currbill_to_AV_25, na.rm=TRUE),\n            currbill_to_AV_75 = max(currbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = currbill_to_AV_25/currbill_to_AV_75) %&gt;% filter(muni_ratio_25to75 &gt; 0.01)\n\n\n\nggplot(data = ratios, aes(y = currbill_to_AV_25, x = currbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1, lty = 2, alpha = .4) +\n  geom_point(data = ratios, aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = currbill_to_AV_25, x = currbill_to_AV_75), size = 2, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = currbill_to_AV_25, x = currbill_to_AV_75, color = \"red\"), size = 2)+\n\n  theme_classic() +\n  theme(legend.background = element_rect(fill = \"transparent\"), \n        legend.box.background = element_rect(fill = \"transparent\"), \n        panel.background = element_rect(fill = \"transparent\"), \n        panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank(), \n        plot.background = element_rect(fill = \"transparent\", \n                                       color = NA) ) +\n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n   scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") +\n  labs(title=\"\", y=\"Tax Burden as a Share of AV \\n(25th Percentile)\", x=\"Tax Burden as a Share of AV \\n(75th Percentile)\", subtitle = \"Current Tax System, GHE = 10,000 EAV\") + coord_fixed()\n\n\n\n\n\n\n\n\n\n\nCode\npin_data %&gt;%\n  filter(av &lt; 300000) %&gt;% # just to see the histogram better\n  ggplot( aes(x=av)) +\n  geom_histogram(bins = 50)  +\n  theme_classic()+\n  labs(title = \"Cook County Class 2 Residential PIN Distribution of AV\", \n       x = \"Assessed Value ($)\", y=\"# of Pins\", \n       caption = \"Dropped PINs with AVs over $300,000 for better visual of histogram bins.\") +\n  scale_x_continuous(label = scales::dollar) +\n  scale_y_continuous(label = scales::comma)\n\n\nsingfam_pins %&gt;%\n filter(av &lt; 300000) %&gt;% # just to see the histogram better\n  \n  ggplot( aes(x=av)) +\n  geom_histogram(bins = 50)  +\n  theme_classic()+\n  labs(title = \"Cook County Single-Family PIN Distribution of AV\", \n       x = \"Assessed Value ($)\", y=\"# of Pins\", \n       caption = \"Dropped PINs with AVs over $300,000 for better visual of histogram bins.\"\n       ) +\n  scale_x_continuous(label = scales::dollar)+\n  scale_y_continuous(label = scales::comma)\n\n\n\n\n\n\nMajor Class 2 Properties\n\n\n\n\n\n\n\nSingle-family subgroup of C2 Properties\n\n\n\n\n\n\n\nDistribution of Assessed Values: Class 2 Properties vs Single-Family Properties There is a difference in the assessed values depending on if you use all 200 level properties or only a subset of them. All figures and tables were created for both options when writing the report as a robustness check.",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2022.html#what-would-happen-if-the-ghe-value-were-increased",
    "href": "exemption_addendum_2022.html#what-would-happen-if-the-ghe-value-were-increased",
    "title": "Tax Year 2022",
    "section": "What would happen if the GHE value were increased?",
    "text": "What would happen if the GHE value were increased?\n\nFigure 4. Effect of Changing the GHE on Progressivity\n\nCode\nratios &lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(currbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_neg10/median_AV, NA)) %&gt;%\n  mutate(currbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_neg10/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(GHE_0_bill_to_AV_25 = max(currbill_to_AV_25, na.rm=TRUE),\n            GHE_0_bill_to_AV_75 = max(currbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = GHE_0_bill_to_AV_25/GHE_0_bill_to_AV_75) \n\n\nggplot(data = ratios, aes(y = GHE_0_bill_to_AV_25, x = GHE_0_bill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = GHE_0_bill_to_AV_25, x = GHE_0_bill_to_AV_75, label = clean_name), size = 3)+\n    geom_point(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = GHE_0_bill_to_AV_25, x = GHE_0_bill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") +\n  labs(title = \"GHE = $0 EAV\", x = \"\", y = \"\")\nratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(currbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_cur/median_AV, NA)) %&gt;%\n  mutate(currbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_cur/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(currbill_to_AV_25 = max(currbill_to_AV_25, na.rm=TRUE),\n            currbill_to_AV_75 = max(currbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = currbill_to_AV_25/currbill_to_AV_75) %&gt;% filter(muni_ratio_25to75 &gt; 0.01)\n\n\n\nggplot(data = ratios, aes(y = currbill_to_AV_25, x = currbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(data = ratios, aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = currbill_to_AV_25, x = currbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = currbill_to_AV_25, x = currbill_to_AV_75, color = \"red\"), size = 2)+\n\n  theme_classic() +\n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n   scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") +\n  labs(title = \"GHE = $10,000 EAV (Current)\", x=\"\", y=\"\")\nnew_ratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(newbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_plus10/median_AV, NA)) %&gt;%\n  mutate(newbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_plus10/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(newbill_to_AV_25 = max(newbill_to_AV_25, na.rm=TRUE),\n            newbill_to_AV_75 = max(newbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = newbill_to_AV_25/newbill_to_AV_75) %&gt;% \n  filter(muni_ratio_25to75 &gt; 0.01)\n\n\nggplot(data = new_ratios, aes(y = newbill_to_AV_25, x = newbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(data = new_ratios, aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n  scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") + \n  labs(title = \"GHE = $20,000 EAV\", x= \"\", y=\"\")\nnew_ratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(newbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_plus20/median_AV, NA)) %&gt;%\n  mutate(newbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_plus20/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(newbill_to_AV_25 = max(newbill_to_AV_25, na.rm=TRUE),\n            newbill_to_AV_75 = max(newbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = newbill_to_AV_25/newbill_to_AV_75) %&gt;% \n  \n  filter(muni_ratio_25to75 &gt; 0.01)\n\n\nggplot(data = new_ratios, aes(y = newbill_to_AV_25, x = newbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") + \n  labs(title = \"GHE = $30,000 EAV\",\n                                        x = \"\", y = \"\")\nnew_ratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(newbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_plus30/median_AV, NA)) %&gt;%\n  mutate(newbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_plus30/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(newbill_to_AV_25 = max(newbill_to_AV_25, na.rm=TRUE),\n            newbill_to_AV_75 = max(newbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = newbill_to_AV_25/newbill_to_AV_75) %&gt;% \n  filter(muni_ratio_25to75 &gt; 0.01)\n\n\nggplot(data = new_ratios, aes(y = newbill_to_AV_25, x = newbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") + \n  labs(title = \"GHE = $40,000 EAV\", \n                                     x= \"\", y = \"\")\nnew_ratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(newbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_plus40/median_AV, NA)) %&gt;%\n  mutate(newbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_plus40/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(newbill_to_AV_25 = max(newbill_to_AV_25, na.rm=TRUE),\n            newbill_to_AV_75 = max(newbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = newbill_to_AV_25/newbill_to_AV_75) %&gt;% filter(muni_ratio_25to75 &gt; 0.01)\n\n\nggplot(data = new_ratios, aes(y = newbill_to_AV_25, x = newbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") + labs(title = \"GHE = $50,000\", \n                                      x = \"\", y = \"\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTable 3. Revenue Neutral Tax Rates\nRevenue Neutral Tax Rates (Percent) for Select Municipalities as a Function of GHE Value\n\n\nCode\nscenario_taxrates %&gt;% \n  filter(clean_name %in% c(\"Chicago\", \"Dolton\", \"Glencoe\")) |&gt;\n  mutate(across(starts_with(\"tr_\"), scales::percent, accuracy = 0.01))|&gt;\n  select(Municipality = clean_name,\n         \"0 GHE\" = tr_neg10,\n         \"10,000 GHE (Current)\" = tr_nochange,\n         \"20,000 GHE\" = tr_plus10,\n         \"30,000 GHE\" = tr_plus20,\n         \"40,000 GHE\" = tr_plus30,\n         \"50,000 GHE\" = tr_plus40) |&gt;\n  flextable::flextable()\n\n\nMunicipality0 GHE10,000 GHE (Current)20,000 GHE30,000 GHE40,000 GHE50,000 GHEChicago6.84%7.08%7.32%7.57%7.81%8.04%Dolton21.19%26.35%34.21%43.15%47.47%47.87%Glencoe7.67%7.82%7.98%8.15%8.32%8.51%\n\n\n\n\nFigure 5. GHE Value and Revenue Neutral Tax Rates\nRelationship of GHE Value and Revenue Neutral Tax Rates in Chicago, Dolton, and Glencoe\n\n\nCode\nscenario_taxrates %&gt;% \n  filter(clean_name %in% c(\"Chicago\", \"Dolton\", \"Glencoe\")) |&gt;\n  select(Municipality = clean_name,\n         \"0 GHE\" = tr_neg10,\n         \"10,000 GHE\\n(Current)\" = tr_nochange,\n         \"20,000 GHE\" = tr_plus10,\n         \"30,000 GHE\" = tr_plus20,\n         \"40,000 GHE\" = tr_plus30,\n         \"50,000 GHE\" = tr_plus40) %&gt;%\n  pivot_longer(cols = c(`0 GHE`:`50,000 GHE`), names_to = \"Scenarios\") %&gt;%\n\n  ggplot() +\n  geom_line(aes(x=Scenarios, y = value, group = Municipality, color = Municipality)) + theme_classic() + \n  labs(title = \"Tax Rates for GHE Scenarios\", x = \"GHE Amount\", y = \"Tax Rate\") +\n  scale_y_continuous(label = scales::percent)",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2022.html#paying-for-the-inequitable-effects-of-exemptions",
    "href": "exemption_addendum_2022.html#paying-for-the-inequitable-effects-of-exemptions",
    "title": "Tax Year 2022",
    "section": "Paying for the inequitable effects of exemptions",
    "text": "Paying for the inequitable effects of exemptions\n\nFigure 6. Exemptions by Value in Class 8 Municipalities\n\n\nCode\npin_data %&gt;% \n  group_by(clean_name) %&gt;% \n  summarize(\n    Homeowner = sum(exe_homeowner),\n    Senior = sum(exe_senior),\n    `Senior Freeze` = sum(exe_freeze),\n   # exe_longtime_homeowner = sum(exe_longtime_homeowner),\n    Other = sum(exe_disabled),\n    \n  ) %&gt;%\n  filter(clean_name %in% c(\"Blue Island\", \"Markham\", \"Matteson\", \"Park Forest\")) %&gt;%\n  pivot_longer(cols = c(Homeowner:Other), names_to = \"Exemption Type\") %&gt;%\n  ggplot() + \n  geom_col(aes(x=clean_name, y = value, fill = `Exemption Type`), position = \"dodge\") +\n  scale_y_continuous(label = scales::dollar) + \n  theme_classic() + \n  labs(x = element_blank(), y = \"Exempt EAV\")\n\n\n\n\n\nFigure 5.3: Exempt EAV by Type in Select Municipalities. Shows values as calculated in original report that undercounted disabled veteran exemptions.\n\n\n\n\n\n\n\n\n\n\nCode\npin_data %&gt;% \n  group_by(clean_name) %&gt;% \n  summarize(\n    Homeowner = sum(exe_homeowner),\n    Senior = sum(exe_senior),\n    `Senior Freeze` = sum(exe_freeze),\n   # exe_longtime_homeowner = sum(exe_longtime_homeowner),\n    Other = sum(exe_missing_disvet+exe_disabled),\n    \n  ) %&gt;%\n  filter(clean_name %in% c(\"Blue Island\", \"Markham\", \"Matteson\", \"Park Forest\")) %&gt;%\n  pivot_longer(cols = c(Homeowner:Other), names_to = \"Exemption Type\") %&gt;%\n  ggplot() + \n  geom_col(aes(x=clean_name, y = value, fill = `Exemption Type`), position = \"dodge\") +\n  scale_y_continuous(label = scales::dollar) + \n  theme_classic() + \n  labs(x = element_blank(), y = \"Exempt EAV\")\n\n\n\n\n\nFigure 5.4: Exempt EAV by Type in Select Municipalities. Shows adjusted values of exemption amounts after finding data error.\n\n\n\n\n\n\n\n\n\n\nCode\n#\npin_data %&gt;% \n  group_by(clean_name) %&gt;% \n  summarize(\n    Homeowner = sum(exe_homeowner),\n    Senior = sum(exe_senior),\n    `Senior Freeze` = sum(exe_freeze),\n   # exe_longtime_homeowner = sum(exe_longtime_homeowner),\n    Other = sum(exe_missing_disvet+exe_disabled),\n    \n  ) %&gt;%\n  ungroup()  |&gt; \n  mutate(across(Homeowner:Other, scales::comma)) |&gt;\n  rename(Municipality = clean_name) |&gt;\n  arrange(desc(Other)) |&gt; \n  DT::datatable(rownames = FALSE)\n\n\n\n\n\n\n\n\nFigure 7. Exemption Share in Class 8 Municipalities\n\n\nCode\npin_data %&gt;% \n  group_by(clean_name) %&gt;% \n  summarize(\n    all_exemptions = sum(exe_total_adj),\n    eq_av = sum(av_clerk*eq_factor),\n    tif_increment_eav = sum(final_tax_to_tif/tax_code_rate)\n  ) %&gt;%\n  mutate(taxable_eav = eq_av - tif_increment_eav - all_exemptions) |&gt;\n  filter(clean_name %in% c(\"Blue Island\", \"Markham\", \"Matteson\", \"Park Forest\")) %&gt;%\n  pivot_longer(cols = c(all_exemptions:taxable_eav), names_to = \"exe_type\") %&gt;%\n    # all exemptions includes all exemptions, but adjusted for missing disabled veteran exemptions \n\n  filter(exe_type %in% c(\"taxable_eav\", \"all_exemptions\"))|&gt;\n  mutate(EAV = factor(exe_type, levels = c(\"taxable_eav\", \"all_exemptions\"), labels = c(\"Taxed EAV\", \"Exempt EAV\")) ) |&gt;\n  ggplot() + \n  geom_col(aes(x=clean_name, y = value, fill = EAV), position = \"stack\") +\n  scale_y_continuous(label = scales::dollar, limits = c(0,600000000)) + \n  theme_classic() + \n  geom_text(aes(x=clean_name, y = value, label = scales::comma(value)), \n            position = \"stack\",  vjust=1.1)+\n  labs(x = element_blank(), y = \"Non-TIF Increment EAV in Municipality\")\n\n\n\n\nWith adjusted exemption values and calculating allvalues from the pin datatable instead of using ptaxsim::tax_bill() values. Would be more correct than original ways values were calculated.\n\n\n\n\n\n\n\nMillion dollar homes\nAddendum mentions scenario where homes valued at $1 million were ineligible for the GHE.\n\n\nCode\nmil_homes_total &lt;- munis_ranked %&gt;% mutate(mil_home = ifelse(class_1dig == 2 & av*10 &gt; 1000000, 1, 0) ) %&gt;% summarize(million_dollar_homes = sum(mil_home))\n\nmil_homes_w_ghe &lt;- munis_ranked %&gt;% mutate(mil_home = ifelse(class_1dig == 2 & av*10 &gt; 1000000,1,0) ) %&gt;% filter(has_HO_exemp == 1)  %&gt;% summarize(million_dollar_homes = sum(mil_home))\n\nmil_home_count &lt;- munis_ranked %&gt;% \n  mutate(mil_home = ifelse(class_1dig == 2 &av*10 &gt; 1000000,1,0) ) %&gt;%\n  filter(has_HO_exemp == 1) %&gt;% \n  summarize(million_dollar_homes = sum(mil_home))\n\nmilhomes_w_exemps &lt;- munis_ranked %&gt;% \n  mutate(mil_home = ifelse(class_1dig == 2 & av*10 &gt; 1000000, 1, 0) ) %&gt;%\n  filter(has_HO_exemp == 1 & mil_home == 1) %&gt;% \n  summarize(\n    exempt_eav  = sum(exe_total),\n    million_dollar_homes = sum(mil_home),\n    bonus_rev = sum(tax_code_rate*exe_homeowner))\n\n\nThere are 34,960 homes worth $1 million dollars in Cook County, IL.\nOf those homes, 21,534 claim the GHE, which reduces 10,000 EAV from the properties equalized AV.\nAmount of money that could be “transferred” to areas impacted by high tax rates =\nSum of (tax code rate * exempt EAV) = $21,812,892",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2023.html",
    "href": "exemption_addendum_2023.html",
    "title": "Tax Year 2023",
    "section": "",
    "text": "Which taxpayers benefit the most and least from homestead exemptions?",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2023.html#which-taxpayers-benefit-the-most-and-least-from-homestead-exemptions",
    "href": "exemption_addendum_2023.html#which-taxpayers-benefit-the-most-and-least-from-homestead-exemptions",
    "title": "Tax Year 2023",
    "section": "",
    "text": "Table 1. Comparison of Tax Bills for Median Assessed Value (AV) Class 2 Properties in Selected Municpalities under the Status Quo and Alternative Scenario\n\n\n\nCode\ntax_bill_change_HO &lt;- c2pins %&gt;% \n  left_join(muni_rates) |&gt;\n  filter(av &gt; 0) %&gt;% \n  arrange(av) %&gt;%\n  mutate(#eq_av = av_clerk*eq_factor,\n         bill_current = (taxed_eav*tax_code_rate),\n         bill_noexemps =  rate_noGHE*(taxed_eav+exe_homeowner),\n         bill_change = bill_noexemps - bill_current) %&gt;%\n  group_by(clean_name, has_HO_exemp) %&gt;% \n  summarize(median_AV = median(av),\n            median_EAV = median(taxed_eav),\n            median_bill_cur = round(median(bill_current)),\n            median_bill_new = round(median(bill_noexemps)),\n            median_change = round(median(bill_change)),\n            pincount=n(),\n            perceived_savings = median(exe_homeowner*tax_code_rate)\n  )\n\ntax_bill_change_HO |&gt; \n  filter(clean_name %in% c(\"Park Forest\", \"Phoenix\", \"Winnetka\", \"Riverdale\")) |&gt;\n  mutate(across(c(median_AV:median_change, perceived_savings), scales::dollar) ) |&gt;\n  rename( 'Municipality' = 'clean_name',\n                  'Claims GHE' = 'has_HO_exemp',\n                  'Current Bill' = 'median_bill_cur',\n                  'Hyp. Bill' = 'median_bill_new', \n                  'Bill Change' = 'median_change',  \n                  'Perceived Savings'='perceived_savings') |&gt;\n  flextable::flextable()\n\n\n\n\nTable 6.1: Change in Tax Bill for Properties with an Assessed Value of $15,000. AV stands for “assessed value” “Tax calculator reduction” refers to the exemption values shown on the tax bill received by taxpayers. Values are estimated using an average of the properties with an AV within $1,000 of it’s municipality’s median AV to enlarge the number of observations. Thus, our calculations do not precisely represent the median.\n\n\n\nMunicipalityClaims GHEmedian_AVmedian_EAVCurrent BillHyp. BillBill ChangepincountPerceived SavingsPark Forest0$12,000$36,195.60$8,784$7,250-$1,4061,857$0.00Park Forest1$13,999$27,244.50$6,357$7,460$1,1133,412$2,426.90Phoenix0$3,699.50$11,158.80$3,066$2,398-$668526$0.00Phoenix1$5,128.00$4,776.85$1,313$2,917$1,682472$2,747.90Riverdale0$7,999$24,127.38$6,099$5,144-$9921,588$0Riverdale1$8,700$13,593.50$3,458$5,016$1,4712,325$2,555Winnetka0$93,591$282,299$21,792$21,314-$3901,448$0.00Winnetka1$108,623$315,760$24,269$24,595$3153,035$768.60\n\n\n\n\n\n\n\nFigure 2. Value of Median Residential Property Indifferent to Elimination of GHE\n\n\nCode\nmuni_breakeven_points &lt;- c2pins |&gt;\n  left_join(muni_rates) |&gt;\n  filter(exe_homeowner == 10000) %&gt;% \n  filter(exe_senior == 0 & \n           exe_freeze == 0 & \n           exe_longtime_homeowner == 0 & \n           exe_disabled == 0 & \n           exe_vet_returning == 0 & \n           exe_vet_dis_lt50 == 0 & \n           exe_vet_dis_50_69 == 0 & \n           exe_vet_dis_ge70 == 0 & \n           exe_abate == 0  &\n           exe_missing_disvet == 0) %&gt;%\n  \n  group_by(clean_name) %&gt;%\n  summarize(\n    median_AV = median(av),     # median class 2 AV for properties that did claim the GHE but not other exemptions\n    bill_current = mean(eav_postexemptions * tax_code_rate), # money collected by non-TIF agencies\n    \n    bill_noGHE = mean(rate_noGHE * (eav_postexemptions+exe_homeowner)), # this uses tax code tax rate\n   # rate_change = mean(tax_code_rate - tc_hyp_taxrate),   # avg tax code level rate change \n    muni_avg_rate_change = mean(tax_code_rate - rate_noGHE),\n    # nobillchange_propertyEAV = round(mean(exe_homeowner * \n    #                                         (tax_code_rate / (tax_code_rate-tc_hyp_taxrate)))), #   \n     nobillchange_propertyEAV_muni = round(mean(exe_homeowner *\n                                                 (rate_current/(rate_current-rate_noGHE) )))\n  ) |&gt; \n  mutate(nochange_av = nobillchange_propertyEAV_muni / eq_factor,\n         nochange_av_muni = nobillchange_propertyEAV_muni/ eq_factor,\n         ) \n\n\n\n\nmuni_breakeven_points %&gt;%       \n  filter(clean_name %in% c(\"Chicago\",\"Park Forest\", \"Phoenix\", \"Riverdale\", \"Winnetka\")) |&gt;\n  ggplot(aes(y=median_AV, x = clean_name)) +\n  geom_col()+\n    geom_text(aes(y=median_AV + 3000, label = round(median_AV) ) ) +\n  scale_y_continuous(labels = scales::dollar) +\n  theme_classic() +\n  scale_x_discrete(label = c(\"Chicago\",\"Park Forest\", \"Phoenix\", \"Riverdale\", \"Winnetka\")) + \n  labs(y = \"Median Residential AV\", x = \"\", \n       title = \"Median Residential Property Assessed Value - All Class 2 property Types\")\n\nmuni_breakeven_points %&gt;%       \n  filter(clean_name %in% c(\"Chicago\",\"Park Forest\", \"Phoenix\", \"Riverdale\", \"Winnetka\")) |&gt;\n  ggplot(aes(y=nochange_av, x = clean_name)) +\n  geom_col() +\n  geom_text(aes(y=nochange_av + 3000, label = round(nochange_av)) ) +\n  scale_y_continuous(labels = scales::dollar) +\n  theme_classic() +\n  scale_x_discrete(label = c(\"Chicago\", \"Park Forest\", \"Phoenix\", \"Riverdale\", \"Winnetka\")) + \n  labs(y = \"Breakeven Point - AV\", x = \"\", \n  title = \"Residential Property AV Breakeven Point\", \n  caption = \"Residential properties above these values would have their bills decrease if the GHE were eliminated\n       (if they had claimed the GHE before)\")\n\n\n\n\nMedian property values vary widely across Cook County.\n\n\n\n\n\n\n\nBreak even points also vary across municipalities, sometimes by orders of magnitude. Breakeven points are always higher than the median property within a municipality.\n\n\n\n\nMedian Residential Property and Breakeven Point\n\nOf homeowners who take the GHE, those that gain the largest monetary benefit from the exemption in proportion to their home values are those who own below-average valued properties that are in a municipality with relatively high tax rates. Property owners who benefit the least from taking the exemption (again, relative to the value of their homes) are those with above-average valued homes in jurisdictions with low tax rates. Note that these are not the same homeowners who benefit the most in absolute dollar terms—that outcome depends on both the absolute and relative value of the property and the composition of properties within the jurisdiction.\n\n\nCode\nmuni_breakeven_points %&gt;%\n # filter(nochange_av &lt; 300000) %&gt;%\n  ggplot(aes(y=nochange_av, \n             x = median_AV, \n             label=clean_name\n             )) +\n  geom_abline(intercept = 0, slope = 1, lty = 2, alpha = .4) +\n  geom_point(aes(alpha = .5)) +\n # geom_smooth(method = \"lm\" )+\n  geom_text(aes(y = (nochange_av-5000), x = (median_AV)), size = 2)+\n  theme_classic() +\n  scale_x_continuous(labels = scales::dollar) +\n  scale_y_continuous(labels = scales::dollar) +\n  theme(legend.position = \"none\")+\n  labs(y = \" Breakeven Point\", \n       x = \"Median AV - Class 2 Properties in Municipality\", \n      # title = \"Some highly valued homes would have lower tax bills if the GHE were eliminated\", \n       #caption = \"The breakeven point is the assessed values at which a major class 2 \n     #  property would not have their taxbill change if the GHE were eliminated.\"\n     )\n\n\n\n\n\n\nFigure 6.1: Includes all municipalities\n\n\n\n\n\n\n\n\n\nCode\nmuni_breakeven_points %&gt;%\n  filter(nochange_av &lt; 300000) %&gt;%\n  ggplot(aes(y=nochange_av, \n             x = median_AV, \n             label=clean_name\n             )) +\n  geom_abline(intercept = 0, slope = 1, lty = 2, alpha = .4) +\n\n  geom_point(aes(alpha = .5)) +\n  \n  geom_point(data = (muni_breakeven_points %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Riverdale\",\"Dolton\"))), aes(y = nochange_av, x = median_AV, color = \"red\"), size = 3) +\n  ggrepel::geom_label_repel(data = (muni_breakeven_points %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Riverdale\", \"Dolton\"))), aes(y = (nochange_av), x = (median_AV)), size = 3)+\n  theme_classic() +\n  theme(panel.background = element_blank()) + \n  scale_x_continuous(labels = scales::dollar, expand = c(0,0), limits = c(0,170000) ) +\n  scale_y_continuous(labels = scales::dollar, expand = c(0,0), limits = c(0,170000) ) +\n    theme(legend.position = \"none\") +\n\n  labs(title = \"Municipalities' Median AV & Breakeven Point \\nClass 2 Properties Only\",\n    y = \"Breakeven Point\", \n       x = \"Median AV\", \n # caption = \"The breakeven point is the assessed values at which a major class 2 property would not have their taxbill change if the \n # GHE were eliminated. Excludes outliers: University Park, Bedford Park, McCook, Hodgkins, and Rosemont. Class 2 properties that had\n # claimed the GHE would have lower taxbills even if the GHE were removed if the AV is above the breakeven point.\"\n ) + coord_fixed()\n\n#ggsave(\"breakevenpoint.svg\", bg = \"transparent\")\n\n\n\n\n\nFigure 6.2: The breakeven point is the assessed values at which a major class 2 property would not have their taxbill change if the GHE were eliminated.",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2023.html#how-progressive-are-exemptions",
    "href": "exemption_addendum_2023.html#how-progressive-are-exemptions",
    "title": "Tax Year 2023",
    "section": "How progressive are exemptions?",
    "text": "How progressive are exemptions?\n\nFigure 3. Ratio of Tax Bills to AV for 25th and 75th Percentile AV Class 2 Properties with $10,000 GHE\nFor the different exemption scenarios, we created new exemption variables for alternate exemption amounts that can be subtracted from a properties equalized AV.\n\nex. For exe_neg10 all exemption amounts are equal to zero.\nFor exe_0, This variable should be the same as the current tax system since we did not add or remove any exempt EAV to the PIN. If the EAV for a PIN is less than 10000 EAV and they did claim the general homestead exemption, then their exempt EAV is equal to their EAV.\nIf the exempt EAV allowable for the GHE was increased to 20,000 EAV, then the variable exe_plus10 is used.\n\n\n\nCode\npin_data &lt;- pin_data %&gt;% \n  left_join(class_dict, by = c(\"class\" = \"class_code\")) %&gt;%\n  mutate(\n \n    tif_increment_eav = final_tax_to_tif / tax_code_rate,\n    \n    nontif_eav_preexe = av_clerk*eq_factor - tif_increment_eav,\n    nontif_eav_postexe = av_clerk*eq_factor - tif_increment_eav - all_exemptions,\n    \n    eav_postexemptions = av_clerk*eq_factor - all_exemptions,\n    eav_preexemptions = av_clerk*eq_factor) |&gt;\n  ## Create variables for alternate exemption amounts that can be subtracted from a properties equalized AV\n  mutate(\n    eav = eav_preexemptions,\n    exe_neg10 = 0,\n         \n      # exe_0 implies no additional or removed EAV. Current tax system. \n         exe_0 = ifelse(eav &lt; 10000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;10000 & exe_homeowner!=0, 10000, 0 )),  # no change in current exemptions\n         exe_plus10 = ifelse(eav &lt; 20000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;20000 & exe_homeowner!=0, 20000, 0 )),\n         exe_plus20 = ifelse(eav &lt; 30000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;30000 & exe_homeowner!=0, 30000, 0 ) ),\n         exe_plus30 = ifelse(eav &lt; 40000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;40000 & exe_homeowner!=0, 40000, 0) ),\n         exe_plus40 = ifelse(eav &lt; 50000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;50000 & exe_homeowner!=0, 50000, 0) ),\n         mil_home = ifelse(major_class_code == 2 & av*10 &gt; 1000000, 1, 0))\n\n\n# all pins in munis fully within cook county that are some form of single-family, detached home\nsingfam_pins &lt;- pin_data %&gt;% \n  filter(Option2 == \"Single-Family\")\n\n\n\n\nCode\n# Calculates tax rates for all exemption scenarios.\nscenario_calcs &lt;- pin_data %&gt;%    \n  group_by(clean_name) %&gt;%\n\n    summarize(MuniLevy = round(sum(final_tax_to_dist, na.rm = TRUE)), # amount billed by munis with current exemptions in place\n            current_nonTIF_EAV_post_exemps = sum(final_tax_to_dist/(tax_code_rate), na.rm = TRUE),\n            current_TIF_increment_EAV = sum(final_tax_to_tif/(tax_code_rate), na.rm=TRUE),  \n            current_Exempt_EAV = sum(all_exemptions, na.rm=T), \n            current_GHE = sum(exe_homeowner, na.rm=TRUE),\n            Total_EAV = sum(all_exemptions+(final_tax_to_dist+final_tax_to_tif)/(tax_code_rate), na.rm = TRUE),\n            exe_neg10 = sum(exe_neg10),\n            exe_0 = sum(exe_0), # no change, for comparison\n            exe_plus10 = sum(exe_plus10),\n            exe_plus20 = sum(exe_plus20),\n            exe_plus30 = sum(exe_plus30),\n            exe_plus40 = sum(exe_plus40),\n            mil_home = sum(mil_home)\n            ) %&gt;%\n\n  # remove all GHE (up to 10,000 EAV added back to base per PIN), \n  # add exe_homeowner back to taxable base\n  mutate(neg10_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE,    # adds GHE exempt EAV back to taxable base and decreases tax rates\n         plus10_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE - exe_plus10, # will increase tax rates\n         plus20_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE - exe_plus20,\n         plus30_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE - exe_plus30,\n         plus40_taxable_eav = Total_EAV - current_TIF_increment_EAV - current_Exempt_EAV + current_GHE - exe_plus40,\n         scenario_noexemptions_taxable_eav = Total_EAV - current_TIF_increment_EAV) %&gt;%\n  \n  mutate(tr_neg10 = MuniLevy / neg10_taxable_eav,\n         tr_nochange = MuniLevy / current_nonTIF_EAV_post_exemps,\n         tr_plus10 = MuniLevy / plus10_taxable_eav,\n         tr_plus20 = MuniLevy / plus20_taxable_eav,\n         tr_plus30 = MuniLevy / plus30_taxable_eav,\n         tr_plus40 = MuniLevy / plus40_taxable_eav, \n         tax_rate_current = MuniLevy/current_nonTIF_EAV_post_exemps,\n         taxrate_noexemps = MuniLevy /(Total_EAV - current_TIF_increment_EAV  ),\n         taxrate_noTIFs = MuniLevy / (Total_EAV - current_Exempt_EAV),\n         taxrate_noTIFs_orExemps = MuniLevy / Total_EAV) %&gt;%\n  select(clean_name, MuniLevy, tr_neg10:taxrate_noTIFs_orExemps, everything())\n\nscenario_taxrates &lt;- scenario_calcs %&gt;%  \n  select(clean_name, MuniLevy, tr_neg10:taxrate_noTIFs_orExemps) \n\nscenario_taxrates |&gt; \n  select(-c(tax_rate_current:taxrate_noTIFs_orExemps)) |&gt;\n  #mutate(across(.cols=(tr_neg10:tr_plus40), s, accuracy = 0.01)) |&gt;\n  rename(Municipality = clean_name,\n        `Composite Levy` = MuniLevy,\n    `Rate if \\nGHE=0K` = tr_neg10, \n         `Current\\nTax Rate`= tr_nochange, \n         `Rate if\\nGHE=20K`= tr_plus10, \n         `Rate if\\nGHE=30K` = tr_plus20, \n         `Rate if\\nGHE=40K` = tr_plus30, \n         `Rate if\\nGHE=50K` = tr_plus40) |&gt; \n  DT::datatable(rownames = FALSE)  |&gt;\n  formatCurrency(columns = c(2), digits = 0) |&gt;\n  formatPercentage(3:8, digits = 1)\n\n\n\n\n\n\n\n\nCode\nmunis_billchange &lt;- munis_ranked %&gt;% \n    left_join(scenario_taxrates) %&gt;%\n\n  mutate(\n    eav = eq_av,\n    exe_neg10 = 0,\n         \n      # exe_0 implies no additional or removed EAV. Current tax system. \n         exe_0 = ifelse(eav &lt; 10000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;10000 & exe_homeowner!=0, 10000, 0 )),  # no change in current exemptions\n         exe_plus10 = ifelse(eav &lt; 20000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;20000 & exe_homeowner!=0, 20000, 0 )),\n         exe_plus20 = ifelse(eav &lt; 30000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;30000 & exe_homeowner!=0, 30000, 0 ) ),\n         exe_plus30 = ifelse(eav &lt; 40000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;40000 & exe_homeowner!=0, 40000, 0) ),\n         exe_plus40 = ifelse(eav &lt; 50000 & exe_homeowner!=0, eav, \n                             ifelse(eav&gt;50000 & exe_homeowner!=0, 50000, 0) ),\n         mil_home = ifelse(av*10 &gt; 1000000, 1, 0)) |&gt;\n    mutate(,\n    # current bill = current tax rate * portion of levy billed\n         equalized_AV = av_clerk*eq_factor,\n         \n   # ## Made negative tax bills!! ## #\n          bill_neg10 = tr_neg10*(equalized_AV-all_exemptions+ exe_homeowner -exe_neg10),\n\n         bill_current = tax_code_rate*(equalized_AV-all_exemptions),\n         bill_plus10 =  tr_plus10*(equalized_AV-all_exemptions+ exe_homeowner -exe_plus10),\n         bill_plus20 = tr_plus20*(equalized_AV-all_exemptions+ exe_homeowner -exe_plus20),\n         bill_plus30 = tr_plus20*(equalized_AV-all_exemptions+ exe_homeowner -exe_plus30),\n         bill_plus40 = tr_plus20*(equalized_AV-all_exemptions+ exe_homeowner -exe_plus40),\n    \n    # ## make bills $1 if they had been negative.\n         bill_neg10 = ifelse(bill_neg10 &lt; 1, 1, bill_neg10),\n         bill_current = ifelse(bill_current &lt; 1, 1, bill_current),\n         bill_plus10 = ifelse(bill_plus10 &lt; 1, 1, bill_plus10),\n         bill_plus20 = ifelse(bill_plus20 &lt; 1, 1, bill_plus20),\n         bill_plus30 = ifelse(bill_plus30 &lt; 1, 1, bill_plus30),\n         bill_plus40 = ifelse(bill_plus40 &lt; 1, 1, bill_plus40),\n\n         )%&gt;%\n  mutate(\n         zerodol_bills_ghe0 = ifelse(bill_neg10 &lt; 5, 1, 0),\n         zerodol_bills_current = ifelse(bill_current &lt; 5, 1, 0),\n         zerodol_bills_ghe20 = ifelse(bill_plus10 &lt; 5, 1, 0),\n         zerodol_bills_ghe30 = ifelse(bill_plus20 &lt; 5, 1, 0),\n         zerodol_bills_ghe40 = ifelse(bill_plus30 &lt; 5, 1, 0),\n         zerodol_bills_ghe50 = ifelse(bill_plus40 &lt; 5, 1, 0),\n  ) %&gt;%\n  ungroup() |&gt;\n  group_by(clean_name, rank, has_HO_exemp) %&gt;% \n  summarize(median_AV = round(median(av)),\n            median_EAV = round(median(eav)),\n            mean_bill_neg10 = round(mean(bill_neg10, na.rm=TRUE)),\n            mean_bill_cur = round(mean(bill_current, na.rm=TRUE)),\n            mean_bill_plus10 = round(mean(bill_plus10, na.rm=TRUE)),\n            mean_bill_plus20 = round(mean(bill_plus20, na.rm=TRUE)),\n            mean_bill_plus30 = round(mean(bill_plus30, na.rm=TRUE)),\n            mean_bill_plus40 = round(mean(bill_plus40, na.rm=TRUE)),\n            \n            tr_neg10 = round(mean(tr_neg10*100), digits = 2), \n            cur_comp_TC_rate = round(mean(tax_code_rate*100), digits = 2),\n            tr_plus10 = round(mean(tr_plus10*100), digits = 2),\n            tr_plus20 = round(mean(tr_plus20*100), digits = 2),\n            tr_plus30 = round(mean(tr_plus30*100), digits = 2),\n            tr_plus40 = round(mean(tr_plus40*100), digits = 2),\n            pincount=n(),\n            zerodol_bills_ghe0 = sum(zerodol_bills_ghe0),           \n            zerodol_bills_current = sum(zerodol_bills_current),\n            zerodol_bills_ghe20 = sum(zerodol_bills_ghe20),\n            zerodol_bills_ghe30 = sum(zerodol_bills_ghe30),\n            zerodol_bills_ghe40 = sum(zerodol_bills_ghe40),\n            zerodol_bills_ghe50 = sum(zerodol_bills_ghe50),\n\n\n  ) %&gt;%\n  mutate(clean_name = ifelse(clean_name == \"Hazelcrest\", \"Hazel Crest\", clean_name)) %&gt;%\n  arrange(has_HO_exemp, rank)\n\n\n\n\n\nratios &lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(currbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_cur/median_AV, NA)) %&gt;%\n  mutate(currbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_cur/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(currbill_to_AV_25 = max(currbill_to_AV_25, na.rm=TRUE),\n            currbill_to_AV_75 = max(currbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = currbill_to_AV_25/currbill_to_AV_75) %&gt;% filter(muni_ratio_25to75 &gt; 0.01)\n\n\n\nggplot(data = ratios, aes(y = currbill_to_AV_25, x = currbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1, lty = 2, alpha = .4) +\n  geom_point(data = ratios, aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = currbill_to_AV_25, x = currbill_to_AV_75), size = 2, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = currbill_to_AV_25, x = currbill_to_AV_75, color = \"red\"), size = 2)+\n\n  theme_classic() +\n  theme(legend.background = element_rect(fill = \"transparent\"), \n        legend.box.background = element_rect(fill = \"transparent\"), \n        panel.background = element_rect(fill = \"transparent\"), \n        panel.grid.major = element_blank(), \n        panel.grid.minor = element_blank(), \n        plot.background = element_rect(fill = \"transparent\", \n                                       color = NA) ) +\n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n   scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") +\n  labs(title=\"\", y=\"Tax Burden as a Share of AV \\n(25th Percentile)\", x=\"Tax Burden as a Share of AV \\n(75th Percentile)\", subtitle = \"Current Tax System, GHE = 10,000 EAV\") + coord_fixed()\n\n\n\n\n\n\n\n\n\n\nCode\npin_data %&gt;%\n  filter(av &lt; 300000) %&gt;% # just to see the histogram better\n  ggplot( aes(x=av)) +\n  geom_histogram(bins = 50)  +\n  theme_classic()+\n  labs(title = \"Cook County Class 2 Residential PIN Distribution of AV\", \n       x = \"Assessed Value ($)\", y=\"# of Pins\", \n       caption = \"Dropped PINs with AVs over $300,000 for better visual of histogram bins.\") +\n  scale_x_continuous(label = scales::dollar) +\n  scale_y_continuous(label = scales::comma)\n\n\nsingfam_pins %&gt;%\n filter(av &lt; 300000) %&gt;% # just to see the histogram better\n  \n  ggplot( aes(x=av)) +\n  geom_histogram(bins = 50)  +\n  theme_classic()+\n  labs(title = \"Cook County Single-Family PIN Distribution of AV\", \n       x = \"Assessed Value ($)\", y=\"# of Pins\", \n       caption = \"Dropped PINs with AVs over $300,000 for better visual of histogram bins.\"\n       ) +\n  scale_x_continuous(label = scales::dollar)+\n  scale_y_continuous(label = scales::comma)\n\n\n\n\n\n\nMajor Class 2 Properties\n\n\n\n\n\n\n\nSingle-family subgroup of C2 Properties\n\n\n\n\n\n\n\nDistribution of Assessed Values: Class 2 Properties vs Single-Family Properties There is a difference in the assessed values depending on if you use all 200 level properties or only a subset of them. All figures and tables were created for both options when writing the report as a robustness check.",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2023.html#what-would-happen-if-the-ghe-value-were-increased",
    "href": "exemption_addendum_2023.html#what-would-happen-if-the-ghe-value-were-increased",
    "title": "Tax Year 2023",
    "section": "What would happen if the GHE value were increased?",
    "text": "What would happen if the GHE value were increased?\n\nFigure 4. Effect of Changing the GHE on Progressivity\n\nCode\nratios &lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(currbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_neg10/median_AV, NA)) %&gt;%\n  mutate(currbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_neg10/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(GHE_0_bill_to_AV_25 = max(currbill_to_AV_25, na.rm=TRUE),\n            GHE_0_bill_to_AV_75 = max(currbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = GHE_0_bill_to_AV_25/GHE_0_bill_to_AV_75) \n\n\nggplot(data = ratios, aes(y = GHE_0_bill_to_AV_25, x = GHE_0_bill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = GHE_0_bill_to_AV_25, x = GHE_0_bill_to_AV_75, label = clean_name), size = 3)+\n    geom_point(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = GHE_0_bill_to_AV_25, x = GHE_0_bill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") +\n  labs(title = \"GHE = $0 EAV\", x = \"\", y = \"\")\nratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(currbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_cur/median_AV, NA)) %&gt;%\n  mutate(currbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_cur/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(currbill_to_AV_25 = max(currbill_to_AV_25, na.rm=TRUE),\n            currbill_to_AV_75 = max(currbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = currbill_to_AV_25/currbill_to_AV_75) %&gt;% filter(muni_ratio_25to75 &gt; 0.01)\n\n\n\nggplot(data = ratios, aes(y = currbill_to_AV_25, x = currbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(data = ratios, aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = currbill_to_AV_25, x = currbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = currbill_to_AV_25, x = currbill_to_AV_75, color = \"red\"), size = 2)+\n\n  theme_classic() +\n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n   scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") +\n  labs(title = \"GHE = $10,000 EAV (Current)\", x=\"\", y=\"\")\nnew_ratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(newbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_plus10/median_AV, NA)) %&gt;%\n  mutate(newbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_plus10/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(newbill_to_AV_25 = max(newbill_to_AV_25, na.rm=TRUE),\n            newbill_to_AV_75 = max(newbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = newbill_to_AV_25/newbill_to_AV_75) %&gt;% \n  filter(muni_ratio_25to75 &gt; 0.01)\n\n\nggplot(data = new_ratios, aes(y = newbill_to_AV_25, x = newbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(data = new_ratios, aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n  scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") + \n  labs(title = \"GHE = $20,000 EAV\", x= \"\", y=\"\")\nnew_ratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(newbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_plus20/median_AV, NA)) %&gt;%\n  mutate(newbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_plus20/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(newbill_to_AV_25 = max(newbill_to_AV_25, na.rm=TRUE),\n            newbill_to_AV_75 = max(newbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = newbill_to_AV_25/newbill_to_AV_75) %&gt;% \n  \n  filter(muni_ratio_25to75 &gt; 0.01)\n\n\nggplot(data = new_ratios, aes(y = newbill_to_AV_25, x = newbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") + \n  labs(title = \"GHE = $30,000 EAV\",\n                                        x = \"\", y = \"\")\nnew_ratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(newbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_plus30/median_AV, NA)) %&gt;%\n  mutate(newbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_plus30/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(newbill_to_AV_25 = max(newbill_to_AV_25, na.rm=TRUE),\n            newbill_to_AV_75 = max(newbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = newbill_to_AV_25/newbill_to_AV_75) %&gt;% \n  filter(muni_ratio_25to75 &gt; 0.01)\n\n\nggplot(data = new_ratios, aes(y = newbill_to_AV_25, x = newbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") + \n  labs(title = \"GHE = $40,000 EAV\", \n                                     x= \"\", y = \"\")\nnew_ratios&lt;- munis_billchange %&gt;% \n  filter(has_HO_exemp == 1 &  !is.na(rank)) %&gt;% # claimed exemption in 2021\n  mutate(newbill_to_AV_25 = ifelse(rank == \"q25\", mean_bill_plus40/median_AV, NA)) %&gt;%\n  mutate(newbill_to_AV_75 = ifelse(rank == \"q75\", mean_bill_plus40/median_AV, NA)) %&gt;% \n  group_by(clean_name) %&gt;%\n  summarize(newbill_to_AV_25 = max(newbill_to_AV_25, na.rm=TRUE),\n            newbill_to_AV_75 = max(newbill_to_AV_75, na.rm=TRUE)) %&gt;%\n  mutate(muni_ratio_25to75 = newbill_to_AV_25/newbill_to_AV_75) %&gt;% filter(muni_ratio_25to75 &gt; 0.01)\n\n\nggplot(data = new_ratios, aes(y = newbill_to_AV_25, x = newbill_to_AV_75, label = clean_name)) + \n  geom_abline(intercept = 0, slope = 1) +\n  geom_point(aes(alpha = .5)) + \n  ggrepel::geom_label_repel(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75), size = 3, max.overlaps = Inf, point.padding = 0, # additional padding around each point\n    min.segment.length = 0, # draw all line segments\n    )+\n    geom_point(data = (new_ratios %&gt;% filter(clean_name %in% c(\"Park Forest\", \"Chicago\", \"Winnetka\", \"Glencoe\", \"Riverdale\", \"Dolton\", \"Markham\", \"Chicago Heights\", \"Hazel Crest\", \"Phoenix\"))), aes(y = newbill_to_AV_25, x = newbill_to_AV_75, color = \"red\"), size = 2)+\n  theme_classic() + \n    scale_y_continuous(limits = c(0, .6), expand = c(0,0))+\n\n  scale_x_continuous(limits = c(0, .6), expand = c(0,0))+\n  theme(legend.position = \"none\") + labs(title = \"GHE = $50,000\", \n                                      x = \"\", y = \"\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTable 3. Revenue Neutral Tax Rates\nRevenue Neutral Tax Rates (Percent) for Select Municipalities as a Function of GHE Value\n\n\nCode\nscenario_taxrates %&gt;% \n  filter(clean_name %in% c(\"Chicago\", \"Dolton\", \"Glencoe\")) |&gt;\n  mutate(across(starts_with(\"tr_\"), scales::percent, accuracy = 0.01))|&gt;\n  select(Municipality = clean_name,\n         \"0 GHE\" = tr_neg10,\n         \"10,000 GHE (Current)\" = tr_nochange,\n         \"20,000 GHE\" = tr_plus10,\n         \"30,000 GHE\" = tr_plus20,\n         \"40,000 GHE\" = tr_plus30,\n         \"50,000 GHE\" = tr_plus40) |&gt;\n  flextable::flextable()\n\n\nMunicipality0 GHE10,000 GHE (Current)20,000 GHE30,000 GHE40,000 GHE50,000 GHEChicago6.82%7.04%7.27%7.50%7.73%7.96%Dolton16.95%19.93%24.38%30.23%36.84%40.40%Glencoe7.96%8.12%8.29%8.46%8.64%8.83%\n\n\n\n\nFigure 5. GHE Value and Revenue Neutral Tax Rates\nRelationship of GHE Value and Revenue Neutral Tax Rates in Chicago, Dolton, and Glencoe\n\n\nCode\nscenario_taxrates %&gt;% \n  filter(clean_name %in% c(\"Chicago\", \"Dolton\", \"Glencoe\")) |&gt;\n  select(Municipality = clean_name,\n         \"0 GHE\" = tr_neg10,\n         \"10,000 GHE\\n(Current)\" = tr_nochange,\n         \"20,000 GHE\" = tr_plus10,\n         \"30,000 GHE\" = tr_plus20,\n         \"40,000 GHE\" = tr_plus30,\n         \"50,000 GHE\" = tr_plus40) %&gt;%\n  pivot_longer(cols = c(`0 GHE`:`50,000 GHE`), names_to = \"Scenarios\") %&gt;%\n\n  ggplot() +\n  geom_line(aes(x=Scenarios, y = value, group = Municipality, color = Municipality)) + theme_classic() + \n  labs(title = \"Tax Rates for GHE Scenarios\", x = \"GHE Amount\", y = \"Tax Rate\") +\n  scale_y_continuous(label = scales::percent)",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "exemption_addendum_2023.html#paying-for-the-inequitable-effects-of-exemptions",
    "href": "exemption_addendum_2023.html#paying-for-the-inequitable-effects-of-exemptions",
    "title": "Tax Year 2023",
    "section": "Paying for the inequitable effects of exemptions",
    "text": "Paying for the inequitable effects of exemptions\n\nFigure 6. Exemptions by Value in Class 8 Municipalities\n\n\nCode\npin_data %&gt;% \n  group_by(clean_name) %&gt;% \n  summarize(\n    Homeowner = sum(exe_homeowner),\n    Senior = sum(exe_senior),\n    `Senior Freeze` = sum(exe_freeze),\n   # exe_longtime_homeowner = sum(exe_longtime_homeowner),\n    Other = sum(exe_disabled),\n    \n  ) %&gt;%\n  filter(clean_name %in% c(\"Blue Island\", \"Markham\", \"Matteson\", \"Park Forest\")) %&gt;%\n  pivot_longer(cols = c(Homeowner:Other), names_to = \"Exemption Type\") %&gt;%\n  ggplot() + \n  geom_col(aes(x=clean_name, y = value, fill = `Exemption Type`), position = \"dodge\") +\n  scale_y_continuous(label = scales::dollar) + \n  theme_classic() + \n  labs(x = element_blank(), y = \"Exempt EAV\")\n\n\n\n\n\nFigure 6.3: Exempt EAV by Type in Select Municipalities. Shows values as calculated in original report that undercounted disabled veteran exemptions.\n\n\n\n\n\n\n\n\n\n\nCode\npin_data %&gt;% \n  group_by(clean_name) %&gt;% \n  summarize(\n    Homeowner = sum(exe_homeowner),\n    Senior = sum(exe_senior),\n    `Senior Freeze` = sum(exe_freeze),\n   # exe_longtime_homeowner = sum(exe_longtime_homeowner),\n    Other = sum(exe_missing_disvet+exe_disabled),\n    \n  ) %&gt;%\n  filter(clean_name %in% c(\"Blue Island\", \"Markham\", \"Matteson\", \"Park Forest\")) %&gt;%\n  pivot_longer(cols = c(Homeowner:Other), names_to = \"Exemption Type\") %&gt;%\n  ggplot() + \n  geom_col(aes(x=clean_name, y = value, fill = `Exemption Type`), position = \"dodge\") +\n  scale_y_continuous(label = scales::dollar) + \n  theme_classic() + \n  labs(x = element_blank(), y = \"Exempt EAV\")\n\n\n\n\n\nFigure 6.4: Exempt EAV by Type in Select Municipalities. Shows adjusted values of exemption amounts after finding data error.\n\n\n\n\n\n\n\n\n\n\nCode\n#\npin_data %&gt;% \n  group_by(clean_name) %&gt;% \n  summarize(\n    Homeowner = sum(exe_homeowner),\n    Senior = sum(exe_senior),\n    `Senior Freeze` = sum(exe_freeze),\n   # exe_longtime_homeowner = sum(exe_longtime_homeowner),\n    Other = sum(exe_missing_disvet+exe_disabled),\n    \n  ) %&gt;%\n  ungroup()  |&gt; \n  mutate(across(Homeowner:Other, scales::comma)) |&gt;\n  rename(Municipality = clean_name) |&gt;\n  arrange(desc(Other)) |&gt; \n  DT::datatable(rownames = FALSE)\n\n\n\n\n\n\n\n\nFigure 7. Exemption Share in Class 8 Municipalities\n\n\nCode\npin_data %&gt;% \n  group_by(clean_name) %&gt;% \n  summarize(\n    all_exemptions = sum(exe_total_adj),\n    eq_av = sum(av_clerk*eq_factor),\n    tif_increment_eav = sum(final_tax_to_tif/tax_code_rate)\n  ) %&gt;%\n  mutate(taxable_eav = eq_av - tif_increment_eav - all_exemptions) |&gt;\n  filter(clean_name %in% c(\"Blue Island\", \"Markham\", \"Matteson\", \"Park Forest\")) %&gt;%\n  pivot_longer(cols = c(all_exemptions:taxable_eav), names_to = \"exe_type\") %&gt;%\n    # all exemptions includes all exemptions, but adjusted for missing disabled veteran exemptions \n\n  filter(exe_type %in% c(\"taxable_eav\", \"all_exemptions\"))|&gt;\n  mutate(EAV = factor(exe_type, levels = c(\"taxable_eav\", \"all_exemptions\"), labels = c(\"Taxed EAV\", \"Exempt EAV\")) ) |&gt;\n  ggplot() + \n  geom_col(aes(x=clean_name, y = value, fill = EAV), position = \"stack\") +\n  scale_y_continuous(label = scales::dollar, limits = c(0,600000000)) + \n  theme_classic() + \n  geom_text(aes(x=clean_name, y = value, label = scales::comma(value)), \n            position = \"stack\",  vjust=1.1)+\n  labs(x = element_blank(), y = \"Non-TIF Increment EAV in Municipality\")\n\n\n\n\nWith adjusted exemption values and calculating allvalues from the pin datatable instead of using ptaxsim::tax_bill() values. Would be more correct than original ways values were calculated.\n\n\n\n\n\n\n\nMillion dollar homes\nAddendum mentions scenario where homes valued at $1 million were ineligible for the GHE.\n\n\nCode\nmil_homes_total &lt;- munis_ranked %&gt;% mutate(mil_home = ifelse(class_1dig == 2 & av*10 &gt; 1000000, 1, 0) ) %&gt;% summarize(million_dollar_homes = sum(mil_home))\n\nmil_homes_w_ghe &lt;- munis_ranked %&gt;% mutate(mil_home = ifelse(class_1dig == 2 & av*10 &gt; 1000000,1,0) ) %&gt;% filter(has_HO_exemp == 1)  %&gt;% summarize(million_dollar_homes = sum(mil_home))\n\nmil_home_count &lt;- munis_ranked %&gt;% \n  mutate(mil_home = ifelse(class_1dig == 2 &av*10 &gt; 1000000,1,0) ) %&gt;%\n  filter(has_HO_exemp == 1) %&gt;% \n  summarize(million_dollar_homes = sum(mil_home))\n\nmilhomes_w_exemps &lt;- munis_ranked %&gt;% \n  mutate(mil_home = ifelse(class_1dig == 2 & av*10 &gt; 1000000, 1, 0) ) %&gt;%\n  filter(has_HO_exemp == 1 & mil_home == 1) %&gt;% \n  summarize(\n    exempt_eav  = sum(exe_total),\n    million_dollar_homes = sum(mil_home),\n    bonus_rev = sum(tax_code_rate*exe_homeowner))\n\n\nThere are 35,857 homes worth $1 million dollars in Cook County, IL.\nOf those homes, 21,920 claim the GHE, which reduces 10,000 EAV from the properties equalized AV.\nAmount of money that could be “transferred” to areas impacted by high tax rates =\nSum of (tax code rate * exempt EAV) = $22,345,677",
    "crumbs": [
      "Exemption Addendum",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "incentive_report_yearlytrends.html",
    "href": "incentive_report_yearlytrends.html",
    "title": "Yearly Trends - Incentive Classifications",
    "section": "",
    "text": "Time Trends - All Years\nThe file comm_ind_inmunis_timeseries_2006to2023.csv contains all PINs that had an incentive property class for at least 1 year. It includes all observations for a property during the years that it existed, even if it is not an incentive class property in that year.\nOnly includes PINs in incorporated areas.",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Yearly Trends - Incentive Classifications</span>"
    ]
  },
  {
    "objectID": "incentive_report_yearlytrends.html#time-trends---all-years",
    "href": "incentive_report_yearlytrends.html#time-trends---all-years",
    "title": "Yearly Trends - Incentive Classifications",
    "section": "",
    "text": "FMV\n\n\nCode\nyear_count &lt;- 13\n\ncomm_ind_pins &lt;- read_csv(\"../Output/comm_ind_PINs_2006to2023_timeseries.csv\")\n\n\n\n\nCode\ncommind_together_fmv &lt;- comm_ind_pins %&gt;%\n  filter(land_use %in% c(\"Industrial\", \"Commercial\")) |&gt;\n  group_by(year) %&gt;%\n  summarize(\n    fmv_CI = sum(fmv, na.rm=TRUE),\n    fmv_incent = sum(ifelse(incent_prop == \"Incentive\", fmv, 0))\n          )  %&gt;% \n  mutate(pct_incent = (fmv_incent / fmv_CI))\n\n  \n\ntable_fmv &lt;- comm_ind_pins %&gt;% \n    filter(land_use %in% c(\"Industrial\", \"Commercial\")) |&gt;\n\n  group_by(year, land_use) %&gt;%\n  summarize(\n    fmv_incent = sum(ifelse(incent_prop == \"Incentive\", fmv, 0), na.rm=TRUE),\n    fmv = sum(fmv, na.rm=TRUE),\n    \n  )  %&gt;% \n  mutate(pct_incent = (fmv_incent / fmv)) %&gt;%  \n  \n  arrange(year) %&gt;%\n  select(year, land_use, fmv_incent, pct_incent) |&gt;\n  pivot_wider(id_cols = year, names_from = land_use, \n              values_from = c(fmv_incent, pct_incent)) %&gt;% ungroup() |&gt;\n  select(-year)\n\n\ncbind(commind_together_fmv, table_fmv) %&gt;% \n  select(Year = year, \n         \"C&I Incentive FMV\" = fmv_incent, \n         \"Share of C&I\" = pct_incent,\n         \"Commercial Incent. FMV\" = fmv_incent_Commercial, \n         \"Share of Commercial\" = pct_incent_Commercial,\n         \"Industrial Incent. FMV\" = fmv_incent_Industrial, \n         \"Share of Industrial\" = pct_incent_Industrial, \n         \"C&I FMV\" = fmv_CI) %&gt;% \n  mutate(Year = as.character(Year)) %&gt;%\n  mutate(across(contains(\"Share\"), scales::percent, accuracy = 0.01)) |&gt;\n  \n  flextable() %&gt;%\n  add_header_row(values = c(\" \", \"Commercial & Industrial\", \"Commercial\", \"Industrial\",\"All C&I\"), colwidths = c(1, 2, 2, 2, 1)) |&gt;\n  align(align = \"right\", part = \"body\" ) |&gt;\n  align(align = \"center\", part = \"header\") |&gt;\n  align(j = 1, align = c(\"left\"), part = \"all\" )\n\n\n\n\n\n Commercial & IndustrialCommercialIndustrialAll C&IYearC&I Incentive FMVShare of C&ICommercial Incent. FMVShare of CommercialIndustrial Incent. FMVShare of IndustrialC&I FMV20062,772,155,6394.48%187,487,1710.39%2,584,668,46818.73%61,895,144,34020072,989,183,4054.65%253,604,7330.51%2,735,578,67219.07%64,220,407,19920083,404,184,1555.17%443,269,3610.86%2,960,914,79420.48%65,817,353,79620094,520,590,1655.50%882,770,8701.35%3,637,819,29521.72%82,189,201,52920104,288,863,7805.43%724,345,5851.15%3,564,518,19522.13%78,970,055,15620114,517,119,6485.80%913,560,8371.47%3,603,558,81223.03%77,895,007,36420124,731,517,6576.19%984,018,1171.61%3,747,499,54024.46%76,482,080,62520134,982,856,9656.62%1,081,828,7551.79%3,901,028,21026.26%75,270,116,57320145,252,674,0927.01%1,393,413,0102.31%3,859,261,08226.53%74,950,945,45620155,971,685,1377.47%1,813,382,5172.79%4,158,302,62027.90%79,957,789,46520166,195,459,7657.61%1,881,340,4052.84%4,314,119,36028.42%81,394,367,76520176,659,059,7938.05%2,052,852,3773.06%4,606,207,41729.45%82,711,571,27720187,880,502,8208.60%2,783,460,8573.71%5,097,041,96330.80%91,604,681,21320199,213,592,0109.23%2,920,017,2803.62%6,293,574,73033.04%99,805,311,37320209,455,060,0859.83%2,777,998,7803.64%6,677,061,30533.77%96,190,882,982202110,765,549,78810.24%3,416,041,4634.11%7,349,508,32533.43%105,139,369,995202212,608,755,83311.26%3,668,504,7334.18%8,940,251,10036.84%112,005,930,791202313,006,606,96311.39%3,429,948,7233.87%9,576,658,24037.31%114,222,121,114\n\n\n\nTable 7.1: Table 2 in Incentive Report Incentive FMV by Year, 2006 to 2023\n\n\n\n\n\n\nCode\ncomm_ind_pins %&gt;% \n  filter(land_use %in% c(\"Commercial\", \"Industrial\")) %&gt;%\n  group_by(year, land_use) %&gt;%\n  summarize(\n    fmv = sum(ifelse(incent_prop==\"Incentive\", fmv/1000000000, 0) ))%&gt;%\n  ggplot() + \n  geom_col(aes(x=year, y = fmv, fill = land_use)) + \n  scale_x_continuous(\n    limits = c(min_year - 1, max_year + 1),                                  \n    breaks = c(min_year, 2010, 2015, 2020, max_year)) + \n  scale_y_continuous(breaks = c(0, 5, 10, 15)) +\n  alea_theme() +\n  labs(y = \"FMV ($ Billions)\")+\n  theme(legend.position =  \"bottom\", legend.title = element_blank(), \n                          axis.title.x =   element_blank())+\n    scale_fill_manual(values = cmap_colors )\n\n\n\n\n\n\n\n\nFigure 7.1: Similar to Figure 3 in Incentive Report Incentive FMV by Year, All Years\n\n\n\n\n\n\n\nCode\ncomm_ind_pins %&gt;%\n  filter(incent_prop == \"Incentive\") %&gt;%\n   reframe(fmv,\n           type_fmv = sum(fmv, na.rm=TRUE), .by = c(year,land_use)\n          ) %&gt;%\n   reframe(land_use, type_fmv,\n          fmv_incent = sum(fmv, na.rm=TRUE), .by=year) %&gt;% distinct() %&gt;% \n  arrange(year) %&gt;%\n  group_by(land_use) %&gt;%\n  mutate(ratio_2011 = type_fmv/ type_fmv[year==2011],\n         ratio_both_2011 = fmv_incent/fmv_incent[year==2011]) %&gt;% \n  ggplot() + \n  scale_color_manual(values = c(\"#1E478E\", \"#6DAE4F\", \"#D0E4A4\") )+\n\n  geom_line(aes(x=year, y = ratio_2011, group = land_use, color = land_use, ), lwd = 1) + \n  geom_line(aes(x=year, y =ratio_both_2011), lty = 2, lwd=1\n            ) + \n    scale_x_continuous(\nlimits = c(min_year - 1, max_year + 1),                                      \n    breaks = c(min_year, 2010, 2015, 2020, max_year)) + \n  alea_theme() + \n  labs(title = \"FMV Growth for Properties with Incentives, Indexed to 2011\", \n       color = element_blank(),\n       x = element_blank(), y = \"Percent of 2011 FMV\",\n       caption = \"Dashed line represents C&I Incentive FMV Growth. \n       \\n As more PINs receive incentive classification, their aggregate FMV increases. \n       This automatically makes it look like the FMV growth is increasing, \n       but the number of PINs also increased over time. \")\n\n\n\n\n\n\n\n\nFigure 7.2: Similar to Figure 4 in Incentive Report Incentive FMV Growth, All Years. Indexed to 2011.\n\n\n\n\n\n\n\nPIN Counts\n\n\nCode\ncommind_together &lt;- comm_ind_pins  %&gt;%\n  group_by(year) %&gt;%\n  summarize(\n    proptype_pincount = n(),\n            n_incent = sum(ifelse(incent_prop == \"Incentive\", 1, 0)),\n            n_nonincent = sum(ifelse(incent_prop == \"Non-Incentive\", 1, 0)))  %&gt;% \n  mutate(pct_incent = n_incent / proptype_pincount)\n\n\n\n\nCode\ncomm_ind_pins %&gt;% \n  filter(land_use %in% c(\"Commercial\", \"Industrial\")) %&gt;%\n group_by(year, land_use) %&gt;%\n  summarize(\n  PC = sum(incent_prop==\"Incentive\") )%&gt;%\n  ggplot() + \n  geom_col(aes(x=year, y = PC, fill = land_use)) + \n  scale_x_continuous(\n    limits = c(min_year - 1, max_year + 1),                                      \n    breaks = c(min_year, 2010, 2015, 2020, max_year\n              )) + \nalea_theme() +\n  theme(legend.position =  \"bottom\", legend.title = element_blank(), \n                          axis.title.x =   element_blank())+\n    scale_fill_manual(values = cmap_colors                      ) +\n  ggtitle(\"Count of Incentive PINs\")\n\n\n\n\n\n\n\n\n\n\n\nCode\ncomm_ind_pins %&gt;%\n  filter(incent_prop == \"Incentive\") %&gt;%\n  reframe(PC=n(), .by= c(year, land_use)) %&gt;%\n  distinct() %&gt;%\n   reframe(land_use, PC,\n     both_PC = sum(PC), .by=year) %&gt;% distinct() %&gt;% \n  arrange(year) %&gt;%\n  group_by(land_use) %&gt;%\n  mutate(ratio_2011 = PC/ PC[year==2011],\n         ratio_both_2011 = both_PC/both_PC[year==2011]) %&gt;% \n  ggplot() +\n    scale_color_manual(values = cmap_colors)+\n  geom_line(aes(x=year, y = ratio_2011, group = land_use, color = land_use), lwd=1 ) + \n  geom_line(aes(x=year, y =ratio_both_2011), lty = \n              2, lwd = 1) + \n  alea_theme() + \n    scale_x_continuous(\n     limits = c(min_year - 1, max_year + 1),                              \n    breaks = c(min_year, 2010, 2015, 2020, max_year)) +\n  scale_y_continuous(name = \"Percent of 2011 Pin Count\", label = scales::percent) + \n  labs(title = \"Number of PINs, Indexed to 2011\",\n       x = NULL,\n       caption = \"Dashed line represents growth in the number of commercial and industrial PINs\",\n       color = NULL)\n\n\n\n\n\n\n\n\n\nFigure 7.3\n\n\n\n\n\n\nCode\ntable &lt;- comm_ind_pins %&gt;% \n    filter(land_use %in% c(\"Industrial\", \"Commercial\")) |&gt;\n\n  group_by(year, land_use) %&gt;%\n  summarize(\n    proptype_pincount = n(),\n            n_incent = sum(ifelse(incent_prop == \"Incentive\", 1, 0)),\n            n_nonincent = sum(ifelse(incent_prop == \"Non-Incentive\", 1, 0))) %&gt;%\n  mutate(pct_incent = n_incent / proptype_pincount) %&gt;%\n  arrange(year) %&gt;%\n  mutate(year = as.character(year)) %&gt;%\nfilter(!land_use %in% c(\"Exempt\", \"Other Residential\", \"Owner Occupied\", \"Rental\") ) %&gt;% \n  select(year, land_use, n_incent, pct_incent) |&gt;\n  pivot_wider(id_cols = year, names_from = land_use, \n              values_from = c(n_incent,pct_incent)) %&gt;% ungroup() |&gt;\n  select(-year)\n\ncbind(commind_together, table) %&gt;% \n  select(Year = year, \n         \"C&I Incentive Parcels\" = n_incent, \n         \"Share of C&I\" = pct_incent,\n         \"Commercial Pin Count\" = n_incent_Commercial, \n         \"Share of Commercial\" = pct_incent_Commercial,\n         \"Industrial Pin Count\" = n_incent_Industrial, \n         \"Share of Industrial\" = pct_incent_Industrial,\n         \"C&I PIN Count\" = proptype_pincount) %&gt;% \n  mutate(Year = as.character(Year)) |&gt;\n  mutate(across(contains(\"Share\"), scales::percent, \n                #digits = 2 ## doesn't work!! \n                accuracy = 0.01)) |&gt;\n  flextable() %&gt;%\n  add_header_row(values = c(\" \", \"Incent C&I\", \"Commercial\", \"Industrial\",\"All C&I\"), colwidths = c(1,2,2,2, 1)) |&gt;\n  align(align = \"right\", part = \"body\" ) |&gt;\n  align(align = \"center\", part = \"header\") |&gt;\n  align(j = 1, align = c(\"left\"), part = \"all\" )\n\n\n\n\n\n Incent C&ICommercialIndustrialAll C&IYearC&I Incentive ParcelsShare of C&ICommercial Pin CountShare of CommercialIndustrial Pin CountShare of IndustrialC&I PIN Count20061,4691.40%2070.30%1,2624.77%105,01320071,6031.52%2780.40%1,3255.07%105,76120081,8121.70%3310.48%1,4815.68%106,34420091,8951.77%3350.48%1,5606.04%106,87120102,0081.87%3440.49%1,6646.44%107,17020112,1742.03%3770.53%1,7976.87%107,04820122,2672.12%3930.55%1,8747.12%107,13320132,3802.22%4260.60%1,9547.49%107,11420142,4682.31%4490.63%2,0197.81%106,86520152,6232.45%5330.75%2,0908.14%106,85520162,8512.67%5790.82%2,2728.95%106,87820173,0162.83%6520.92%2,3649.38%106,73220183,2263.03%7141.01%2,51210.04%106,55620193,3613.16%7511.06%2,61010.51%106,48620203,4193.22%7881.12%2,63110.69%106,24120213,5543.35%8191.17%2,73511.20%106,14520224,2784.03%8621.24%3,41613.75%106,04420234,4274.18%8821.27%3,54514.24%105,912\n\n\n\nTable 7.2: Descriptive stats for PINs with incentive classigications - Using Count of PINs\n\n\n\n\n\n\nChange in Incentive Classification\n\n\nCode\npins_per_year &lt;- comm_ind_pins %&gt;% \n  mutate(Year = as.character(year)) |&gt;\n  group_by(Year) %&gt;%\n  summarize(\"Gains Incent\" = sum(gain_incent, na.rm=TRUE),\n            \"Loses Incent\" = sum(lose_incent, na.rm=TRUE),\n            \"PINs with Incent. Class.\" = sum(incent_prop==\"Incentive\"),\n            \"PINs in Sample\" = n(),\n          #  \"Became Exempt\" = sum(became_exempt, na.rm=TRUE)\n            )\n\npins_per_year |&gt; flextable()\n\n\n\n\n\nYearGains IncentLoses IncentPINs with Incent. Class.PINs in Sample2006001,469105,0132007198781,603105,7612008254541,812106,34420091931091,895106,8712010136192,008107,1702011191322,174107,0482012138492,267107,1332013194612,380107,1142014174832,468106,86520152861312,623106,8552016319952,851106,8782017260853,016106,7322018317853,226106,55620192431103,361106,48620201811303,419106,24120212161053,554106,1452022810904,278106,04420232771404,427105,912\n\n\n\nTable 7.3: Number of PINs that gain or lose incentive classification each year.\n\n\n\n\n\n\nCode\ncomm_ind_pins &lt;- comm_ind_pins %&gt;% \n  group_by(pin) |&gt;\n  mutate(year = as.character(year), \n         class8years = sum(class_1dig == 8),\n         class8_change = case_when(\n           class8years == year_count ~ \"Always Class 8\",\n           class8years == 0 ~ \"Never Class 8\",\n           sum(lag(class_1dig) != 8 & class_1dig == 8) &gt; 0 ~ \"Becomes Class 8\",\n           sum(class_1dig != 8 & lag(class_1dig) == 8 ) &gt; 0 ~ \"Leaves Class 8\",\n           TRUE ~ \"Other\"),\n         becomes8 = ifelse(lag(class_1dig) != 8 & class_1dig == 8, 1, 0),\n         becomes7 = ifelse(lag(class_1dig) != 7 & class_1dig == 7, 1, 0),\n         becomes6 = ifelse(lag(class_1dig) != 6 & class_1dig == 6, 1, 0),\n         switches_to8 = ifelse(sum(incent_prop == \"Incentive\")&gt; 1 & becomes8 ==1, 1, 0),\n         # is_exempt = ifelse(class %in% c(\"0\", \"EX\"), 1, 0),\n         #  was_exempt = ifelse(lag(class) %in% c(\"0\",\"EX\"), 1, 0)\n  ) %&gt;%\n        ungroup()\n\n classpins_per_year &lt;- comm_ind_pins |&gt;\n   group_by(year) %&gt;%\n  summarize(\"Becomes 8\" = sum(becomes8==1, na.rm=TRUE),\n            \"Total 8\" = sum(class_1dig == 8),\n\n            \"6 or 7 to 8\" = sum(switches_to8 == 1, na.rm=TRUE),\n\n            \"Becomes 7\" = sum(becomes7 == 1, na.rm=TRUE),\n            \"Total 7\" = sum(class_1dig == 7),\n\n            \"Becomes 6\" = sum(becomes6 == 1, na.rm=TRUE),\n            \"Total 6\" = sum(class_1dig == 6),\n            \"PINs with Incent. Class.\" = sum(incent_prop==\"Incentive\"),\n          #  \"Tax Exempt\" = sum(is_exempt),\n            \"PINs in Sample\" = n(),\n            #\"Became Exempt\" = sum(became_exempt, na.rm=TRUE)\n          )\nclasspins_per_year %&gt;%  flextable::flextable()\n\n\n\n\n\nyearBecomes 8Total 86 or 7 to 8Becomes 7Total 7Becomes 6Total 6PINs with Incent. Class.PINs in Sample20060272008601,1111,469105,0132007793556412971091,1511,603105,76120081134561094971381,2591,812106,344200985543821855901,2971,895106,871201015553152561191,3992,008107,1702011626086213641171,5022,174107,04820124564143164931,5622,267107,133201355668529721311,6402,380107,1142014437023911801201,6862,468106,86520158876288661471571,7142,623106,8552016105864105271651871,8222,851106,87820178792476231891521,9033,016106,73220185695154522432092,0323,226106,55620196697966242651532,1173,361106,48620203898338242851192,1513,419106,2412021671,03567253011242,2183,554106,14520226731,703672223181162,2574,278106,04420231161,8133252961412,3184,427105,912\n\n\n\nTable 7.4: Number of PINs that became each major class type each year.\n\n\n\n\n\nCode\n# Trends in Incentivized FMV as a percent of the base over time\n\n## Data prep\n\nmuni_MC &lt;- read_csv(\"../Output/ptaxsim_muni_class_summaries_2006to2023.csv\") %&gt;%\n  select(year, clean_name, class, av = muni_c_av)\n\nclass_dict &lt;- read_csv(\"../Necessary_Files/class_dict_expanded.csv\") %&gt;%\n  select(class = class_code, class_1dig, assess_ratio, incent_prop, land_use=Alea_cat, major_class_code)\n\nmuni_MC &lt;- muni_MC %&gt;% \n  left_join(class_dict, by = c(\"class\")) %&gt;% \n  filter(class !=0) # drop exempt property types with 0 taxable value\n\n#class_8_munis &lt;- read_csv(\"./Necessary_Files/datarequests_Class8Munis.csv\")\nclass_8_munis &lt;- read_csv(\"../Output/datarequests_Class8Munis.csv\")\n\n# changed from as.list to as.character\nclass_8_munis &lt;- as.character(class_8_munis$clean_name)\n\n\n\n# class 8 munis - at the year-class level\nclass_8_df &lt;- # left_join(muni_MC, class_dict, by = \"class\") %&gt;%\n  muni_MC %&gt;%\n  filter(clean_name %in% class_8_munis) %&gt;%\n  filter(av != 0) %&gt;%\n  mutate(FMV = av/assess_ratio) %&gt;%\n  group_by(year) %&gt;%   \n  mutate(year_tb_tot = sum(FMV)) %&gt;%           # tax base for all class 8 munis together, per year\n  ungroup() %&gt;%\n  filter(land_use %in% c(\"Industrial\", \"Commercial\")) %&gt;%      ## drops all non-industrial and non-commercial classes to calculate the rest of the totals\n  group_by(year) %&gt;%\n  mutate(year_ind_comm_FMV = sum(FMV)) %&gt;%    #  total commercial and industrial FMV for all class 8 munis together, per year\n  ungroup() %&gt;%\n  group_by(year, clean_name) %&gt;%\n  mutate(muni_year_ind_comm_FMV = sum(FMV)) %&gt;%   # calculates total FMV in each munis  each year\n  ungroup() %&gt;%\n  group_by(year, land_use) %&gt;%\n  mutate(cat_year_FMV = sum(FMV)) %&gt;%    # calculates FMV within each commercial vs industrial category for each year\n  ungroup() %&gt;%\n  group_by(year, clean_name, class_1dig) %&gt;%   # total fmv in class 5, 6, 7, and 8 per muni\n  mutate(year_muni_class_FMV = sum(FMV))\n\n## Added this for cook level totals:\nclass_8_df_outofCook &lt;- \n  muni_MC %&gt;%\n # filter(clean_name %in% class_8_munis) %&gt;% ## keep all munis, use for cook county totals.\n  filter(av != 0) %&gt;%\n  mutate(FMV = av/assess_ratio) %&gt;%\n  group_by(year) %&gt;%   \n  mutate(year_tb_tot = sum(FMV)) %&gt;%           # tax base for all class 8 munis together, per year\n  ungroup() %&gt;%\n  filter(land_use %in% c(\"Industrial\", \"Commercial\")) %&gt;%      ## drops all non-industrial and non-commercial classes to calculate the rest of the totals\n  group_by(year) %&gt;%\n  mutate(year_ind_comm_FMV = sum(FMV)) %&gt;%    #  total commercial and industrial FMV for all class 8 munis together, per year\n  ungroup() %&gt;%\n  group_by(year, clean_name) %&gt;%\n  mutate(muni_year_ind_comm_FMV = sum(FMV)) %&gt;%   # calculates total FMV in each munis  each year\n  ungroup() %&gt;%\n  group_by(year, land_use) %&gt;%\n  mutate(cat_year_FMV = sum(FMV)) %&gt;%    # calculates FMV within each commercial vs industrial category for each year\n  ungroup() %&gt;%\n  group_by(year, clean_name, class_1dig) %&gt;%   # total fmv in class 5, 6, 7, and 8 per muni\n  mutate(year_muni_class_FMV = sum(FMV))\n\n\n## Class 8 Townships Graph -------------------\n ## Alea Version: \nggplot() +\n  geom_line(data = class_8_df %&gt;%\n              group_by(year) %&gt;%\n              summarize(ind_comm_perc = mean(year_ind_comm_FMV/year_tb_tot)), \n            aes(x = year, y = ind_comm_perc, color =  \"Commercial+Industrial\"), lwd = 1) +  \n  \n  # industrial fmv\n  geom_line(data = class_8_df %&gt;%               \n              filter(land_use == \"Industrial\") %&gt;%\n              group_by(year) %&gt;%\n              # needed na.rm=TRUE, otherwise it didn't work. perc_industrial was not being calculated without it.\n              summarize(perc_industrial =  sum(FMV/year_tb_tot, na.rm=TRUE)),   ## added this part\n            aes(x = year, y = perc_industrial, color = \"Industrial\"), lwd = 1) +\n  \n  # commercial fmv\n  geom_line(data = class_8_df %&gt;%              \n              filter(land_use == \"Commercial\") %&gt;%\n              group_by(year) %&gt;%\n              summarize(perc_commercial =  sum(FMV/year_tb_tot, na.rm=TRUE)),   ## added this part\n            aes(x = year, y = perc_commercial, color = \"Commercial\"), lwd = 1) +\n  geom_line(data = class_8_df %&gt;%\n              filter(incent_prop == \"Incentive\") %&gt;%\n              group_by(year) %&gt;%\n              summarise(incent_perc = sum(FMV)/year_tb_tot),\n            aes(x = year, y = incent_perc, color = \"Incentive Classes\"), lwd = 1 ) +\n  geom_line(data = class_8_df %&gt;%               # threw error here, missing x and y in aes()\n              filter(class_1dig == 8) %&gt;% \n              group_by(year) %&gt;%\n              summarize(perc_8 =  sum(FMV/year_tb_tot)),   ## added this part\n            aes(x = year, y = perc_8, color = \"Class 8\"), lwd = 1) +        # was missing a + sign here\n  theme_classic() +\n  scale_x_continuous(name = \"\", breaks = seq(2006, 2022, by = 3), limits = c(2006, 2022), expand = c(0,0)) +\n  scale_y_continuous(name = \"Percent of FMV\", labels = scales::percent_format(), limits = c(0, 0.20),\n                     breaks = seq(0, 0.5, by = 0.05), expand = c(0,0))  +\n scale_color_manual(name = \"\", values = c(\"Commercial+Industrial\" = \"black\", \"Industrial\" = \"gray70\", \"Commercial\" = \"gray50\",  \"Incentive Classes\" = \"orange\",  \"Class 8\" = \"red\" )) +\n  theme(legend.position = \"bottom\") + \n  labs(title = \"Property in the Class 8 Townships\") + \n  guides(color = guide_legend(nrow=2, byrow = TRUE))\n## Percentage out of Cook County ---------------------\n \n## Alea Version for Cook Level: \nggplot() +\n  # Commercial + Industrial FMV in cook\n  geom_line(data = class_8_df_outofCook %&gt;%\n              group_by(year) %&gt;%  #didn't group by year before?\n              summarize(ind_comm_perc = mean(year_ind_comm_FMV/year_tb_tot)), \n            aes(x = year, y = ind_comm_perc, color =  \"Commercial+Industrial\"), lwd = 1) +  \n  \n  # incentive class properties in cook\n  geom_line(data = class_8_df_outofCook %&gt;%\n              filter(incent_prop == \"Incentive\") %&gt;%\n              group_by(year) %&gt;%\n              summarise(incent_perc = sum(FMV/year_tb_tot)),\n            aes(x = year, y = incent_perc, color = \"Incentive Classes\"), lwd = 1 ) +\n \n  # FMV with class 8 property class in cook county\n   geom_line(data = class_8_df_outofCook %&gt;%               # threw error here, missing x and y in aes()\n              filter(class_1dig == 8) %&gt;% \n              group_by(year) %&gt;%\n              summarize(perc_8 =  sum(FMV/year_tb_tot)),   ## added this part\n            aes(x = year, y = perc_8, color = \"Class 8\"), lwd = 1) +        # was missing a + sign here\n \n  # industrial fmv in cook county\n  geom_line(data = class_8_df_outofCook %&gt;%               # threw error here, missing x and y in aes()\n              filter(land_use == \"Industrial\") %&gt;%\n              group_by(year) %&gt;%\n              # needed na.rm=TRUE, otherwise it didn't work. perc_industrial was not being calculated without it.\n              summarize(perc_industrial =  sum(FMV/year_tb_tot, na.rm=TRUE)),   ## added this part\n            aes(x = year, y = perc_industrial, color = \"Industrial\"), lwd = 1) +\n\n  # commercial fmv in cook county\ngeom_line(data = class_8_df_outofCook %&gt;%               # threw error here, missing x and y in aes()\n            filter(land_use == \"Commercial\") %&gt;%\n            group_by(year) %&gt;%\n            summarize(perc_commercial =  sum(FMV/year_tb_tot, na.rm=TRUE)),   ## added this part\n          aes(x = year, y = perc_commercial, color = \"Commercial\"), lwd = 1) +\n\n  # make it pretty:\n   theme_classic() +\n  scale_x_continuous(name = \"\", breaks = seq(2006, 2022, by = 3), limits = c(2006, 2022), expand = c(0,0)) +\n  scale_y_continuous(name = \"Percent of County FMV\", labels = scales::percent_format(),  limits = c(0, 0.20), \n                     breaks = seq(0, 0.5, by = 0.05), expand = c(0,0))  +\n  scale_color_manual(name = \"\", values = c(\"Commercial+Industrial\" = \"black\", \"Industrial\" = \"gray80\", \"Commercial\" = \"gray40\", \"Incentive Classes\" = \"orange\", \"Class 8\" =  \"red\")) +\n  theme(legend.position = \"bottom\") +\n  labs(title= \"Cook County Commercial & Industrial FMV\") + guides(color = guide_legend(nrow=2, byrow = TRUE))\n## Newest Addition for April 30th Presentation --------------------\nggplot() +\n  # incentive class properties in cook\n  geom_line(data = class_8_df_outofCook %&gt;%\n              filter(incent_prop == \"Incentive\") %&gt;%\n              group_by(year) %&gt;%\n              summarise(incent_perc = sum(FMV/year_ind_comm_FMV)),\n            aes(x = year, y = incent_perc, color = \"Incentive Classes\"), lwd = 1 ) +\n  \n  # FMV with class 8 property class in cook county\n  geom_line(data = class_8_df_outofCook %&gt;%               \n              filter(class_1dig == 8) %&gt;% \n              group_by(year) %&gt;%\n              summarize(perc_8 =  sum(FMV/year_ind_comm_FMV)),   \n            aes(x = year, y = perc_8, color = \"Class 8\"), lwd = 1) +       \n  # make it pretty:\n  theme_classic() +\n  scale_x_continuous(name = \"\", breaks = seq(2006, 2022, by = 3), limits = c(2006, 2022), expand = c(0,0)) +\n  scale_y_continuous(name = \"Percent of Com+Ind FMV\", labels = scales::percent_format(), limits = c(0, 0.25), \n                     breaks = seq(0, 0.5, by = 0.05), expand = c(0,0))  +\n  scale_color_manual(name = \"\", values = c(\"Industrial\" = \"gray80\", \"Commercial\" = \"gray40\", \"Incentive Classes\" = \"orange\", \"Class 8\" =  \"red\")) +\n  theme(legend.position = \"bottom\") +\n  labs(title= \"Cook County\", subtitle =  \"Share of Commercial & Industrial FMV with Incentive Classification\") + guides(color = guide_legend(nrow=2, byrow = TRUE))\n## Newest Addition for April 30th Presentation --------------------\nggplot() +\n  # incentive class properties in cook\n  geom_line(data = class_8_df_outofCook %&gt;%\n              filter(incent_prop == \"Incentive\") %&gt;%\n              group_by(year) %&gt;%\n              summarise(incent_perc = sum(FMV/year_ind_comm_FMV)),\n            aes(x = year, y = incent_perc, color = \"Incentive Classes\"), lwd = 1 ) +\n  # \n  # # FMV with class 8 property class in cook county\n  # geom_line(data = class_8_df_outofCook %&gt;%               \n  #             filter(class_1dig == 8) %&gt;% \n  #             group_by(year) %&gt;%\n  #             summarize(perc_8 =  sum(FMV/year_ind_comm_FMV)),   \n  #           aes(x = year, y = perc_8, color = \"Class 8\"), lwd = 1) +       \n  # make it pretty:\n  theme_classic() +\n  scale_x_continuous(name = \"\", breaks = seq(2006, 2022, by = 3), limits = c(2006, 2022), expand = c(0,0)) +\n  scale_y_continuous(name = \"Percent of Com+Ind FMV\", labels = scales::percent_format(), limits = c(0, 0.25), \n                     breaks = seq(0, 0.5, by = 0.05), expand = c(0,0))  +\n  scale_color_manual(name = \"\", values = c(\"Industrial\" = \"gray80\", \"Commercial\" = \"gray40\", \"Incentive Classes\" = \"orange\")) +\n  theme(legend.position = \"bottom\") +\n  labs(title= \"Cook County\", subtitle =  \"Share of Commercial & Industrial FMV with Incentive Classification\") + guides(color = guide_legend(nrow=2, byrow = TRUE))\n ggplot() +\n   geom_line(data = class_8_df %&gt;%\n               filter(incent_prop == \"Incentive\") %&gt;%\n               group_by(year) %&gt;%\n               summarise(incent_perc = sum(FMV/year_ind_comm_FMV)),\n             aes(x = year, y = incent_perc, color = \"All Incentive Classes\"), lwd = 1 ) +\n      geom_line(data = class_8_df %&gt;%               \n               filter(class_1dig == 8) %&gt;% \n               group_by(year) %&gt;%\n               summarize(perc_8 =  sum(FMV/year_ind_comm_FMV)), \n             aes(x = year, y = perc_8, color = \"Class 8\"), lwd = 1) +        \n   # make it pretty:\n   theme_classic() +\n   scale_x_continuous(name = \"\", breaks = seq(2006, 2022, by = 3), limits = c(2006, 2022), expand = c(0,0)) +\n   scale_y_continuous(name = \"Percent of Com&Ind FMV\", labels = scales::percent_format(), # limits = c(0, 0.25), \n                      breaks = seq(0, 0.5, by = 0.05), expand = c(0,0))  +\n   scale_color_manual(name = \"\", values = c(\"Commercial+Industrial\" = \"black\", \"Industrial\" = \"gray80\", \"Commercial\" = \"gray40\", \"All Incentive Classes\" = \"orange\", \"Class 8\" =  \"red\")) +\n   theme(legend.position = \"bottom\") +\n   labs(title= \"Class 8 Townships\", subtitle =  \"Share of Commercial & Industrial FMV with Incentive Classification\") + guides(color = guide_legend(nrow=2, byrow = TRUE))\n\n\n\n\n\n\nCommercial and Industrial Growth\n\n\nCode\ndf_2011_incentchange &lt;- comm_ind_pins|&gt;\n  group_by(year, incent_change) |&gt;\n  summarize(\n    group_pin_count = n(),\n    group_year_fmv = sum(fmv, na.rm=TRUE),\n  ) |&gt; ungroup() |&gt;\n  group_by( incent_change) %&gt;%\n  mutate(\n    base_year_fmv = group_year_fmv[year == min(year)],\n    fmv_group_growth = (group_year_fmv / base_year_fmv) -1)  \n\n\n\ndf_2011_incentchange %&gt;% \n  filter(year == max_year) |&gt;\n  select(\"Gains/Loses Incentive Classification\" = incent_change, \n         \"FMV Growth\" = fmv_group_growth, \n         \"2006 FMV\\n(Billions)\" = base_year_fmv, \n         \"Aggregate FMV\\n(Billions)\" = group_year_fmv, \n         \"PIN Count\" = group_pin_count, \n         -year) |&gt;\n  mutate(across(contains(\"Growth\"), scales::percent, accuracy = 0.01)) |&gt;\n    mutate(across(2:3, ~ round((./1000000000), digits = 3)) )|&gt;\n\n  flextable() %&gt;%\n  align(align = \"right\", part = \"body\" ) |&gt;\n  align(align = \"center\", part = \"header\") |&gt;\n  align(j = 1, align = c(\"left\"), part = \"all\" )\n\n\n\n\n\nGains/Loses Incentive ClassificationFMV Growth2006 FMV(Billions)Aggregate FMV(Billions)PIN CountAlways Incentive64.29%0.9791.609599Changes Sometime132.59%3.7208.6534,131Excluded166.88%9.28524.77911,132Never Incentive80.00%49.20088.56190,050\n\n\n\nTable 7.5: Aggregate FMV Growth by Incentive Classification. Changes Sometime includes properties that gained or lost an incentive classification. incent_status in tables below breaks up Changes Sometime into more detailed categories.\n\n\n\n\n\n\nCode\ncomm_ind_pins %&gt;%\n  ungroup() %&gt;% \n  group_by(year, incent_status) |&gt;\n  summarize(\n    group_pin_count = n(),\n    group_year_fmv = sum(fmv, na.rm=TRUE)) |&gt; \n  ungroup() |&gt;\ngroup_by(incent_status) %&gt;%\n  mutate(\n    base_year_fmv = group_year_fmv[year == min(year)],\n    fmv_group_growth = (group_year_fmv / base_year_fmv) -1) |&gt; \n  filter(year == params$year)  %&gt;%\n  select(\"Incentive Status\" = incent_status, \n         \"FMV Growth\" = fmv_group_growth, \n         \"2006 FMV\\n(Billions)\" = base_year_fmv, \n         \"Aggregate FMV\\n(Billions)\" = group_year_fmv, \n         \"PIN Count\" = group_pin_count, \n         -year) |&gt;\n  mutate(across(contains(\"Growth\"), scales::percent, accuracy = 0.01)) |&gt;\n    mutate(across(2:3, ~ round((./1000000000), digits = 3)) )|&gt;\n\n  flextable() %&gt;%\n  align(align = \"right\", part = \"body\" ) |&gt;\n  align(align = \"center\", part = \"header\") |&gt;\n  align(j = 1, align = c(\"left\"), part = \"all\" )\n\n\n\n\n\nIncentive StatusFMV Growth2006 FMV(Billions)Aggregate FMV(Billions)PIN CountAlways had Incentive64.29%0.9791.609599Excluded161.93%10.13526.54811,741Gained Incentive245.83%1.6435.6812,995Had Incentive-1.94%1.2271.203527Never had Incentive80.00%49.20088.56190,050\n\n\n\nTable 7.6: Aggregate FMV Growth by incent_status. Calculations for PINs counts in header of table in report. Always Had Incentive and Never Had Incentive should be identical to table above.\n\n\n\n\n\n\nCode\ncomm_ind_pins %&gt;%\n  group_by(year, landuse_change) |&gt;\n  summarize(\n    group_pin_count = n(),\n    group_year_fmv = sum(fmv, na.rm=TRUE)) |&gt; \n  ungroup() |&gt;\n  group_by(landuse_change) %&gt;%\n  mutate(\n    base_year_fmv = group_year_fmv[year == min(year)],\n    base_year_n = group_pin_count[year == min(year)],\n    n_group_growth = group_pin_count/base_year_n -1,\n    fmv_group_growth = (group_year_fmv / base_year_fmv) -1) %&gt;%\n    filter(year == params$year) %&gt;%   \n\n  select(\"Changes Land Use\" = landuse_change, \n         \"FMV Growth\" = fmv_group_growth, \n         \"2006 FMV\\n(Billions)\" = base_year_fmv, \n         \"Aggregate FMV\\n(Billions)\" = group_year_fmv, \n         \"PIN Count\" = group_pin_count, \n         -year) |&gt;\n  mutate(across(contains(\"Growth\"), scales::percent, accuracy = 0.01)) |&gt;\n    mutate(across(2:3, ~ round((./1000000000), digits = 3)) )|&gt;\n\n  flextable() %&gt;%\n  align(align = \"right\", part = \"body\" ) |&gt;\n  align(align = \"center\", part = \"header\") |&gt;\n  align(j = 1, align = c(\"left\"), part = \"all\" )\n\n\n\n\n\nChanges Land UseFMV Growth2006 FMV(Billions)Aggregate FMV(Billions)PIN CountAlways Commercial57.29%38.16660.03352,018Always Industrial71.80%10.64918.29519,599Changes Land Use348.58%3.82017.13515,662Excluded166.73%10.55028.13918,633\n\n\n\nTable 7.7: Aggregate FMV Growth from 2006 to 2023 by landuse_change.\n\n\n\n\n\n\nCode\ndf_2011_bal &lt;- comm_ind_pins %&gt;%\n  group_by(year, landuse_change, incent_status) |&gt;\n  summarize(\n    group_pin_count = n(),\n    group_year_fmv = sum(fmv, na.rm=TRUE)) |&gt; \n  ungroup() |&gt;\n  group_by(landuse_change, incent_status) %&gt;%\n  mutate(\n    base_year_fmv = group_year_fmv[year == min(year)],\n    base_year_n = group_pin_count[year == min(year)],\n    n_group_growth = group_pin_count/base_year_n -1,\n    fmv_group_growth = (group_year_fmv / base_year_fmv) -1) \n\n\n\n\nCode\ndf_2011_bal %&gt;% \n  select(year, landuse_change, incent_status, fmv_group_growth, group_pin_count) %&gt;% \n  filter(year == params$year) %&gt;%   \n  select(\n   \"Changes Land Use\" = landuse_change,\n   \"Incentive Status\" = incent_status,\n         \"FMV Growth\" = fmv_group_growth, \n         \"PIN Count\" = group_pin_count, \n         -year) |&gt;\n  mutate(across(contains(\"Growth\"), scales::percent, accuracy = 0.01)) |&gt;\n\n DT::datatable(rownames = FALSE, options = list(dom = 'tp'))\n\n\n\n\n\n\n\n\n\n\nTable 7.8: Growth from 2006 to 2023 - Change in Land Use by Incentive Class Status. Non-winsorized version of table.\n\n\n\n\n\n\nCode\ndf_2011_bal %&gt;% \n  mutate(year = as.numeric(year)) |&gt;\n  ggplot() + \n  geom_line(aes(x=year, fmv_group_growth, group = incent_status, color = incent_status), lwd = 1) +\n  theme_bw()  +  \n\n  scale_y_continuous(labels = scales::percent)+\n  scale_color_manual(values = cmap_colors) + \n  scale_x_continuous(limits = c(2005, 2024),                                    \n                      breaks = c(2006,  2015, 2023)) + \n  theme(    panel.background = ggplot2::element_blank(),\n            panel.grid.minor.x = ggplot2::element_blank(),\n            panel.grid.major.x = ggplot2::element_blank(),\n            \n            panel.grid.major.y = element_line(color = \"grey\"),\n            panel.grid.minor.y = element_line(color = \"grey\", \n                                              linetype = \"dashed\"),\n            axis.ticks = element_line(color = \"gray\"),\n            axis.ticks.x = element_blank(),\n            legend.position = \"bottom\") +\n \n  labs(title = \"FMV Growth for Properties with Incentives, Indexed to 2006\", \n       color = element_blank(),\n       x = element_blank(), y = \"FMV Growth since 2006\",\n       caption = \"Broken into subcategories to keep sample size the same over time.\") + facet_wrap(~landuse_change)\n\n\n\n\n\n\n\n\n\nFigure 7.4: Includes the ‘Excluded’ Category. For comparison only to show what was excluded in next image.\n\n\n\n\n\n\nCode\ndf_2011_bal %&gt;% \n  mutate(year = as.numeric(year)) |&gt;\n  filter(incent_status != \"Excluded\" & landuse_change != \"Excluded\" & landuse_change != \"Exempt Sometime\") %&gt;%\n  ggplot() + \n  geom_line(aes(x=year, fmv_group_growth, group = incent_status, color = incent_status), lwd=1) + \n  # labs( title = \"FMV Growth Since 2011 by Land Use\", \n  #       caption = \"PINs that did not exist during all years of the sample frame were excluded from the image (n=10,809).\"\n  # ) + \n  theme_bw()  +  \n\n  scale_y_continuous(labels = scales::percent)+\n  scale_color_manual(values = cmap_colors) + \n\n  theme(    panel.background = ggplot2::element_blank(),\n            panel.grid.minor.x = ggplot2::element_blank(),\n            panel.grid.major.x = ggplot2::element_blank(),\n            \n            panel.grid.major.y = element_line(color = \"grey\"),\n            panel.grid.minor.y = element_line(color = \"grey\", \n                                              linetype = \"dashed\"),\n            axis.ticks = element_line(color = \"gray\"),\n            axis.ticks.x = element_blank(),\n            legend.position = \"bottom\") +\n    facet_wrap(~landuse_change) +\n   scale_x_continuous(limits = c(2005, 2024),                                    \n                      breaks = c(2006, 2015, 2023)) + \n  labs(title = \"FMV Growth for Properties with Incentives, Indexed to 2006\", \n       color = element_blank(),\n       x = element_blank(), y = \"FMV Growth since 2006\",\n       caption = \"Broken into subcategories to keep sample size the same over time.\")\n\n\n\n\n\n\n\n\nFigure 7.5: Excludes the ‘Excluded’ Category and ‘Exempt Sometime’ properties.\n\n\n\n\n\n\n\nCode\ndf_2011_bal %&gt;%  \n  mutate(year = as.factor(year)) %&gt;%\n  ggplot() + \n  geom_line(aes(x=year, y=fmv_group_growth, \n                group = landuse_change, color = landuse_change), lwd = 1) +\n  theme_bw()  +  \n  facet_wrap(~incent_status, nrow = 1) +\n  scale_x_discrete(#limits = c(2005, 2024), \n                   breaks = c(2006, params$year)) + \n  scale_y_continuous(labels = scales::percent) +\n  scale_color_manual(values = cmap_colors) + \n\n  labs(title= paste0(\"Growth from 2006 to \", params$year),\n       subtitle = \"Incentive Classification Status by Land Use Change\",\n       y = \"FMV Growth\", x = NULL,\n       caption =  \"Values are indexed to 2006 FMV\") +\n    theme(    panel.background = ggplot2::element_blank(),\n            panel.grid.minor.x = ggplot2::element_blank(),\n            panel.grid.major.x = ggplot2::element_blank(),\n            \n            panel.grid.major.y = element_line(color = \"grey\"),\n            panel.grid.minor.y = element_line(color = \"grey\", \n                                              linetype = \"dashed\"),\n            axis.ticks = element_line(color = \"gray\"),\n            axis.ticks.x = element_blank(),\n            legend.position = \"bottom\",\n            legend.title = element_blank())\n\n\n\n\n\n\n\n\n\nFigure 7.6: Growth from 2006 to 2023. Faceted by if a PIN changed landuse during the sample period. Indexed to fair market value during 2011. Only for comparison to show what has been dropped in the next image.\n\n\n\n\n\n\nCode\ndf_2011_bal %&gt;%  \n  filter(landuse_change != \"Excluded\" & incent_status != \"Excluded\" & landuse_change != \"Exempt Sometime\") %&gt;%\n  mutate(year = as.numeric(year)) %&gt;%\n  ggplot() + \n  geom_line(aes(x=year, y=fmv_group_growth, group = landuse_change, color = landuse_change), lwd = 1) +\n  theme_bw()  +  \n  facet_wrap(~incent_status, nrow = 1) +\n  scale_x_continuous(limits = c(min_year-1, max_year+1),\n                     breaks = c(min_year, 2015, max_year)) + \n  scale_y_continuous(labels = scales::percent) +\n  scale_color_manual(values = cmap_colors) +\n  labs(title= \"Growth from 2006\", \n       subtitle = \"Incentive Classification Status by Land Use Change\",\n       y = \"FMV Growth since 2006\", x = NULL,\n       caption =  paste0(\"Values are indexed to 2006 FMV. \n                         Excludes PINs that were tax exempt some years or did not exist for all years between 2006 and \", params$year)) +\n  theme( panel.background = ggplot2::element_blank(),\n            panel.grid.minor.x = ggplot2::element_blank(),\n            panel.grid.major.x = ggplot2::element_blank(),\n            \n            panel.grid.major.y = element_line(color = \"grey\"),\n            panel.grid.minor.y = element_line(color = \"grey\", \n                                              linetype = \"dashed\"),\n            axis.ticks = element_line(color = \"gray\"),\n            axis.ticks.x = element_blank(),\n            legend.position = \"bottom\",\n          legend.title = element_blank())\n\n\n\n\n\n\n\n\nFigure 7.7: Aggregate FMV Growth from 2006 to 2023. Faceted by PIN incentive status during the sample period. Indexed to fair market value during 2006.\n\n\n\n\n\n\n\nExplore PINs that became Class 8 or Other Incentive in South Triad\n\nCode\ncomm_ind_pins %&gt;% \n  filter(becomes8 == 1 & Triad == \"South\") %&gt;% \n  arrange(pin) %&gt;%\n  select(year, class, everything())\ncomm_ind_pins %&gt;% \n  filter(becomes7== 1& Triad == \"South\") %&gt;% \n  arrange(pin) %&gt;%\n  select(year, class, everything())\ncomm_ind_pins %&gt;% \n  filter(becomes6 == 1 & Triad == \"South\") %&gt;% \n  arrange(pin) %&gt;%\n  select(year, class, everything())\n\n\n\n\nTable 7.9: South Triad Number of PINs that became each major class type each year.",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Yearly Trends - Incentive Classifications</span>"
    ]
  },
  {
    "objectID": "incentive_report_yearlytrends.html#trends-for-incentive-report---fmv-growth-2011-2022",
    "href": "incentive_report_yearlytrends.html#trends-for-incentive-report---fmv-growth-2011-2022",
    "title": "Yearly Trends - Incentive Classifications",
    "section": "Trends for Incentive Report - FMV Growth 2011-2022",
    "text": "Trends for Incentive Report - FMV Growth 2011-2022\nThe file comm_ind_PINs_2011to2022_timeseries.csv contains all PINs that had an incentive property class for at least 1 year. It includes all observations for a property during the years that it existed, even if it is not an incentive class property in that year.\nOnly includes PINs in incorporated areas.\n\n\nCode\n# Create an empty data frame with a column named \"year\"\nparams &lt;- data.frame(year = numeric(0))\n\n# Add the value 2021 to the \"year\" column\nparams &lt;- rbind(params, data.frame(year = 2022))\n\n\nyear_count &lt;- 12\n\ncomm_ind_pins &lt;- read_csv(\"../Output/comm_ind_PINs_2011to2022_timeseries.csv\")\nmin_year = 2011\nmax_year = 2022\n\n\n\nFMV\n\n\nCode\ncommind_together_fmv &lt;- comm_ind_pins %&gt;%\n  filter(land_use %in% c(\"Industrial\", \"Commercial\")) |&gt;\n  group_by(year) %&gt;%\n  summarize(\n    fmv_incent = sum(ifelse(incent_prop == \"Incentive\", fmv, 0)),\n        fmv_CI = sum(fmv, na.rm=TRUE)\n          )  %&gt;% \n  mutate(pct_incent = (fmv_incent / fmv_CI))\n\n  \n\ntable_fmv &lt;- comm_ind_pins %&gt;% \n    filter(land_use %in% c(\"Industrial\", \"Commercial\")) |&gt;\n\n  group_by(year, land_use) %&gt;%\n  summarize(\n    fmv_incent = sum(ifelse(incent_prop == \"Incentive\", fmv, 0), na.rm=TRUE),\n    fmv = sum(fmv, na.rm=TRUE),\n )  %&gt;% \n  mutate(pct_incent = (fmv_incent / fmv)) %&gt;% \n  arrange(year) %&gt;%\n  select(year, land_use, fmv_incent, pct_incent) |&gt;\n  pivot_wider(id_cols = year, names_from = land_use, \n             values_from = c(fmv_incent, pct_incent)) %&gt;% ungroup() |&gt;\n  select(-year)\n\ncbind(commind_together_fmv, table_fmv) %&gt;% \n  select(Year = year, \"C&I Incentive FMV\" = fmv_incent, \"Share of C&I\" = pct_incent,\n                  \"Commercial Incent. FMV\" = fmv_incent_Commercial, \"Share of Commercial\" = pct_incent_Commercial,\n\n         \"Industrial Incent. FMV\" = fmv_incent_Industrial, \n         \"Share of Industrial\" = pct_incent_Industrial, \n         \"All C&I FMV\" = fmv_CI) %&gt;% \n    mutate(Year = as.character(Year)) %&gt;%\n  mutate(across(contains(\"Share\"), scales::percent, accuracy = 0.01)) |&gt;\n\n  flextable() %&gt;%\n  add_header_row(values = c(\" \", \"Commercial & Industrial\", \"Commercial\", \"Industrial\",\"All C&I\"), colwidths = c(1,2,2,2, 1)) |&gt;\n  align(align = \"right\", part = \"body\" ) |&gt;\n  align(align = \"center\", part = \"header\") |&gt;\n  align(j = 1, align = c(\"left\"), part = \"all\" )\n\n\n\n\n\n Commercial & IndustrialCommercialIndustrialAll C&IYearC&I Incentive FMVShare of C&ICommercial Incent. FMVShare of CommercialIndustrial Incent. FMVShare of IndustrialAll C&I FMV20114,517,119,6485.80%913,560,8371.47%3,603,558,81223.03%77,884,805,32420124,731,517,6576.19%984,018,1171.61%3,747,499,54024.46%76,471,970,30120134,982,856,9656.62%1,081,828,7551.79%3,901,028,21026.27%75,260,356,32920145,252,674,0927.01%1,393,413,0102.31%3,859,261,08226.53%74,942,268,88020155,971,685,1377.47%1,813,382,5172.79%4,158,302,62027.90%79,949,126,65720166,195,459,7657.61%1,881,340,4052.84%4,314,119,36028.42%81,384,963,40920176,659,059,7938.05%2,052,852,3773.06%4,606,207,41729.46%82,702,363,26120187,880,502,8208.60%2,783,460,8573.71%5,097,041,96330.81%91,595,579,10920199,213,592,0109.23%2,920,017,2803.62%6,293,574,73033.05%99,793,793,20520209,455,060,0859.83%2,777,998,7803.64%6,677,061,30533.78%96,177,970,965202110,765,549,78810.24%3,416,041,4634.11%7,349,508,32533.43%105,127,558,771202212,608,755,83311.26%3,668,504,7334.18%8,940,251,10036.85%111,993,215,703\n\n\n\nTable 7.10: Incentive FMV by Year, 2011-2022\n\n\n\n\n\n\nCode\ncomm_ind_pins %&gt;% \n  filter(land_use %in% c(\"Commercial\", \"Industrial\")) %&gt;%\n group_by(year, land_use) %&gt;%\n  summarize(\n  fmv = sum(ifelse(incent_prop==\"Incentive\", fmv/1000000000, 0) ))%&gt;%\n  ggplot() + \n  geom_col(aes(x=year, y = fmv, fill = land_use)) + \n  scale_x_continuous(\n    limits = c(min_year - 1, max_year + 1),                         \n    breaks = c(min_year,  2015, 2020, max_year\n              )) + \n  alea_theme() +\n  labs(y = \"FMV ($ Billions)\")+\n  theme(legend.position =  \"bottom\", legend.title = element_blank(), \n                          axis.title.x = element_blank()) +\n  scale_fill_manual(values = cmap_colors)\n\n\n\n\n\n\n\n\nFigure 7.8: Figure 1 in Incentive Report Incentive FMV by Year, 2011-2022 (Normalized to 2011 FMV)\n\n\n\n\n\n\n\nCode\ncomm_ind_pins %&gt;%\n  filter(incent_prop == \"Incentive\") %&gt;%\n   reframe(fmv,\n           type_fmv = sum(fmv, na.rm=TRUE), .by = c(year,land_use)\n          ) %&gt;%\n   reframe(land_use, type_fmv,\n          fmv_incent = sum(fmv, na.rm=TRUE), .by=year) %&gt;% distinct() %&gt;% \n  arrange(year) %&gt;%\n  group_by(land_use) %&gt;%\n  mutate(ratio_2011 = type_fmv/ type_fmv[year==2011],\n         ratio_both_2011 = fmv_incent/fmv_incent[year==2011]) %&gt;% \n  ggplot() +\n  geom_line(aes(x=year, y = ratio_2011, group = land_use, color = land_use), lwd=1) + \n  geom_line(aes(x=year, y =ratio_both_2011),\n            lty = 2, lwd=1) + \n    scale_x_continuous(\n    limits = c(min_year, max_year),                                      \n    breaks = seq(min_year, max_year\n              )) + \n  alea_theme() + \n  scale_y_continuous(name = \"Percent of 2011 FMV\", labels = scales::percent) +\n  scale_color_manual(values = cmap_colors) +\n  labs(x=element_blank(), color = element_blank(),\n       caption = \"Dashed line represents all properties with incentive classification.\"\n       )\n\n\n\n\n\n\n\n\nFigure 7.9: Figure 2 in Incentive Report Increases in Incentive FMV by Year, 2011-2022 (Normalized to 2011 FMV)\n\n\n\n\n\n\n\nPIN Counts\n\n\nCode\ncommind_together &lt;- comm_ind_pins  %&gt;%\n#  left_join(class_dict |&gt; select(class, land_use)) |&gt;\n # filter(land_use %in% c(\"Industrial\", \"Commercial\")) |&gt;\n  group_by(year) %&gt;%\n  summarize(\n    proptype_pincount = n(),\n            n_incent = sum(ifelse(incent_prop == \"Incentive\", 1, 0)),\n            n_nonincent = sum(ifelse(incent_prop == \"Non-Incentive\", 1, 0)))  %&gt;% mutate(pct_incent = n_incent / proptype_pincount)\n\n\n\n\nCode\ncomm_ind_pins %&gt;% \n  filter(land_use %in% c(\"Commercial\", \"Industrial\")) %&gt;%\n group_by(year, land_use) %&gt;%\n  summarize(\n  PC = sum(incent_prop==\"Incentive\") )%&gt;%\n  ggplot() + \n  geom_col(aes(x=year, y = PC, fill = land_use)) + \n  scale_x_continuous(\n    limits = c(min_year - 1, max_year + 1),                                      \n    breaks = c(min_year, 2015, 2020, max_year\n              )) + \n  alea_theme() + \n  theme(legend.position =  \"bottom\",\n        legend.title = element_blank(),\n                          axis.title.x = element_blank()\n        ) +\n  scale_fill_manual(values = cmap_colors)\n\n\n\n\n\n\n\n\n\nFigure 7.10: Appendix Figure 1 in Incentive Report Incentive FMV by Year, 2011-2022 (Normalized to 2011 FMV)\n\n\n\n\n\n\nCode\ncomm_ind_pins %&gt;%\n mutate(year = as.numeric(year) ) |&gt;\n  filter(incent_prop == \"Incentive\") %&gt;%\n  reframe(PC=n(), .by= c(year, land_use)) %&gt;%\n  distinct() %&gt;%\n   reframe(land_use, PC,\n     both_PC = sum(PC), .by=year) %&gt;% distinct() %&gt;% \n  arrange(year) %&gt;%\n  group_by(land_use) %&gt;%\n  mutate(ratio_2011 = PC/ PC[year==2011],\n         ratio_both_2011 = both_PC/both_PC[year==2011]) %&gt;% \n\n  ggplot() +\n  geom_line(aes(x=year, y = ratio_2011, group = land_use, color = land_use), lwd=1 ) + \n  geom_line(aes(x=year, y =ratio_both_2011), lty = \n              2, lwd = 1) + \n  alea_theme() + \n    scale_x_continuous(\n     limits = c(min_year - 1, max_year + 1),                              \n    breaks = c(min_year, 2010, 2015, 2020, max_year)) +\n  scale_y_continuous(name = \"Percent of 2011 Pin Count\", label = scales::percent) + \n      scale_color_manual(values = cmap_colors)+\n\n  labs(title = \"Number of PINs, Indexed to 2011\",\n       x = NULL,\n       caption = \"Dashed line represents growth in the number of commercial and industrial PINs\",\n       color = NULL)\n\n\n\n\n\n\n\n\nFigure 7.11: Appendix Figure 2 in Incentive Report Incentive Pins by Year, 2011-2022 (Normalized to 2011 Pin Count)\n\n\n\n\n\n\n\nCode\ntable &lt;- comm_ind_pins %&gt;% \n    filter(land_use %in% c(\"Industrial\", \"Commercial\")) |&gt;\n\n  group_by(year, land_use) %&gt;%\n  summarize(\n    proptype_pincount = n(),\n            n_incent = sum(ifelse(incent_prop == \"Incentive\", 1, 0)),\n            n_nonincent = sum(ifelse(incent_prop == \"Non-Incentive\", 1, 0))) %&gt;%\n  mutate(pct_incent = n_incent / proptype_pincount) %&gt;%\n  arrange(year) %&gt;%\n  mutate(year = as.character(year)) %&gt;%\nfilter(!land_use %in% c(\"Exempt\", \"Other Residential\", \"Owner Occupied\", \"Rental\") ) %&gt;% \n  select(year, land_use, n_incent, pct_incent) |&gt;\n  pivot_wider(id_cols = year, names_from = land_use, \n              values_from = c(n_incent,pct_incent)) %&gt;% ungroup() |&gt;\n  select(-year)\n\ncbind(commind_together, table) %&gt;% \n  select(Year = year, \n         \"C&I Incentive Parcels\" = n_incent, \n         \"Share of C&I\" = pct_incent,\n         \"Commercial Pin Count\" = n_incent_Commercial, \n         \"Share of Commercial\" = pct_incent_Commercial,\n         \"Industrial Pin Count\" = n_incent_Industrial, \n         \"Share of Industrial\" = pct_incent_Commercial,\n         \"C&I PIN Count\" = proptype_pincount) %&gt;% \n  mutate(Year = as.character(Year)) |&gt;\n  mutate(across(contains(\"Share\"), scales::percent, accuracy = 0.01)) |&gt;\n  flextable() %&gt;%\n  add_header_row(values = c(\" \", \"Incent C&I\", \"Commercial\", \"Industrial\",\"All C&I\"), colwidths = c(1,2,2,2, 1)) |&gt;\n  align(align = \"right\", part = \"body\" ) |&gt;\n  align(align = \"center\", part = \"header\") |&gt;\n  align(j = 1, align = c(\"left\"), part = \"all\" )\n\n\n Incent C&ICommercialIndustrialAll C&IYearC&I Incentive ParcelsShare of C&ICommercial Pin CountShare of CommercialIndustrial Pin CountShare of IndustrialC&I PIN Count20112,1742.06%3770.53%1,7970.53%105,33920122,2672.15%3930.55%1,8740.55%105,42420132,3802.26%4260.60%1,9540.60%105,39920142,4682.35%4490.63%2,0190.63%105,14920152,6232.49%5330.75%2,0900.75%105,13920162,8512.71%5790.82%2,2720.82%105,15820173,0162.87%6520.92%2,3640.92%105,01220183,2263.08%7141.01%2,5121.01%104,82520193,3613.21%7511.06%2,6101.06%104,75420203,4193.27%7881.12%2,6311.12%104,50620213,5543.40%8191.17%2,7351.17%104,37720224,2784.10%8621.24%3,4161.24%104,262\n\n\n\n\nChange in Incentive Classification\n\n\nCode\npins_per_year &lt;- comm_ind_pins %&gt;% \n  group_by(year) %&gt;%\n  summarize(\"Gains Incent\" = sum(gain_incent, na.rm=TRUE),\n            \"Loses Incent\" = sum(lose_incent, na.rm=TRUE),\n            \"PINs with Incent. Class.\" = sum(incent_prop==\"Incentive\"),\n            \"PINs in Sample\" = n(),\n            \"Became Exempt\" = sum(became_exempt, na.rm=TRUE))\n\npins_per_year\n\n\n\n\n\n\n  \n\n\n\n\nTable 7.11: Number of PINs that gain or lose incentive classification each year.\n\n\n\n\n\n\nCode\ndf_2011_class8change &lt;- comm_ind_pins|&gt;\n  group_by(pin) |&gt;\n      mutate(class8years = sum(class_1dig == 8)) |&gt;\n\n  mutate(class8_change = case_when(\n      class8years == year_count ~ \"Always Class 8\",\n      class8years == 0 ~ \"Never Class 8\",\n      TRUE ~ \"Changes to C8\")\n  ) |&gt; \n  ungroup() |&gt;\ngroup_by(year, class8_change) |&gt;\n  summarize(\n    group_pin_count = n(),\n    group_year_fmv = sum(fmv, na.rm=TRUE),\n  ) |&gt; ungroup() |&gt;\n  group_by( class8_change) %&gt;%\n  mutate(\n    base_year_fmv = group_year_fmv[year == min(year)],\n    fmv_group_growth = (group_year_fmv / base_year_fmv) -1)  \n\n\n\n# df_2011_class8change %&gt;% \n#   filter(year == 2022) %&gt;%\n#   select(class8_change, fmv_group_growth, base_year_fmv, group_year_fmv, everything(), -year)\n\ndf_2011_class8change %&gt;% \n  filter(year == 2022) %&gt;%\n  select(class8_change, fmv_group_growth, base_year_fmv, group_year_fmv, everything(), -year)\n\n\n\n  \n\n\n\n\n\nCode\n# comm_ind_pins &lt;- comm_ind_pins %&gt;% \n#   group_by(pin) |&gt;\n#   mutate(class8years = sum(class_1dig == 8),\n#          class8_change = case_when(\n#            class8years == year_count ~ \"Always Class 8\",\n#            class8years == 0 ~ \"Never Class 8\",\n#            sum(lag(class_1dig) != 8 & class_1dig == 8) &gt; 0 ~ \"Becomes Class 8\",\n#            sum(class_1dig != 8 & lag(class_1dig) == 8 ) &gt; 0 ~ \"Leaves Class 8\",\n#            TRUE ~ \"Other\"),\n#          becomes8 = ifelse(lag(class_1dig) != 8 & class_1dig == 8, 1, 0),\n#          becomes7 = ifelse(lag(class_1dig) != 7 & class_1dig == 7, 1, 0),\n#          becomes6 = ifelse(lag(class_1dig) != 6 & class_1dig == 6, 1, 0),\n#          switches_to8 = ifelse(sum(incent_prop == \"Incentive\")&gt; 1 & becomes8 ==1, 1, 0),\n#          # is_exempt = ifelse(class %in% c(\"0\", \"EX\"), 1, 0),\n#          #  was_exempt = ifelse(lag(class) %in% c(\"0\",\"EX\"), 1, 0)\n#   ) %&gt;%\n#         ungroup()\n\n # classpins_per_year &lt;- comm_ind_pins |&gt;\n #   group_by(year) %&gt;%\n #  summarize(\"Becomes 8\" = sum(becomes8==1, na.rm=TRUE),\n #            \"Total 8\" = sum(class_1dig == 8),\n # \n #            \"6 or 7 to 8\" = sum(switches_to8 == 1, na.rm=TRUE),\n # \n #            \"Becomes 7\" = sum(becomes7 == 1, na.rm=TRUE),\n #            \"Total 7\" = sum(class_1dig == 7),\n # \n #            \"Becomes 6\" = sum(becomes6 == 1, na.rm=TRUE),\n #            \"Total 6\" = sum(class_1dig == 6),\n #            \"PINs with Incent. Class.\" = sum(incent_prop==\"Incentive\"),\n #          #  \"Tax Exempt\" = sum(is_exempt),\n #            \"PINs in Sample\" = n(),\n #            #\"Became Exempt\" = sum(became_exempt, na.rm=TRUE)\n #          )\n \nclasspins_per_year %&gt;%  filter(year &gt; 2011 & year &lt; 2023) |&gt; flextable::flextable()\n\n\n\n\n\nyearBecomes 8Total 86 or 7 to 8Becomes 7Total 7Becomes 6Total 6PINs with Incent. Class.PINs in Sample20124564143164931,5622,267107,133201355668529721311,6402,380107,1142014437023911801201,6862,468106,86520158876288661471571,7142,623106,8552016105864105271651871,8222,851106,87820178792476231891521,9033,016106,73220185695154522432092,0323,226106,55620196697966242651532,1173,361106,48620203898338242851192,1513,419106,2412021671,03567253011242,2183,554106,14520226731,703672223181162,2574,278106,044\n\n\n\nTable 7.12: Number of PINs that became each major class type each year.\n\n\n\n\n\n\nCommercial and Industrial Growth\n\n\nCode\ndf_2011_incentchange &lt;- comm_ind_pins|&gt;\ngroup_by(year, incent_change) |&gt;\n  summarize(\n    group_pin_count = n(),\n    group_year_fmv = sum(fmv, na.rm=TRUE),\n  ) |&gt; ungroup() |&gt;\n  group_by( incent_change) %&gt;%\n  mutate(\n    base_year_fmv = group_year_fmv[year == min(year)],\n    fmv_group_growth = (group_year_fmv / base_year_fmv) -1)  \n\n\n\ndf_2011_incentchange %&gt;% \n  #filter(year == params$year) %&gt;%\n  filter(year == max_year) |&gt;\n  select(\"Gains/Loses Incentive Classification\" = incent_change, \n         \"FMV Growth\" = fmv_group_growth, \n         \"2011 FMV\\n(Billions)\" = base_year_fmv, \n         \"Aggregate FMV\\n(Billions)\" = group_year_fmv, \n         \"PIN Count\" = group_pin_count, \n         -year) |&gt;\n  mutate(across(contains(\"Growth\"), scales::percent, accuracy = 0.01)) |&gt;\n    mutate(across(2:3, ~ round((./1000000000), digits = 3)) )|&gt;\n\n  flextable() %&gt;%\n  align(align = \"right\", part = \"body\" ) |&gt;\n  align(align = \"center\", part = \"header\") |&gt;\n  align(j = 1, align = c(\"left\"), part = \"all\" )\n\n\n\n\n\nGains/Loses Incentive ClassificationFMV Growth2011 FMV(Billions)Aggregate FMV(Billions)PIN CountAlways Incentive55.13%2.0593.1941,115Changes Sometime99.35%3.9527.8793,548Excluded107.31%7.22214.9725,047Never Incentive42.43%66.40694.58494,552\n\n\n\nTable 7.13: Aggregate FMV Growth by Incentive Classification. Changes Sometime includes properties that gained or lost an incentive classification. incent_status in tables below breaks up Changes Sometime into more detailed categories.\n\n\n\n\n\n\nCode\ncomm_ind_pins %&gt;%\n  ungroup() %&gt;% \n  group_by(year, incent_status) |&gt;\n  summarize(\n    group_pin_count = n(),\n    group_year_fmv = sum(fmv, na.rm=TRUE)) |&gt; \n  ungroup() |&gt;\ngroup_by(incent_status) %&gt;%\n  mutate(\n    base_year_fmv = group_year_fmv[year == min(year)],\n    fmv_group_growth = (group_year_fmv / base_year_fmv) -1) |&gt; \n  filter(year == params$year)  %&gt;%\n  select(\"Incentive Status\" = incent_status, \n         \"FMV Growth\" = fmv_group_growth, \n         \"2011 FMV\\n(Billions)\" = base_year_fmv, \n         \"Aggregate FMV\\n(Billions)\" = group_year_fmv, \n         \"PIN Count\" = group_pin_count, \n         -year) |&gt;\n  mutate(across(contains(\"Growth\"), scales::percent, accuracy = 0.01)) |&gt;\n    mutate(across(2:3, ~ round((./1000000000), digits = 3)) )|&gt;\n\n  flextable() %&gt;%\n  align(align = \"right\", part = \"body\" ) |&gt;\n  align(align = \"center\", part = \"header\") |&gt;\n  align(j = 1, align = c(\"left\"), part = \"all\" )\n\n\n\n\n\nIncentive StatusFMV Growth2011 FMV(Billions)Aggregate FMV(Billions)PIN CountAlways had Incentive55.13%2.0593.1941,115Excluded105.87%7.48915.4195,218Gained Incentive220.06%1.6455.2642,602Lost Incentive6.24%2.0402.167775Never had Incentive42.43%66.40694.58494,552\n\n\n\nTable 7.14: Aggregate FMV Growth by incent_status. Calculations for PINs counts in header of table in report.\n\n\n\n\n\n\nCode\ncomm_ind_pins %&gt;%\n  group_by(year, landuse_change) |&gt;\n  summarize(\n    group_pin_count = n(),\n    group_year_fmv = sum(fmv, na.rm=TRUE)) |&gt; \n  ungroup() |&gt;\n  group_by(landuse_change) %&gt;%\n  mutate(\n    base_year_fmv = group_year_fmv[year == min(year)],\n    base_year_n = group_pin_count[year == min(year)],\n    n_group_growth = group_pin_count/base_year_n -1,\n    fmv_group_growth = (group_year_fmv / base_year_fmv) -1) %&gt;%\n    filter(year == params$year) %&gt;%   \n  select(\"Changes Land Use\" = landuse_change, \n         \"FMV Growth\" = fmv_group_growth, \n         \"2011 FMV\\n(Billions)\" = base_year_fmv, \n         \"Aggregate FMV\\n(Billions)\" = group_year_fmv, \n         \"PIN Count\" = group_pin_count, \n         -year) |&gt;\n  mutate(across(contains(\"Growth\"), scales::percent, accuracy = 0.01)) |&gt;\n    mutate(across(2:3, ~ round((./1000000000), digits = 3)) )|&gt;\n\n  flextable() %&gt;%\n  align(align = \"right\", part = \"body\" ) |&gt;\n  align(align = \"center\", part = \"header\") |&gt;\n  align(j = 1, align = c(\"left\"), part = \"all\" )\n\n\n\n\n\nChanges Land UseFMV Growth2011 FMV(Billions)Aggregate FMV(Billions)PIN CountAlways Commercial30.42%53.47669.74460,210Always Industrial45.11%13.35919.38521,657Changes Land Use275.91%3.90614.68211,586Excluded88.99%8.89916.81810,809\n\n\n\nTable 7.15: Aggregate FMV Growth from 2011 to 2022 by landuse_change.\n\n\n\n\n\n\nCode\ndf_2011_bal &lt;- comm_ind_pins %&gt;%\n  group_by(year, landuse_change, incent_status) |&gt;\n  summarize(\n    group_pin_count = n(),\n    group_year_fmv = sum(fmv, na.rm=TRUE)) |&gt; \n  ungroup() |&gt;\n  group_by(landuse_change, incent_status) %&gt;%\n  mutate(\n    base_year_fmv = group_year_fmv[year == min(year)],\n    base_year_n = group_pin_count[year == min(year)],\n    n_group_growth = group_pin_count/base_year_n -1,\n    fmv_group_growth = (group_year_fmv / base_year_fmv) -1) |&gt;\n  mutate(year = as.numeric(year))\n\n\n\n\nCode\ndf_2011_bal %&gt;% \n  select(year, landuse_change, incent_status, fmv_group_growth, group_pin_count) %&gt;% \n  filter(year == params$year) %&gt;%   \nselect(\"Changes Land Use\" = landuse_change,\n       \"Incentive Status\" = incent_status,\n         \"FMV Growth\" = fmv_group_growth, \n         \"PIN Count\" = group_pin_count, \n         -year) |&gt;\n  mutate(across(contains(\"Growth\"), scales::percent, accuracy = 0.01)) |&gt;\n DT::datatable(rownames = FALSE, options = list(dom = 'tp'))\n\n\n\n\n\n\n\n\n\n\nTable 7.16: Growth from 2011 to 2022 - Change in Land Use by Incentive Class Status. Non-winsorized version of table.\n\n\n\n\n\n\nCode\ndf_2011_bal %&gt;% \n  ggplot() + \n  geom_line(aes(x=year, fmv_group_growth, group = incent_status, color = incent_status), lwd=1) + \n  labs( title = \"FMV Growth Since 2011 by Land Use & Incentive Status\", x = element_blank(),\n        y = \"FMV Growth since 2011\", color = element_blank()) + \n  theme_bw()  +    \n  scale_color_manual(values = cmap_colors) + \n  theme(    panel.background = ggplot2::element_blank(),\n            panel.grid.minor.x = ggplot2::element_blank(),\n            panel.grid.major.x = ggplot2::element_blank(),\n            \n            panel.grid.major.y = element_line(color = \"grey\"),\n            panel.grid.minor.y = element_line(color = \"grey\", \n                                              linetype = \"dashed\"),\n            axis.ticks = element_line(color = \"gray\"),\n            axis.ticks.x = element_blank(),\n            legend.position = \"bottom\") +\n    facet_wrap(~landuse_change)+\n   scale_x_continuous(limits = c(2010, 2024),                                    \n                      breaks = c(2011, 2017, 2023)) \n\n\n\n\n\n\n\n\n\nFigure 7.12: Includes the ‘Excluded’ Category\n\n\n\n\n\n\nCode\ndf_2011_bal %&gt;% \n  filter(incent_status != \"Excluded\" & landuse_change != \"Excluded\" & landuse_change != \"Exempt Sometime\") %&gt;%\n  ggplot() + \n  geom_line(aes(x=year, fmv_group_growth, group = incent_status, color = incent_status),lwd=1) + \n  labs( title = \"FMV Growth Since 2011 by Land Use\", \n        caption = \"PINs that did not exist during all years of the sample frame were excluded from the image (n=10,809).\",\n        x = element_blank(),\n         y = \"FMV Growth since 2011\"\n  ) + \n  scale_color_manual(values = cmap_colors) + \n  theme_bw()  +  \n  scale_y_continuous(labels = scales::percent) + \n  scale_x_continuous(\n    limits = c(min_year - 1, max_year + 1),                                      \n    breaks = c(min_year, max_year)) + \n  theme(    panel.background = ggplot2::element_blank(),\n            panel.grid.minor.x = ggplot2::element_blank(),\n            panel.grid.major.x = ggplot2::element_blank(),\n            \n            panel.grid.major.y = element_line(color = \"grey\"),\n            panel.grid.minor.y = element_line(color = \"grey\", \n                                              linetype = \"dashed\"),\n            axis.ticks = element_line(color = \"gray\"),\n            axis.ticks.x = element_blank(),\n            legend.position = \"bottom\", \n            legend.title = element_blank()) +\n  facet_wrap(~landuse_change)\n\n\n\n\n\n\n\n\nFigure 7.13: Excludes the ‘Excluded’ Category and ‘Exempt Sometime’ properties.\n\n\n\n\n\n\n\nCode\ndf_2011_bal %&gt;%  \n  mutate(year = as.factor(year)) %&gt;%\n  ggplot() + \n  geom_line(aes(x=year, y=fmv_group_growth, group = landuse_change, color = landuse_change), lwd=1) +\n  theme_bw()  +  \n  facet_wrap(~incent_status, nrow = 1) +\n  scale_x_discrete(breaks = c(2012, params$year)) + \n  scale_y_continuous(labels = scales::percent) +\n  scale_color_manual(values = cmap_colors) + \n\n  labs(title= paste0(\"Growth from 2011 to \", params$year),\n       subtitle = \"Incentive Classification Status by Land Use Change\",\n       y = \"FMV Growth since 2011\", x = NULL,\n       caption =  \"Values are indexed to 2011 FMV\") +\n    theme(  panel.background = ggplot2::element_blank(),\n            panel.grid.minor.x = ggplot2::element_blank(),\n            panel.grid.major.x = ggplot2::element_blank(),\n            \n            panel.grid.major.y = element_line(color = \"grey\"),\n            panel.grid.minor.y = element_line(color = \"grey\", \n                                              linetype = \"dashed\"),\n            axis.ticks = element_line(color = \"gray\"),\n            axis.ticks.x = element_blank(),\n            legend.position = \"bottom\",\n            legend.title = element_blank())\n\n\n\n\n\n\n\n\n\nFigure 7.14: Growth from 2011 to 2022. Faceted by if a PIN changed landuse during the sample period. Indexed to fair market value during 2011. For comparison only.\n\n\n\n\n\n\nCode\ndf_2011_bal %&gt;%  \n  filter(landuse_change != \"Excluded\" & incent_status != \"Excluded\" & landuse_change != \"Exempt Sometime\") %&gt;%\n  mutate(year = as.numeric(year)) %&gt;%\n  ggplot() + \n  geom_line(aes(x=year, y=fmv_group_growth, group = landuse_change, color = fct_reorder2(landuse_change, year, fmv_group_growth)), lwd=1) +\n  theme_bw()  +  \n  facet_wrap(~incent_status, nrow = 1) +\n  scale_x_continuous(limits = c(min_year-1, max_year+1), breaks = c(min_year, max_year)\n                   ) + \n  labs(title= \"Growth from 2011\", \n       subtitle = \"Incentive Classification Status by Land Use Change\",\n       y = \"FMV Growth since 2011\", x = NULL,\n       caption =  paste0(\"Values are indexed to 2011 FMV. \\nExcludes PINs that were tax exempt some years \\nor did not exist for all years between 2011 and \", params$year)) +\n  theme(    panel.background = ggplot2::element_blank(),\n            panel.grid.minor.x = ggplot2::element_blank(),\n            panel.grid.major.x = ggplot2::element_blank(),\n            \n            panel.grid.major.y = element_line(color = \"grey\"),\n            panel.grid.minor.y = element_line(color = \"grey\", \n                                              linetype = \"dashed\"),\n            axis.ticks = element_line(color = \"gray\"),\n            axis.ticks.x = element_blank(),\n            legend.position = \"bottom\", legend.title = element_blank()) +\n  scale_color_manual(values = cmap_colors) +\n  scale_y_continuous(labels = scales::percent) \n\n\n\n\n\n\n\n\nFigure 7.15: Figure 10 in Incentive Report Aggregate FMV Growth from 2011 to 2022. Faceted by PIN incentive status during the sample period. Indexed to fair market value during 2011.\n\n\n\n\n\n\n\nFMV Growth by Property Type - All Property Types\n\n\nCode\ncook_mc &lt;- read_csv(\"../Output/ptaxsim_muni_MC_2006to2023_new.csv\") |&gt; \n  filter(muni_mc_year &gt;= min_year & muni_mc_year &lt;= max_year)\n\ncook_mc |&gt; \n  rename_with(~str_remove(.,\"muni_mc_\")) |&gt;\n  mutate(across(is.numeric, round)) |&gt;\n    mutate(group = case_when(\n      major_class_code == \"2\" ~ \"Single-Family\",\n      major_class_code %in% c(\"3\", \"9\") ~ \"Multi-Family\",\n      major_class_code %in% c(\"5A\", \"5B\", \"6A\", \"6B\", \"7A\", \"7B\", \"8\") ~ \"C&I\",\n      T ~ \"Other Type\"\n    )) |&gt;\n  group_by(year, group) |&gt;\n  summarize(type_fmv = sum(fmv)/1000000000) |&gt; # In Billions\n  ungroup() |&gt; group_by(group) |&gt;\n  filter(group != \"Other Type\") |&gt;\n  mutate(ratio_2011 = type_fmv/ type_fmv[year==2011]\n         ) %&gt;% \n  ggplot()+\n  geom_line(aes(x=year, y = type_fmv, color = fct_reorder2(group, year, ratio_2011)), lwd=1) + alea_theme() +\n  labs(x=element_blank(),\n       y= \"FMV (Billions)\",\n       color = element_blank()) +\n     scale_x_continuous(limits = c(min_year-1, max_year+1),                                    \n                      breaks = c(min_year, 2016, max_year)) + \n  scale_color_manual(values = cmap_colors) + theme(legend.position = \"bottom\")\n\n\n\n\n\n\n\n\nFigure 7.16: Figure 3 from Incentive Report\n\n\n\n\n\n\n\nCode\ncook_mc |&gt; \n  rename_with(~str_remove(.,\"muni_mc_\")) |&gt;\n  mutate(across(is.numeric, round)) |&gt;\n    mutate(group = case_when(\n      major_class_code == \"2\" ~ \"Single-Family\",\n      major_class_code %in% c(\"3\", \"9\") ~ \"Multi-Family\",\n      major_class_code %in% c(\"5A\") ~ \"Commercial\", \n      major_class_code %in% c(\"5B\") ~ \"Industrial\",\n\n      major_class_code %in% c(\"6A\", \"6B\") ~ \"Industrial Incentive\", \n      major_class_code %in% c(\"7A\", \"7B\") ~ \"Commercial Incentive\",\n      major_class_code == \"8\" ~ \"Class 8\",\n      T ~ \"Other Type\"\n    )) |&gt;\n  group_by(year, group) |&gt;\n  summarize(type_fmv = sum(fmv)/1000000000) |&gt; # In Billions\n  ungroup() |&gt; group_by(group) |&gt;\n  filter(group != \"Other Type\") |&gt;\n  mutate(ratio_2011 = type_fmv/ type_fmv[year==2011]\n         ) %&gt;% \n  ggplot()+\n  geom_line(aes(x=year, y = ratio_2011, color = fct_reorder2(group, year, ratio_2011)), lwd=1) + alea_theme() +\n  labs(x= element_blank(),\n       y= \"% of 2011 FMV\",\n       color = element_blank()) +\n  scale_y_continuous(label = scales::percent) +\n     scale_x_continuous(limits = c(min_year-1, max_year+1),                                    \n                      breaks = c(min_year, 2016, max_year)) + \n  scale_color_manual(values = cmap_colors) + \n  theme(legend.position = \"right\")\n\n\n\n\n\n\n\n\nFigure 7.17: Figure 4 from Incentive Report",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Yearly Trends - Incentive Classifications</span>"
    ]
  },
  {
    "objectID": "incentive_report_yearlytrends.html#export-tables",
    "href": "incentive_report_yearlytrends.html#export-tables",
    "title": "Yearly Trends - Incentive Classifications",
    "section": "Export Tables",
    "text": "Export Tables\n\n\nCode\nlibrary(readxl)\n\ntablelist &lt;- list(\n  \"Muni Stats\" = munilevel,\n  \"Muni Rate Change\" = muni_ratechange,\n  \n  \"Cook Sums\" = table_cook,\n  \"Cook Class Sums\" = cty_MC_table,\n  \"Cook Rate Change\" = cook_ratechange\n)\n\n\n\n\n#writexl::write_xlsx(tablelist, \"Output/calculations_report_content_20240927.xlsx\")\n\nreadme &lt;- c(\n  \"Pin Change: Count of PINs gaining or losing an incentive class each year.\",\n  \"Major Class Change: Counts of PINs becoming major class types each year.\",\n  \"Top 10 Commercial Incents is based on summed FMV from properties that have commercial incentive classes.\",\n  \"Top 10 Industrial Incents is based on summed FMV from properties that have industrial incentive classes.\",\n  \n  \"Muni Shares shows the top 5, middle 5, and bottom 5 munis based on the share of FMV that has an incentive property out of all FMV in the municipality. Note: Municipalities without commercial or industrial property are excluded from this list.\",\n  \"Commerc_Share shows the top 5, middle 5, and bottom 5 municipalities based on share of commercial incentive FMV out of the commercial FMV within the municipality.Note: There are at least 50 municipalities that do not have commercial incentive properties. The bottom 5 displayed are alphabetically last, but there are 50 tied at 0%.\",\n            \"Indust_Share shows the top 5, middle 5, and bottom 5 municipalities based on the share of industrial incentive FMV out of the industrial FMV within the municipality. Note: There are at least 38 municipalities that do not have industrial incentive properties. The bottom 5 displayed are alphabetically last, but there are 38 tied at 0%.\",\n  \n  \"Muni Share_all includes all municipalities and their share of FMV with incentives out of all FMV in the municipality.\",\n  \"IndustShare_all is same as Indust_share but includes all munis.\",\n  \"CommercShare_all is same as Commerc_share but includes all munis.\") %&gt;% as.data.frame()\n\npaper_tables &lt;- list(\n  \"README\"= readme,\n  \n  \"Pin Change per Year\" = pins_per_year,\n  \"Top 10 Commercial Incents\" = commerc_top10,\n  \"Top 10 Indust Incents\" = indust_top10,\n  \n  \"Muni Shares\" = muni_incentshare_slice,\n  \"Indust_Share\" = indust_share,\n  \"Commerc_Share\" = commerc_share,\n\n  \"Muni Share_all\" = muni_incent_share,\n  \"IndustShare_all\" = indust_share_full,\n  \"Commerc_Share_all\" = commerc_share_full,\n  \n  \"Rate Change\" = muni_ratechange_sliced\n  \n)\n\n# writexl::write_xlsx(paper_tables, \"../Output/incentive_report_tables.xlsx\")",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Yearly Trends - Incentive Classifications</span>"
    ]
  },
  {
    "objectID": "incentives_report_2021.html",
    "href": "incentives_report_2021.html",
    "title": "Tax Year 2021",
    "section": "",
    "text": "Cook County Total Value\n\\[\n\\mbox{AV = Fair Market Value * Level of Assessment}\n\\]\n\\[\n\\mbox{Tax Rate} = \\frac{\\mbox{Amount Levied by Taxing Districts}}{\\mbox{Taxable Value}}\n\\]\n\\[\n\\mbox{Final Tax to District} = \\mbox{Portion of Levy Paid by PIN} = {\\mbox{Tax Code Rate}}*{\\mbox{Taxable Value of PIN}}\n\\]\n\\[\\mbox{Equalized Assessed Value} = {\\frac{\\mbox{final tax to dist + final tax to TIF}}{\\mbox{tax code rate}} + \\mbox{Exemptions + Abatements}}\\]\n\\[\\mbox{Taxed EAV} = {\\frac{\\sum{final\\_tax\\_to\\_dist}}{\\mbox{tax code rate}} = \\mbox{EAV - Exemptions - Abatements}}\\]\nCode\ncook_sums %&gt;% \n  filter(year == params$year) |&gt;\n  select(cty_PC, #cty_fmv_untaxable_value, \n         cty_fmv, cty_fmv_taxed, #cty_pct_fmv_untaxable\n         ) %&gt;%\n    mutate(cty_pct_fmv_taxed = scales::percent(cty_fmv_taxed/cty_fmv, accuracy = 0.01)) %&gt;%\n#  mutate(cty_pct_fmv_untaxable = scales::percent(cty_pct_fmv_untaxable, accuracy = 0.01)) %&gt;%\n  flextable() %&gt;% \n  set_header_labels(cty_PC = 'PINs', \n                   # cty_projects = \"Project IDs\", \n                    cty_fmv_taxed = 'Taxed FMV', \n                    cty_fmv_untaxable_value = 'FMV not Taxed\\nfor Levy',\n                    cty_fmv = 'Total FMV', \n\n                    cty_pct_fmv_taxed = 'FMV Taxed (%)'\n  ) %&gt;%   \n  FitFlextableToPage()\n\n\n\n\nTable 9.1: FMV of PINs in Cook County Taxed FMV represents the property value that was actually taxed by local taxing jurisdictions(equal to the amount levied) but converted to FMV. We use the the portion of an individuals tax bill that does NOT go to a TIF to calculate the composite levy for taxing jursidictions. This means that the “levy” actually represents the amount collected by the taxing agencies, not the amount that was levied. Therefore the composite levy does not include unpaid taxbills.\n\n\n\nPINsTotal FMVTaxed FMVFMV Taxed (%)1,864,594564,078,586,339464,644,694,57682.37%\nCode\ntbl &lt;-  cook_sums |&gt;\n  filter(year ==params$year) |&gt;\n  mutate(cty_pct_fmv_both_incent = cty_fmv_incentive / cty_fmv_comandind ,\n         cty_pct_PC_both_incent = cty_PC_withincents / cty_PC_comandind         ) |&gt;\n  select(cty_fmv_comandind, #cty_fmv, \n          cty_pct_fmv_both_incent, \n         cty_pct_fmv_incentinTIF,\n         cty_pct_PC_both_incent, cty_PC_comandind, cty_PC_incents_inTIFs, #cty_pct_PC_both_incent_inTIF, \n         cty_pct_fmv_incents_tif_increment) %&gt;%\n mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01))\n\ntbl %&gt;%\n  flextable() %&gt;% \n  align(align = \"right\") %&gt;%\n    set_header_labels(\n                          cty_fmv_comandind = 'Com. & Ind. FMV',\n                        #  cty_fmv = 'Total FMV in Cook',\n                    cty_pct_fmv_both_incent = '% of Com. & Ind. FMV  w/ Incent.',\n                    cty_pct_fmv_incentinTIF = '% of Com. & Ind. FMV  w/ Incent. in TIF',\n  cty_pct_fmv_incents_tif_increment = '% of Com. & Ind. FMV in TIF Increment',\n\n                          cty_PC_comandind = 'PIN Count',\n                      cty_PC_incents_inTIFs = \"Incent. PINs in TIF\",\n                    cty_pct_PC_both_incent = '% of Com. & Ind. PINs w/ Incent.',\n                    cty_pct_PC_both_incent_inTIF = '% of Incent. PINs in TIF'\n  ) %&gt;%\n  FitFlextableToPage()\n\n\n\n\nTable 9.2: Commercial and Industrial PINs in Cook County\n\n\n\nCom. & Ind. FMV% of Com. & Ind. FMV  w/ Incent.% of Com. & Ind. FMV  w/ Incent. in TIF% of Com. & Ind. PINs w/ Incent.PIN CountIncent. PINs in TIF% of Com. & Ind. FMV in TIF Increment106,504,761,13910.20%39.53%3.80%96,2001,21424.44%\n10.20% of industrial and commercial PINs (aka \"revenue producing PINs\") FMV has an incentive classification (3.80% when using PIN counts). Of the PINs that have incentive classification, 39.53% of the FMV is located within a TIF (3.80% when using PIN counts).\n24.44% is in TIF Increment.\nCode\n#table_cook %&gt;% \n  \ntbl &lt;- cook_sums |&gt;\n  filter(year == params$year) |&gt;\n  mutate(cty_pct_fmv_com_incent = cty_fmv_comwithincent / cty_fmv_commercial,#) |&gt;\n         cty_pct_fmv_com_incent_inTIF = cty_fmv_com_incent_inTIF / cty_fmv_comwithincent,\n         \n         cty_pct_PC_com_incent_inTIF = cty_PC_com_incent_inTIF / cty_PC_com_incent) %&gt;%\n  \n  select(cty_PC_commercial, cty_PC_com_incent, cty_pct_incent_ofcomPC, \n         cty_pct_PC_com_incent_inTIF, cty_fmv_commercial, cty_pct_incent_ofcomPC, \n         cty_pct_fmv_com_incent, cty_pct_fmv_com_incent_inTIF) %&gt;%\n  \n  mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01))\n\ntbl %&gt;%\n  flextable() %&gt;% \n    align(align = \"right\") %&gt;%\n  set_header_labels(cty_fmv_commercial = 'Commercial FMV',\n                    cty_PC_commercial = 'Commercial Pin Count', \n                    cty_PC_com_incent = 'Com. PIN Count w/ Incent.',\n                    cty_pct_incent_ofcomPC = 'Com. PINs w/ Incent.',\n                    cty_pct_fmv_com_incent = '% of Com. FMV  w/ Incent.', \n                    \n                    cty_pct_fmv_com_incent_inTIF = '% of Com. FMV  w/ Incent. in TIF', \n                    cty_PC_com_incent_inTIF = \"Com. Incent. PINs in TIF\", \n                    cty_pct_PC_com_incent = '% of Com. PINs w/ Incent.',\n                    cty_pct_PC_com_incent_inTIF = '% of Incent. PINs in TIF'\n  ) %&gt;%   FitFlextableToPage()\n\n\n\n\nTable 9.3: Commercial PINs in Cook County\n\n\n\nCommercial Pin CountCom. PIN Count w/ Incent.Com. PINs w/ Incent.% of Incent. PINs in TIFCommercial FMV% of Com. FMV  w/ Incent.% of Com. FMV  w/ Incent. in TIF71,1188351.17%37.84%84,128,815,7554.07%52.20%\n4.07% of commercial PIN FMV has an incentive classification (1.17% when using PIN counts). Of the PINs that have incentive classification, 52.20% of the FMV is located within a TIF (37.84% when using PIN counts).\nCode\ntbl &lt;- cook_sums |&gt;\n  filter(year == params$year) |&gt;\n  mutate(cty_pct_fmv_ind_incent = cty_fmv_indwithincent / cty_fmv_industrial,\n         cty_pct_fmv_ind_incent_inTIF = cty_fmv_ind_incent_inTIF / cty_fmv_indwithincent,\n         \n         cty_pct_PC_ind_incent_inTIF = cty_PC_ind_incent_inTIF / cty_PC_ind_incent) %&gt;%\n  \n  select(cty_PC_industrial, cty_PC_ind_incent, cty_PC_ind_incent_inTIF, \n         cty_pct_incent_ofindPC, cty_pct_fmv_ind_incent_inTIF, cty_pct_PC_ind_incent_inTIF,\n         \n         cty_fmv_industrial, cty_pct_fmv_ind_incent,  \n  ) %&gt;%\n  mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01)) \n\ntbl %&gt;%\n  flextable() %&gt;% \n  align(align = \"right\") %&gt;% \n  set_header_labels(cty_fmv_industrial = 'Industrial FMV',\n                    cty_PC_industrial = 'Industrial Pin Count', \n                    cty_PC_ind_incent = 'Ind. PIN Count w/ Incent.',\n                    cty_pct_incent_ofindPC = 'Ind. PINs w/ Incent.',\n                    cty_pct_fmv_ind_incent = '% of Ind. FMV  w/ Incent.', \n                    \n                    cty_pct_fmv_ind_incent_inTIF = '% of Ind. FMV  w/ Incent. in TIF', \n                    cty_PC_ind_incent_inTIF = \"Ind. Incent. PINs in TIF\", \n                    cty_pct_PC_ind_incent = '% of Com. PINs w/ Incent.',\n                    cty_pct_PC_ind_incent_inTIF = '% of Incent. PINs in TIF'\n  ) %&gt;% \n  FitFlextableToPage()\n\n\n\n\nTable 9.4: Industrial PINs in Cook County\n\n\n\nIndustrial Pin CountInd. PIN Count w/ Incent.Ind. Incent. PINs in TIFInd. PINs w/ Incent.% of Ind. FMV  w/ Incent. in TIF% of Incent. PINs in TIFIndustrial FMV% of Ind. FMV  w/ Incent.25,0822,81789811.23%33.71%31.88%22,375,945,38433.25%\n33.25% of industrial FMV has an incentive classification (11.23% when using PIN counts). Of the PINs that have incentive classification, 33.71% of the FMV is located within a TIF ( 31.88% when using PIN counts).\nCode\ncook_sums |&gt;\n  filter(year == params$year) |&gt;\n  select(cty_fmv, cty_fmv_tif_increment, cty_fmv_exemptions, cty_fmv_abatements, \n       #  cty_pct_fmv_untaxable \n         ) |&gt;\nmutate(cty_pct_fmv_untaxable = (cty_fmv_tif_increment + cty_fmv_exemptions + cty_fmv_abatements)/cty_fmv) %&gt;%\n  mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01)) %&gt;%\n  flextable() %&gt;% \n    align(align = \"right\") %&gt;%  \n  set_header_labels(\n                   cty_fmv = 'Total FMV', \n                    cty_fmv_tif_increment = 'TIF Increment FMV' ,\n                    cty_fmv_exemptions = 'Exempt Value: Exemptions',\n                    cty_fmv_abatements = 'Exempt Value: Abatements',\n                 #   cty_fmv_untaxable_value = 'Value not Taxable \\nfor Levy',\n                    cty_pct_fmv_untaxable = 'County FMV not Taxed (%)'\n                 ) %&gt;%\n  FitFlextableToPage()\n\n\n\n\nTable 9.5: Untaxable FMV in Cook County.\n\n\n\nTotal FMVTIF Increment FMVExempt Value: ExemptionsExempt Value: AbatementsCounty FMV not Taxed (%)564,078,586,33944,138,431,75954,949,509,78313,382,91817.57%\nCode\ncook_sums |&gt;\n  filter(year == params$year) |&gt;  \n  select(cty_av, cty_av_taxed, cty_untaxable_value_av, cty_pct_av_taxed, cty_pct_av_untaxable ) %&gt;%\n  mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01)) %&gt;%\n  flextable() %&gt;% \n    align(align = \"right\") %&gt;%  set_header_labels(\n                   cty_av = 'Total AV', \n                    cty_av_taxed = 'Taxed AV' ,\n                    cty_untaxable_value_av = 'AV Not Taxed',\n                    cty_pct_av_taxed = '% Taxed',\n                    cty_pct_av_untaxable = '% Not Taxed') %&gt;%\n   FitFlextableToPage()\n\n\n\n\nTable 9.6: Untaxable AV in Cook County. Taxed AV represents the property value that was actually taxed by local taxing jurisdictions.\n\n\n\nTotal AVTaxed AVAV Not Taxed% Taxed% Not Taxed70,733,758,74958,268,604,98713,658,042,18082.38%19.31%\nCode\ncook_sums |&gt;\n  filter(year == params$year) |&gt;\n  select(cty_fmv, cty_fmv_inTIF, cty_fmv_tif_increment, \n         cty_fmv_incentive, cty_fmv_incents_inTIFs, cty_fmv_incents_tif_increment) %&gt;%\n  flextable() %&gt;% \n  set_header_labels(\n                    cty_fmv = 'Total FMV', \n                    cty_fmv_inTIF = 'FMV in TIFs',\n                    cty_fmv_tif_increment = 'TIF Increment FMV' ,\n                    cty_fmv_incents_inTIFs = 'FMV from Incent. Class in TIF',\n                    cty_fmv_incentive = \"FMV with Incent.Class.\", \n                    cty_fmv_incents_tif_increment = 'FMV with Incent. Class. in TIF Increment') %&gt;%   \n  FitFlextableToPage()\n\n\n\n\nTable 9.7: FMV of properties with incentive classifications and TIF increment. Value in TIFs, value within the TIF that can be taxed by local taxing jurisdictions, value of properties that have reduced levels of assessments from incentive classifications, and the value that is both in a TIF and has a reduced LOA.\n\n\n\nTotal FMVFMV in TIFsTIF Increment FMVFMV with Incent.Class.FMV from Incent. Class in TIFFMV with Incent. Class. in TIF Increment564,078,586,33991,482,762,91344,138,431,75910,861,564,0254,294,012,2802,654,664,070\nTaxed value is the amount of value that was actually taxed in order to pay for taxing agencies levies. It includes frozen EAV within an area + taxable EAV for residential properties net exemptions and abatements. It also includes the equalized assessed value of incentive properties at their current, lower assessment ratios. final_tax_to_dist is used to calculate the amount that was collected by local government agencies and then divided by the tax rate to calculate the amount of value that was taxed, or the taxable equalized assessed value (TEAV).\nThe Taxed Value, when converted to the Fair Market Value (FMV) represents the amount of value that was taxed out of the full FMV available in Cook County.\nUntaxable EAV includes homeowner exemptions for 200 level properties, abatements for other property class types, EAV in the TIF increment, and EAV that has been reduced due to incentive classifications.\nCode\ncook_MC_sums &lt;- read_csv(\"../Output/ptaxsim_cook_MC_level_2006to2023_new.csv\") \n\ncook_MC_sums |&gt;  \n  filter(year == params$year) |&gt;\n      mutate(across(contains(c(\"pct_\", \"rate\")), scales::percent, accuracy = .01)) %&gt;%\n      mutate(across(is.numeric, round, digits = 0)) %&gt;%\n\n  select(\n    \"Property Type\" = class_group, \n    \"Homeowner Exempt FMV\"= cty_mc_fmv_exemptions,\n    \"Abated FMV\" = cty_mc_fmv_abatements,\n    \"$0 Bill Count\" = cty_mc_zero_bill,\n    \"$ Levy Paid\" = cty_mc_levy,\n  #  \"% of Levy Paid\" =  pct_mc_levy_paid, \n    \"FMV in Major Class\" =  cty_mc_fmv,\n    \"Taxed AV\" = cty_mc_av_taxed,\n   # \"Project Count\" = cty_mc_projects,\n    \"Avg Composite Tax Rate\" = cty_mc_current_rate_avg,\n 'FMV in TIFs' = cty_mc_fmv_inTIF, \n   'TIF Increment FMV' = cty_mc_fmv_tif_increment)  |&gt; \n  flextable() %&gt;% \n  align(align = \"right\")\n\n\nThe Fair Market Value (FMV) is also called the Market Value for\nAssessment Purposes and can be calculated from the av /\nloa, or the Assessed Value divided by the Level of\nAssessment. However, the values used for the level of assessment are an\napproximation for incentive properties since we do not have the PIN\nlevel assessment ratios.Property TypeHomeowner Exempt FMVAbated FMV$0 Bill Count$ Levy PaidFMV in Major ClassTaxed AVAvg Composite Tax RateFMV in TIFsTIF Increment FMV00096,77900010.75%0012,74804,632105,599,0394,358,002,460354,420,38211.23%1,843,011,040811,597,121254,934,117,72286,88240,9408,855,545,702410,547,209,26033,720,353,39010.00%42,781,852,90018,247,024,67637,486,5951,009,35233853,432,58541,422,095,3103,597,924,0299.07%10,108,420,9905,367,465,968400621,863,896532,586,91089,281,22010.23%195,351,42586,180,7405A7,790,0207,985,6705024,146,504,88780,205,629,68016,778,821,1809.89%25,394,220,93613,059,850,8735B112,6994,010,70919876,094,02914,904,980,5242,812,083,79910.16%6,365,768,3523,653,885,2406000194,534,1607,052,047,695570,394,28411.67%2,305,071,6701,349,017,3177A0004,972,971330,871,27020,987,27010.49%254,849,110126,368,5737B0290,305035,596,1752,589,747,270163,203,4178.76%1,326,940,140973,133,4318A00025,327,201500,214,00042,614,58120.62%203,965,75070,639,2348B00015,304,493388,683,79024,077,04021.40%203,185,610135,505,514900623,676,3261,246,518,17094,444,3968.75%500,124,990257,763,071\n\n\nCode\n# cty_MC_table &lt;- pin_data %&gt;%\n#   group_by(class_group) %&gt;%\n#   summarize(\n#     cty_MC_PC = n(),\n#    # cty_MC_projects = n_distinct(both_ids), # mostly for industrial and commercial properties\n#     cty_MC_fmv_incentive = sum(ifelse(incent_prop == 1, fmv, 0), na.rm = TRUE),\n#      cty_MC_fmv_taxed =  sum(taxed_fmv, na.rm=TRUE),\n#     cty_MC_av_taxed  = sum(taxed_av, na.rm=TRUE),\n#     cty_MC_fmv_incent_inTIF = sum(ifelse(incent_prop == 1 & in_tif == 1, fmv, 0), na.rm = TRUE),\n#     cty_MC_fmv_inTIF = sum(fmv_inTIF, na.rm=TRUE),\n#     cty_MC_fmv_tif_increment = sum(fmv_tif_increment, na.rm=TRUE),\n#     cty_MC_fmv_untaxable_value = sum(untaxable_value_fmv , na.rm=TRUE),\n#     cty_MC_fmv = sum(fmv, na.rm=TRUE),\n#     cty_MC_fmv_exemptions = sum(all_exemptions/eq_factor/loa, na.rm=TRUE),\n#     cty_MC_fmv_abatements = sum(abatements/eq_factor/loa, na.rm=TRUE),\n#     cty_MC_cty_zero_bill = sum(zero_bill, na.rm=TRUE),\n#     cty_MC_fmv_residential = sum(ifelse(res_prop == 1, fmv, 0), na.rm = TRUE),\n#     cty_MC_fmv_industrial = sum(ifelse(class %in% industrial_classes, fmv, 0), na.rm = TRUE),\n#     cty_MC_fmv_commercial = sum(ifelse(class %in% commercial_classes, fmv, 0), na.rm = TRUE),\n#     cty_MC_levy_paid = sum(final_tax_to_dist),\n#     cty_MC_current_rate_avg = mean(tax_code_rate),\n#     \n#     cty_MC_avg_C2_bill_noexe = mean(ifelse(res_prop == 1 & exe_total_adj == 0, (final_tax_to_dist+ final_tax_to_tif), NA), na.rm=TRUE),\n#     cty_MC_avg_C2_bill_withexe = mean(ifelse(res_prop == 1 & exe_total_adj &gt; 0, (final_tax_to_dist+ final_tax_to_tif), NA), na.rm=TRUE),\n#   ) %&gt;%\n#   mutate( cty_fmv = sum(cty_MC_fmv),\n#           pct_cty_MC_fmv_untaxable = cty_MC_fmv_untaxable_value / cty_MC_fmv,\n#          pct_fmv_taxed = cty_MC_fmv_taxed / sum(cty_MC_fmv),\n#           pct_MC_levy_paid = cty_MC_levy_paid / sum(cty_MC_levy_paid) )\n\n\n# cty_MC_table %&gt;%\n#   select(-c(cty_MC_avg_C2_bill_noexe, cty_MC_avg_C2_bill_withexe, cty_MC_fmv_residential, cty_MC_fmv_industrial, cty_MC_fmv_commercial, cty_fmv, #cty_MC_fmv_incent_inTIF\n#             )\n#          ) %&gt;%\n#     mutate(across(contains(c(\"pct_\", \"rate\")), scales::percent, accuracy = .01)) %&gt;%\n#   select(\n#     \"Property Type\" = class_group, \n#     \"Homeowner Exempt FMV\"= cty_MC_fmv_exemptions,\n#     \"Abated FMV\" = cty_MC_fmv_abatements,\n#     \"$0 Bill Count\" = cty_MC_cty_zero_bill,\n#     \"$ Levy Paid\" = cty_MC_levy_paid,\n#     \"% of Levy Paid\" =  pct_MC_levy_paid, \n#     \"FMV in Major Class\" =  cty_MC_fmv,\n#     \"Taxed AV\" = cty_MC_av_taxed,\n#    # \"Project Count\" = cty_MC_projects,\n#     \"Avg Composite Tax Rate\" = cty_MC_current_rate_avg,\n#    cty_MC_fmv_incentive, cty_MC_fmv_inTIF, cty_MC_fmv_incent_inTIF,\n#    cty_MC_fmv_tif_increment\n#    #everything()\n#    ) %&gt;%\n# \n#     mutate(across(is.numeric & !contains(\"pct_\"), round, digits = 0)) %&gt;%\n#   flextable() %&gt;% \n#   align(align = \"right\") %&gt;%\n#   set_header_labels(\n#     cty_MC_PC = 'PINs',# projects = \"Project IDs\", \n#     cty_MC_fmv_taxed = 'Taxed FMV', \n#     cty_MC_fmv_untaxable_value = 'FMV not Taxable for Levy', \n#     cty_MC_fmv_incentive = \"FMV with Incent.Class.\", \n#     cty_MC_fmv_inTIF = 'FMV in TIFs', \n#     cty_MC_fmv_tif_increment = 'TIF Increment FMV',\n#    # pct_cty_MC_fmv_untaxable = 'Value not Taxed (%)', \n#     cty_MC_fmv_incent_inTIF = 'FMV with Incent. Class. in TIFs' )",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "incentives_report_2021.html#frequency-of-incentives",
    "href": "incentives_report_2021.html#frequency-of-incentives",
    "title": "Tax Year 2021",
    "section": "Frequency of Incentives",
    "text": "Frequency of Incentives\n\nFair Market Value of Incentive PINs\n\n\nCode\nlanduse_incentshares &lt;- pin_data %&gt;% \n  filter(land_use != \"Land\") %&gt;%\n  group_by(clean_name, land_use) %&gt;% \n  summarize(pin_count = n(),\n            incent_PC = sum(ifelse(class &gt;=600 & class &lt;=900, 1, 0), na.rm=TRUE),\n            fmv_incentive = sum(ifelse(class &gt;=600 & class &lt;=900, fmv, 0), na.rm = TRUE),\n            #project_count = n_distinct(keypin),\n            fmv_group = sum(fmv, na.rm=TRUE),\n            #   av=sum(av)\n  ) %&gt;%\n  mutate(\n    fmv_incentive = ifelse(fmv_incentive == 0, NA, fmv_incentive),\n    pct_incent = fmv_incentive / fmv_group,\n    pct_incent = ifelse(is.na(pct_incent), 0, pct_incent),\npct_incent = scales::percent(pct_incent)\n)  \n\nindust_top10 &lt;- landuse_incentshares %&gt;%\n  select(clean_name, land_use, fmv_incentive, incent_PC) %&gt;% \n  filter(land_use == \"Industrial\") %&gt;%\n  arrange(desc(fmv_incentive)) %&gt;%\n  head(10) %&gt;% \n  select(-land_use)\n\nindust_top10 %&gt;%\n  flextable() %&gt;% \n  set_header_labels(clean_name = \"Municipality\", incent_PC = '# of Incent. PINs',\nfmv_incentive = \"FMV from Incentive\\nClass Properties\"\n) %&gt;%\n  set_table_properties( layout = \"autofit\", width = .75)\n\n\n\n\nTable 10.1: Top 10 Municipalities using Industrial Incentives\n\n\n\nMunicipalityFMV from IncentiveClass Properties# of Incent. PINsChicago1,404,401,120460Elk Grove Village726,896,050247Bedford Park526,447,670153North Lake490,863,31019Franklin Park489,621,430100Melrose Park285,148,74087Mc Cook280,518,54045Des Plaines260,638,67053Mt Prospect250,025,79042Schaumburg225,985,41080\n\n\n\n\n\n\n\nCode\ncommerc_top10 &lt;- landuse_incentshares %&gt;%\n  select(clean_name, land_use, fmv_incentive, incent_PC) %&gt;% \n  filter(land_use == \"Commercial\") %&gt;%\n  arrange(desc(fmv_incentive)) %&gt;%\n  head(10) %&gt;% \n  select(-land_use)\n  \ncommerc_top10 %&gt;%\n  flextable() %&gt;% \n#align(align = \"right\", j = 2:4) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", \n                    incent_PC = '# of Incent. PINs', \n                    fmv_incentive = \"FMV from Incentive\\nClass Properties\"\n                    ) %&gt;%\n  set_table_properties( layout = \"autofit\", width = .75)\n\n\n\n\nTable 10.2: Top 10 Municipalities using Commercial Incentives\n\n\n\nMunicipalityFMV from IncentiveClass Properties# of Incent. PINsChicago2,626,124,593180Glenview74,639,0403Matteson60,182,12021Calumet City48,137,47061Evergreen Park45,506,2105South Holland36,105,92046Lansing33,281,55026Chicago Heights32,485,68056Orland Park28,475,59011Homewood24,525,68020\n\n\n\n\n\n\n\nShare of Total FMV with Incentive Classification\nCombined Industrial and Commercial FMV with incentive classification divided by total FMV in municipality. Not included in a table in the report.\nOne way of showing areas that have reduced their tax base significantly through the use of incentive classifications.\n\n\nCode\ntable_muni_percentages &lt;- muni_sums %&gt;%   \n  filter(year == params$year)|&gt;\n  filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\", \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\", \"Deer Park\", \"Deerfield\"))\n\n# table_muni_percentages &lt;- munilevel %&gt;%   \n# filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\", \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\", \"Deer Park\", \"Deerfield\"))\n\ncross_county_line &lt;- c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\", \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\", \"Deer Park\", \"Deerfield\")\n\n\n\n\nCode\n# table_muni_percentages %&gt;%\n#   select(clean_name, pct_fmv_w_incentclass) |&gt; \n#   arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n#     slice(c(1:10, 56:65, 110:119)) %&gt;%\n# \n#   #slice(c(1:10, 67:76, 116:125)) %&gt;%\n#   mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, digits =1)) %&gt;%\n#   \n#   flextable() %&gt;% \n#   border_remove() %&gt;%\n#   hline_top() %&gt;%\n#   hline(i = c(10,20)) %&gt;%\n#   \n#   set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV with\\nIncent. Class.\") %&gt;%\n# add_header_row(values = c(\"County Wide\", \"3.22%\"), top = FALSE) %&gt;%\n#   align(j = 2, align = \"right\") %&gt;%\n# \n#   set_table_properties( layout = \"autofit\")\n\n\n\ntable_muni_percentages %&gt;%\n  select(clean_name, pct_fmv_w_incentclass) |&gt; \n  arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n  slice(c(1:5, 69:73, 121:125)) %&gt;%\n  #  slice(c(1:5, 58:62, 115:119)) %&gt;%\n\n  mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, digits = 2)) %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV\") %&gt;%\n  align(j = 2, align = \"right\") %&gt;%\nalign(j=2, align = \"right\", part = \"header\") %&gt;%\nset_table_properties( layout = \"autofit\")\n\n\n\n\nTable 10.3: Municipalities with the largest share of FMV property with incentive classification.\n\n\n\nMunicipality% FMVMc Cook68.40%Bedford Park48.80%North Lake40.30%Hodgkins37.90%Sauk Village30.10%Skokie1.00%Orland Hills0.90%Richton Park0.90%Robbins0.90%Burr Ridge0.80%Westchester0.00%Western Springs0.00%Wilmette0.00%Winnetka0.00%Worth0.00%\n\n\n\n\n\n\n\nCode\nlibrary(sf)\nlibrary(ggpattern)\n\nno_incentives &lt;-  pin_data %&gt;% \n # filter(between(class, 600, 899)) %&gt;%\n  group_by(clean_name) %&gt;% \n  summarize(incent_pins = sum(ifelse(between(class, 600, 899), 1, 0))) %&gt;%\n  filter(incent_pins == 0) %&gt;% \n  distinct(clean_name)\n\n\nno_incentives &lt;- no_incentives %&gt;%\n  left_join(muni_shp, by = c(\"clean_name\" = \"MUNICIPALITY\")) \n\n# unincorp_areas &lt;- muni_shp %&gt;% filter(!MUNICIPALITY %in% munilevel$clean_name)\n#anti_join(munilevel, muni_shp, by = c(\"clean_name\" = \"MUNICIPALITY\"))\n\n# unincorp_areas2 &lt;- muni_shp %&gt;% filter(!MUNICIPALITY %in% munilevel$shpfile_name)\n\n\n\n\nCode\ntable_muni_percentages %&gt;%\n    left_join(nicknames) |&gt;\n\n  select(clean_name, pct_fmv_w_incentclass, shpfile_name) %&gt;%\n filter(!is.na(clean_name) & clean_name != \"Unincorporated\" ) %&gt;%\n  full_join(muni_shp, by = c(\"shpfile_name\" = \"MUNICIPALITY\")) %&gt;%\n  \n  ggplot(aes(fill = pct_fmv_w_incentclass)) +\n  geom_sf(aes(geometry = geom), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    high = \"brown\", low = \"black\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\n    na.value=\"gray\",\n    n =4,\n    name = \"Percent of Municipality FMV\\nwith Incentive Classification\",\n    labels = scales::percent\n) +\n   geom_sf_pattern(data = no_incentives, aes(geometry = geom), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\n\nFigure 10.1: Percent of Municipality FMV with Incentive Classification % = FMV from Incentive Class properties / Muni FMV\n\n\n\n\n\n\n\n\n\nCode\ntable2 &lt;- pin_data %&gt;% \n    filter(land_use != \"Land\") %&gt;%\n  group_by(clean_name, incent_prop) %&gt;%   # projects can be counted twice if the project has incentive and normal commercial/industrial prop classes.\n  summarize(pin_count = n(),\n         project_count = n_distinct(keypin), \n         av_adjusted=sum(ifelse(between(class, 600, 899), av*2.5, av)),\n         av=sum(av, na.rm=TRUE),\nfmv=sum(fmv)) \n\ndatatable(table2,\n          rownames= FALSE,\n          colnames = c('Municipality' = 'clean_name',   'Incentivized?' = 'incent_prop', 'PIN Count' = 'pin_count', 'Project Count' = 'project_count', 'Taxable AV' = 'av')) %&gt;%\n  formatCurrency(c('Taxable AV', 'av_adjusted'), digits = 0)\n\n\n\n\nTable 10.4: PINs and value summarized by if the property has an incentive class or not in a municipality. AV Adjusted is the amount of assessed value that could be taxed if the property were assessed at 25% instead of the lower level of assessment of approximately 10%.",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "incentives_report_2021.html#share-of-commercial-industrial-fmv-with-incentive-classification",
    "href": "incentives_report_2021.html#share-of-commercial-industrial-fmv-with-incentive-classification",
    "title": "Tax Year 2021",
    "section": "Share of Commercial & Industrial FMV with Incentive Classification",
    "text": "Share of Commercial & Industrial FMV with Incentive Classification\n\n\nCode\nmuni_incent_share &lt;- pin_data %&gt;% \n  # drop munis mostly outside of Cook and unincorporated PINs\nfilter(!agency_num %in% cross_county_line & !is.na(clean_name) ) %&gt;%\n\n  filter(land_use == \"Industrial\" | land_use == \"Commercial\") %&gt;%\n  group_by(clean_name, agency_num) %&gt;% \n  summarize(pin_count = n(),\n            incent_PC = sum(ifelse(class &gt;=600 & class &lt;900, 1, 0), na.rm=TRUE),\n            fmv_w_incent = sum(ifelse(class &gt;=600 & class &lt;900, fmv, 0), na.rm = TRUE),\n           # project_count = n_distinct(keypin),\n            fmv_group = sum(fmv, na.rm=TRUE),\n            comind_fmv =sum(fmv, na.rm=TRUE),\n            pins_inTIF = sum(in_tif, na.rm=TRUE)) %&gt;%\n  mutate(\n    fmv_w_incent = ifelse(fmv_w_incent == 0, NA, fmv_w_incent),\n    pct_fmv_w_incent = fmv_w_incent/comind_fmv,\n    pct_fmv_w_incent = ifelse(is.na(pct_fmv_w_incent), 0, pct_fmv_w_incent)\n\n\n) \n\n# muni_incentshare_slice &lt;- muni_incent_share %&gt;%\n#   ungroup() %&gt;%\n#   mutate(pct_fmv_w_incentclass = fmv_w_incent/comind_fmv,\n#          pct_fmv_w_incentclass = ifelse(is.na(pct_fmv_w_incentclass), 0, pct_fmv_w_incentclass)) %&gt;%\n#   select(clean_name, pct_fmv_w_incentclass) |&gt; \n#   arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n#   mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, accuracy = 0.01) ) %&gt;%\n#   slice(c(1:10, 56:65, 110:119)) \n# \n# muni_incentshare_slice %&gt;%\n#   flextable() %&gt;% \n#   border_remove() %&gt;%\n#   hline_top() %&gt;%\n#   hline(i = c(10,20)) %&gt;%\n#   set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV with\\nIncent. Class.\") %&gt;%\n# add_header_row(values = c(\"County Wide\", \"3.25%\"), top = FALSE) %&gt;%\n#     align(j = 2, align = \"right\", part = \"all\") %&gt;%\n# \n# add_footer(\"There are 27 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\", top = FALSE) %&gt;%\n#   set_table_properties( layout = \"autofit\")\n\n\nmuni_incentshare_slice &lt;- muni_incent_share  %&gt;%\nungroup() %&gt;%\nfilter(!agency_num %in% cross_county_lines) %&gt;%\n  mutate(pct_fmv_w_incentclass = fmv_w_incent/comind_fmv,\n    pct_fmv_w_incentclass = ifelse(is.na(pct_fmv_w_incentclass), 0, pct_fmv_w_incentclass)) %&gt;%\n  select(clean_name, pct_fmv_w_incentclass) |&gt; \n  arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n  mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, accuracy = 0.01 ) ) %&gt;%\n  slice(c(1:5, 58:62, 115:119))\n  \nmuni_incentshare_slice %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  align(j = 2, align = \"right\", part = \"all\") %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV with\\nIncent. Class.\") %&gt;%\n#add_header_row(values = c(\"County Wide\", \"3.25%\"), top = FALSE) %&gt;%   align(j = 2, align = \"right\" ) %&gt;%\nbold(i = 8) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\nTable 10.5: Municipalities with the largest share of Commercial and Industrial property with incentive classification. Uses values obtained from PTAXSIM, and levels of assessment from CCAO’s Github. There are 27 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\n\n\n\nMunicipality% FMV withIncent. Class.Sauk Village78.47%Mc Cook74.73%North Lake71.46%Ford Heights56.32%Phoenix52.47%Niles9.59%Willow Springs9.56%Palos Heights9.08%Crestwood8.36%Rolling Meadows8.26%Stone Park0.00%Western Springs0.00%Wilmette0.00%Winnetka0.00%Worth0.00%\n\n\n\n\n\n\n\nCode\nmuni_incent_share %&gt;%\n  select(clean_name, pct_fmv_w_incent) %&gt;%\n  left_join(nicknames)|&gt;\nfilter(clean_name != \"Unincorporated\") %&gt;%\n  full_join(muni_shp, by = c(\"shpfile_name\" = \"MUNICIPALITY\")) %&gt;%\n  \n  ggplot(aes(fill = pct_fmv_w_incent)) +\n  geom_sf(aes(geometry = geom), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    high = \"brown\", low = \"black\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\n    na.value=\"gray\",\n    n =4,\n    name = \"Percent of Commercial &\\nIndustrial FMV with\\nIncentive Classification\",\n    labels = scales::percent\n) +\n   geom_sf_pattern(data = no_incentives, aes(geometry = geom), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\nFigure 10.2: Share of Commercial and Industrial FMV that has an incentive property class.",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "incentives_report_2021.html#share-of-industrial-fmv-with-incentive-classification-within-each-municipality",
    "href": "incentives_report_2021.html#share-of-industrial-fmv-with-incentive-classification-within-each-municipality",
    "title": "Tax Year 2021",
    "section": "Share of Industrial FMV with Incentive Classification within each Municipality",
    "text": "Share of Industrial FMV with Incentive Classification within each Municipality\n\n\n\n\nCode\nindust_share_full &lt;- muni_sums  %&gt;%\n  \n  filter(year == params$year & !clean_name %in% cross_county_line) |&gt;\n  ungroup() %&gt;%\n  mutate(pct_fmv_indust_incent =  muni_fmv_indust_incent/muni_fmv_industrial,\n         pct_fmv_indust_incent = ifelse(is.na(pct_fmv_indust_incent), 0, pct_fmv_indust_incent)) %&gt;%\n  select(clean_name, pct_fmv_indust_incent) |&gt; \n  arrange(desc(pct_fmv_indust_incent)) %&gt;%\n  mutate(pct_fmv_indust_incent = scales::percent(pct_fmv_indust_incent, accuracy = 0.01 ) ) \n\nindust_share &lt;- indust_share_full %&gt;%\n  slice(c(1:5, 58:62, 115:119))\n\nindust_share %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  align(j = 2, align = \"right\", part = \"all\") %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_indust_incent = \"% FMV with\\nIncent. Class.\") %&gt;%\nbold(i = 8) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\nTable 10.6: Percent of Industrial FMV within each Municipality that has incentive classification. 37 municipalities do not use industrial incentives.\n\n\n\nMunicipality% FMV withIncent. Class.Homewood91.22%Phoenix90.58%Richton Park89.07%North Lake84.90%Sauk Village82.97%Wheeling22.94%Steger21.33%Crestwood21.32%Dolton20.53%Hoffman Estates19.43%River Forest0.00%Riverside0.00%Rosemont0.00%South Barrington0.00%Stickney0.00%",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "incentives_report_2021.html#share-of-commercial-fmv-with-incentive-classification-within-each-municipality",
    "href": "incentives_report_2021.html#share-of-commercial-fmv-with-incentive-classification-within-each-municipality",
    "title": "Tax Year 2021",
    "section": "Share of Commercial FMV with Incentive Classification within each Municipality",
    "text": "Share of Commercial FMV with Incentive Classification within each Municipality\n\n\nCode\ncommerc_share_full &lt;- muni_sums  %&gt;%\n  \n  filter(year == params$year & !clean_name %in% cross_county_line) |&gt;\n  ungroup() %&gt;%\n  mutate(pct_fmv_commerc_incent =  muni_fmv_commerc_incent/muni_fmv_commercial,\n    pct_fmv_commerc_incent = ifelse(is.na(pct_fmv_commerc_incent), 0, pct_fmv_commerc_incent)) %&gt;%\n  select(clean_name, pct_fmv_commerc_incent) |&gt; \n  arrange(desc(pct_fmv_commerc_incent)) %&gt;%\n  mutate(pct_fmv_commerc_incent = scales::percent(pct_fmv_commerc_incent, accuracy = 0.01 ) ) \n\ncommerc_share &lt;- commerc_share_full %&gt;%\n  slice(c(1:5, 58:62, 115:119))\n\ncommerc_share %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  align(j = 2, align = \"right\", part = \"all\") %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_commerc_incent = \"% FMV with\\nIncent. Class.\") %&gt;%\nbold(i = 8) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\nTable 10.7: Percent of Commercial FMV within each Municipality that has incentive classification. 49 municipalities do not use commercial incentives.\n\n\n\nMunicipality% FMV withIncent. Class.Sauk Village47.81%Ford Heights35.89%Posen31.13%Phoenix28.72%Matteson27.26%Bedford Park1.59%Park Ridge1.32%Evanston1.31%North Lake1.27%Des Plaines1.26%Schaumburg0.00%South Barrington0.00%Stickney0.00%Stone Park0.00%Thornton0.00%",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "incentives_report_2021.html#shifted-tax-revenue-and-tax-burden",
    "href": "incentives_report_2021.html#shifted-tax-revenue-and-tax-burden",
    "title": "Tax Year 2021",
    "section": "Shifted Tax Revenue and Tax Burden",
    "text": "Shifted Tax Revenue and Tax Burden\nRead in CCAO level of assessment rates for each property class. Read in Summary file for Municipalities from 2006 to 2021.\n\n\nCode\nmuni_rate &lt;- read_csv(\"../Output/ptaxsim_muni_level_2006to2023.csv\") %&gt;%\n  filter(year == params$year) %&gt;%\n  left_join(nicknames) %&gt;% \n  select(clean_name, muni_current_rate_avg, muni_pct_eav_taxed,# cur_comp_muni_rate\n) %&gt;%\n  rename(cur_munilevel_rate = muni_current_rate_avg)\n\nmuni_ratechange &lt;- read_csv(paste0(\"../Output/muni_ratechange_\", params$year, \"_test.csv\"))",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "incentives_report_2021.html#not-taxed-value---pin-aggregated-to-county-level",
    "href": "incentives_report_2021.html#not-taxed-value---pin-aggregated-to-county-level",
    "title": "Tax Year 2021",
    "section": "Not Taxed Value - PIN aggregated to County Level",
    "text": "Not Taxed Value - PIN aggregated to County Level\n\n\nCode\n#cook_ratechange &lt;- read_csv(\"../Output/ptaxsim_cook_level_2006to2023_new.csv\") |&gt; \n # filter(year == params$year)\n\n\n\n\nCode\ncook_ratechange &lt;- pin_data %&gt;%\n  filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\",\n                             \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\",\n                             \"Deer Park\", \"Deerfield\")) %&gt;% \n  #group_by(class_group) %&gt;%\n  summarize(\n    \n    ## New Tax Base Calculations\n    new_TEAV_noIncents = sum(ifelse(class &gt;= 600 & class &lt; 900,\n                                    (taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n    \n    ## NewTax Base Calculations\n    new_TEAV_noCommercIncents = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% commercial_classes,\n                                           (taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n\n   new_TEAV_noIndustIncents = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% industrial_classes,\n      (taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n\n    new_TEAV_noC6 = sum(ifelse( class &gt;=600 & class &lt; 700, \n(taxed_av*eq_factor/loa)*0.25 , taxed_av*eq_factor), na.rm=TRUE),\n\n    new_TEAV_noC7 = sum(ifelse(class &gt;=700 & class &lt; 800,\n(taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n\n    new_TEAV_noC8 = sum(ifelse(class &gt;=800 & class &lt; 900, (taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n    \n    new_TEAV_vacant_props = sum(ifelse(class &gt;=600 & class &lt;900,  # if incentive classes were assessed at 0% (aka not taxedat all) or if the building lost its value completely without the incentive classification.\n                                       0, taxed_av*eq_factor), na.rm=TRUE),\n    \n    new_TEAV_noExemps = sum(taxed_av*eq_factor + all_exemptions, na.rm=TRUE), # does not include abatements\n    new_TEAV_noAbates = sum(taxed_av*eq_factor + abatements, na.rm=TRUE), # include only abatements, not other exemption types\n  \n    \n    # TIF increment above the frozen EAV\n    forgone_TIF_EAV = sum(fmv_tif_increment * loa * eq_factor, na.rm=TRUE),\n \n\n    cty_PC = n(),\n    # projects = n_distinct(both_ids), # mostly for industrial and commercial properties\n    pins_withincents = sum(ifelse(incent_prop == 1, 1, 0)),\n    fmv_incentive = sum(ifelse(incent_prop == 1, fmv, 0), na.rm = TRUE),\n    #fmv_taxed =  sum(taxed_fmv, na.rm=TRUE),\n    fmv_incents_inTIFs = sum(ifelse(incent_prop == 1 & final_tax_to_tif &gt; 0, fmv, 0), na.rm = TRUE),\n    fmv_inTIF = sum(fmv_inTIF, na.rm=TRUE),\n    fmv_tif_increment = sum(fmv_tif_increment, na.rm=TRUE),\n    fmv_untaxable_value = sum(untaxable_value_fmv , na.rm=TRUE),\n    fmv_exemptions = sum(all_exemptions/eq_factor/loa, na.rm=TRUE),\n    fmv_abatements = sum(exe_abate/eq_factor/loa, na.rm=TRUE),\n    zero_bill = sum(zero_bill, na.rm=TRUE),\n    fmv_residential = sum(ifelse(res_prop==1, fmv, 0), na.rm = TRUE),\n    fmv_C2 = sum(ifelse(c2_prop == 1, fmv, 0), na.rm = TRUE),\n    \n    fmv_industrial = sum(ifelse(class %in% industrial_classes, fmv, 0), na.rm = TRUE),\n    fmv_commercial = sum(ifelse(class %in% commercial_classes, fmv, 0), na.rm = TRUE),\n    \n    current_rate_avg = mean(tax_code_rate),\n    avg_C2_bill_noexe = mean(ifelse(between(class,200,299) & all_exemptions == 0, (final_tax_to_dist + final_tax_to_tif), NA), na.rm=TRUE),\n    avg_C2_bill_withexe = mean(ifelse(between(class,200,299) & all_exemptions &gt; 0, (final_tax_to_dist + final_tax_to_tif), NA), na.rm=TRUE),\n    av_taxed = sum(taxed_av, na.rm = TRUE),\n    untaxable_value_av = sum(untaxable_value_av, na.rm=TRUE),\n    av = sum(av),\n    eav_taxed = sum(taxed_av*eq_factor), \n    eav_untaxable = sum(untaxable_value_eav, na.rm=TRUE),\n    fmv = sum(fmv, na.rm=TRUE),\n    pins_in_class = n(),\n    all_exemptions = sum(all_exemptions),   # in EAV\n    abatements = sum(exe_abate),            # in EAV\n    eav_incents_inTIFs = sum(ifelse(incent_prop == 1 & in_tif == 1, taxed_eav, 0), na.rm = TRUE),\n\n    final_tax_to_dist = sum(final_tax_to_dist), ## Amount of Total Levy\n    final_tax_to_tif = sum(final_tax_to_tif),\n    eq_av = sum(eq_av)) %&gt;%\n  mutate(\n   reducedEAV_comind_incents =  new_TEAV_noIncents - eav_taxed,\n   reducedEAV_commerc_incents  = new_TEAV_noCommercIncents - eav_taxed,\n\n   reducedEAV_indust_incents  = new_TEAV_noIndustIncents - eav_taxed,\n    # Absolute maximum TEAV: No Exemptions, no abatements, no TIFS, no Incentive properties\n    # Commercial and industrial assessed at 25%\n    TEAV_max = eav_taxed + all_exemptions + abatements + forgone_TIF_EAV +    reducedEAV_comind_incents,\n\n    # no exemptions or incentive classifications:\n    TEAV_neither = eav_taxed + all_exemptions + reducedEAV_comind_incents,\n\n    rate_noExe = final_tax_to_dist / new_TEAV_noExemps,\n    rate_noCommercInc = final_tax_to_dist / new_TEAV_noCommercIncents,\n    rate_noIndustInc = final_tax_to_dist / new_TEAV_noIndustIncents,\n\n    rate_noAbate = final_tax_to_dist / new_TEAV_noAbates,\n    rate_noInc = final_tax_to_dist / new_TEAV_noIncents ,\n    rate_neither = final_tax_to_dist / TEAV_neither, \n    rate_noTIFs = final_tax_to_dist / (eav_taxed + forgone_TIF_EAV),\n    rate_vacant = final_tax_to_dist / new_TEAV_vacant_props,\n    rate_lowest = final_tax_to_dist / TEAV_max ,\n    rate_current = final_tax_to_dist / eav_taxed,\n    change_noInc = rate_current - rate_noInc,\n\n    forgonerev_noExe = rate_noExe * all_exemptions,\n    forgonerev_noAbate = rate_noAbate * (new_TEAV_noAbates - eav_taxed),\n    forgonerev_noIncents = rate_noInc * (new_TEAV_noIncents - eav_taxed),\n    forgonerev_noCommercIncents = rate_noInc * (new_TEAV_noCommercIncents - eav_taxed),\n\n    forgonerev_noIndustIncents = rate_noInc* (new_TEAV_noIndustIncents - eav_taxed),\n\n    forgone_noExe_or_Inc = rate_neither * (TEAV_neither - eav_taxed),\n    forgonerev_noTIFs = rate_noTIFs * forgone_TIF_EAV,\n    forgonerev_vacant = rate_vacant * (new_TEAV_vacant_props - eav_taxed),\n    forgonerev_maxTEAV = rate_lowest * (TEAV_max - eav_taxed)\n)\n\ncook_ratechange %&gt;%\n mutate(across(contains(\"rate\"), scales::percent, accuracy = .01),\n        change_noInc = round(change_noInc*100, digits = 2)) %&gt;%\n\nselect(\"Current Composite Rate\" = rate_current, \n       \"Rate if Incentive Props LoA is 25%\" = rate_noInc, \n       \"Tax Rate Change\" =  change_noInc) %&gt;% \n\n  flextable()\n\n\nCurrent Composite RateRate if Incentive Props LoA is 25%Tax Rate Change8.52%8.31%0.21\n\n\n\n\nCode\ncook_ratechange %&gt;% \nselect(\"Commerc. EAV w/Incent\" = reducedEAV_commerc_incents, \"Indust EAV w/ Incent\" = reducedEAV_indust_incents,\n       \"CommInd EAV w/ Incent\" = reducedEAV_comind_incents,\n       \"Homeowner Exemption Exempt EAV\" = all_exemptions) %&gt;% flextable()\n\n\nCommerc. EAV w/IncentIndust EAV w/ IncentCommInd EAV w/ IncentHomeowner Exemption Exempt EAV1,531,548,2243,322,091,5164,853,639,73915,812,582,154\n\n\n$15 Billion EAV is tax exempt due to homeowners exemptions. All incentive properties combined only have $4 billion EAV that is tax exempt (due to the decreased level of assessment which results in less AV, and therefore, EAV)\n\nEstimates for Revenue Shifted to Non-Incentive Class Properties\n\nTake new tax rate and apply it to new taxbase.\n\n\n\nCode\ncook_ratechange %&gt;% \nselect(contains(\"forgonerev\") ) %&gt;% flextable()\n\n\nforgonerev_noExeforgonerev_noAbateforgonerev_noIncentsforgonerev_noCommercIncentsforgonerev_noIndustIncentsforgonerev_noTIFsforgonerev_vacantforgonerev_maxTEAV1,246,007,903806,549.4403,518,196127,328,687276,189,5090-281,466,5361,592,337,079\n\n\n\n\nNaive Revenue Shift\nUses old current tax rate and multiplies it by the new taxbase.\n\n\nCode\npin_data %&gt;%\n  filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\",\n                             \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\",\n                             \"Deer Park\", \"Deerfield\")) %&gt;% \n  filter(!agency_num %in% cross_county_lines & \n           !is.na(clean_name) & clean_name!=\"Unincorporated\" )  %&gt;%\n  summarize(\n    # for homestead exemptions\n    mostnaive_forgone_tax_amt_exe = sum(tax_amt_exe),    \n  \n    # more accurate but still uses current tax rate instead of recalculated tax rate:\n    forgonerev_from_exemptions  = sum(ifelse(class &gt;= 200 & class &lt; 300,\n          (((av*eq_factor) - (taxed_av*eq_factor))) * tax_code_rate/100, 0), na.rm=TRUE),\n\n   # amount of EAV from taxing an additional 15% of the AV if incentive properties didn't exist\n   # using current tax rate for each property at the tax code level\n    forgonerev_from_comind_incents  = sum(ifelse(class &gt;= 600 & class &lt; 900,\n          (((taxed_av*eq_factor)*0.25 - (taxed_av*eq_factor))) * tax_code_rate/100, 0), na.rm=TRUE),\n\n    forgonerev_commerc_incents  = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% commercial_classes,\n          (((taxed_av*eq_factor)*0.25 - (taxed_av*eq_factor))) * tax_code_rate/100, 0), na.rm=TRUE),\n\n    forgonerev_indust_incents  = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% industrial_classes,\n         (((taxed_av*eq_factor)*0.25 - (taxed_av*eq_factor))) * tax_code_rate/100, 0), na.rm=TRUE),\n   \n    #  forgonerev_noTIFs = rate_current/100 * ,\n       # TIF increment above the frozen EAV\n    forgonerev_TIFs = sum(fmv_tif_increment * loa * eq_factor*tax_code_rate/100, na.rm=TRUE),\n   \n   # if incentive properties had no tax value (i.e. owners left, or fully tax exempt)\n   # also equal to the current amount collected from incentive properties\n     forgonerev_vacant = sum(ifelse(class &gt;= 600 & class &lt; 900,  taxed_av*eq_factor * tax_code_rate/100, 0), na.rm = TRUE)\n   )",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "incentives_report_2021.html#change-in-composite-property-tax-rate-due-to-incentives-and-other-policy-scenarios",
    "href": "incentives_report_2021.html#change-in-composite-property-tax-rate-due-to-incentives-and-other-policy-scenarios",
    "title": "Tax Year 2021",
    "section": "Change in Composite Property Tax Rate Due to Incentives and other Policy Scenarios",
    "text": "Change in Composite Property Tax Rate Due to Incentives and other Policy Scenarios",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "incentives_report_2021.html#tables---difference-in-composite-tax-rates",
    "href": "incentives_report_2021.html#tables---difference-in-composite-tax-rates",
    "title": "Tax Year 2021",
    "section": "Tables - Difference in Composite Tax Rates",
    "text": "Tables - Difference in Composite Tax Rates\n\n\nCode\nmuni_ratechange_sliced &lt;- muni_ratechange %&gt;% \n  # mutate(change_noInc = rate_current - rate_noInc,\n  #   change_neither = rate_current - rate_neither,\n  #   change_noTIF = rate_current - rate_noTIFs,\n  #   change_noExe = rate_current - rate_noExe,\n  #   change_vacant = rate_current - rate_vacant,\n  #   change_lowest = rate_current - rate_lowest\n  # )  %&gt;%\n     mutate(across(contains(\"rate_\"), round, digits = 2))|&gt;\n  select(clean_name, rate_current, rate_noInc, change_noInc) %&gt;% \n  arrange(desc(change_noInc) ) %&gt;%\n  mutate(across(c(rate_current, rate_noInc, change_noInc), round, digits=2)) %&gt;%\n  mutate(change_noInc = abs(round(change_noInc, digits = 2)) ) %&gt;% \n  slice(c(1:5, 58:62, 115:119)) \n\nmuni_ratechange_sliced %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", rate_current = \"Current Comp.\\nTax Rate\", rate_noInc = \"Tax Rate if No\\nIncent. Class.\",\n                    change_noInc = \"Rate Change\") %&gt;%\n  bold(i = 8) %&gt;%\n  add_footer(\"There are 26 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\", top = FALSE) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\nTable 11.1: Composite Tax Rate Change from hypothetical scenario of taxing incentive property at 25% of their FMV instead of 10% of their FMV. There are 26 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\n\n\n\nMunicipalityCurrent Comp.Tax RateTax Rate if NoIncent. Class.Rate ChangeMc Cook0.130.070.06Sauk Village0.170.110.05North Lake0.140.090.05Ford Heights0.250.210.04Bedford Park0.130.090.04Countryside0.080.080.00Flossmoor0.180.180.00Richton Park0.190.180.00Rolling Meadows0.110.110.00Tinley Park0.130.120.00Kenilworth0.100.100.00La Grange Park0.100.100.00Merrionette Park0.110.110.00Morton Grove0.100.100.00Norridge0.090.090.00\n\n\n\n\n\n\n\nCode\nmuni_ratechange %&gt;% \n  select(clean_name, change_noInc) %&gt;% \n mutate(change_noInc = round(change_noInc*100, digits = 1)) %&gt;%\n  filter(clean_name != \"Unincorporated\") %&gt;%\n  left_join(nicknames) %&gt;%\n  full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) %&gt;%\n  ggplot(aes(fill = change_noInc)) +\n  geom_sf(aes(geometry = geom), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    low = \"lightblue\", high = \"darkblue\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\n    na.value = \"gray50\",\n    n =4,\n    name = \"Tax Rate Change\\nin Percentage Pts\") +\n  \n   geom_sf_pattern(data = no_incentives, aes(geometry = geom), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\nFigure 11.1: Hypothetical change in composite tax rate if all value that currently receives incentive classification became assessed at 25%.\n\n\n\n\n\n\n\n\n\n\nCode\nmuni_ratechange %&gt;% \n  select(clean_name, change_neither) %&gt;% \n mutate(change_neither = round(change_neither*100, digits = 1)) %&gt;%\n  filter(clean_name != \"Unincorporated\") %&gt;%\n  left_join(nicknames) %&gt;%\n  full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) %&gt;%\n  \n  ggplot(aes(fill = change_neither)) +\n  geom_sf(aes(geometry = geom), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    low = \"black\", high = \"brown\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\n    na.value = \"gray50\",\n    n = 4,\n    name = \"Tax Rate Change\\nin Percentage Pts\") +\n  geom_sf_pattern(data = no_incentives, aes(geometry = geom), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\nFigure 11.2: Hypothetical change in composite tax rate if all value that currently receives incentive classification became assessed at 25% and exempt EAV from GHE became taxable.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n filter(change_noInc &gt;0) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current)\n\n# make dot graph\nmuni_ratechange %&gt;% \n filter(change_noInc &gt; .007) %&gt;%\n  select(clean_name, rate_current, rate_noInc) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \"rate_noInc\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" \n             )+\n    # scale_color_manual(palette=\"Blues\", \n    #                  labels = c(\"Current Rate\", \"No Incentives\")#,  \n    #               #   values = c(\"#A6CEE3\", \"#1F78B4\" )\n    #                  )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette=\"Paired\", labels = c(\"Incentives\", \"No Incentives\"), direction = 1)+\n\n  \n  labs(title = \"Difference in Composite Tax Rate if Assessed at 25%\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 11.3: Change in tax rate if incentive properties were assessed at 25% of their FMV instead of their reduced level of assessment.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; 0) %&gt;% \n  arrange(change_noInc) %&gt;%\n  select(clean_name, change_noInc) %&gt;%\n  distinct()\n\n\n# make dot graph\nmuni_ratechange %&gt;% \n  filter(change_noInc &gt; .005) %&gt;%\n  filter(change_noInc &gt; 0) %&gt;%\n\n  select(clean_name, rate_current, rate_noInc, change_noInc) %&gt;% \n  distinct() %&gt;%\n  pivot_longer(c(\"rate_current\", \"rate_noInc\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  left_join(order) %&gt;%\n    filter(change_noInc &gt; 0 ) %&gt;%\n  mutate(clean_name = if_else(clean_name == \"Mc Cook\", \"McCook\", clean_name)) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, change_noInc)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette=\"Paired\", labels = c(\"Incentives\", \"No Incentives\"), direction = 1)+\n  \n  labs(title = \"Difference in Composite Tax Rate if Assessed at 25%\",\n       subtitle = \"Ordered by Comp. Rate Change\", x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 11.4: Change in Tax Rate from use of Incentives. Ordered by amount of change in the composite tax rate. Only shows municipalities that had more than 1/2 percentage point change in tax rate.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; 0) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current) %&gt;% distinct()\n\n# make dot graph\nmuni_ratechange %&gt;% \n  filter(change_noInc &gt; .005) %&gt;%\n  select(clean_name, rate_current, rate_noInc, #rate_neither, \n         rate_vacant, rate_noExe) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \n                 \"rate_noInc\", \n                 \"rate_vacant\", \n                 \"rate_noExe\"# ,\n                #  \"rate_neither\"\n), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\nlegend.position = \"bottom\",\nplot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette = \"RdGy\",\n                    labels = c(\"Current Rate\", \n                             #  \"No Exemps & LoA is 25%\",\n                               \"No Exemptions\", \n                               \"No Incentives:\\nLoA 25%\",\n                               \"Incententive Classification\\nLoA = 0%\"\n                    ), \n                    direction = -1)+\n  labs(title = \"Composite Tax Rate Scenarios\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", \n       x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 11.5: Only shows municipalities that had more than 1/2 percentage point change in tax rate.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; 0) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current) %&gt;% distinct()\n\n# make dot graph\nmuni_ratechange %&gt;% \n  filter(change_noInc &gt; 0) %&gt;%\n  select(clean_name, rate_current, rate_noInc, #rate_neither, \n         rate_vacant, rate_noExe) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \n                 \"rate_noInc\", \n                 \"rate_vacant\", \n                 \"rate_noExe\"# ,\n                #  \"rate_neither\"\n), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\nlegend.position = \"bottom\",\nplot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette = \"RdGy\",\n                    labels = c(\"Current Rate\", \n                             #  \"No Exemps & LoA is 25%\",\n                               \"No Exemptions\", \n                               \"No Incentives:\\nLoA 25%\",\n                               \"Incententive Classification\\nLoA = 0%\"\n                    ), \n                    direction = -1)+\n  labs(title = \"Composite Tax Rate Scenarios\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", \n       x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 11.6: Same as figure above but includes all municipalities that had a taxrate change from altering the level of assessment for incentive class properties.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; .005) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current) %&gt;% distinct()\n\n# make dot graph\nmuni_ratechange %&gt;% \n filter(change_noInc &gt; .005) %&gt;%\n  select(clean_name, rate_current, rate_noInc, rate_vacant) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \n                 \"rate_noInc\", \n                 \"rate_vacant\"\n                 ), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\nlegend.position = \"bottom\",\nplot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette = \"Greys\", direction = -1,\n                    labels = c(\"Current Rate\", \n                             #  \"No Exemps & LoA is 25%\",\n                             #  \"If no Exemptions\", \n                               \"No Incentive Classes: \\nLoA = 25%\",\n                               \"Incentive Classification\\nLoA = 0%\"\n                    )\n)+\n  labs(title = \"Composite Tax Rate Scenarios\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", \n       x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 11.7: Only shows municipalities that had more than 1/2 percentage point change in tax rate.\n\n\n\n\n\n\n\n\n\n\nCode\nlibrary(ggrepel)\n# make dot graph\nmuni_ratechange %&gt;% \n  filter( clean_name ==\"Markham\" ## | clean_name == \"Matteson\"\n          ) %&gt;%\n  select(clean_name, rate_current, rate_noInc, rate_neither, rate_vacant, rate_noExe) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \"rate_noInc\", \n                  \"rate_vacant\", \"rate_noExe\",\n                  \"rate_neither\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  geom_text_repel(aes(x=tax_rate),\n                  hjust = 0,\n                  vjust = -1,\n                  min.segment.length = Inf,\n                  size = 3,\n                  angle = 30,\n                  label = c(\"Current Rate\", \"If LoA 25%\" ,\n                            \"If Vacant\" , \"If no Exemps\",\n                            \"No Exemps & LoA is 25%\") )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA),\n    legend.position = \"none\"  )+\n  scale_fill_manual(\n    values = c(\"#BDD7E7\", \"#6BAED6\", \"#3182BD\", \"#EFF3FF\",  \"#08519C\")) +\n  scale_x_continuous(limits = c(.17, .35)) + \n  scale_y_discrete(\n    expand = expand_scale(mult = c(.1, 1)) ,\n           #        limits = c(\"Markham\")#, breaks = \"Markham\"\n                   )  + \n  labs(\n    x = \"Composite Tax Rate (%)\", \n    y = \"\")",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Tax Year 2021</span>"
    ]
  },
  {
    "objectID": "incentives_report_2022.html",
    "href": "incentives_report_2022.html",
    "title": "Tax Year 2022",
    "section": "",
    "text": "Cook County Total Value\n\\[\n\\mbox{AV = Fair Market Value * Level of Assessment}\n\\]\n\\[\n\\mbox{Tax Rate} = \\frac{\\mbox{Amount Levied by Taxing Districts}}{\\mbox{Taxable Value}}\n\\]\n\\[\n\\mbox{Final Tax to District} = \\mbox{Portion of Levy Paid by PIN} = {\\mbox{Tax Code Rate}}*{\\mbox{Taxable Value of PIN}}\n\\]\n\\[\\mbox{Equalized Assessed Value} = {\\frac{\\mbox{final tax to dist + final tax to TIF}}{\\mbox{tax code rate}} + \\mbox{Exemptions + Abatements}}\\]\n\\[\\mbox{Taxed EAV} = {\\frac{\\sum{final\\_tax\\_to\\_dist}}{\\mbox{tax code rate}} = \\mbox{EAV - Exemptions - Abatements}}\\]\nCode\ncook_sums %&gt;% \n  filter(year == params$year) |&gt;\n  select(cty_PC, #cty_fmv_untaxable_value, \n         cty_fmv, cty_fmv_taxed, #cty_pct_fmv_untaxable\n         ) %&gt;%\n    mutate(cty_pct_fmv_taxed = scales::percent(cty_fmv_taxed/cty_fmv, accuracy = 0.01)) %&gt;%\n#  mutate(cty_pct_fmv_untaxable = scales::percent(cty_pct_fmv_untaxable, accuracy = 0.01)) %&gt;%\n  flextable() %&gt;% \n  set_header_labels(cty_PC = 'PINs', \n                   # cty_projects = \"Project IDs\", \n                    cty_fmv_taxed = 'Taxed FMV', \n                    cty_fmv_untaxable_value = 'FMV not Taxed\\nfor Levy',\n                    cty_fmv = 'Total FMV', \n\n                    cty_pct_fmv_taxed = 'FMV Taxed (%)'\n  ) %&gt;%   \n  FitFlextableToPage()\n\n\n\n\nTable 10.1: FMV of PINs in Cook County Taxed FMV represents the property value that was actually taxed by local taxing jurisdictions(equal to the amount levied) but converted to FMV. We use the the portion of an individuals tax bill that does NOT go to a TIF to calculate the composite levy for taxing jursidictions. This means that the “levy” actually represents the amount collected by the taxing agencies, not the amount that was levied. Therefore the composite levy does not include unpaid taxbills.\n\n\n\nPINsTotal FMVTaxed FMVFMV Taxed (%)1,865,016605,862,898,192506,020,608,23083.52%\nCode\ntbl &lt;-  cook_sums |&gt;\n  filter(year ==params$year) |&gt;\n  mutate(cty_pct_fmv_both_incent = cty_fmv_incentive / cty_fmv_comandind ,\n         cty_pct_PC_both_incent = cty_PC_withincents / cty_PC_comandind         ) |&gt;\n  select(cty_fmv_comandind, #cty_fmv, \n          cty_pct_fmv_both_incent, \n         cty_pct_fmv_incentinTIF,\n         cty_pct_PC_both_incent, cty_PC_comandind, cty_PC_incents_inTIFs, #cty_pct_PC_both_incent_inTIF, \n         cty_pct_fmv_incents_tif_increment) %&gt;%\n mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01))\n\ntbl %&gt;%\n  flextable() %&gt;% \n  align(align = \"right\") %&gt;%\n    set_header_labels(\n                          cty_fmv_comandind = 'Com. & Ind. FMV',\n                        #  cty_fmv = 'Total FMV in Cook',\n                    cty_pct_fmv_both_incent = '% of Com. & Ind. FMV  w/ Incent.',\n                    cty_pct_fmv_incentinTIF = '% of Com. & Ind. FMV  w/ Incent. in TIF',\n  cty_pct_fmv_incents_tif_increment = '% of Com. & Ind. FMV in TIF Increment',\n\n                          cty_PC_comandind = 'PIN Count',\n                      cty_PC_incents_inTIFs = \"Incent. PINs in TIF\",\n                    cty_pct_PC_both_incent = '% of Com. & Ind. PINs w/ Incent.',\n                    cty_pct_PC_both_incent_inTIF = '% of Incent. PINs in TIF'\n  ) %&gt;%\n  FitFlextableToPage()\n\n\n\n\nTable 10.2: Commercial and Industrial PINs in Cook County\n\n\n\nCom. & Ind. FMV% of Com. & Ind. FMV  w/ Incent.% of Com. & Ind. FMV  w/ Incent. in TIF% of Com. & Ind. PINs w/ Incent.PIN CountIncent. PINs in TIF% of Com. & Ind. FMV in TIF Increment113,470,082,09711.25%41.52%4.55%96,2751,92426.77%\n11.25% of industrial and commercial PINs (aka \"revenue producing PINs\") FMV has an incentive classification (4.55% when using PIN counts). Of the PINs that have incentive classification, 41.52% of the FMV is located within a TIF (4.55% when using PIN counts).\n26.77% is in TIF Increment.\nCode\n#table_cook %&gt;% \n  \ntbl &lt;- cook_sums |&gt;\n  filter(year == params$year) |&gt;\n  mutate(cty_pct_fmv_com_incent = cty_fmv_comwithincent / cty_fmv_commercial,#) |&gt;\n         cty_pct_fmv_com_incent_inTIF = cty_fmv_com_incent_inTIF / cty_fmv_comwithincent,\n         \n         cty_pct_PC_com_incent_inTIF = cty_PC_com_incent_inTIF / cty_PC_com_incent) %&gt;%\n  \n  select(cty_PC_commercial, cty_PC_com_incent, cty_pct_incent_ofcomPC, \n         cty_pct_PC_com_incent_inTIF, cty_fmv_commercial, cty_pct_incent_ofcomPC, \n         cty_pct_fmv_com_incent, cty_pct_fmv_com_incent_inTIF) %&gt;%\n  \n  mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01))\n\ntbl %&gt;%\n  flextable() %&gt;% \n    align(align = \"right\") %&gt;%\n  set_header_labels(cty_fmv_commercial = 'Commercial FMV',\n                    cty_PC_commercial = 'Commercial Pin Count', \n                    cty_PC_com_incent = 'Com. PIN Count w/ Incent.',\n                    cty_pct_incent_ofcomPC = 'Com. PINs w/ Incent.',\n                    cty_pct_fmv_com_incent = '% of Com. FMV  w/ Incent.', \n                    \n                    cty_pct_fmv_com_incent_inTIF = '% of Com. FMV  w/ Incent. in TIF', \n                    cty_PC_com_incent_inTIF = \"Com. Incent. PINs in TIF\", \n                    cty_pct_PC_com_incent = '% of Com. PINs w/ Incent.',\n                    cty_pct_PC_com_incent_inTIF = '% of Incent. PINs in TIF'\n  ) %&gt;%   FitFlextableToPage()\n\n\n\n\nTable 10.3: Commercial PINs in Cook County\n\n\n\nCommercial Pin CountCom. PIN Count w/ Incent.Com. PINs w/ Incent.% of Incent. PINs in TIFCommercial FMV% of Com. FMV  w/ Incent.% of Com. FMV  w/ Incent. in TIF70,7498831.25%40.54%88,748,261,4424.15%55.89%\n4.15% of commercial PIN FMV has an incentive classification (1.25% when using PIN counts). Of the PINs that have incentive classification, 55.89% of the FMV is located within a TIF (40.54% when using PIN counts).\nCode\ntbl &lt;- cook_sums |&gt;\n  filter(year == params$year) |&gt;\n  mutate(cty_pct_fmv_ind_incent = cty_fmv_indwithincent / cty_fmv_industrial,\n         cty_pct_fmv_ind_incent_inTIF = cty_fmv_ind_incent_inTIF / cty_fmv_indwithincent,\n         \n         cty_pct_PC_ind_incent_inTIF = cty_PC_ind_incent_inTIF / cty_PC_ind_incent) %&gt;%\n  \n  select(cty_PC_industrial, cty_PC_ind_incent, cty_PC_ind_incent_inTIF, \n         cty_pct_incent_ofindPC, cty_pct_fmv_ind_incent_inTIF, cty_pct_PC_ind_incent_inTIF,\n         \n         cty_fmv_industrial, cty_pct_fmv_ind_incent,  \n  ) %&gt;%\n  mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01)) \n\ntbl %&gt;%\n  flextable() %&gt;% \n  align(align = \"right\") %&gt;% \n  set_header_labels(cty_fmv_industrial = 'Industrial FMV',\n                    cty_PC_industrial = 'Industrial Pin Count', \n                    cty_PC_ind_incent = 'Ind. PIN Count w/ Incent.',\n                    cty_pct_incent_ofindPC = 'Ind. PINs w/ Incent.',\n                    cty_pct_fmv_ind_incent = '% of Ind. FMV  w/ Incent.', \n                    \n                    cty_pct_fmv_ind_incent_inTIF = '% of Ind. FMV  w/ Incent. in TIF', \n                    cty_PC_ind_incent_inTIF = \"Ind. Incent. PINs in TIF\", \n                    cty_pct_PC_ind_incent = '% of Com. PINs w/ Incent.',\n                    cty_pct_PC_ind_incent_inTIF = '% of Incent. PINs in TIF'\n  ) %&gt;% \n  FitFlextableToPage()\n\n\n\n\nTable 10.4: Industrial PINs in Cook County\n\n\n\nIndustrial Pin CountInd. PIN Count w/ Incent.Ind. Incent. PINs in TIFInd. PINs w/ Incent.% of Ind. FMV  w/ Incent. in TIF% of Incent. PINs in TIFIndustrial FMV% of Ind. FMV  w/ Incent.25,5263,5001,56613.71%35.70%44.74%24,721,820,65536.74%\n36.74% of industrial FMV has an incentive classification (13.71% when using PIN counts). Of the PINs that have incentive classification, 35.70% of the FMV is located within a TIF ( 44.74% when using PIN counts).\nCode\ncook_sums |&gt;\n  filter(year == params$year) |&gt;\n  select(cty_fmv, cty_fmv_tif_increment, cty_fmv_exemptions, cty_fmv_abatements, \n       #  cty_pct_fmv_untaxable \n         ) |&gt;\nmutate(cty_pct_fmv_untaxable = (cty_fmv_tif_increment + cty_fmv_exemptions + cty_fmv_abatements)/cty_fmv) %&gt;%\n  mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01)) %&gt;%\n  flextable() %&gt;% \n    align(align = \"right\") %&gt;%  \n  set_header_labels(\n                   cty_fmv = 'Total FMV', \n                    cty_fmv_tif_increment = 'TIF Increment FMV' ,\n                    cty_fmv_exemptions = 'Exempt Value: Exemptions',\n                    cty_fmv_abatements = 'Exempt Value: Abatements',\n                 #   cty_fmv_untaxable_value = 'Value not Taxable \\nfor Levy',\n                    cty_pct_fmv_untaxable = 'County FMV not Taxed (%)'\n                 ) %&gt;%\n  FitFlextableToPage()\n\n\n\n\nTable 10.5: Untaxable FMV in Cook County.\n\n\n\nTotal FMVTIF Increment FMVExempt Value: ExemptionsExempt Value: AbatementsCounty FMV not Taxed (%)605,862,898,19246,298,950,53553,244,174,2206,676,95716.43%\nCode\ncook_sums |&gt;\n  filter(year == params$year) |&gt;  \n  select(cty_av, cty_av_taxed, cty_untaxable_value_av, cty_pct_av_taxed, cty_pct_av_untaxable ) %&gt;%\n  mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01)) %&gt;%\n  flextable() %&gt;% \n    align(align = \"right\") %&gt;%  set_header_labels(\n                   cty_av = 'Total AV', \n                    cty_av_taxed = 'Taxed AV' ,\n                    cty_untaxable_value_av = 'AV Not Taxed',\n                    cty_pct_av_taxed = '% Taxed',\n                    cty_pct_av_untaxable = '% Not Taxed') %&gt;%\n   FitFlextableToPage()\n\n\n\n\nTable 10.6: Untaxable AV in Cook County. Taxed AV represents the property value that was actually taxed by local taxing jurisdictions.\n\n\n\nTotal AVTaxed AVAV Not Taxed% Taxed% Not Taxed75,674,322,43362,961,792,11014,078,921,93383.20%18.60%\nCode\ncook_sums |&gt;\n  filter(year == params$year) |&gt;\n  select(cty_fmv, cty_fmv_inTIF, cty_fmv_tif_increment, \n         cty_fmv_incentive, cty_fmv_incents_inTIFs, cty_fmv_incents_tif_increment) %&gt;%\n  flextable() %&gt;% \n  set_header_labels(\n                    cty_fmv = 'Total FMV', \n                    cty_fmv_inTIF = 'FMV in TIFs',\n                    cty_fmv_tif_increment = 'TIF Increment FMV' ,\n                    cty_fmv_incents_inTIFs = 'FMV from Incent. Class in TIF',\n                    cty_fmv_incentive = \"FMV with Incent.Class.\", \n                    cty_fmv_incents_tif_increment = 'FMV with Incent. Class. in TIF Increment') %&gt;%   \n  FitFlextableToPage()\n\n\n\n\nTable 10.7: FMV of properties with incentive classifications and TIF increment. Value in TIFs, value within the TIF that can be taxed by local taxing jurisdictions, value of properties that have reduced levels of assessments from incentive classifications, and the value that is both in a TIF and has a reduced LOA.\n\n\n\nTotal FMVFMV in TIFsTIF Increment FMVFMV with Incent.Class.FMV from Incent. Class in TIFFMV with Incent. Class. in TIF Increment605,862,898,192111,514,487,73346,298,950,53512,764,675,2735,300,523,8173,417,075,090\nTaxed value is the amount of value that was actually taxed in order to pay for taxing agencies levies. It includes frozen EAV within an area + taxable EAV for residential properties net exemptions and abatements. It also includes the equalized assessed value of incentive properties at their current, lower assessment ratios. final_tax_to_dist is used to calculate the amount that was collected by local government agencies and then divided by the tax rate to calculate the amount of value that was taxed, or the taxable equalized assessed value (TEAV).\nThe Taxed Value, when converted to the Fair Market Value (FMV) represents the amount of value that was taxed out of the full FMV available in Cook County.\nUntaxable EAV includes homeowner exemptions for 200 level properties, abatements for other property class types, EAV in the TIF increment, and EAV that has been reduced due to incentive classifications.\nCode\ncook_MC_sums &lt;- read_csv(\"../Output/ptaxsim_cook_MC_level_2006to2023_new.csv\") \n\ncook_MC_sums |&gt;  \n  filter(year == params$year) |&gt;\n      mutate(across(contains(c(\"pct_\", \"rate\")), scales::percent, accuracy = .01)) %&gt;%\n      mutate(across(is.numeric, round, digits = 0)) %&gt;%\n\n  select(\n    \"Property Type\" = class_group, \n    \"Homeowner Exempt FMV\"= cty_mc_fmv_exemptions,\n    \"Abated FMV\" = cty_mc_fmv_abatements,\n    \"$0 Bill Count\" = cty_mc_zero_bill,\n    \"$ Levy Paid\" = cty_mc_levy,\n  #  \"% of Levy Paid\" =  pct_mc_levy_paid, \n    \"FMV in Major Class\" =  cty_mc_fmv,\n    \"Taxed AV\" = cty_mc_av_taxed,\n   # \"Project Count\" = cty_mc_projects,\n    \"Avg Composite Tax Rate\" = cty_mc_current_rate_avg,\n 'FMV in TIFs' = cty_mc_fmv_inTIF, \n   'TIF Increment FMV' = cty_mc_fmv_tif_increment)  |&gt; \n  flextable() %&gt;% \n  align(align = \"right\")\n\n\nThe Fair Market Value (FMV) is also called the Market Value for\nAssessment Purposes and can be calculated from the av /\nloa, or the Assessed Value divided by the Level of\nAssessment. However, the values used for the level of assessment are an\napproximation for incentive properties since we do not have the PIN\nlevel assessment ratios.Property TypeHomeowner Exempt FMVAbated FMV$0 Bill Count$ Levy PaidFMV in Major ClassTaxed AVAvg Composite Tax RateFMV in TIFsTIF Increment FMV00097,55800011.12%0012,82204,827103,489,6394,233,142,920349,313,14011.51%1,836,883,850738,101,496253,224,183,98243,43832,9199,451,028,236442,031,368,90037,078,423,20810.09%50,617,698,59017,876,135,186313,197,715033919,615,51545,117,652,8503,914,060,0389.31%13,832,111,0705,902,665,151400620,952,114518,223,53587,392,32110.48%273,428,19081,261,8385A6,679,4294,365,1095014,245,450,02384,567,580,90417,539,724,01410.12%32,650,103,12814,380,024,4965B110,2712,050,65920871,178,51815,619,869,7602,975,939,02910.22%6,569,278,5083,713,563,1606000204,236,5058,135,503,590650,799,11511.58%2,732,814,9401,627,519,8987A0213,04207,394,115496,820,66530,781,71810.24%382,411,895194,184,2317B04,710034,754,7162,708,511,030160,167,1258.87%1,483,688,1601,109,658,9058A00025,899,184476,098,09843,204,46521.68%191,388,00273,765,4938B00032,736,094947,741,89052,969,72725.54%510,220,820411,946,563900519,828,9421,010,384,05079,018,2089.11%434,460,580190,124,118\n\n\nCode\n# cty_MC_table &lt;- pin_data %&gt;%\n#   group_by(class_group) %&gt;%\n#   summarize(\n#     cty_MC_PC = n(),\n#    # cty_MC_projects = n_distinct(both_ids), # mostly for industrial and commercial properties\n#     cty_MC_fmv_incentive = sum(ifelse(incent_prop == 1, fmv, 0), na.rm = TRUE),\n#      cty_MC_fmv_taxed =  sum(taxed_fmv, na.rm=TRUE),\n#     cty_MC_av_taxed  = sum(taxed_av, na.rm=TRUE),\n#     cty_MC_fmv_incent_inTIF = sum(ifelse(incent_prop == 1 & in_tif == 1, fmv, 0), na.rm = TRUE),\n#     cty_MC_fmv_inTIF = sum(fmv_inTIF, na.rm=TRUE),\n#     cty_MC_fmv_tif_increment = sum(fmv_tif_increment, na.rm=TRUE),\n#     cty_MC_fmv_untaxable_value = sum(untaxable_value_fmv , na.rm=TRUE),\n#     cty_MC_fmv = sum(fmv, na.rm=TRUE),\n#     cty_MC_fmv_exemptions = sum(all_exemptions/eq_factor/loa, na.rm=TRUE),\n#     cty_MC_fmv_abatements = sum(abatements/eq_factor/loa, na.rm=TRUE),\n#     cty_MC_cty_zero_bill = sum(zero_bill, na.rm=TRUE),\n#     cty_MC_fmv_residential = sum(ifelse(res_prop == 1, fmv, 0), na.rm = TRUE),\n#     cty_MC_fmv_industrial = sum(ifelse(class %in% industrial_classes, fmv, 0), na.rm = TRUE),\n#     cty_MC_fmv_commercial = sum(ifelse(class %in% commercial_classes, fmv, 0), na.rm = TRUE),\n#     cty_MC_levy_paid = sum(final_tax_to_dist),\n#     cty_MC_current_rate_avg = mean(tax_code_rate),\n#     \n#     cty_MC_avg_C2_bill_noexe = mean(ifelse(res_prop == 1 & exe_total_adj == 0, (final_tax_to_dist+ final_tax_to_tif), NA), na.rm=TRUE),\n#     cty_MC_avg_C2_bill_withexe = mean(ifelse(res_prop == 1 & exe_total_adj &gt; 0, (final_tax_to_dist+ final_tax_to_tif), NA), na.rm=TRUE),\n#   ) %&gt;%\n#   mutate( cty_fmv = sum(cty_MC_fmv),\n#           pct_cty_MC_fmv_untaxable = cty_MC_fmv_untaxable_value / cty_MC_fmv,\n#          pct_fmv_taxed = cty_MC_fmv_taxed / sum(cty_MC_fmv),\n#           pct_MC_levy_paid = cty_MC_levy_paid / sum(cty_MC_levy_paid) )\n\n\n# cty_MC_table %&gt;%\n#   select(-c(cty_MC_avg_C2_bill_noexe, cty_MC_avg_C2_bill_withexe, cty_MC_fmv_residential, cty_MC_fmv_industrial, cty_MC_fmv_commercial, cty_fmv, #cty_MC_fmv_incent_inTIF\n#             )\n#          ) %&gt;%\n#     mutate(across(contains(c(\"pct_\", \"rate\")), scales::percent, accuracy = .01)) %&gt;%\n#   select(\n#     \"Property Type\" = class_group, \n#     \"Homeowner Exempt FMV\"= cty_MC_fmv_exemptions,\n#     \"Abated FMV\" = cty_MC_fmv_abatements,\n#     \"$0 Bill Count\" = cty_MC_cty_zero_bill,\n#     \"$ Levy Paid\" = cty_MC_levy_paid,\n#     \"% of Levy Paid\" =  pct_MC_levy_paid, \n#     \"FMV in Major Class\" =  cty_MC_fmv,\n#     \"Taxed AV\" = cty_MC_av_taxed,\n#    # \"Project Count\" = cty_MC_projects,\n#     \"Avg Composite Tax Rate\" = cty_MC_current_rate_avg,\n#    cty_MC_fmv_incentive, cty_MC_fmv_inTIF, cty_MC_fmv_incent_inTIF,\n#    cty_MC_fmv_tif_increment\n#    #everything()\n#    ) %&gt;%\n# \n#     mutate(across(is.numeric & !contains(\"pct_\"), round, digits = 0)) %&gt;%\n#   flextable() %&gt;% \n#   align(align = \"right\") %&gt;%\n#   set_header_labels(\n#     cty_MC_PC = 'PINs',# projects = \"Project IDs\", \n#     cty_MC_fmv_taxed = 'Taxed FMV', \n#     cty_MC_fmv_untaxable_value = 'FMV not Taxable for Levy', \n#     cty_MC_fmv_incentive = \"FMV with Incent.Class.\", \n#     cty_MC_fmv_inTIF = 'FMV in TIFs', \n#     cty_MC_fmv_tif_increment = 'TIF Increment FMV',\n#    # pct_cty_MC_fmv_untaxable = 'Value not Taxed (%)', \n#     cty_MC_fmv_incent_inTIF = 'FMV with Incent. Class. in TIFs' )",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "incentives_report_2022.html#frequency-of-incentives",
    "href": "incentives_report_2022.html#frequency-of-incentives",
    "title": "Tax Year 2022",
    "section": "Frequency of Incentives",
    "text": "Frequency of Incentives\n\nFair Market Value of Incentive PINs\n\n\nCode\nlanduse_incentshares &lt;- pin_data %&gt;% \n  filter(land_use != \"Land\") %&gt;%\n  group_by(clean_name, land_use) %&gt;% \n  summarize(pin_count = n(),\n            incent_PC = sum(ifelse(class &gt;=600 & class &lt;=900, 1, 0), na.rm=TRUE),\n            fmv_incentive = sum(ifelse(class &gt;=600 & class &lt;=900, fmv, 0), na.rm = TRUE),\n            #project_count = n_distinct(keypin),\n            fmv_group = sum(fmv, na.rm=TRUE),\n            #   av=sum(av)\n  ) %&gt;%\n  mutate(\n    fmv_incentive = ifelse(fmv_incentive == 0, NA, fmv_incentive),\n    pct_incent = fmv_incentive / fmv_group,\n    pct_incent = ifelse(is.na(pct_incent), 0, pct_incent),\npct_incent = scales::percent(pct_incent)\n)  \n\nindust_top10 &lt;- landuse_incentshares %&gt;%\n  select(clean_name, land_use, fmv_incentive, incent_PC) %&gt;% \n  filter(land_use == \"Industrial\") %&gt;%\n  arrange(desc(fmv_incentive)) %&gt;%\n  head(10) %&gt;% \n  select(-land_use)\n\nindust_top10 %&gt;%\n  flextable() %&gt;% \n  set_header_labels(clean_name = \"Municipality\", incent_PC = '# of Incent. PINs',\nfmv_incentive = \"FMV from Incentive\\nClass Properties\"\n) %&gt;%\n  set_table_properties( layout = \"autofit\", width = .75)\n\n\n\n\nTable 11.1: Top 10 Municipalities using Industrial Incentives\n\n\n\nMunicipalityFMV from IncentiveClass Properties# of Incent. PINsChicago1,567,026,390488Elk Grove Village927,465,940246Franklin Park659,839,06092North Lake605,255,79019Bedford Park519,319,250151Melrose Park350,581,75092Des Plaines338,782,66056Mc Cook294,324,82047Matteson288,028,3806Markham269,549,800641\n\n\n\n\n\n\n\nCode\ncommerc_top10 &lt;- landuse_incentshares %&gt;%\n  select(clean_name, land_use, fmv_incentive, incent_PC) %&gt;% \n  filter(land_use == \"Commercial\") %&gt;%\n  arrange(desc(fmv_incentive)) %&gt;%\n  head(10) %&gt;% \n  select(-land_use)\n  \ncommerc_top10 %&gt;%\n  flextable() %&gt;% \n#align(align = \"right\", j = 2:4) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", \n                    incent_PC = '# of Incent. PINs', \n                    fmv_incentive = \"FMV from Incentive\\nClass Properties\"\n                    ) %&gt;%\n  set_table_properties( layout = \"autofit\", width = .75)\n\n\n\n\nTable 11.2: Top 10 Municipalities using Commercial Incentives\n\n\n\nMunicipalityFMV from IncentiveClass Properties# of Incent. PINsChicago2,861,809,300190Glenview72,809,4603Matteson57,273,63221Evergreen Park46,413,1806Calumet City40,095,92365South Holland36,050,27347Orland Park32,763,72010Lansing30,327,99527Chicago Heights28,510,43358Homewood25,847,94323\n\n\n\n\n\n\n\nShare of Total FMV with Incentive Classification\nCombined Industrial and Commercial FMV with incentive classification divided by total FMV in municipality. Not included in a table in the report.\nOne way of showing areas that have reduced their tax base significantly through the use of incentive classifications.\n\n\nCode\ntable_muni_percentages &lt;- muni_sums %&gt;%   \n  filter(year == params$year)|&gt;\n  filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\", \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\", \"Deer Park\", \"Deerfield\"))\n\n# table_muni_percentages &lt;- munilevel %&gt;%   \n# filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\", \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\", \"Deer Park\", \"Deerfield\"))\n\ncross_county_line &lt;- c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\", \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\", \"Deer Park\", \"Deerfield\")\n\n\n\n\nCode\n# table_muni_percentages %&gt;%\n#   select(clean_name, pct_fmv_w_incentclass) |&gt; \n#   arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n#     slice(c(1:10, 56:65, 110:119)) %&gt;%\n# \n#   #slice(c(1:10, 67:76, 116:125)) %&gt;%\n#   mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, digits =1)) %&gt;%\n#   \n#   flextable() %&gt;% \n#   border_remove() %&gt;%\n#   hline_top() %&gt;%\n#   hline(i = c(10,20)) %&gt;%\n#   \n#   set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV with\\nIncent. Class.\") %&gt;%\n# add_header_row(values = c(\"County Wide\", \"3.22%\"), top = FALSE) %&gt;%\n#   align(j = 2, align = \"right\") %&gt;%\n# \n#   set_table_properties( layout = \"autofit\")\n\n\n\ntable_muni_percentages %&gt;%\n  select(clean_name, pct_fmv_w_incentclass) |&gt; \n  arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n  slice(c(1:5, 69:73, 121:125)) %&gt;%\n  #  slice(c(1:5, 58:62, 115:119)) %&gt;%\n\n  mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, digits = 2)) %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV\") %&gt;%\n  align(j = 2, align = \"right\") %&gt;%\nalign(j=2, align = \"right\", part = \"header\") %&gt;%\nset_table_properties( layout = \"autofit\")\n\n\n\n\nTable 11.3: Municipalities with the largest share of FMV property with incentive classification.\n\n\n\nMunicipality% FMVMc Cook70.20%Bedford Park47.70%Markham40.50%North Lake39.20%Hodgkins35.10%Arlington Heights0.90%Hoffman Estates0.90%Richton Park0.90%Robbins0.90%Burr Ridge0.80%Westchester0.00%Western Springs0.00%Wilmette0.00%Winnetka0.00%Worth0.00%\n\n\n\n\n\n\n\nCode\nlibrary(sf)\nlibrary(ggpattern)\n\nno_incentives &lt;-  pin_data %&gt;% \n # filter(between(class, 600, 899)) %&gt;%\n  group_by(clean_name) %&gt;% \n  summarize(incent_pins = sum(ifelse(between(class, 600, 899), 1, 0))) %&gt;%\n  filter(incent_pins == 0) %&gt;% \n  distinct(clean_name)\n\n\nno_incentives &lt;- no_incentives %&gt;%\n  left_join(muni_shp, by = c(\"clean_name\" = \"MUNICIPALITY\")) \n\n# unincorp_areas &lt;- muni_shp %&gt;% filter(!MUNICIPALITY %in% munilevel$clean_name)\n#anti_join(munilevel, muni_shp, by = c(\"clean_name\" = \"MUNICIPALITY\"))\n\n# unincorp_areas2 &lt;- muni_shp %&gt;% filter(!MUNICIPALITY %in% munilevel$shpfile_name)\n\n\n\n\nCode\ntable_muni_percentages %&gt;%\n    left_join(nicknames) |&gt;\n\n  select(clean_name, pct_fmv_w_incentclass, shpfile_name) %&gt;%\n filter(!is.na(clean_name) & clean_name != \"Unincorporated\" ) %&gt;%\n  full_join(muni_shp, by = c(\"shpfile_name\" = \"MUNICIPALITY\")) %&gt;%\n  \n  ggplot(aes(fill = pct_fmv_w_incentclass)) +\n  geom_sf(aes(geometry = geom), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    high = \"brown\", low = \"black\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\n    na.value=\"gray\",\n    n =4,\n    name = \"Percent of Municipality FMV\\nwith Incentive Classification\",\n    labels = scales::percent\n) +\n   geom_sf_pattern(data = no_incentives, aes(geometry = geom), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\n\nFigure 11.1: Percent of Municipality FMV with Incentive Classification % = FMV from Incentive Class properties / Muni FMV\n\n\n\n\n\n\n\n\n\nCode\ntable2 &lt;- pin_data %&gt;% \n    filter(land_use != \"Land\") %&gt;%\n  group_by(clean_name, incent_prop) %&gt;%   # projects can be counted twice if the project has incentive and normal commercial/industrial prop classes.\n  summarize(pin_count = n(),\n         project_count = n_distinct(keypin), \n         av_adjusted=sum(ifelse(between(class, 600, 899), av*2.5, av)),\n         av=sum(av, na.rm=TRUE),\nfmv=sum(fmv)) \n\ndatatable(table2,\n          rownames= FALSE,\n          colnames = c('Municipality' = 'clean_name',   'Incentivized?' = 'incent_prop', 'PIN Count' = 'pin_count', 'Project Count' = 'project_count', 'Taxable AV' = 'av')) %&gt;%\n  formatCurrency(c('Taxable AV', 'av_adjusted'), digits = 0)\n\n\n\n\nTable 11.4: PINs and value summarized by if the property has an incentive class or not in a municipality. AV Adjusted is the amount of assessed value that could be taxed if the property were assessed at 25% instead of the lower level of assessment of approximately 10%.",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "incentives_report_2022.html#share-of-commercial-industrial-fmv-with-incentive-classification",
    "href": "incentives_report_2022.html#share-of-commercial-industrial-fmv-with-incentive-classification",
    "title": "Tax Year 2022",
    "section": "Share of Commercial & Industrial FMV with Incentive Classification",
    "text": "Share of Commercial & Industrial FMV with Incentive Classification\n\n\nCode\nmuni_incent_share &lt;- pin_data %&gt;% \n  # drop munis mostly outside of Cook and unincorporated PINs\nfilter(!agency_num %in% cross_county_line & !is.na(clean_name) ) %&gt;%\n\n  filter(land_use == \"Industrial\" | land_use == \"Commercial\") %&gt;%\n  group_by(clean_name, agency_num) %&gt;% \n  summarize(pin_count = n(),\n            incent_PC = sum(ifelse(class &gt;=600 & class &lt;900, 1, 0), na.rm=TRUE),\n            fmv_w_incent = sum(ifelse(class &gt;=600 & class &lt;900, fmv, 0), na.rm = TRUE),\n           # project_count = n_distinct(keypin),\n            fmv_group = sum(fmv, na.rm=TRUE),\n            comind_fmv =sum(fmv, na.rm=TRUE),\n            pins_inTIF = sum(in_tif, na.rm=TRUE)) %&gt;%\n  mutate(\n    fmv_w_incent = ifelse(fmv_w_incent == 0, NA, fmv_w_incent),\n    pct_fmv_w_incent = fmv_w_incent/comind_fmv,\n    pct_fmv_w_incent = ifelse(is.na(pct_fmv_w_incent), 0, pct_fmv_w_incent)\n\n\n) \n\n# muni_incentshare_slice &lt;- muni_incent_share %&gt;%\n#   ungroup() %&gt;%\n#   mutate(pct_fmv_w_incentclass = fmv_w_incent/comind_fmv,\n#          pct_fmv_w_incentclass = ifelse(is.na(pct_fmv_w_incentclass), 0, pct_fmv_w_incentclass)) %&gt;%\n#   select(clean_name, pct_fmv_w_incentclass) |&gt; \n#   arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n#   mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, accuracy = 0.01) ) %&gt;%\n#   slice(c(1:10, 56:65, 110:119)) \n# \n# muni_incentshare_slice %&gt;%\n#   flextable() %&gt;% \n#   border_remove() %&gt;%\n#   hline_top() %&gt;%\n#   hline(i = c(10,20)) %&gt;%\n#   set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV with\\nIncent. Class.\") %&gt;%\n# add_header_row(values = c(\"County Wide\", \"3.25%\"), top = FALSE) %&gt;%\n#     align(j = 2, align = \"right\", part = \"all\") %&gt;%\n# \n# add_footer(\"There are 27 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\", top = FALSE) %&gt;%\n#   set_table_properties( layout = \"autofit\")\n\n\nmuni_incentshare_slice &lt;- muni_incent_share  %&gt;%\nungroup() %&gt;%\nfilter(!agency_num %in% cross_county_lines) %&gt;%\n  mutate(pct_fmv_w_incentclass = fmv_w_incent/comind_fmv,\n    pct_fmv_w_incentclass = ifelse(is.na(pct_fmv_w_incentclass), 0, pct_fmv_w_incentclass)) %&gt;%\n  select(clean_name, pct_fmv_w_incentclass) |&gt; \n  arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n  mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, accuracy = 0.01 ) ) %&gt;%\n  slice(c(1:5, 58:62, 115:119))\n  \nmuni_incentshare_slice %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  align(j = 2, align = \"right\", part = \"all\") %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV with\\nIncent. Class.\") %&gt;%\n#add_header_row(values = c(\"County Wide\", \"3.25%\"), top = FALSE) %&gt;%   align(j = 2, align = \"right\" ) %&gt;%\nbold(i = 8) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\nTable 11.5: Municipalities with the largest share of Commercial and Industrial property with incentive classification. Uses values obtained from PTAXSIM, and levels of assessment from CCAO’s Github. There are 27 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\n\n\n\nMunicipality% FMV withIncent. Class.Markham78.77%Sauk Village78.23%Mc Cook76.47%North Lake72.93%Matteson65.14%Rolling Meadows10.05%Niles9.92%Palos Heights9.88%Richton Park9.26%Broadview8.73%Stickney0.00%Western Springs0.00%Wilmette0.00%Winnetka0.00%Worth0.00%\n\n\n\n\n\n\n\nCode\nmuni_incent_share %&gt;%\n  select(clean_name, pct_fmv_w_incent) %&gt;%\n  left_join(nicknames)|&gt;\nfilter(clean_name != \"Unincorporated\") %&gt;%\n  full_join(muni_shp, by = c(\"shpfile_name\" = \"MUNICIPALITY\")) %&gt;%\n  \n  ggplot(aes(fill = pct_fmv_w_incent)) +\n  geom_sf(aes(geometry = geom), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    high = \"brown\", low = \"black\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\n    na.value=\"gray\",\n    n =4,\n    name = \"Percent of Commercial &\\nIndustrial FMV with\\nIncentive Classification\",\n    labels = scales::percent\n) +\n   geom_sf_pattern(data = no_incentives, aes(geometry = geom), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\nFigure 11.2: Share of Commercial and Industrial FMV that has an incentive property class.",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "incentives_report_2022.html#share-of-industrial-fmv-with-incentive-classification-within-each-municipality",
    "href": "incentives_report_2022.html#share-of-industrial-fmv-with-incentive-classification-within-each-municipality",
    "title": "Tax Year 2022",
    "section": "Share of Industrial FMV with Incentive Classification within each Municipality",
    "text": "Share of Industrial FMV with Incentive Classification within each Municipality\n\n\n\n\nCode\nindust_share_full &lt;- muni_sums  %&gt;%\n  \n  filter(year == params$year & !clean_name %in% cross_county_line) |&gt;\n  ungroup() %&gt;%\n  mutate(pct_fmv_indust_incent =  muni_fmv_indust_incent/muni_fmv_industrial,\n         pct_fmv_indust_incent = ifelse(is.na(pct_fmv_indust_incent), 0, pct_fmv_indust_incent)) %&gt;%\n  select(clean_name, pct_fmv_indust_incent) |&gt; \n  arrange(desc(pct_fmv_indust_incent)) %&gt;%\n  mutate(pct_fmv_indust_incent = scales::percent(pct_fmv_indust_incent, accuracy = 0.01 ) ) \n\nindust_share &lt;- indust_share_full %&gt;%\n  slice(c(1:5, 58:62, 115:119))\n\nindust_share %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  align(j = 2, align = \"right\", part = \"all\") %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_indust_incent = \"% FMV with\\nIncent. Class.\") %&gt;%\nbold(i = 8) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\nTable 11.6: Percent of Industrial FMV within each Municipality that has incentive classification. 37 municipalities do not use industrial incentives.\n\n\n\nMunicipality% FMV withIncent. Class.Matteson92.75%Markham92.46%Homewood91.47%Phoenix90.62%Richton Park89.07%Niles23.40%Steger22.52%Skokie21.56%Chicago21.10%Crestwood20.77%Park Ridge0.00%River Forest0.00%Riverside0.00%Rosemont0.00%South Barrington0.00%",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "incentives_report_2022.html#share-of-commercial-fmv-with-incentive-classification-within-each-municipality",
    "href": "incentives_report_2022.html#share-of-commercial-fmv-with-incentive-classification-within-each-municipality",
    "title": "Tax Year 2022",
    "section": "Share of Commercial FMV with Incentive Classification within each Municipality",
    "text": "Share of Commercial FMV with Incentive Classification within each Municipality\n\n\nCode\ncommerc_share_full &lt;- muni_sums  %&gt;%\n  \n  filter(year == params$year & !clean_name %in% cross_county_line) |&gt;\n  ungroup() %&gt;%\n  mutate(pct_fmv_commerc_incent =  muni_fmv_commerc_incent/muni_fmv_commercial,\n    pct_fmv_commerc_incent = ifelse(is.na(pct_fmv_commerc_incent), 0, pct_fmv_commerc_incent)) %&gt;%\n  select(clean_name, pct_fmv_commerc_incent) |&gt; \n  arrange(desc(pct_fmv_commerc_incent)) %&gt;%\n  mutate(pct_fmv_commerc_incent = scales::percent(pct_fmv_commerc_incent, accuracy = 0.01 ) ) \n\ncommerc_share &lt;- commerc_share_full %&gt;%\n  slice(c(1:5, 58:62, 115:119))\n\ncommerc_share %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  align(j = 2, align = \"right\", part = \"all\") %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_commerc_incent = \"% FMV with\\nIncent. Class.\") %&gt;%\nbold(i = 8) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\nTable 11.7: Percent of Commercial FMV within each Municipality that has incentive classification. 49 municipalities do not use commercial incentives.\n\n\n\nMunicipality% FMV withIncent. Class.Sauk Village46.69%Calumet Park29.30%Posen28.73%Ford Heights28.20%Phoenix28.17%Chicago Ridge1.66%Rolling Meadows1.61%Bedford Park1.55%Park Ridge1.49%Oak Park1.38%Rosemont0.00%Schaumburg0.00%South Barrington0.00%Stickney0.00%Stone Park0.00%",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "incentives_report_2022.html#shifted-tax-revenue-and-tax-burden",
    "href": "incentives_report_2022.html#shifted-tax-revenue-and-tax-burden",
    "title": "Tax Year 2022",
    "section": "Shifted Tax Revenue and Tax Burden",
    "text": "Shifted Tax Revenue and Tax Burden\nRead in CCAO level of assessment rates for each property class. Read in Summary file for Municipalities from 2006 to 2022.\n\n\nCode\nmuni_rate &lt;- read_csv(\"../Output/ptaxsim_muni_level_2006to2023.csv\") %&gt;%\n  filter(year == params$year) %&gt;%\n  left_join(nicknames) %&gt;% \n  select(clean_name, muni_current_rate_avg, muni_pct_eav_taxed,# cur_comp_muni_rate\n) %&gt;%\n  rename(cur_munilevel_rate = muni_current_rate_avg)\n\nmuni_ratechange &lt;- read_csv(paste0(\"../Output/muni_ratechange_\", params$year, \"_test.csv\"))",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "incentives_report_2022.html#not-taxed-value---pin-aggregated-to-county-level",
    "href": "incentives_report_2022.html#not-taxed-value---pin-aggregated-to-county-level",
    "title": "Tax Year 2022",
    "section": "Not Taxed Value - PIN aggregated to County Level",
    "text": "Not Taxed Value - PIN aggregated to County Level\n\n\nCode\n#cook_ratechange &lt;- read_csv(\"../Output/ptaxsim_cook_level_2006to2023_new.csv\") |&gt; \n # filter(year == params$year)\n\n\n\n\nCode\ncook_ratechange &lt;- pin_data %&gt;%\n  filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\",\n                             \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\",\n                             \"Deer Park\", \"Deerfield\")) %&gt;% \n  #group_by(class_group) %&gt;%\n  summarize(\n    \n    ## New Tax Base Calculations\n    new_TEAV_noIncents = sum(ifelse(class &gt;= 600 & class &lt; 900,\n                                    (taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n    \n    ## NewTax Base Calculations\n    new_TEAV_noCommercIncents = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% commercial_classes,\n                                           (taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n\n   new_TEAV_noIndustIncents = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% industrial_classes,\n      (taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n\n    new_TEAV_noC6 = sum(ifelse( class &gt;=600 & class &lt; 700, \n(taxed_av*eq_factor/loa)*0.25 , taxed_av*eq_factor), na.rm=TRUE),\n\n    new_TEAV_noC7 = sum(ifelse(class &gt;=700 & class &lt; 800,\n(taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n\n    new_TEAV_noC8 = sum(ifelse(class &gt;=800 & class &lt; 900, (taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n    \n    new_TEAV_vacant_props = sum(ifelse(class &gt;=600 & class &lt;900,  # if incentive classes were assessed at 0% (aka not taxedat all) or if the building lost its value completely without the incentive classification.\n                                       0, taxed_av*eq_factor), na.rm=TRUE),\n    \n    new_TEAV_noExemps = sum(taxed_av*eq_factor + all_exemptions, na.rm=TRUE), # does not include abatements\n    new_TEAV_noAbates = sum(taxed_av*eq_factor + abatements, na.rm=TRUE), # include only abatements, not other exemption types\n  \n    \n    # TIF increment above the frozen EAV\n    forgone_TIF_EAV = sum(fmv_tif_increment * loa * eq_factor, na.rm=TRUE),\n \n\n    cty_PC = n(),\n    # projects = n_distinct(both_ids), # mostly for industrial and commercial properties\n    pins_withincents = sum(ifelse(incent_prop == 1, 1, 0)),\n    fmv_incentive = sum(ifelse(incent_prop == 1, fmv, 0), na.rm = TRUE),\n    #fmv_taxed =  sum(taxed_fmv, na.rm=TRUE),\n    fmv_incents_inTIFs = sum(ifelse(incent_prop == 1 & final_tax_to_tif &gt; 0, fmv, 0), na.rm = TRUE),\n    fmv_inTIF = sum(fmv_inTIF, na.rm=TRUE),\n    fmv_tif_increment = sum(fmv_tif_increment, na.rm=TRUE),\n    fmv_untaxable_value = sum(untaxable_value_fmv , na.rm=TRUE),\n    fmv_exemptions = sum(all_exemptions/eq_factor/loa, na.rm=TRUE),\n    fmv_abatements = sum(exe_abate/eq_factor/loa, na.rm=TRUE),\n    zero_bill = sum(zero_bill, na.rm=TRUE),\n    fmv_residential = sum(ifelse(res_prop==1, fmv, 0), na.rm = TRUE),\n    fmv_C2 = sum(ifelse(c2_prop == 1, fmv, 0), na.rm = TRUE),\n    \n    fmv_industrial = sum(ifelse(class %in% industrial_classes, fmv, 0), na.rm = TRUE),\n    fmv_commercial = sum(ifelse(class %in% commercial_classes, fmv, 0), na.rm = TRUE),\n    \n    current_rate_avg = mean(tax_code_rate),\n    avg_C2_bill_noexe = mean(ifelse(between(class,200,299) & all_exemptions == 0, (final_tax_to_dist + final_tax_to_tif), NA), na.rm=TRUE),\n    avg_C2_bill_withexe = mean(ifelse(between(class,200,299) & all_exemptions &gt; 0, (final_tax_to_dist + final_tax_to_tif), NA), na.rm=TRUE),\n    av_taxed = sum(taxed_av, na.rm = TRUE),\n    untaxable_value_av = sum(untaxable_value_av, na.rm=TRUE),\n    av = sum(av),\n    eav_taxed = sum(taxed_av*eq_factor), \n    eav_untaxable = sum(untaxable_value_eav, na.rm=TRUE),\n    fmv = sum(fmv, na.rm=TRUE),\n    pins_in_class = n(),\n    all_exemptions = sum(all_exemptions),   # in EAV\n    abatements = sum(exe_abate),            # in EAV\n    eav_incents_inTIFs = sum(ifelse(incent_prop == 1 & in_tif == 1, taxed_eav, 0), na.rm = TRUE),\n\n    final_tax_to_dist = sum(final_tax_to_dist), ## Amount of Total Levy\n    final_tax_to_tif = sum(final_tax_to_tif),\n    eq_av = sum(eq_av)) %&gt;%\n  mutate(\n   reducedEAV_comind_incents =  new_TEAV_noIncents - eav_taxed,\n   reducedEAV_commerc_incents  = new_TEAV_noCommercIncents - eav_taxed,\n\n   reducedEAV_indust_incents  = new_TEAV_noIndustIncents - eav_taxed,\n    # Absolute maximum TEAV: No Exemptions, no abatements, no TIFS, no Incentive properties\n    # Commercial and industrial assessed at 25%\n    TEAV_max = eav_taxed + all_exemptions + abatements + forgone_TIF_EAV +    reducedEAV_comind_incents,\n\n    # no exemptions or incentive classifications:\n    TEAV_neither = eav_taxed + all_exemptions + reducedEAV_comind_incents,\n\n    rate_noExe = final_tax_to_dist / new_TEAV_noExemps,\n    rate_noCommercInc = final_tax_to_dist / new_TEAV_noCommercIncents,\n    rate_noIndustInc = final_tax_to_dist / new_TEAV_noIndustIncents,\n\n    rate_noAbate = final_tax_to_dist / new_TEAV_noAbates,\n    rate_noInc = final_tax_to_dist / new_TEAV_noIncents ,\n    rate_neither = final_tax_to_dist / TEAV_neither, \n    rate_noTIFs = final_tax_to_dist / (eav_taxed + forgone_TIF_EAV),\n    rate_vacant = final_tax_to_dist / new_TEAV_vacant_props,\n    rate_lowest = final_tax_to_dist / TEAV_max ,\n    rate_current = final_tax_to_dist / eav_taxed,\n    change_noInc = rate_current - rate_noInc,\n\n    forgonerev_noExe = rate_noExe * all_exemptions,\n    forgonerev_noAbate = rate_noAbate * (new_TEAV_noAbates - eav_taxed),\n    forgonerev_noIncents = rate_noInc * (new_TEAV_noIncents - eav_taxed),\n    forgonerev_noCommercIncents = rate_noInc * (new_TEAV_noCommercIncents - eav_taxed),\n\n    forgonerev_noIndustIncents = rate_noInc* (new_TEAV_noIndustIncents - eav_taxed),\n\n    forgone_noExe_or_Inc = rate_neither * (TEAV_neither - eav_taxed),\n    forgonerev_noTIFs = rate_noTIFs * forgone_TIF_EAV,\n    forgonerev_vacant = rate_vacant * (new_TEAV_vacant_props - eav_taxed),\n    forgonerev_maxTEAV = rate_lowest * (TEAV_max - eav_taxed)\n)\n\ncook_ratechange %&gt;%\n mutate(across(contains(\"rate\"), scales::percent, accuracy = .01),\n        change_noInc = round(change_noInc*100, digits = 2)) %&gt;%\n\nselect(\"Current Composite Rate\" = rate_current, \n       \"Rate if Incentive Props LoA is 25%\" = rate_noInc, \n       \"Tax Rate Change\" =  change_noInc) %&gt;% \n\n  flextable()\n\n\nCurrent Composite RateRate if Incentive Props LoA is 25%Tax Rate Change8.56%8.33%0.23\n\n\n\n\nCode\ncook_ratechange %&gt;% \nselect(\"Commerc. EAV w/Incent\" = reducedEAV_commerc_incents, \"Indust EAV w/ Incent\" = reducedEAV_indust_incents,\n       \"CommInd EAV w/ Incent\" = reducedEAV_comind_incents,\n       \"Homeowner Exemption Exempt EAV\" = all_exemptions) %&gt;% flextable()\n\n\nCommerc. EAV w/IncentIndust EAV w/ IncentCommInd EAV w/ IncentHomeowner Exemption Exempt EAV1,594,976,9683,931,841,7545,526,818,72214,896,876,592\n\n\n$15 Billion EAV is tax exempt due to homeowners exemptions. All incentive properties combined only have $4 billion EAV that is tax exempt (due to the decreased level of assessment which results in less AV, and therefore, EAV)\n\nEstimates for Revenue Shifted to Non-Incentive Class Properties\n\nTake new tax rate and apply it to new taxbase.\n\n\n\nCode\ncook_ratechange %&gt;% \nselect(contains(\"forgonerev\") ) %&gt;% flextable()\n\n\nforgonerev_noExeforgonerev_noAbateforgonerev_noIncentsforgonerev_noCommercIncentsforgonerev_noIndustIncentsforgonerev_noTIFsforgonerev_vacantforgonerev_maxTEAV1,188,336,227407,985.9460,637,424132,934,717327,702,7070-323,283,3091,589,349,439\n\n\n\n\nNaive Revenue Shift\nUses old current tax rate and multiplies it by the new taxbase.\n\n\nCode\npin_data %&gt;%\n  filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\",\n                             \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\",\n                             \"Deer Park\", \"Deerfield\")) %&gt;% \n  filter(!agency_num %in% cross_county_lines & \n           !is.na(clean_name) & clean_name!=\"Unincorporated\" )  %&gt;%\n  summarize(\n    # for homestead exemptions\n    mostnaive_forgone_tax_amt_exe = sum(tax_amt_exe),    \n  \n    # more accurate but still uses current tax rate instead of recalculated tax rate:\n    forgonerev_from_exemptions  = sum(ifelse(class &gt;= 200 & class &lt; 300,\n          (((av*eq_factor) - (taxed_av*eq_factor))) * tax_code_rate/100, 0), na.rm=TRUE),\n\n   # amount of EAV from taxing an additional 15% of the AV if incentive properties didn't exist\n   # using current tax rate for each property at the tax code level\n    forgonerev_from_comind_incents  = sum(ifelse(class &gt;= 600 & class &lt; 900,\n          (((taxed_av*eq_factor)*0.25 - (taxed_av*eq_factor))) * tax_code_rate/100, 0), na.rm=TRUE),\n\n    forgonerev_commerc_incents  = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% commercial_classes,\n          (((taxed_av*eq_factor)*0.25 - (taxed_av*eq_factor))) * tax_code_rate/100, 0), na.rm=TRUE),\n\n    forgonerev_indust_incents  = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% industrial_classes,\n         (((taxed_av*eq_factor)*0.25 - (taxed_av*eq_factor))) * tax_code_rate/100, 0), na.rm=TRUE),\n   \n    #  forgonerev_noTIFs = rate_current/100 * ,\n       # TIF increment above the frozen EAV\n    forgonerev_TIFs = sum(fmv_tif_increment * loa * eq_factor*tax_code_rate/100, na.rm=TRUE),\n   \n   # if incentive properties had no tax value (i.e. owners left, or fully tax exempt)\n   # also equal to the current amount collected from incentive properties\n     forgonerev_vacant = sum(ifelse(class &gt;= 600 & class &lt; 900,  taxed_av*eq_factor * tax_code_rate/100, 0), na.rm = TRUE)\n   )",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "incentives_report_2022.html#change-in-composite-property-tax-rate-due-to-incentives-and-other-policy-scenarios",
    "href": "incentives_report_2022.html#change-in-composite-property-tax-rate-due-to-incentives-and-other-policy-scenarios",
    "title": "Tax Year 2022",
    "section": "Change in Composite Property Tax Rate Due to Incentives and other Policy Scenarios",
    "text": "Change in Composite Property Tax Rate Due to Incentives and other Policy Scenarios",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "incentives_report_2022.html#tables---difference-in-composite-tax-rates",
    "href": "incentives_report_2022.html#tables---difference-in-composite-tax-rates",
    "title": "Tax Year 2022",
    "section": "Tables - Difference in Composite Tax Rates",
    "text": "Tables - Difference in Composite Tax Rates\n\n\nCode\nmuni_ratechange_sliced &lt;- muni_ratechange %&gt;% \n  # mutate(change_noInc = rate_current - rate_noInc,\n  #   change_neither = rate_current - rate_neither,\n  #   change_noTIF = rate_current - rate_noTIFs,\n  #   change_noExe = rate_current - rate_noExe,\n  #   change_vacant = rate_current - rate_vacant,\n  #   change_lowest = rate_current - rate_lowest\n  # )  %&gt;%\n     mutate(across(contains(\"rate_\"), round, digits = 2))|&gt;\n  select(clean_name, rate_current, rate_noInc, change_noInc) %&gt;% \n  arrange(desc(change_noInc) ) %&gt;%\n  mutate(across(c(rate_current, rate_noInc, change_noInc), round, digits=2)) %&gt;%\n  mutate(change_noInc = abs(round(change_noInc, digits = 2)) ) %&gt;% \n  slice(c(1:5, 58:62, 115:119)) \n\nmuni_ratechange_sliced %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", rate_current = \"Current Comp.\\nTax Rate\", rate_noInc = \"Tax Rate if No\\nIncent. Class.\",\n                    change_noInc = \"Rate Change\") %&gt;%\n  bold(i = 8) %&gt;%\n  add_footer(\"There are 26 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\", top = FALSE) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\nTable 12.1: Composite Tax Rate Change from hypothetical scenario of taxing incentive property at 25% of their FMV instead of 10% of their FMV. There are 26 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\n\n\n\nMunicipalityCurrent Comp.Tax RateTax Rate if NoIncent. Class.Rate ChangeMarkham0.280.180.11Mc Cook0.140.080.06Sauk Village0.170.120.06Matteson0.180.140.04North Lake0.120.080.04Orland Hills0.110.110.00Rolling Meadows0.100.100.00Midlothian0.160.160.00Richton Park0.190.190.00Niles0.080.080.00Justice0.120.120.00Kenilworth0.080.080.00La Grange Park0.110.110.00Merrionette Park0.120.120.00Morton Grove0.090.090.00\n\n\n\n\n\n\n\nCode\nmuni_ratechange %&gt;% \n  select(clean_name, change_noInc) %&gt;% \n mutate(change_noInc = round(change_noInc*100, digits = 1)) %&gt;%\n  filter(clean_name != \"Unincorporated\") %&gt;%\n  left_join(nicknames) %&gt;%\n  full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) %&gt;%\n  ggplot(aes(fill = change_noInc)) +\n  geom_sf(aes(geometry = geom), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    low = \"lightblue\", high = \"darkblue\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\n    na.value = \"gray50\",\n    n =4,\n    name = \"Tax Rate Change\\nin Percentage Pts\") +\n  \n   geom_sf_pattern(data = no_incentives, aes(geometry = geom), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\nFigure 12.1: Hypothetical change in composite tax rate if all value that currently receives incentive classification became assessed at 25%.\n\n\n\n\n\n\n\n\n\n\nCode\nmuni_ratechange %&gt;% \n  select(clean_name, change_neither) %&gt;% \n mutate(change_neither = round(change_neither*100, digits = 1)) %&gt;%\n  filter(clean_name != \"Unincorporated\") %&gt;%\n  left_join(nicknames) %&gt;%\n  full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) %&gt;%\n  \n  ggplot(aes(fill = change_neither)) +\n  geom_sf(aes(geometry = geom), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    low = \"black\", high = \"brown\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\n    na.value = \"gray50\",\n    n = 4,\n    name = \"Tax Rate Change\\nin Percentage Pts\") +\n  geom_sf_pattern(data = no_incentives, aes(geometry = geom), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\nFigure 12.2: Hypothetical change in composite tax rate if all value that currently receives incentive classification became assessed at 25% and exempt EAV from GHE became taxable.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n filter(change_noInc &gt;0) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current)\n\n# make dot graph\nmuni_ratechange %&gt;% \n filter(change_noInc &gt; .007) %&gt;%\n  select(clean_name, rate_current, rate_noInc) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \"rate_noInc\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" \n             )+\n    # scale_color_manual(palette=\"Blues\", \n    #                  labels = c(\"Current Rate\", \"No Incentives\")#,  \n    #               #   values = c(\"#A6CEE3\", \"#1F78B4\" )\n    #                  )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette=\"Paired\", labels = c(\"Incentives\", \"No Incentives\"), direction = 1)+\n\n  \n  labs(title = \"Difference in Composite Tax Rate if Assessed at 25%\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 12.3: Change in tax rate if incentive properties were assessed at 25% of their FMV instead of their reduced level of assessment.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; 0) %&gt;% \n  arrange(change_noInc) %&gt;%\n  select(clean_name, change_noInc) %&gt;%\n  distinct()\n\n\n# make dot graph\nmuni_ratechange %&gt;% \n  filter(change_noInc &gt; .005) %&gt;%\n  filter(change_noInc &gt; 0) %&gt;%\n\n  select(clean_name, rate_current, rate_noInc, change_noInc) %&gt;% \n  distinct() %&gt;%\n  pivot_longer(c(\"rate_current\", \"rate_noInc\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  left_join(order) %&gt;%\n    filter(change_noInc &gt; 0 ) %&gt;%\n  mutate(clean_name = if_else(clean_name == \"Mc Cook\", \"McCook\", clean_name)) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, change_noInc)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette=\"Paired\", labels = c(\"Incentives\", \"No Incentives\"), direction = 1)+\n  \n  labs(title = \"Difference in Composite Tax Rate if Assessed at 25%\",\n       subtitle = \"Ordered by Comp. Rate Change\", x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 12.4: Change in Tax Rate from use of Incentives. Ordered by amount of change in the composite tax rate. Only shows municipalities that had more than 1/2 percentage point change in tax rate.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; 0) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current) %&gt;% distinct()\n\n# make dot graph\nmuni_ratechange %&gt;% \n  filter(change_noInc &gt; .005) %&gt;%\n  select(clean_name, rate_current, rate_noInc, #rate_neither, \n         rate_vacant, rate_noExe) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \n                 \"rate_noInc\", \n                 \"rate_vacant\", \n                 \"rate_noExe\"# ,\n                #  \"rate_neither\"\n), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\nlegend.position = \"bottom\",\nplot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette = \"RdGy\",\n                    labels = c(\"Current Rate\", \n                             #  \"No Exemps & LoA is 25%\",\n                               \"No Exemptions\", \n                               \"No Incentives:\\nLoA 25%\",\n                               \"Incententive Classification\\nLoA = 0%\"\n                    ), \n                    direction = -1)+\n  labs(title = \"Composite Tax Rate Scenarios\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", \n       x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 12.5: Only shows municipalities that had more than 1/2 percentage point change in tax rate.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; 0) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current) %&gt;% distinct()\n\n# make dot graph\nmuni_ratechange %&gt;% \n  filter(change_noInc &gt; 0) %&gt;%\n  select(clean_name, rate_current, rate_noInc, #rate_neither, \n         rate_vacant, rate_noExe) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \n                 \"rate_noInc\", \n                 \"rate_vacant\", \n                 \"rate_noExe\"# ,\n                #  \"rate_neither\"\n), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\nlegend.position = \"bottom\",\nplot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette = \"RdGy\",\n                    labels = c(\"Current Rate\", \n                             #  \"No Exemps & LoA is 25%\",\n                               \"No Exemptions\", \n                               \"No Incentives:\\nLoA 25%\",\n                               \"Incententive Classification\\nLoA = 0%\"\n                    ), \n                    direction = -1)+\n  labs(title = \"Composite Tax Rate Scenarios\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", \n       x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 12.6: Same as figure above but includes all municipalities that had a taxrate change from altering the level of assessment for incentive class properties.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; .005) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current) %&gt;% distinct()\n\n# make dot graph\nmuni_ratechange %&gt;% \n filter(change_noInc &gt; .005) %&gt;%\n  select(clean_name, rate_current, rate_noInc, rate_vacant) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \n                 \"rate_noInc\", \n                 \"rate_vacant\"\n                 ), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\nlegend.position = \"bottom\",\nplot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette = \"Greys\", direction = -1,\n                    labels = c(\"Current Rate\", \n                             #  \"No Exemps & LoA is 25%\",\n                             #  \"If no Exemptions\", \n                               \"No Incentive Classes: \\nLoA = 25%\",\n                               \"Incentive Classification\\nLoA = 0%\"\n                    )\n)+\n  labs(title = \"Composite Tax Rate Scenarios\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", \n       x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 12.7: Only shows municipalities that had more than 1/2 percentage point change in tax rate.\n\n\n\n\n\n\n\n\n\n\nCode\nlibrary(ggrepel)\n# make dot graph\nmuni_ratechange %&gt;% \n  filter( clean_name ==\"Markham\" ## | clean_name == \"Matteson\"\n          ) %&gt;%\n  select(clean_name, rate_current, rate_noInc, rate_neither, rate_vacant, rate_noExe) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \"rate_noInc\", \n                  \"rate_vacant\", \"rate_noExe\",\n                  \"rate_neither\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  geom_text_repel(aes(x=tax_rate),\n                  hjust = 0,\n                  vjust = -1,\n                  min.segment.length = Inf,\n                  size = 3,\n                  angle = 30,\n                  label = c(\"Current Rate\", \"If LoA 25%\" ,\n                            \"If Vacant\" , \"If no Exemps\",\n                            \"No Exemps & LoA is 25%\") )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA),\n    legend.position = \"none\"  )+\n  scale_fill_manual(\n    values = c(\"#BDD7E7\", \"#6BAED6\", \"#3182BD\", \"#EFF3FF\",  \"#08519C\")) +\n  scale_x_continuous(limits = c(.17, .35)) + \n  scale_y_discrete(\n    expand = expand_scale(mult = c(.1, 1)) ,\n           #        limits = c(\"Markham\")#, breaks = \"Markham\"\n                   )  + \n  labs(\n    x = \"Composite Tax Rate (%)\", \n    y = \"\")",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Tax Year 2022</span>"
    ]
  },
  {
    "objectID": "incentives_report_2023.html",
    "href": "incentives_report_2023.html",
    "title": "Tax Year 2023",
    "section": "",
    "text": "Cook County Total Value\n\\[\n\\mbox{AV = Fair Market Value * Level of Assessment}\n\\]\n\\[\n\\mbox{Tax Rate} = \\frac{\\mbox{Amount Levied by Taxing Districts}}{\\mbox{Taxable Value}}\n\\]\n\\[\n\\mbox{Final Tax to District} = \\mbox{Portion of Levy Paid by PIN} = {\\mbox{Tax Code Rate}}*{\\mbox{Taxable Value of PIN}}\n\\]\n\\[\\mbox{Equalized Assessed Value} = {\\frac{\\mbox{final tax to dist + final tax to TIF}}{\\mbox{tax code rate}} + \\mbox{Exemptions + Abatements}}\\]\n\\[\\mbox{Taxed EAV} = {\\frac{\\sum{final\\_tax\\_to\\_dist}}{\\mbox{tax code rate}} = \\mbox{EAV - Exemptions - Abatements}}\\]\nCode\ncook_sums %&gt;% \n  filter(year == params$year) |&gt;\n  select(cty_PC, #cty_fmv_untaxable_value, \n         cty_fmv, cty_fmv_taxed, #cty_pct_fmv_untaxable\n         ) %&gt;%\n    mutate(cty_pct_fmv_taxed = scales::percent(cty_fmv_taxed/cty_fmv, accuracy = 0.01)) %&gt;%\n#  mutate(cty_pct_fmv_untaxable = scales::percent(cty_pct_fmv_untaxable, accuracy = 0.01)) %&gt;%\n  flextable() %&gt;% \n  set_header_labels(cty_PC = 'PINs', \n                   # cty_projects = \"Project IDs\", \n                    cty_fmv_taxed = 'Taxed FMV', \n                    cty_fmv_untaxable_value = 'FMV not Taxed\\nfor Levy',\n                    cty_fmv = 'Total FMV', \n\n                    cty_pct_fmv_taxed = 'FMV Taxed (%)'\n  ) %&gt;%   \n  FitFlextableToPage()\n\n\n\n\nTable 11.1: FMV of PINs in Cook County Taxed FMV represents the property value that was actually taxed by local taxing jurisdictions(equal to the amount levied) but converted to FMV. We use the the portion of an individuals tax bill that does NOT go to a TIF to calculate the composite levy for taxing jursidictions. This means that the “levy” actually represents the amount collected by the taxing agencies, not the amount that was levied. Therefore the composite levy does not include unpaid taxbills.\n\n\n\nPINsTotal FMVTaxed FMVFMV Taxed (%)1,864,161634,912,375,858532,309,599,04283.84%\nCode\ntbl &lt;-  cook_sums |&gt;\n  filter(year ==params$year) |&gt;\n  mutate(cty_pct_fmv_both_incent = cty_fmv_incentive / cty_fmv_comandind ,\n         cty_pct_PC_both_incent = cty_PC_withincents / cty_PC_comandind         ) |&gt;\n  select(cty_fmv_comandind, #cty_fmv, \n          cty_pct_fmv_both_incent, \n         cty_pct_fmv_incentinTIF,\n         cty_pct_PC_both_incent, cty_PC_comandind, cty_PC_incents_inTIFs, #cty_pct_PC_both_incent_inTIF, \n         cty_pct_fmv_incents_tif_increment) %&gt;%\n mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01))\n\ntbl %&gt;%\n  flextable() %&gt;% \n  align(align = \"right\") %&gt;%\n    set_header_labels(\n                          cty_fmv_comandind = 'Com. & Ind. FMV',\n                        #  cty_fmv = 'Total FMV in Cook',\n                    cty_pct_fmv_both_incent = '% of Com. & Ind. FMV  w/ Incent.',\n                    cty_pct_fmv_incentinTIF = '% of Com. & Ind. FMV  w/ Incent. in TIF',\n  cty_pct_fmv_incents_tif_increment = '% of Com. & Ind. FMV in TIF Increment',\n\n                          cty_PC_comandind = 'PIN Count',\n                      cty_PC_incents_inTIFs = \"Incent. PINs in TIF\",\n                    cty_pct_PC_both_incent = '% of Com. & Ind. PINs w/ Incent.',\n                    cty_pct_PC_both_incent_inTIF = '% of Incent. PINs in TIF'\n  ) %&gt;%\n  FitFlextableToPage()\n\n\n\n\nTable 11.2: Commercial and Industrial PINs in Cook County\n\n\n\nCom. & Ind. FMV% of Com. & Ind. FMV  w/ Incent.% of Com. & Ind. FMV  w/ Incent. in TIF% of Com. & Ind. PINs w/ Incent.PIN CountIncent. PINs in TIF% of Com. & Ind. FMV in TIF Increment115,845,175,19811.39%39.55%4.71%96,4771,99626.74%\n11.39% of industrial and commercial PINs (aka \"revenue producing PINs\") FMV has an incentive classification (4.71% when using PIN counts). Of the PINs that have incentive classification, 39.55% of the FMV is located within a TIF (4.71% when using PIN counts).\n26.74% is in TIF Increment.\nCode\n#table_cook %&gt;% \n  \ntbl &lt;- cook_sums |&gt;\n  filter(year == params$year) |&gt;\n  mutate(cty_pct_fmv_com_incent = cty_fmv_comwithincent / cty_fmv_commercial,#) |&gt;\n         cty_pct_fmv_com_incent_inTIF = cty_fmv_com_incent_inTIF / cty_fmv_comwithincent,\n         \n         cty_pct_PC_com_incent_inTIF = cty_PC_com_incent_inTIF / cty_PC_com_incent) %&gt;%\n  \n  select(cty_PC_commercial, cty_PC_com_incent, cty_pct_incent_ofcomPC, \n         cty_pct_PC_com_incent_inTIF, cty_fmv_commercial, cty_pct_incent_ofcomPC, \n         cty_pct_fmv_com_incent, cty_pct_fmv_com_incent_inTIF) %&gt;%\n  \n  mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01))\n\ntbl %&gt;%\n  flextable() %&gt;% \n    align(align = \"right\") %&gt;%\n  set_header_labels(cty_fmv_commercial = 'Commercial FMV',\n                    cty_PC_commercial = 'Commercial Pin Count', \n                    cty_PC_com_incent = 'Com. PIN Count w/ Incent.',\n                    cty_pct_incent_ofcomPC = 'Com. PINs w/ Incent.',\n                    cty_pct_fmv_com_incent = '% of Com. FMV  w/ Incent.', \n                    \n                    cty_pct_fmv_com_incent_inTIF = '% of Com. FMV  w/ Incent. in TIF', \n                    cty_PC_com_incent_inTIF = \"Com. Incent. PINs in TIF\", \n                    cty_pct_PC_com_incent = '% of Com. PINs w/ Incent.',\n                    cty_pct_PC_com_incent_inTIF = '% of Incent. PINs in TIF'\n  ) %&gt;%   FitFlextableToPage()\n\n\n\n\nTable 11.3: Commercial PINs in Cook County\n\n\n\nCommercial Pin CountCom. PIN Count w/ Incent.Com. PINs w/ Incent.% of Incent. PINs in TIFCommercial FMV% of Com. FMV  w/ Incent.% of Com. FMV  w/ Incent. in TIF70,8699051.28%38.67%89,596,494,2753.84%51.70%\n3.84% of commercial PIN FMV has an incentive classification (1.28% when using PIN counts). Of the PINs that have incentive classification, 51.70% of the FMV is located within a TIF (38.67% when using PIN counts).\nCode\ntbl &lt;- cook_sums |&gt;\n  filter(year == params$year) |&gt;\n  mutate(cty_pct_fmv_ind_incent = cty_fmv_indwithincent / cty_fmv_industrial,\n         cty_pct_fmv_ind_incent_inTIF = cty_fmv_ind_incent_inTIF / cty_fmv_indwithincent,\n         \n         cty_pct_PC_ind_incent_inTIF = cty_PC_ind_incent_inTIF / cty_PC_ind_incent) %&gt;%\n  \n  select(cty_PC_industrial, cty_PC_ind_incent, cty_PC_ind_incent_inTIF, \n         cty_pct_incent_ofindPC, cty_pct_fmv_ind_incent_inTIF, cty_pct_PC_ind_incent_inTIF,\n         \n         cty_fmv_industrial, cty_pct_fmv_ind_incent,  \n  ) %&gt;%\n  mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01)) \n\ntbl %&gt;%\n  flextable() %&gt;% \n  align(align = \"right\") %&gt;% \n  set_header_labels(cty_fmv_industrial = 'Industrial FMV',\n                    cty_PC_industrial = 'Industrial Pin Count', \n                    cty_PC_ind_incent = 'Ind. PIN Count w/ Incent.',\n                    cty_pct_incent_ofindPC = 'Ind. PINs w/ Incent.',\n                    cty_pct_fmv_ind_incent = '% of Ind. FMV  w/ Incent.', \n                    \n                    cty_pct_fmv_ind_incent_inTIF = '% of Ind. FMV  w/ Incent. in TIF', \n                    cty_PC_ind_incent_inTIF = \"Ind. Incent. PINs in TIF\", \n                    cty_pct_PC_ind_incent = '% of Com. PINs w/ Incent.',\n                    cty_pct_PC_ind_incent_inTIF = '% of Incent. PINs in TIF'\n  ) %&gt;% \n  FitFlextableToPage()\n\n\n\n\nTable 11.4: Industrial PINs in Cook County\n\n\n\nIndustrial Pin CountInd. PIN Count w/ Incent.Ind. Incent. PINs in TIFInd. PINs w/ Incent.% of Ind. FMV  w/ Incent. in TIF% of Incent. PINs in TIFIndustrial FMV% of Ind. FMV  w/ Incent.25,6083,6371,64614.20%35.26%45.26%26,248,680,92337.17%\n37.17% of industrial FMV has an incentive classification (14.20% when using PIN counts). Of the PINs that have incentive classification, 35.26% of the FMV is located within a TIF ( 45.26% when using PIN counts).\nCode\ncook_sums |&gt;\n  filter(year == params$year) |&gt;\n  select(cty_fmv, cty_fmv_tif_increment, cty_fmv_exemptions, cty_fmv_abatements, \n       #  cty_pct_fmv_untaxable \n         ) |&gt;\nmutate(cty_pct_fmv_untaxable = (cty_fmv_tif_increment + cty_fmv_exemptions + cty_fmv_abatements)/cty_fmv) %&gt;%\n  mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01)) %&gt;%\n  flextable() %&gt;% \n    align(align = \"right\") %&gt;%  \n  set_header_labels(\n                   cty_fmv = 'Total FMV', \n                    cty_fmv_tif_increment = 'TIF Increment FMV' ,\n                    cty_fmv_exemptions = 'Exempt Value: Exemptions',\n                    cty_fmv_abatements = 'Exempt Value: Abatements',\n                 #   cty_fmv_untaxable_value = 'Value not Taxable \\nfor Levy',\n                    cty_pct_fmv_untaxable = 'County FMV not Taxed (%)'\n                 ) %&gt;%\n  FitFlextableToPage()\n\n\n\n\nTable 11.5: Untaxable FMV in Cook County.\n\n\n\nTotal FMVTIF Increment FMVExempt Value: ExemptionsExempt Value: AbatementsCounty FMV not Taxed (%)634,912,375,85848,939,536,42953,319,245,56222,770,97716.11%\nCode\ncook_sums |&gt;\n  filter(year == params$year) |&gt;  \n  select(cty_av, cty_av_taxed, cty_untaxable_value_av, cty_pct_av_taxed, cty_pct_av_untaxable ) %&gt;%\n  mutate(across(contains(\"pct_\"), scales::percent, accuracy = .01)) %&gt;%\n  flextable() %&gt;% \n    align(align = \"right\") %&gt;%  set_header_labels(\n                   cty_av = 'Total AV', \n                    cty_av_taxed = 'Taxed AV' ,\n                    cty_untaxable_value_av = 'AV Not Taxed',\n                    cty_pct_av_taxed = '% Taxed',\n                    cty_pct_av_untaxable = '% Not Taxed') %&gt;%\n   FitFlextableToPage()\n\n\n\n\nTable 11.6: Untaxable AV in Cook County. Taxed AV represents the property value that was actually taxed by local taxing jurisdictions.\n\n\n\nTotal AVTaxed AVAV Not Taxed% Taxed% Not Taxed78,873,223,15965,828,259,46214,454,081,24983.46%18.33%\nCode\ncook_sums |&gt;\n  filter(year == params$year) |&gt;\n  select(cty_fmv, cty_fmv_inTIF, cty_fmv_tif_increment, \n         cty_fmv_incentive, cty_fmv_incents_inTIFs, cty_fmv_incents_tif_increment) %&gt;%\n  flextable() %&gt;% \n  set_header_labels(\n                    cty_fmv = 'Total FMV', \n                    cty_fmv_inTIF = 'FMV in TIFs',\n                    cty_fmv_tif_increment = 'TIF Increment FMV' ,\n                    cty_fmv_incents_inTIFs = 'FMV from Incent. Class in TIF',\n                    cty_fmv_incentive = \"FMV with Incent.Class.\", \n                    cty_fmv_incents_tif_increment = 'FMV with Incent. Class. in TIF Increment') %&gt;%   \n  FitFlextableToPage()\n\n\n\n\nTable 11.7: FMV of properties with incentive classifications and TIF increment. Value in TIFs, value within the TIF that can be taxed by local taxing jurisdictions, value of properties that have reduced levels of assessments from incentive classifications, and the value that is both in a TIF and has a reduced LOA.\n\n\n\nTotal FMVFMV in TIFsTIF Increment FMVFMV with Incent.Class.FMV from Incent. Class in TIFFMV with Incent. Class. in TIF Increment634,912,375,858112,516,876,03748,939,536,42913,200,093,1135,220,552,6803,529,112,622\nTaxed value is the amount of value that was actually taxed in order to pay for taxing agencies levies. It includes frozen EAV within an area + taxable EAV for residential properties net exemptions and abatements. It also includes the equalized assessed value of incentive properties at their current, lower assessment ratios. final_tax_to_dist is used to calculate the amount that was collected by local government agencies and then divided by the tax rate to calculate the amount of value that was taxed, or the taxable equalized assessed value (TEAV).\nThe Taxed Value, when converted to the Fair Market Value (FMV) represents the amount of value that was taxed out of the full FMV available in Cook County.\nUntaxable EAV includes homeowner exemptions for 200 level properties, abatements for other property class types, EAV in the TIF increment, and EAV that has been reduced due to incentive classifications.\nCode\ncook_MC_sums &lt;- read_csv(\"../Output/ptaxsim_cook_MC_level_2006to2023_new.csv\") \n\ncook_MC_sums |&gt;  \n  filter(year == params$year) |&gt;\n      mutate(across(contains(c(\"pct_\", \"rate\")), scales::percent, accuracy = .01)) %&gt;%\n      mutate(across(is.numeric, round, digits = 0)) %&gt;%\n\n  select(\n    \"Property Type\" = class_group, \n    \"Homeowner Exempt FMV\"= cty_mc_fmv_exemptions,\n    \"Abated FMV\" = cty_mc_fmv_abatements,\n    \"$0 Bill Count\" = cty_mc_zero_bill,\n    \"$ Levy Paid\" = cty_mc_levy,\n  #  \"% of Levy Paid\" =  pct_mc_levy_paid, \n    \"FMV in Major Class\" =  cty_mc_fmv,\n    \"Taxed AV\" = cty_mc_av_taxed,\n   # \"Project Count\" = cty_mc_projects,\n    \"Avg Composite Tax Rate\" = cty_mc_current_rate_avg,\n 'FMV in TIFs' = cty_mc_fmv_inTIF, \n   'TIF Increment FMV' = cty_mc_fmv_tif_increment)  |&gt; \n  flextable() %&gt;% \n  align(align = \"right\")\n\n\nThe Fair Market Value (FMV) is also called the Market Value for\nAssessment Purposes and can be calculated from the av /\nloa, or the Assessed Value divided by the Level of\nAssessment. However, the values used for the level of assessment are an\napproximation for incentive properties since we do not have the PIN\nlevel assessment ratios.Property TypeHomeowner Exempt FMVAbated FMV$0 Bill Count$ Levy PaidFMV in Major ClassTaxed AVAvg Composite Tax RateFMV in TIFsTIF Increment FMV00097,6170009.70%0013,23204,86293,856,9804,254,802,430345,007,76110.08%1,832,569,570802,822,891253,309,887,762422,85927,05310,022,887,808466,770,259,54039,430,729,1829.05%50,895,258,06018,976,964,38135,085,701471,81327939,866,02047,083,521,9004,010,987,0468.32%14,779,683,4406,892,348,472400722,301,622550,606,36594,464,0809.29%272,402,13578,285,8835A4,171,4636,570,0654844,250,692,55585,619,283,77217,744,638,4669.09%32,429,262,30414,610,918,9785B97,40410,983,36820896,613,10516,475,191,9483,153,902,5419.23%6,664,937,7283,857,051,448604,014,7631207,302,0008,704,660,180686,911,08110.29%2,885,806,4701,843,390,4157A0006,727,568358,189,38026,576,9419.45%236,328,310120,291,8997B0106,988034,676,2112,600,492,213157,287,9558.44%1,339,208,2201,039,193,3798A048,971021,095,107484,216,01044,614,45916.57%204,434,32075,339,7658B0152,150027,993,8421,052,535,33059,490,26718.61%554,775,360450,897,164900317,740,822958,616,79073,649,6838.37%422,210,120192,031,756\n\n\nCode\n# cty_MC_table &lt;- pin_data %&gt;%\n#   group_by(class_group) %&gt;%\n#   summarize(\n#     cty_MC_PC = n(),\n#    # cty_MC_projects = n_distinct(both_ids), # mostly for industrial and commercial properties\n#     cty_MC_fmv_incentive = sum(ifelse(incent_prop == 1, fmv, 0), na.rm = TRUE),\n#      cty_MC_fmv_taxed =  sum(taxed_fmv, na.rm=TRUE),\n#     cty_MC_av_taxed  = sum(taxed_av, na.rm=TRUE),\n#     cty_MC_fmv_incent_inTIF = sum(ifelse(incent_prop == 1 & in_tif == 1, fmv, 0), na.rm = TRUE),\n#     cty_MC_fmv_inTIF = sum(fmv_inTIF, na.rm=TRUE),\n#     cty_MC_fmv_tif_increment = sum(fmv_tif_increment, na.rm=TRUE),\n#     cty_MC_fmv_untaxable_value = sum(untaxable_value_fmv , na.rm=TRUE),\n#     cty_MC_fmv = sum(fmv, na.rm=TRUE),\n#     cty_MC_fmv_exemptions = sum(all_exemptions/eq_factor/loa, na.rm=TRUE),\n#     cty_MC_fmv_abatements = sum(abatements/eq_factor/loa, na.rm=TRUE),\n#     cty_MC_cty_zero_bill = sum(zero_bill, na.rm=TRUE),\n#     cty_MC_fmv_residential = sum(ifelse(res_prop == 1, fmv, 0), na.rm = TRUE),\n#     cty_MC_fmv_industrial = sum(ifelse(class %in% industrial_classes, fmv, 0), na.rm = TRUE),\n#     cty_MC_fmv_commercial = sum(ifelse(class %in% commercial_classes, fmv, 0), na.rm = TRUE),\n#     cty_MC_levy_paid = sum(final_tax_to_dist),\n#     cty_MC_current_rate_avg = mean(tax_code_rate),\n#     \n#     cty_MC_avg_C2_bill_noexe = mean(ifelse(res_prop == 1 & exe_total_adj == 0, (final_tax_to_dist+ final_tax_to_tif), NA), na.rm=TRUE),\n#     cty_MC_avg_C2_bill_withexe = mean(ifelse(res_prop == 1 & exe_total_adj &gt; 0, (final_tax_to_dist+ final_tax_to_tif), NA), na.rm=TRUE),\n#   ) %&gt;%\n#   mutate( cty_fmv = sum(cty_MC_fmv),\n#           pct_cty_MC_fmv_untaxable = cty_MC_fmv_untaxable_value / cty_MC_fmv,\n#          pct_fmv_taxed = cty_MC_fmv_taxed / sum(cty_MC_fmv),\n#           pct_MC_levy_paid = cty_MC_levy_paid / sum(cty_MC_levy_paid) )\n\n\n# cty_MC_table %&gt;%\n#   select(-c(cty_MC_avg_C2_bill_noexe, cty_MC_avg_C2_bill_withexe, cty_MC_fmv_residential, cty_MC_fmv_industrial, cty_MC_fmv_commercial, cty_fmv, #cty_MC_fmv_incent_inTIF\n#             )\n#          ) %&gt;%\n#     mutate(across(contains(c(\"pct_\", \"rate\")), scales::percent, accuracy = .01)) %&gt;%\n#   select(\n#     \"Property Type\" = class_group, \n#     \"Homeowner Exempt FMV\"= cty_MC_fmv_exemptions,\n#     \"Abated FMV\" = cty_MC_fmv_abatements,\n#     \"$0 Bill Count\" = cty_MC_cty_zero_bill,\n#     \"$ Levy Paid\" = cty_MC_levy_paid,\n#     \"% of Levy Paid\" =  pct_MC_levy_paid, \n#     \"FMV in Major Class\" =  cty_MC_fmv,\n#     \"Taxed AV\" = cty_MC_av_taxed,\n#    # \"Project Count\" = cty_MC_projects,\n#     \"Avg Composite Tax Rate\" = cty_MC_current_rate_avg,\n#    cty_MC_fmv_incentive, cty_MC_fmv_inTIF, cty_MC_fmv_incent_inTIF,\n#    cty_MC_fmv_tif_increment\n#    #everything()\n#    ) %&gt;%\n# \n#     mutate(across(is.numeric & !contains(\"pct_\"), round, digits = 0)) %&gt;%\n#   flextable() %&gt;% \n#   align(align = \"right\") %&gt;%\n#   set_header_labels(\n#     cty_MC_PC = 'PINs',# projects = \"Project IDs\", \n#     cty_MC_fmv_taxed = 'Taxed FMV', \n#     cty_MC_fmv_untaxable_value = 'FMV not Taxable for Levy', \n#     cty_MC_fmv_incentive = \"FMV with Incent.Class.\", \n#     cty_MC_fmv_inTIF = 'FMV in TIFs', \n#     cty_MC_fmv_tif_increment = 'TIF Increment FMV',\n#    # pct_cty_MC_fmv_untaxable = 'Value not Taxed (%)', \n#     cty_MC_fmv_incent_inTIF = 'FMV with Incent. Class. in TIFs' )",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "incentives_report_2023.html#frequency-of-incentives",
    "href": "incentives_report_2023.html#frequency-of-incentives",
    "title": "Tax Year 2023",
    "section": "Frequency of Incentives",
    "text": "Frequency of Incentives\n\nFair Market Value of Incentive PINs\n\n\nCode\nlanduse_incentshares &lt;- pin_data %&gt;% \n  filter(land_use != \"Land\") %&gt;%\n  group_by(clean_name, land_use) %&gt;% \n  summarize(pin_count = n(),\n            incent_PC = sum(ifelse(class &gt;=600 & class &lt;=900, 1, 0), na.rm=TRUE),\n            fmv_incentive = sum(ifelse(class &gt;=600 & class &lt;=900, fmv, 0), na.rm = TRUE),\n            #project_count = n_distinct(keypin),\n            fmv_group = sum(fmv, na.rm=TRUE),\n            #   av=sum(av)\n  ) %&gt;%\n  mutate(\n    fmv_incentive = ifelse(fmv_incentive == 0, NA, fmv_incentive),\n    pct_incent = fmv_incentive / fmv_group,\n    pct_incent = ifelse(is.na(pct_incent), 0, pct_incent),\npct_incent = scales::percent(pct_incent)\n)  \n\nindust_top10 &lt;- landuse_incentshares %&gt;%\n  select(clean_name, land_use, fmv_incentive, incent_PC) %&gt;% \n  filter(land_use == \"Industrial\") %&gt;%\n  arrange(desc(fmv_incentive)) %&gt;%\n  head(10) %&gt;% \n  select(-land_use)\n\nindust_top10 %&gt;%\n  flextable() %&gt;% \n  set_header_labels(clean_name = \"Municipality\", incent_PC = '# of Incent. PINs',\nfmv_incentive = \"FMV from Incentive\\nClass Properties\"\n) %&gt;%\n  set_table_properties( layout = \"autofit\", width = .75)\n\n\n\n\nTable 12.1: Top 10 Municipalities using Industrial Incentives\n\n\n\nMunicipalityFMV from IncentiveClass Properties# of Incent. PINsChicago1,560,399,960488Elk Grove Village899,438,340223Franklin Park686,888,07086Bedford Park676,581,890160North Lake586,380,99019Melrose Park393,147,580114Des Plaines361,656,31057Matteson332,661,72016Mc Cook330,009,36047Mt Prospect285,826,19046\n\n\n\n\n\n\n\nCode\ncommerc_top10 &lt;- landuse_incentshares %&gt;%\n  select(clean_name, land_use, fmv_incentive, incent_PC) %&gt;% \n  filter(land_use == \"Commercial\") %&gt;%\n  arrange(desc(fmv_incentive)) %&gt;%\n  head(10) %&gt;% \n  select(-land_use)\n  \ncommerc_top10 %&gt;%\n  flextable() %&gt;% \n#align(align = \"right\", j = 2:4) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", \n                    incent_PC = '# of Incent. PINs', \n                    fmv_incentive = \"FMV from Incentive\\nClass Properties\"\n                    ) %&gt;%\n  set_table_properties( layout = \"autofit\", width = .75)\n\n\n\n\nTable 12.2: Top 10 Municipalities using Commercial Incentives\n\n\n\nMunicipalityFMV from IncentiveClass Properties# of Incent. PINsChicago2,623,995,587165Glenview71,626,3603Matteson54,721,09021Evergreen Park51,106,6106Calumet City41,414,36574South Holland39,396,89550Orland Park36,254,23010Chicago Heights31,291,18063Lansing27,700,02028Schiller Park25,238,1572\n\n\n\n\n\n\n\nShare of Total FMV with Incentive Classification\nCombined Industrial and Commercial FMV with incentive classification divided by total FMV in municipality. Not included in a table in the report.\nOne way of showing areas that have reduced their tax base significantly through the use of incentive classifications.\n\n\nCode\ntable_muni_percentages &lt;- muni_sums %&gt;%   \n  filter(year == params$year)|&gt;\n  filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\", \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\", \"Deer Park\", \"Deerfield\"))\n\n# table_muni_percentages &lt;- munilevel %&gt;%   \n# filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\", \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\", \"Deer Park\", \"Deerfield\"))\n\ncross_county_line &lt;- c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\", \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\", \"Deer Park\", \"Deerfield\")\n\n\n\n\nCode\n# table_muni_percentages %&gt;%\n#   select(clean_name, pct_fmv_w_incentclass) |&gt; \n#   arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n#     slice(c(1:10, 56:65, 110:119)) %&gt;%\n# \n#   #slice(c(1:10, 67:76, 116:125)) %&gt;%\n#   mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, digits =1)) %&gt;%\n#   \n#   flextable() %&gt;% \n#   border_remove() %&gt;%\n#   hline_top() %&gt;%\n#   hline(i = c(10,20)) %&gt;%\n#   \n#   set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV with\\nIncent. Class.\") %&gt;%\n# add_header_row(values = c(\"County Wide\", \"3.22%\"), top = FALSE) %&gt;%\n#   align(j = 2, align = \"right\") %&gt;%\n# \n#   set_table_properties( layout = \"autofit\")\n\n\n\ntable_muni_percentages %&gt;%\n  select(clean_name, pct_fmv_w_incentclass) |&gt; \n  arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n  slice(c(1:5, 69:73, 121:125)) %&gt;%\n  #  slice(c(1:5, 58:62, 115:119)) %&gt;%\n\n  mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, digits = 2)) %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV\") %&gt;%\n  align(j = 2, align = \"right\") %&gt;%\nalign(j=2, align = \"right\", part = \"header\") %&gt;%\nset_table_properties( layout = \"autofit\")\n\n\n\n\nTable 12.3: Municipalities with the largest share of FMV property with incentive classification.\n\n\n\nMunicipality% FMVMc Cook63.00%Bedford Park48.50%North Lake36.10%Markham30.80%Hodgkins26.60%Park Forest0.90%Hoffman Estates0.80%Burr Ridge0.70%Palatine0.70%Robbins0.70%Western Springs0.00%Willow Springs0.00%Wilmette0.00%Winnetka0.00%Worth0.00%\n\n\n\n\n\n\n\nCode\nlibrary(sf)\nlibrary(ggpattern)\n\nno_incentives &lt;-  pin_data %&gt;% \n # filter(between(class, 600, 899)) %&gt;%\n  group_by(clean_name) %&gt;% \n  summarize(incent_pins = sum(ifelse(between(class, 600, 899), 1, 0))) %&gt;%\n  filter(incent_pins == 0) %&gt;% \n  distinct(clean_name)\n\n\nno_incentives &lt;- no_incentives %&gt;%\n  left_join(muni_shp, by = c(\"clean_name\" = \"MUNICIPALITY\")) \n\n# unincorp_areas &lt;- muni_shp %&gt;% filter(!MUNICIPALITY %in% munilevel$clean_name)\n#anti_join(munilevel, muni_shp, by = c(\"clean_name\" = \"MUNICIPALITY\"))\n\n# unincorp_areas2 &lt;- muni_shp %&gt;% filter(!MUNICIPALITY %in% munilevel$shpfile_name)\n\n\n\n\nCode\ntable_muni_percentages %&gt;%\n    left_join(nicknames) |&gt;\n\n  select(clean_name, pct_fmv_w_incentclass, shpfile_name) %&gt;%\n filter(!is.na(clean_name) & clean_name != \"Unincorporated\" ) %&gt;%\n  full_join(muni_shp, by = c(\"shpfile_name\" = \"MUNICIPALITY\")) %&gt;%\n  \n  ggplot(aes(fill = pct_fmv_w_incentclass)) +\n  geom_sf(aes(geometry = geom), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    high = \"brown\", low = \"black\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\n    na.value=\"gray\",\n    n =4,\n    name = \"Percent of Municipality FMV\\nwith Incentive Classification\",\n    labels = scales::percent\n) +\n   geom_sf_pattern(data = no_incentives, aes(geometry = geom), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\n\nFigure 12.1: Percent of Municipality FMV with Incentive Classification % = FMV from Incentive Class properties / Muni FMV\n\n\n\n\n\n\n\n\n\nCode\ntable2 &lt;- pin_data %&gt;% \n    filter(land_use != \"Land\") %&gt;%\n  group_by(clean_name, incent_prop) %&gt;%   # projects can be counted twice if the project has incentive and normal commercial/industrial prop classes.\n  summarize(pin_count = n(),\n         project_count = n_distinct(keypin), \n         av_adjusted=sum(ifelse(between(class, 600, 899), av*2.5, av)),\n         av=sum(av, na.rm=TRUE),\nfmv=sum(fmv)) \n\ndatatable(table2,\n          rownames= FALSE,\n          colnames = c('Municipality' = 'clean_name',   'Incentivized?' = 'incent_prop', 'PIN Count' = 'pin_count', 'Project Count' = 'project_count', 'Taxable AV' = 'av')) %&gt;%\n  formatCurrency(c('Taxable AV', 'av_adjusted'), digits = 0)\n\n\n\n\nTable 12.4: PINs and value summarized by if the property has an incentive class or not in a municipality. AV Adjusted is the amount of assessed value that could be taxed if the property were assessed at 25% instead of the lower level of assessment of approximately 10%.",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "incentives_report_2023.html#share-of-commercial-industrial-fmv-with-incentive-classification",
    "href": "incentives_report_2023.html#share-of-commercial-industrial-fmv-with-incentive-classification",
    "title": "Tax Year 2023",
    "section": "Share of Commercial & Industrial FMV with Incentive Classification",
    "text": "Share of Commercial & Industrial FMV with Incentive Classification\n\n\nCode\nmuni_incent_share &lt;- pin_data %&gt;% \n  # drop munis mostly outside of Cook and unincorporated PINs\nfilter(!agency_num %in% cross_county_line & !is.na(clean_name) ) %&gt;%\n\n  filter(land_use == \"Industrial\" | land_use == \"Commercial\") %&gt;%\n  group_by(clean_name, agency_num) %&gt;% \n  summarize(pin_count = n(),\n            incent_PC = sum(ifelse(class &gt;=600 & class &lt;900, 1, 0), na.rm=TRUE),\n            fmv_w_incent = sum(ifelse(class &gt;=600 & class &lt;900, fmv, 0), na.rm = TRUE),\n           # project_count = n_distinct(keypin),\n            fmv_group = sum(fmv, na.rm=TRUE),\n            comind_fmv =sum(fmv, na.rm=TRUE),\n            pins_inTIF = sum(in_tif, na.rm=TRUE)) %&gt;%\n  mutate(\n    fmv_w_incent = ifelse(fmv_w_incent == 0, NA, fmv_w_incent),\n    pct_fmv_w_incent = fmv_w_incent/comind_fmv,\n    pct_fmv_w_incent = ifelse(is.na(pct_fmv_w_incent), 0, pct_fmv_w_incent)\n\n\n) \n\n# muni_incentshare_slice &lt;- muni_incent_share %&gt;%\n#   ungroup() %&gt;%\n#   mutate(pct_fmv_w_incentclass = fmv_w_incent/comind_fmv,\n#          pct_fmv_w_incentclass = ifelse(is.na(pct_fmv_w_incentclass), 0, pct_fmv_w_incentclass)) %&gt;%\n#   select(clean_name, pct_fmv_w_incentclass) |&gt; \n#   arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n#   mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, accuracy = 0.01) ) %&gt;%\n#   slice(c(1:10, 56:65, 110:119)) \n# \n# muni_incentshare_slice %&gt;%\n#   flextable() %&gt;% \n#   border_remove() %&gt;%\n#   hline_top() %&gt;%\n#   hline(i = c(10,20)) %&gt;%\n#   set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV with\\nIncent. Class.\") %&gt;%\n# add_header_row(values = c(\"County Wide\", \"3.25%\"), top = FALSE) %&gt;%\n#     align(j = 2, align = \"right\", part = \"all\") %&gt;%\n# \n# add_footer(\"There are 27 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\", top = FALSE) %&gt;%\n#   set_table_properties( layout = \"autofit\")\n\n\nmuni_incentshare_slice &lt;- muni_incent_share  %&gt;%\nungroup() %&gt;%\nfilter(!agency_num %in% cross_county_lines) %&gt;%\n  mutate(pct_fmv_w_incentclass = fmv_w_incent/comind_fmv,\n    pct_fmv_w_incentclass = ifelse(is.na(pct_fmv_w_incentclass), 0, pct_fmv_w_incentclass)) %&gt;%\n  select(clean_name, pct_fmv_w_incentclass) |&gt; \n  arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n  mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, accuracy = 0.01 ) ) %&gt;%\n  slice(c(1:5, 58:62, 115:119))\n  \nmuni_incentshare_slice %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  align(j = 2, align = \"right\", part = \"all\") %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV with\\nIncent. Class.\") %&gt;%\n#add_header_row(values = c(\"County Wide\", \"3.25%\"), top = FALSE) %&gt;%   align(j = 2, align = \"right\" ) %&gt;%\nbold(i = 8) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\nTable 12.5: Municipalities with the largest share of Commercial and Industrial property with incentive classification. Uses values obtained from PTAXSIM, and levels of assessment from CCAO’s Github. There are 27 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\n\n\n\nMunicipality% FMV withIncent. Class.Markham77.48%Mc Cook66.85%North Lake66.37%Country Club Hills65.52%Phoenix65.47%Richton Park10.66%Niles9.75%Broadview8.90%Countryside8.73%Arlington Heights8.08%Western Springs0.00%Willow Springs0.00%Wilmette0.00%Winnetka0.00%Worth0.00%\n\n\n\n\n\n\n\nCode\nmuni_incent_share %&gt;%\n  select(clean_name, pct_fmv_w_incent) %&gt;%\n  left_join(nicknames)|&gt;\nfilter(clean_name != \"Unincorporated\") %&gt;%\n  full_join(muni_shp, by = c(\"shpfile_name\" = \"MUNICIPALITY\")) %&gt;%\n  \n  ggplot(aes(fill = pct_fmv_w_incent)) +\n  geom_sf(aes(geometry = geom), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    high = \"brown\", low = \"black\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\n    na.value=\"gray\",\n    n =4,\n    name = \"Percent of Commercial &\\nIndustrial FMV with\\nIncentive Classification\",\n    labels = scales::percent\n) +\n   geom_sf_pattern(data = no_incentives, aes(geometry = geom), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\nFigure 12.2: Share of Commercial and Industrial FMV that has an incentive property class.",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "incentives_report_2023.html#share-of-industrial-fmv-with-incentive-classification-within-each-municipality",
    "href": "incentives_report_2023.html#share-of-industrial-fmv-with-incentive-classification-within-each-municipality",
    "title": "Tax Year 2023",
    "section": "Share of Industrial FMV with Incentive Classification within each Municipality",
    "text": "Share of Industrial FMV with Incentive Classification within each Municipality\n\n\n\n\nCode\nindust_share_full &lt;- muni_sums  %&gt;%\n  \n  filter(year == params$year & !clean_name %in% cross_county_line) |&gt;\n  ungroup() %&gt;%\n  mutate(pct_fmv_indust_incent =  muni_fmv_indust_incent/muni_fmv_industrial,\n         pct_fmv_indust_incent = ifelse(is.na(pct_fmv_indust_incent), 0, pct_fmv_indust_incent)) %&gt;%\n  select(clean_name, pct_fmv_indust_incent) |&gt; \n  arrange(desc(pct_fmv_indust_incent)) %&gt;%\n  mutate(pct_fmv_indust_incent = scales::percent(pct_fmv_indust_incent, accuracy = 0.01 ) ) \n\nindust_share &lt;- indust_share_full %&gt;%\n  slice(c(1:5, 58:62, 115:119))\n\nindust_share %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  align(j = 2, align = \"right\", part = \"all\") %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_indust_incent = \"% FMV with\\nIncent. Class.\") %&gt;%\nbold(i = 8) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\nTable 12.6: Percent of Industrial FMV within each Municipality that has incentive classification. 37 municipalities do not use industrial incentives.\n\n\n\nMunicipality% FMV withIncent. Class.Phoenix100.00%Country Club Hills93.81%Hanover Park93.05%Markham91.56%Richton Park89.07%Dolton24.18%Skokie23.68%Steger23.64%Palos Hills23.63%Niles22.86%Park Ridge0.00%River Forest0.00%Riverside0.00%Rosemont0.00%South Barrington0.00%",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "incentives_report_2023.html#share-of-commercial-fmv-with-incentive-classification-within-each-municipality",
    "href": "incentives_report_2023.html#share-of-commercial-fmv-with-incentive-classification-within-each-municipality",
    "title": "Tax Year 2023",
    "section": "Share of Commercial FMV with Incentive Classification within each Municipality",
    "text": "Share of Commercial FMV with Incentive Classification within each Municipality\n\n\nCode\ncommerc_share_full &lt;- muni_sums  %&gt;%\n  \n  filter(year == params$year & !clean_name %in% cross_county_line) |&gt;\n  ungroup() %&gt;%\n  mutate(pct_fmv_commerc_incent =  muni_fmv_commerc_incent/muni_fmv_commercial,\n    pct_fmv_commerc_incent = ifelse(is.na(pct_fmv_commerc_incent), 0, pct_fmv_commerc_incent)) %&gt;%\n  select(clean_name, pct_fmv_commerc_incent) |&gt; \n  arrange(desc(pct_fmv_commerc_incent)) %&gt;%\n  mutate(pct_fmv_commerc_incent = scales::percent(pct_fmv_commerc_incent, accuracy = 0.01 ) ) \n\ncommerc_share &lt;- commerc_share_full %&gt;%\n  slice(c(1:5, 58:62, 115:119))\n\ncommerc_share %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  align(j = 2, align = \"right\", part = \"all\") %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_commerc_incent = \"% FMV with\\nIncent. Class.\") %&gt;%\nbold(i = 8) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\nTable 12.7: Percent of Commercial FMV within each Municipality that has incentive classification. 49 municipalities do not use commercial incentives.\n\n\n\nMunicipality% FMV withIncent. Class.Sauk Village48.81%Calumet Park31.53%Posen30.33%South Holland28.60%Calumet City25.56%Chicago Ridge1.56%Park Ridge1.51%Bellwood1.50%Oak Park1.42%Hoffman Estates1.17%Rosemont0.00%South Barrington0.00%Stickney0.00%Stone Park0.00%Westchester0.00%",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "incentives_report_2023.html#shifted-tax-revenue-and-tax-burden",
    "href": "incentives_report_2023.html#shifted-tax-revenue-and-tax-burden",
    "title": "Tax Year 2023",
    "section": "Shifted Tax Revenue and Tax Burden",
    "text": "Shifted Tax Revenue and Tax Burden\nRead in CCAO level of assessment rates for each property class. Read in Summary file for Municipalities from 2006 to 2023.\n\n\nCode\nmuni_rate &lt;- read_csv(\"../Output/ptaxsim_muni_level_2006to2023.csv\") %&gt;%\n  filter(year == params$year) %&gt;%\n  left_join(nicknames) %&gt;% \n  select(clean_name, muni_current_rate_avg, muni_pct_eav_taxed,# cur_comp_muni_rate\n) %&gt;%\n  rename(cur_munilevel_rate = muni_current_rate_avg)\n\nmuni_ratechange &lt;- read_csv(paste0(\"../Output/muni_ratechange_\", params$year, \"_test.csv\"))",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "incentives_report_2023.html#not-taxed-value---pin-aggregated-to-county-level",
    "href": "incentives_report_2023.html#not-taxed-value---pin-aggregated-to-county-level",
    "title": "Tax Year 2023",
    "section": "Not Taxed Value - PIN aggregated to County Level",
    "text": "Not Taxed Value - PIN aggregated to County Level\n\n\nCode\n#cook_ratechange &lt;- read_csv(\"../Output/ptaxsim_cook_level_2006to2023_new.csv\") |&gt; \n # filter(year == params$year)\n\n\n\n\nCode\ncook_ratechange &lt;- pin_data %&gt;%\n  filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\",\n                             \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\",\n                             \"Deer Park\", \"Deerfield\")) %&gt;% \n  #group_by(class_group) %&gt;%\n  summarize(\n    \n    ## New Tax Base Calculations\n    new_TEAV_noIncents = sum(ifelse(class &gt;= 600 & class &lt; 900,\n                                    (taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n    \n    ## NewTax Base Calculations\n    new_TEAV_noCommercIncents = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% commercial_classes,\n                                           (taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n\n   new_TEAV_noIndustIncents = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% industrial_classes,\n      (taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n\n    new_TEAV_noC6 = sum(ifelse( class &gt;=600 & class &lt; 700, \n(taxed_av*eq_factor/loa)*0.25 , taxed_av*eq_factor), na.rm=TRUE),\n\n    new_TEAV_noC7 = sum(ifelse(class &gt;=700 & class &lt; 800,\n(taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n\n    new_TEAV_noC8 = sum(ifelse(class &gt;=800 & class &lt; 900, (taxed_av*eq_factor/loa)*0.25, taxed_av*eq_factor), na.rm=TRUE),\n    \n    new_TEAV_vacant_props = sum(ifelse(class &gt;=600 & class &lt;900,  # if incentive classes were assessed at 0% (aka not taxedat all) or if the building lost its value completely without the incentive classification.\n                                       0, taxed_av*eq_factor), na.rm=TRUE),\n    \n    new_TEAV_noExemps = sum(taxed_av*eq_factor + all_exemptions, na.rm=TRUE), # does not include abatements\n    new_TEAV_noAbates = sum(taxed_av*eq_factor + abatements, na.rm=TRUE), # include only abatements, not other exemption types\n  \n    \n    # TIF increment above the frozen EAV\n    forgone_TIF_EAV = sum(fmv_tif_increment * loa * eq_factor, na.rm=TRUE),\n \n\n    cty_PC = n(),\n    # projects = n_distinct(both_ids), # mostly for industrial and commercial properties\n    pins_withincents = sum(ifelse(incent_prop == 1, 1, 0)),\n    fmv_incentive = sum(ifelse(incent_prop == 1, fmv, 0), na.rm = TRUE),\n    #fmv_taxed =  sum(taxed_fmv, na.rm=TRUE),\n    fmv_incents_inTIFs = sum(ifelse(incent_prop == 1 & final_tax_to_tif &gt; 0, fmv, 0), na.rm = TRUE),\n    fmv_inTIF = sum(fmv_inTIF, na.rm=TRUE),\n    fmv_tif_increment = sum(fmv_tif_increment, na.rm=TRUE),\n    fmv_untaxable_value = sum(untaxable_value_fmv , na.rm=TRUE),\n    fmv_exemptions = sum(all_exemptions/eq_factor/loa, na.rm=TRUE),\n    fmv_abatements = sum(exe_abate/eq_factor/loa, na.rm=TRUE),\n    zero_bill = sum(zero_bill, na.rm=TRUE),\n    fmv_residential = sum(ifelse(res_prop==1, fmv, 0), na.rm = TRUE),\n    fmv_C2 = sum(ifelse(c2_prop == 1, fmv, 0), na.rm = TRUE),\n    \n    fmv_industrial = sum(ifelse(class %in% industrial_classes, fmv, 0), na.rm = TRUE),\n    fmv_commercial = sum(ifelse(class %in% commercial_classes, fmv, 0), na.rm = TRUE),\n    \n    current_rate_avg = mean(tax_code_rate),\n    avg_C2_bill_noexe = mean(ifelse(between(class,200,299) & all_exemptions == 0, (final_tax_to_dist + final_tax_to_tif), NA), na.rm=TRUE),\n    avg_C2_bill_withexe = mean(ifelse(between(class,200,299) & all_exemptions &gt; 0, (final_tax_to_dist + final_tax_to_tif), NA), na.rm=TRUE),\n    av_taxed = sum(taxed_av, na.rm = TRUE),\n    untaxable_value_av = sum(untaxable_value_av, na.rm=TRUE),\n    av = sum(av),\n    eav_taxed = sum(taxed_av*eq_factor), \n    eav_untaxable = sum(untaxable_value_eav, na.rm=TRUE),\n    fmv = sum(fmv, na.rm=TRUE),\n    pins_in_class = n(),\n    all_exemptions = sum(all_exemptions),   # in EAV\n    abatements = sum(exe_abate),            # in EAV\n    eav_incents_inTIFs = sum(ifelse(incent_prop == 1 & in_tif == 1, taxed_eav, 0), na.rm = TRUE),\n\n    final_tax_to_dist = sum(final_tax_to_dist), ## Amount of Total Levy\n    final_tax_to_tif = sum(final_tax_to_tif),\n    eq_av = sum(eq_av)) %&gt;%\n  mutate(\n   reducedEAV_comind_incents =  new_TEAV_noIncents - eav_taxed,\n   reducedEAV_commerc_incents  = new_TEAV_noCommercIncents - eav_taxed,\n\n   reducedEAV_indust_incents  = new_TEAV_noIndustIncents - eav_taxed,\n    # Absolute maximum TEAV: No Exemptions, no abatements, no TIFS, no Incentive properties\n    # Commercial and industrial assessed at 25%\n    TEAV_max = eav_taxed + all_exemptions + abatements + forgone_TIF_EAV +    reducedEAV_comind_incents,\n\n    # no exemptions or incentive classifications:\n    TEAV_neither = eav_taxed + all_exemptions + reducedEAV_comind_incents,\n\n    rate_noExe = final_tax_to_dist / new_TEAV_noExemps,\n    rate_noCommercInc = final_tax_to_dist / new_TEAV_noCommercIncents,\n    rate_noIndustInc = final_tax_to_dist / new_TEAV_noIndustIncents,\n\n    rate_noAbate = final_tax_to_dist / new_TEAV_noAbates,\n    rate_noInc = final_tax_to_dist / new_TEAV_noIncents ,\n    rate_neither = final_tax_to_dist / TEAV_neither, \n    rate_noTIFs = final_tax_to_dist / (eav_taxed + forgone_TIF_EAV),\n    rate_vacant = final_tax_to_dist / new_TEAV_vacant_props,\n    rate_lowest = final_tax_to_dist / TEAV_max ,\n    rate_current = final_tax_to_dist / eav_taxed,\n    change_noInc = rate_current - rate_noInc,\n\n    forgonerev_noExe = rate_noExe * all_exemptions,\n    forgonerev_noAbate = rate_noAbate * (new_TEAV_noAbates - eav_taxed),\n    forgonerev_noIncents = rate_noInc * (new_TEAV_noIncents - eav_taxed),\n    forgonerev_noCommercIncents = rate_noInc * (new_TEAV_noCommercIncents - eav_taxed),\n\n    forgonerev_noIndustIncents = rate_noInc* (new_TEAV_noIndustIncents - eav_taxed),\n\n    forgone_noExe_or_Inc = rate_neither * (TEAV_neither - eav_taxed),\n    forgonerev_noTIFs = rate_noTIFs * forgone_TIF_EAV,\n    forgonerev_vacant = rate_vacant * (new_TEAV_vacant_props - eav_taxed),\n    forgonerev_maxTEAV = rate_lowest * (TEAV_max - eav_taxed)\n)\n\ncook_ratechange %&gt;%\n mutate(across(contains(\"rate\"), scales::percent, accuracy = .01),\n        change_noInc = round(change_noInc*100, digits = 2)) %&gt;%\n\nselect(\"Current Composite Rate\" = rate_current, \n       \"Rate if Incentive Props LoA is 25%\" = rate_noInc, \n       \"Tax Rate Change\" =  change_noInc) %&gt;% \n\n  flextable()\n\n\nCurrent Composite RateRate if Incentive Props LoA is 25%Tax Rate Change8.25%8.04%0.22\n\n\n\n\nCode\ncook_ratechange %&gt;% \nselect(\"Commerc. EAV w/Incent\" = reducedEAV_commerc_incents, \"Indust EAV w/ Incent\" = reducedEAV_indust_incents,\n       \"CommInd EAV w/ Incent\" = reducedEAV_comind_incents,\n       \"Homeowner Exemption Exempt EAV\" = all_exemptions) %&gt;% flextable()\n\n\nCommerc. EAV w/IncentIndust EAV w/ IncentCommInd EAV w/ IncentHomeowner Exemption Exempt EAV1,524,937,5724,354,378,0725,879,315,64415,269,598,486\n\n\n$15 Billion EAV is tax exempt due to homeowners exemptions. All incentive properties combined only have $4 billion EAV that is tax exempt (due to the decreased level of assessment which results in less AV, and therefore, EAV)\n\nEstimates for Revenue Shifted to Non-Incentive Class Properties\n\nTake new tax rate and apply it to new taxbase.\n\n\n\nCode\ncook_ratechange %&gt;% \nselect(contains(\"forgonerev\") ) %&gt;% flextable()\n\n\nforgonerev_noExeforgonerev_noAbateforgonerev_noIncentsforgonerev_noCommercIncentsforgonerev_noIndustIncentsforgonerev_noTIFsforgonerev_vacantforgonerev_maxTEAV1,178,370,5981,223,676472,613,310122,583,279350,030,0300-333,563,3791,593,234,186\n\n\n\n\nNaive Revenue Shift\nUses old current tax rate and multiplies it by the new taxbase.\n\n\nCode\npin_data %&gt;%\n  filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\",\n                             \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\",\n                             \"Deer Park\", \"Deerfield\")) %&gt;% \n  filter(!agency_num %in% cross_county_lines & \n           !is.na(clean_name) & clean_name!=\"Unincorporated\" )  %&gt;%\n  summarize(\n    # for homestead exemptions\n    mostnaive_forgone_tax_amt_exe = sum(tax_amt_exe),    \n  \n    # more accurate but still uses current tax rate instead of recalculated tax rate:\n    forgonerev_from_exemptions  = sum(ifelse(class &gt;= 200 & class &lt; 300,\n          (((av*eq_factor) - (taxed_av*eq_factor))) * tax_code_rate/100, 0), na.rm=TRUE),\n\n   # amount of EAV from taxing an additional 15% of the AV if incentive properties didn't exist\n   # using current tax rate for each property at the tax code level\n    forgonerev_from_comind_incents  = sum(ifelse(class &gt;= 600 & class &lt; 900,\n          (((taxed_av*eq_factor)*0.25 - (taxed_av*eq_factor))) * tax_code_rate/100, 0), na.rm=TRUE),\n\n    forgonerev_commerc_incents  = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% commercial_classes,\n          (((taxed_av*eq_factor)*0.25 - (taxed_av*eq_factor))) * tax_code_rate/100, 0), na.rm=TRUE),\n\n    forgonerev_indust_incents  = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% industrial_classes,\n         (((taxed_av*eq_factor)*0.25 - (taxed_av*eq_factor))) * tax_code_rate/100, 0), na.rm=TRUE),\n   \n    #  forgonerev_noTIFs = rate_current/100 * ,\n       # TIF increment above the frozen EAV\n    forgonerev_TIFs = sum(fmv_tif_increment * loa * eq_factor*tax_code_rate/100, na.rm=TRUE),\n   \n   # if incentive properties had no tax value (i.e. owners left, or fully tax exempt)\n   # also equal to the current amount collected from incentive properties\n     forgonerev_vacant = sum(ifelse(class &gt;= 600 & class &lt; 900,  taxed_av*eq_factor * tax_code_rate/100, 0), na.rm = TRUE)\n   )",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "incentives_report_2023.html#change-in-composite-property-tax-rate-due-to-incentives-and-other-policy-scenarios",
    "href": "incentives_report_2023.html#change-in-composite-property-tax-rate-due-to-incentives-and-other-policy-scenarios",
    "title": "Tax Year 2023",
    "section": "Change in Composite Property Tax Rate Due to Incentives and other Policy Scenarios",
    "text": "Change in Composite Property Tax Rate Due to Incentives and other Policy Scenarios",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  },
  {
    "objectID": "incentives_report_2023.html#tables---difference-in-composite-tax-rates",
    "href": "incentives_report_2023.html#tables---difference-in-composite-tax-rates",
    "title": "Tax Year 2023",
    "section": "Tables - Difference in Composite Tax Rates",
    "text": "Tables - Difference in Composite Tax Rates\n\n\nCode\nmuni_ratechange_sliced &lt;- muni_ratechange %&gt;% \n  # mutate(change_noInc = rate_current - rate_noInc,\n  #   change_neither = rate_current - rate_neither,\n  #   change_noTIF = rate_current - rate_noTIFs,\n  #   change_noExe = rate_current - rate_noExe,\n  #   change_vacant = rate_current - rate_vacant,\n  #   change_lowest = rate_current - rate_lowest\n  # )  %&gt;%\n     mutate(across(contains(\"rate_\"), round, digits = 2))|&gt;\n  select(clean_name, rate_current, rate_noInc, change_noInc) %&gt;% \n  arrange(desc(change_noInc) ) %&gt;%\n  mutate(across(c(rate_current, rate_noInc, change_noInc), round, digits=2)) %&gt;%\n  mutate(change_noInc = abs(round(change_noInc, digits = 2)) ) %&gt;% \n  slice(c(1:5, 58:62, 115:119)) \n\nmuni_ratechange_sliced %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", rate_current = \"Current Comp.\\nTax Rate\", rate_noInc = \"Tax Rate if No\\nIncent. Class.\",\n                    change_noInc = \"Rate Change\") %&gt;%\n  bold(i = 8) %&gt;%\n  add_footer(\"There are 26 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\", top = FALSE) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\nTable 13.1: Composite Tax Rate Change from hypothetical scenario of taxing incentive property at 25% of their FMV instead of 10% of their FMV. There are 26 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\n\n\n\nMunicipalityCurrent Comp.Tax RateTax Rate if NoIncent. Class.Rate ChangeMarkham0.200.130.06Mc Cook0.110.060.04North Lake0.110.080.04Bedford Park0.110.080.03Ford Heights0.230.200.03Countryside0.070.070.00Oak Forest0.110.110.00Chicago Ridge0.110.110.00Elgin0.100.090.00Glenview0.070.070.00La Grange Park0.090.090.00Merrionette Park0.100.100.00Morton Grove0.090.090.00Norridge0.080.080.00North Riverside0.090.090.00\n\n\n\n\n\n\n\nCode\nmuni_ratechange %&gt;% \n  select(clean_name, change_noInc) %&gt;% \n mutate(change_noInc = round(change_noInc*100, digits = 1)) %&gt;%\n  filter(clean_name != \"Unincorporated\") %&gt;%\n  left_join(nicknames) %&gt;%\n  full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) %&gt;%\n  ggplot(aes(fill = change_noInc)) +\n  geom_sf(aes(geometry = geom), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    low = \"lightblue\", high = \"darkblue\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\n    na.value = \"gray50\",\n    n =4,\n    name = \"Tax Rate Change\\nin Percentage Pts\") +\n  \n   geom_sf_pattern(data = no_incentives, aes(geometry = geom), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\nFigure 13.1: Hypothetical change in composite tax rate if all value that currently receives incentive classification became assessed at 25%.\n\n\n\n\n\n\n\n\n\n\nCode\nmuni_ratechange %&gt;% \n  select(clean_name, change_neither) %&gt;% \n mutate(change_neither = round(change_neither*100, digits = 1)) %&gt;%\n  filter(clean_name != \"Unincorporated\") %&gt;%\n  left_join(nicknames) %&gt;%\n  full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) %&gt;%\n  \n  ggplot(aes(fill = change_neither)) +\n  geom_sf(aes(geometry = geom), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    low = \"black\", high = \"brown\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\n    na.value = \"gray50\",\n    n = 4,\n    name = \"Tax Rate Change\\nin Percentage Pts\") +\n  geom_sf_pattern(data = no_incentives, aes(geometry = geom), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\nFigure 13.2: Hypothetical change in composite tax rate if all value that currently receives incentive classification became assessed at 25% and exempt EAV from GHE became taxable.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n filter(change_noInc &gt;0) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current)\n\n# make dot graph\nmuni_ratechange %&gt;% \n filter(change_noInc &gt; .007) %&gt;%\n  select(clean_name, rate_current, rate_noInc) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \"rate_noInc\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" \n             )+\n    # scale_color_manual(palette=\"Blues\", \n    #                  labels = c(\"Current Rate\", \"No Incentives\")#,  \n    #               #   values = c(\"#A6CEE3\", \"#1F78B4\" )\n    #                  )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette=\"Paired\", labels = c(\"Incentives\", \"No Incentives\"), direction = 1)+\n\n  \n  labs(title = \"Difference in Composite Tax Rate if Assessed at 25%\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 13.3: Change in tax rate if incentive properties were assessed at 25% of their FMV instead of their reduced level of assessment.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; 0) %&gt;% \n  arrange(change_noInc) %&gt;%\n  select(clean_name, change_noInc) %&gt;%\n  distinct()\n\n\n# make dot graph\nmuni_ratechange %&gt;% \n  filter(change_noInc &gt; .005) %&gt;%\n  filter(change_noInc &gt; 0) %&gt;%\n\n  select(clean_name, rate_current, rate_noInc, change_noInc) %&gt;% \n  distinct() %&gt;%\n  pivot_longer(c(\"rate_current\", \"rate_noInc\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  left_join(order) %&gt;%\n    filter(change_noInc &gt; 0 ) %&gt;%\n  mutate(clean_name = if_else(clean_name == \"Mc Cook\", \"McCook\", clean_name)) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, change_noInc)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette=\"Paired\", labels = c(\"Incentives\", \"No Incentives\"), direction = 1)+\n  \n  labs(title = \"Difference in Composite Tax Rate if Assessed at 25%\",\n       subtitle = \"Ordered by Comp. Rate Change\", x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 13.4: Change in Tax Rate from use of Incentives. Ordered by amount of change in the composite tax rate. Only shows municipalities that had more than 1/2 percentage point change in tax rate.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; 0) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current) %&gt;% distinct()\n\n# make dot graph\nmuni_ratechange %&gt;% \n  filter(change_noInc &gt; .005) %&gt;%\n  select(clean_name, rate_current, rate_noInc, #rate_neither, \n         rate_vacant, rate_noExe) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \n                 \"rate_noInc\", \n                 \"rate_vacant\", \n                 \"rate_noExe\"# ,\n                #  \"rate_neither\"\n), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\nlegend.position = \"bottom\",\nplot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette = \"RdGy\",\n                    labels = c(\"Current Rate\", \n                             #  \"No Exemps & LoA is 25%\",\n                               \"No Exemptions\", \n                               \"No Incentives:\\nLoA 25%\",\n                               \"Incententive Classification\\nLoA = 0%\"\n                    ), \n                    direction = -1)+\n  labs(title = \"Composite Tax Rate Scenarios\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", \n       x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 13.5: Only shows municipalities that had more than 1/2 percentage point change in tax rate.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; 0) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current) %&gt;% distinct()\n\n# make dot graph\nmuni_ratechange %&gt;% \n  filter(change_noInc &gt; 0) %&gt;%\n  select(clean_name, rate_current, rate_noInc, #rate_neither, \n         rate_vacant, rate_noExe) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \n                 \"rate_noInc\", \n                 \"rate_vacant\", \n                 \"rate_noExe\"# ,\n                #  \"rate_neither\"\n), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\nlegend.position = \"bottom\",\nplot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette = \"RdGy\",\n                    labels = c(\"Current Rate\", \n                             #  \"No Exemps & LoA is 25%\",\n                               \"No Exemptions\", \n                               \"No Incentives:\\nLoA 25%\",\n                               \"Incententive Classification\\nLoA = 0%\"\n                    ), \n                    direction = -1)+\n  labs(title = \"Composite Tax Rate Scenarios\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", \n       x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 13.6: Same as figure above but includes all municipalities that had a taxrate change from altering the level of assessment for incentive class properties.\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; .005) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current) %&gt;% distinct()\n\n# make dot graph\nmuni_ratechange %&gt;% \n filter(change_noInc &gt; .005) %&gt;%\n  select(clean_name, rate_current, rate_noInc, rate_vacant) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \n                 \"rate_noInc\", \n                 \"rate_vacant\"\n                 ), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\nlegend.position = \"bottom\",\nplot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette = \"Greys\", direction = -1,\n                    labels = c(\"Current Rate\", \n                             #  \"No Exemps & LoA is 25%\",\n                             #  \"If no Exemptions\", \n                               \"No Incentive Classes: \\nLoA = 25%\",\n                               \"Incentive Classification\\nLoA = 0%\"\n                    )\n)+\n  labs(title = \"Composite Tax Rate Scenarios\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", \n       x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\nFigure 13.7: Only shows municipalities that had more than 1/2 percentage point change in tax rate.\n\n\n\n\n\n\n\n\n\n\nCode\nlibrary(ggrepel)\n# make dot graph\nmuni_ratechange %&gt;% \n  filter( clean_name ==\"Markham\" ## | clean_name == \"Matteson\"\n          ) %&gt;%\n  select(clean_name, rate_current, rate_noInc, rate_neither, rate_vacant, rate_noExe) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \"rate_noInc\", \n                  \"rate_vacant\", \"rate_noExe\",\n                  \"rate_neither\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  geom_text_repel(aes(x=tax_rate),\n                  hjust = 0,\n                  vjust = -1,\n                  min.segment.length = Inf,\n                  size = 3,\n                  angle = 30,\n                  label = c(\"Current Rate\", \"If LoA 25%\" ,\n                            \"If Vacant\" , \"If no Exemps\",\n                            \"No Exemps & LoA is 25%\") )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA),\n    legend.position = \"none\"  )+\n  scale_fill_manual(\n    values = c(\"#BDD7E7\", \"#6BAED6\", \"#3182BD\", \"#EFF3FF\",  \"#08519C\")) +\n  scale_x_continuous(limits = c(.17, .35)) + \n  scale_y_discrete(\n    expand = expand_scale(mult = c(.1, 1)) ,\n           #        limits = c(\"Markham\")#, breaks = \"Markham\"\n                   )  + \n  labs(\n    x = \"Composite Tax Rate (%)\", \n    y = \"\")",
    "crumbs": [
      "Incentives Report",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Tax Year 2023</span>"
    ]
  }
]