[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Property Taxes in Cook County",
    "section": "",
    "text": "Background Information\nThe following materials are a work in progress based on property tax data released by the Cook County Assessor’s Office (CCAO) and other publicly available data sources. Much of the incorporated data and analysis was prepared, in part, for Cook County’s Property Tax Working Group. This data and analysis accompanies and supplements information in the Exemption White Paper and Addendum, available on GFRC’s website.\nWe are especially indebted to Dan Snow, Rob Ross, and Mike Wu at CCAO for the development and release of PTAXSIM, a package in the R programming language which provides the public with a trove of historical property tax data, without which this analysis would not be possible.\nWe would also like to thank Professors Merriman, Weber, Carroll, and Drucker from UIC’s College of Urban Planning and Public Policy for their support as well as the Chicago Metropolitan Agency for Planning (CMAP) for providing supplemental and background analysis.\nAll data was originally posted by the Cook County Assessor’s Office (CCAO).\nTax data for Cook County was gathered using CCAO’s ptaxsim package and corresponding database.\nAll summarizing of data was done by Research Assistants working for the Government Finance Research Center at the University of Illinois Chicago.\nIf ignoring TIFs, the residential share of EAV is:\n\\[\nResidentrialShare = \\frac{TaxableEAV_{residential} - ExemptEAV_{residential}} {TaxableEAV}\n\\]\n\\[\nResidentialShare = \\frac{1-\\lambda}{1-\\lambda-\\psi}\n\\]\n\\[\nTaxableBase = AV_{equalized} - TIFincrement - EAV_{exempt}\n\\]\n\\[\nTIFincrement = AV_{equalized} - EAV_{frozen}\n\\]\nThe aggregate, or composite, tax rate is the sum of the individual taxing agency tax rates, or \\(\\sum(rate_{agency})\\), for all taxing agencies that tax a location. Each unique combination of taxing agencies is assigned a tax code by the assessor’s office.\n\n\nExemption Report Summary of Findings\nUIC’s research led to several main findings:\n\nWhile historical records provide clear reasons for the adoption of homeowner exemptions as a policy tool, current stakeholders throughout Cook County government cannot agree on the public purpose of homestead exemptions, a problem that flows through to properly acknowledging relevant costs, benefits, and stakeholders. Indeed, given divergent policy goals by different stakeholders, any construct of “effectiveness” would be challenging to measure.\nCook County’s property tax system allocates revenue to local governments based on each property owners’ share of that jurisdiction’s total tax base.\nCC’s system of dividing the levy among property owners creates a “zero-sum” game where one taxpayer’s bill must necessarily increase for another taxpayer’s bill to decrease.\nHomeowner exemptions, designed to provide tax release to certain classes of homeowners, decrease property tax bills through a flat reduction in the taxpayer’s contribution to the tax base in EAV.\nExemptions also reduce the tax base, thereby driving tax rates up for all taxpayers (even those that receive exemptions). This push-pull effect causes the true amount of tax liability reduction to be sometimes significantly lower than suggested by government tax bills.\nExemptions are theoretically and practically progressive, bringing greater tax relief to those with the lowest ability to pay (as imperfectly measured by their property’s value).\nAnomalous outcomes can occur due to Cook County’s socio-economic homogeneity. A handful of taxpayers would benefit more from exemptions’ elimination (and the resulting decrease in tax rate) than from the exemption itself.\nThere is no obvious solution to the detrimental effects of exemptions that are endogenous to the property tax system. Any “fix” must come from other revenue.\n\nWe have also appended an explanation of our data sources and how we prepared that data for analysis as well as a mathematical appendix of tedious equations.\n\n\nIncentive Report Summary of Findings\nWork in Progress!",
    "crumbs": [
      "Background Information"
    ]
  },
  {
    "objectID": "exemption_report_content.html",
    "href": "exemption_report_content.html",
    "title": "1  The Use and Effects of Homestead Exemptions in Cook County",
    "section": "",
    "text": "1.1 Composite Tax Rates for Municipalities\nCode\nmuni_sums &lt;- read_csv(\"../Output/ptaxsim_muni_level_2006-2021.csv\") %&gt;% \n  filter(year == 2021) %&gt;% left_join(nicknames)\n\nMuniLevel_CompRates &lt;- muni_sums %&gt;% \n  select(clean_name, cur_comp_muni_rate, new_comp_muni_rate, tif_share, zero_bills, final_tax_to_dist) %&gt;%\n  mutate(current_rate_avg = cur_comp_muni_rate/100,\nnew_comp_muni_rate = new_comp_muni_rate / 100 ,\nrate_change = current_rate_avg - new_comp_muni_rate) %&gt;%\n  select(clean_name, rate_change, current_rate_avg, new_comp_muni_rate, final_tax_to_dist) %&gt;% arrange(desc(rate_change))\n\ndatatable(MuniLevel_CompRates, rownames = FALSE,\n          colnames = c('Municipality' = 'clean_name', 'Composite Tax Rate Change'='rate_change', 'Current Comp. Rate' = 'current_rate_avg', 'Hypothetical Rate' = 'new_comp_muni_rate', \n                       #'%Rev to TIF' = 'tif_share', 'Count of $0 Tax Bills' = 'zero_bills', \n                       'Composite Levy' = 'final_tax_to_dist'),\n          caption = \"Table 1: Current and Hypothetical Composite Tax Rates if GHE $0\") %&gt;%\n  formatPercentage(c('Current Comp. Rate', 'Hypothetical Rate', \n                    # '%Rev to TIF'\n                    'Composite Tax Rate Change'\n                     ), \n                   digits = 2) %&gt;%  \n  formatCurrency('Composite Levy', digits = 0)",
    "crumbs": [
      "Reports",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>The Use and Effects of Homestead Exemptions in Cook County</span>"
    ]
  },
  {
    "objectID": "exemption_report_content.html#tax-burden-shift-from-current-ghe",
    "href": "exemption_report_content.html#tax-burden-shift-from-current-ghe",
    "title": "1  The Use and Effects of Homestead Exemptions in Cook County",
    "section": "1.2 Tax Burden Shift from Current GHE",
    "text": "1.2 Tax Burden Shift from Current GHE\n\n\n\nCode\nMC_sums &lt;- read_csv(\"../Output/ptaxsim_muni_MC_2006-2021.csv\") %&gt;% \n # rename_all(~str_replace_all(., \"muni_mc_\",\"\")) %&gt;%\n  filter(year == 2021)  %&gt;% \n  left_join(nicknames)\n\nMC_burden &lt;- MC_sums %&gt;% \n  mutate(hyp_taxable_eav = current_taxable_eav + exe_homeowner,\n         class_taxes_current = current_taxable_eav * (cur_comp_muni_rate/100)\n     ) %&gt;%\n  group_by(clean_name) %&gt;%\n  mutate(muni_eav = sum(eav),\n         muni_levy = sum(final_tax_to_dist),\n       hyp_muni_taxableEAV = sum(new_taxable_eav)\n  ) %&gt;%\n  ungroup() %&gt;%\n  mutate(new_comp_rate = muni_levy / hyp_muni_taxableEAV,\n         class_taxes_hyp = hyp_taxable_eav * (new_comp_rate),\n         pct_eav = eav / muni_eav,\n         # pct_taxburden_current = total_bill_current / muni_levy,\n         # pct_taxburden_ghe0 = new_taxable_eav / muni_levy,\n         pct_taxburden_current = class_taxes_current / muni_levy,\n         pct_taxburden_ghe0 = class_taxes_hyp / muni_levy,\n         burden_shift = (pct_taxburden_current - pct_taxburden_ghe0)*100)\n\n\ncurrent_burden_c2 &lt;- MC_burden %&gt;% \n  filter(major_class_code == 2) %&gt;% \n  select(clean_name, pct_eav, burden_shift,  pct_taxburden_current, pct_taxburden_ghe0) %&gt;% arrange(pct_eav)\n\n\ndatatable(current_burden_c2, rownames = FALSE,\n          colnames = c('Municipality' = 'clean_name', 'Burden Shift, Pct Pt Change' = 'burden_shift', \"C2 EAV/Muni EAV\" = 'pct_eav', 'Current Tax Burden\\nC2 Tax Collected / Muni Levy' = 'pct_taxburden_current', \"Hypothetical Tax Burden\\nHyp. C2 Tax Collected / Muni Levy\" = 'pct_taxburden_ghe0'),\n          caption = \"Table 2: Current Share of Taxable EAV and Share of Levy Paid by Class 2 Properties\"\n           ) %&gt;%\n  formatPercentage(c(2,4,5), digits = 2) %&gt;%\n  formatRound(c(3), digits = 2)\n\n\n\n\n\n\n\n\nCode\nMC_burden %&gt;%\n     # mutate(burden_current = ifelse(burden_current&gt;1, 1, burden_current)) %&gt;%\n\n     filter(major_class_code == 2) %&gt;%\n  mutate(agency_name = ifelse(agency_name == \"TOWN CICERO\", \"CITY OF CICERO\", agency_name) ) %&gt;%\n  full_join(muni_shp, by = c(\"agency_name\" = \"AGENCY_DESC\")) %&gt;%\n\n  ggplot(aes(fill = pct_taxburden_current)) + \n  geom_sf(aes(geometry = geometry), color = \"black\") + \n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  # scale_fill_gradientn(\n   scale_fill_stepsn(colors = c(\"#ffffcc\",\"#a1dab4\" ,\"#41b6c4\",\"#2c7fb8\", \"#253494\"),\n                        show.limits=TRUE, \n                     limits = c(0,1),\n                     na.value = \"gray70\",\n                     n.breaks = 6,\n                        name = \"Burden with \\nExemptions\", \n                     labels = scales::percent\n                     \n                    )+\n  labs(title = \"Current share of property tax burden\", \n       subtitle = \"for Class = 2 Property Types\")",
    "crumbs": [
      "Reports",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>The Use and Effects of Homestead Exemptions in Cook County</span>"
    ]
  },
  {
    "objectID": "incentive_report_content.html",
    "href": "incentive_report_content.html",
    "title": "2  Supporting Content for Cook County C&I Report",
    "section": "",
    "text": "3 Data Preparation\nCode\nlibrary(tidyverse)\nlibrary(DT)        # for interactive html tables on website\nlibrary(flextable) # best for exporting to word or PDF files.\n\n\nknitr::opts_chunk$set(warning = FALSE, message = FALSE)\n\nset_flextable_defaults(theme_fun = theme_vanilla, \n                       padding = 2,\n                       line_spacing = 1,\n                       big.mark = \",\",\n                       )\n\noptions(DT.options = list())\n\nFitFlextableToPage &lt;- function(ft, pgwidth = 6){\n\n  ft_out &lt;- ft %&gt;% autofit()\n\n  ft_out &lt;- width(ft_out, width = dim(ft_out)$widths*pgwidth /(flextable_dim(ft_out)$widths))\n  return(ft_out)\n}\nCode\n# all pins for 2022\nptax_pins &lt;- read_csv(\"../Output/Dont_Upload/0_joined_PIN_data_2022.csv\") %&gt;%\n  mutate(class = as.numeric(class)) %&gt;%         # Allows for joining later\n    select(-c(propclass_1dig:av.y))\n\n\n# Workaround for identifying more project IDs. \n# Used Appeal ID to create unique identifier to group PINs.\nbor &lt;- read_csv(\"../Output/borappeals.csv\") %&gt;% \n  mutate(project_appellant = paste(project_id, sep = \"-\", appellant))\n# modelsummary::datasummary_skim(bor)\n\n\n# Cleaned PIN-Project list after cleaning the commercial valuatoin dataset found online. \n# Another temporary work-around until we (maybe) have full keypin list:\nproj_xwalk &lt;- read_csv(\"../Output/all_keypins.csv\")               \n# all commercial valuation properties but made with not-quite-clean data from commercial valuation dataset on Cook County Data Portal (which was made from combining the Methodology worksheets) \n# Values are also only the FIRST PASS assessments and do not include appeals or changes in values\n\n# Join project IDs to PINs:\nptax_pins &lt;- ptax_pins %&gt;% left_join(proj_xwalk)\n\nnicknames &lt;- readxl::read_excel(\"../Necessary_Files/muni_shortnames.xlsx\")\n\n#  create tc_muninames from helper file:\n# source(\"../scripts/helper_tc_muninames_2022.R\")\n#tc_muninames &lt;- tc_muninames %&gt;%  select(-year)\n\n# add muni names by joining tax code info:\n# ptax_pins &lt;- ptax_pins %&gt;% \n#   mutate(tax_code_num = as.character(tax_code_num)) %&gt;%\n#   left_join(tc_muninames)\n\n\n\n# original class_dict variables already in 0_joined data\n# but I do want the new-ish variables I created to be brought in:\nclass_dict &lt;- read_csv(\"../Necessary_Files/class_dict_expanded.csv\") %&gt;%\n  select(class_code, comparable_props, Alea_cat, incent_prop)\n\ncross_county_lines &lt;- c(\"030440000\", \"030585000\", \"030890000\", \"030320000\", \"031280000\",\n                        \"030080000\", \"030560000\", \"031120000\", \"030280000\", \"030340000\",\n                        \"030150000\",\"030050000\", \"030180000\",\"030500000\", \"031210000\")\n\n\nptax_pins &lt;- ptax_pins %&gt;% \n  left_join(class_dict, by =  c(\"class\" = \"class_code\")) %&gt;%\n  mutate(clean_name = ifelse(is.na(clean_name), \"Unincorporated\", clean_name)) %&gt;%\n  filter(!agency_num %in% cross_county_lines)\n\n# BOR data source shortfall: We only have the data if they appeal!\n\nbor_pins &lt;- bor %&gt;% \n  group_by(pin) %&gt;% \n  arrange(desc(tax_year)) %&gt;%\n  summarize(pin = first(pin),              # grabs first occurrence of unique PIN\n            class_bor = list(unique(class)),\n            appellant = first(appellant),\n            project_id = first(project_id), \n            timesappealed = n() ) %&gt;%\n  mutate(proj_appellant = paste(project_id, \"-\", appellant))\n\nptax_pins &lt;- ptax_pins %&gt;% left_join(bor_pins, by = \"pin\")\n\n# now do it the other way and compare\n\nptax_pins &lt;- ptax_pins %&gt;% \n  mutate( both_ids = project_id,\n          both_ids = ifelse(is.na(both_ids), keypin, both_ids),\n          both_ids = ifelse(is.na(both_ids) & between(class, 300, 899), pin, both_ids))\n\neq2022 &lt;- 2.9237 #example of eq factor proliferation\n\nincentive_majorclasses &lt;- c(\"6\", \"7A\", \"7B\", \"8A\", \"8B\")\n\ncommercial_classes &lt;- c(401:435, 490, 491, 492, 496:499,\n                        500:535,590, 591, 592, 597:599, \n                        700:799,\n                        800:835, 891, 892, 897, 899)  \n\nindustrial_classes &lt;- c(480:489,493, \n                        550:589, 593,\n                        600:699,\n                        850:890, 893\n                        )\n\nptax_pins &lt;- ptax_pins %&gt;% \n  mutate(class_1dig = str_sub(class, 1,1),\n         class_group = case_when(\n          (class_1dig == 5 & class %in% commercial_classes) ~ \"5A\",\n          (class_1dig == 5 & class %in% industrial_classes) ~ \"5B\",\n          class_1dig == 7 &  class &lt; 742 ~ \"7A\",\n          class_1dig == 7 &  class &gt;= 742 ~ \"7B\",\n          (class_1dig == 8 & class %in% commercial_classes ) ~ \"8A\",\n          (class_1dig == 8 & class %in% industrial_classes ) ~ \"8B\",\n          TRUE ~ as.character(class_1dig))) %&gt;%\n  mutate(\n    # taxing district revenue = taxable eav * tax rate so rearrange the formula:\n    taxed_eav = final_tax_to_dist / tax_code_rate*100,\n    \n    total_value_eav = (final_tax_to_dist + final_tax_to_tif)/ tax_code_rate * 100 + all_exemptions + abatements,\n    \n    exempt_eav_inTIF = ifelse(in_tif == 1, all_exemptions, 0),\n    \n    exempt_eav = all_exemptions + abatements,\n    \n    taxed_av =  taxed_eav / eq2022, # current value that taxing agencies can tax for their levies\n    \n    ## taxable AV = equalized assessed value net TIF increments, gross exemptions. \n    ## Used for calculating untaxable value further below\n   # taxable_av = (final_tax_to_dist / tax_code_rate *100 + all_exemptions + abatements)/ eq2022, \n  \n    # taxable_eav_fromincents =  ifelse(class &gt;=600 & class &lt; 900, taxable_av * eq2022, 0),\n\n      ## untaxable value = exempt EAV from abatements and exemptions + TIF increment\n    untaxable_value_eav = all_exemptions + abatements + \n      ## TIF increment EAV above frozen EAV, which becomes TIF revenue\n      (final_tax_to_tif /  tax_code_rate*100) +\n      \n      ## difference between 25% and reduced level of assessment for incentive class properties. Excludes TIF increment when calculating the difference! \n      ifelse(between(class, 600, 899), \n             (taxed_av/loa*0.25 - taxed_av)*eq2022, 0),\n   \n    untaxable_incent_eav = ifelse(between(class, 600, 899), \n             (taxed_av/loa*0.25 - taxed_av)*eq2022, 0),\n   \n    #  manually adjust untaxable value of class 239 properties\n    untaxable_value_eav = ifelse(class == 239, \n                                 equalized_av-taxed_eav, untaxable_value_eav), \n    \n    untaxable_value_av = untaxable_value_eav / eq2022,\n    untaxable_value_fmv = untaxable_value_av / loa,\n\n    exempt_fmv = exempt_eav / eq2022 / loa, \n    \n    fmv_inTIF = ifelse(in_tif==1, av/loa, 0),\n   \n    fmv_tif_increment = ifelse(final_tax_to_tif &gt; 0, \n                               ((final_tax_to_tif / (tax_code_rate/100)) / eq2022 ) / loa, 0),\n    fmv_incents_inTIF = ifelse(between(class, 600, 899) & in_tif == 1, \n                               fmv, 0),\n    fmv_incents_tif_increment = ifelse(between(class, 600, 899) & final_tax_to_tif &gt; 0 , \n                               ((final_tax_to_tif / (tax_code_rate/100)) / eq2022 ) / loa, 0),\n    naive_rev_forgone =  untaxable_incent_eav * tax_code_rate/100) %&gt;%\n  select(tax_code, class, pin, fmv,\n         untaxable_value_fmv, fmv_inTIF, fmv_tif_increment, fmv, total_billed, final_tax_to_dist, final_tax_to_tif, tax_code_rate, eav, equalized_av, av, everything())\nCode\nptax_pins %&gt;% filter(naive_rev_forgone &gt; 0) %&gt;% select(pin, class, fmv, naive_rev_forgone, untaxable_incent_eav, taxed_eav, everything())\n\\[\\mbox{Total Value = Taxed Value + Untaxable Value}\\]\nwhere\n\\[\\mbox{Untaxable Value = TIF Increment + Exemptions + Abatements    \n+ Reduced Taxable Value from Lower Incentive Class Assessment Ratios}\\]\nwhere\n\\[\\mbox{Reduced Taxable Value from Incentive Classification Levels of Assessments}\\] \\[\\mbox{which then equals }  {0.25 \\ast EAV - \\approx0.10 \\ast EAV}\\]",
    "crumbs": [
      "Reports",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Supporting Content for Cook County C&I Report</span>"
    ]
  },
  {
    "objectID": "incentive_report_content.html#intensity-of-incentive-class-use",
    "href": "incentive_report_content.html#intensity-of-incentive-class-use",
    "title": "2  Supporting Content for Cook County C&I Report",
    "section": "5.1 Intensity of Incentive Class Use",
    "text": "5.1 Intensity of Incentive Class Use\n\n\nCode\nlanduse_incentshares &lt;- ptax_pins %&gt;% \n  filter(Alea_cat != \"Land\") %&gt;%\n  group_by(clean_name, Alea_cat) %&gt;% \n  summarize(pin_count = n(),\n            incent_PC = sum(ifelse(class &gt;=600 & class &lt;=900, 1, 0), na.rm=TRUE),\n            fmv_incentive = sum(ifelse(class &gt;=600 & class &lt;=900, fmv, 0), na.rm = TRUE),\n            project_count = n_distinct(keypin),\n            fmv_group = sum(fmv, na.rm=TRUE),\n          #   av=sum(av)\n) %&gt;%\n  mutate(\n    fmv_incentive = ifelse(fmv_incentive == 0, NA, fmv_incentive),\n    pct_incent = fmv_incentive / fmv_group,\n    pct_incent = ifelse(is.na(pct_incent), 0, pct_incent),\npct_incent = scales::percent(pct_incent)\n)  \n\nindust_top10 &lt;- landuse_incentshares %&gt;%\n  select(clean_name, Alea_cat, fmv_incentive, incent_PC) %&gt;% \n  filter(Alea_cat == \"Industrial\") %&gt;%\n  arrange(desc(fmv_incentive)) %&gt;%\n  head(10) %&gt;% \n  select(-Alea_cat)\n\nindust_top10 %&gt;%\n  flextable() %&gt;% \n  set_header_labels(clean_name = \"Municipality\", incent_PC = '# of Incent. PINs',\nfmv_incentive = \"FMV from Incentive\\nClass Properties\"\n) %&gt;%\n  set_table_properties( layout = \"autofit\", width = .75)\n\n\n\n\n\nMunicipalityFMV from IncentiveClass Properties# of Incent. PINsChicago1,567,026,390488Elk Grove Village927,465,940246Franklin Park659,839,06092North Lake605,255,79019Bedford Park519,319,250151Melrose Park350,581,75092Des Plaines338,782,66056Mc Cook294,324,82047Matteson288,028,3806Markham269,549,800641\n\n\n\nTable 5.1: Top 10 Municipalities using Industrial Incentives\n\n\n\n\n\n\nCode\ncommerc_top10 &lt;- landuse_incentshares %&gt;%\n  select(clean_name, Alea_cat, fmv_incentive, incent_PC) %&gt;% \n  filter(Alea_cat == \"Commercial\") %&gt;%\n  arrange(desc(fmv_incentive)) %&gt;%\n  head(10) %&gt;% \n  select(-Alea_cat)\n  \ncommerc_top10 %&gt;%\n  flextable() %&gt;% \n#align(align = \"right\", j = 2:4) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", \n                    incent_PC = '# of Incent. PINs', \n                    fmv_incentive = \"FMV from Incentive\\nClass Properties\"\n                    ) %&gt;%\n  set_table_properties( layout = \"autofit\", width = .75)\n\n\n\n\n\nMunicipalityFMV from IncentiveClass Properties# of Incent. PINsChicago2,861,809,300190Glenview72,809,4603Matteson57,273,63221Evergreen Park46,413,1806Calumet City40,095,92365South Holland36,050,27347Orland Park32,763,72010Lansing30,327,99527Chicago Heights28,510,43358Homewood25,847,94323\n\n\n\nTable 5.2: Top 10 Municipalities using Commercial Incentives\n\n\n\n\n\n5.1.1 Share of Total FMV with Incentive Classification\nCombined Industrial and Commercial FMV with incentive classification divided by total FMV in municipality. Not included in a table in the report.\nOne way of showing areas that have reduced their tax base significantly through the use of incentive classifications.\n\n\nCode\ntable_muni_percentages &lt;- munilevel %&gt;%   \nfilter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\", \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\", \"Deer Park\", \"Deerfield\"))\n\ncross_county_line &lt;- c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\", \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\", \"Deer Park\", \"Deerfield\")\n\n\n\n\nCode\n# table_muni_percentages %&gt;%\n#   select(clean_name, pct_fmv_w_incentclass) |&gt; \n#   arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n#     slice(c(1:10, 56:65, 110:119)) %&gt;%\n# \n#   #slice(c(1:10, 67:76, 116:125)) %&gt;%\n#   mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, digits =1)) %&gt;%\n#   \n#   flextable() %&gt;% \n#   border_remove() %&gt;%\n#   hline_top() %&gt;%\n#   hline(i = c(10,20)) %&gt;%\n#   \n#   set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV with\\nIncent. Class.\") %&gt;%\n# add_header_row(values = c(\"County Wide\", \"3.22%\"), top = FALSE) %&gt;%\n#   align(j = 2, align = \"right\") %&gt;%\n# \n#   set_table_properties( layout = \"autofit\")\n\n\n\ntable_muni_percentages %&gt;%\n  select(clean_name, pct_fmv_w_incentclass) |&gt; \n  arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n  #slice(c(1:5, 69:73, 121:125)) %&gt;%\n    slice(c(1:5, 58:62, 115:119)) %&gt;%\n\n  mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, digits = 2)) %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV\") %&gt;%\n  align(j = 2, align = \"right\") %&gt;%\nalign(j=2, align = \"right\", part = \"header\") %&gt;%\nset_table_properties( layout = \"autofit\")\n\n\n\n\n\nMunicipality% FMVMc Cook70.20%Bedford Park47.70%Markham40.50%North Lake39.20%Hodgkins35.10%Maywood1.50%Tinley Park1.50%Chicago1.40%Chicago Ridge1.40%Midlothian1.30%Western Springs0.00%Wilmette0.00%Winnetka0.00%Worth0.00%\n\n\n\nTable 5.3: Municipalities with the largest share of FMV property with incentive classification. Uses 2022 data.\n\n\n\n\n\n\nCode\nlibrary(sf)\nlibrary(ggpattern)\n\nmuni_shp &lt;- read_sf(\"https://gis.cookcountyil.gov/traditional/rest/services/politicalBoundary/MapServer/2/query?outFields=*&where=1%3D1&f=geojson\")\n#muni_shp  %&gt;% write_sf(\"./inputs/muni_shp.shp\")\n\n#muni_shp &lt;- read_sf(\"./inputs/muni_shp.shp\")\n\n\n\nno_incentives &lt;-  ptax_pins %&gt;% \n # filter(between(class, 600, 899)) %&gt;%\n  group_by(clean_name) %&gt;% \n  summarize(incent_pins = sum(ifelse(between(class, 600, 899), 1, 0))) %&gt;%\n  filter(incent_pins == 0) %&gt;% \n  distinct(clean_name)\n\n\nno_incentives &lt;- no_incentives %&gt;%\nleft_join(muni_shp, by = c(\"clean_name\" = \"MUNICIPALITY\")) \n\nmunilevel &lt;- munilevel %&gt;% left_join(nicknames, by = c(\"clean_name\" = \"shpfile_name\"))\n\n# unincorp_areas &lt;- muni_shp %&gt;% filter(!MUNICIPALITY %in% munilevel$clean_name)\n#anti_join(munilevel, muni_shp, by = c(\"clean_name\" = \"MUNICIPALITY\"))\n\n# unincorp_areas2 &lt;- muni_shp %&gt;% filter(!MUNICIPALITY %in% munilevel$shpfile_name)\n\n\n\n\nCode\ntable2 &lt;- ptax_pins %&gt;% \n    filter(Alea_cat != \"Land\") %&gt;%\n  group_by(clean_name, incent_prop) %&gt;%   # projects can be counted twice if the project has incentive and normal commercial/industrial prop classes.\n  summarize(pin_count = n(),\n         project_count = n_distinct(keypin), \n         av_adjusted=sum(ifelse(between(class, 600, 899), av*2.5, av)),\n         av=sum(av, na.rm=TRUE),\nfmv=sum(fmv)) \n\ndatatable(table2,\n          rownames= FALSE,\n          colnames = c('Municipality' = 'clean_name',   'Incentivized?' = 'incent_prop', 'PIN Count' = 'pin_count', 'Project Count' = 'project_count', 'Taxable AV' = 'av')) %&gt;%\n  formatCurrency(c('Taxable AV', 'av_adjusted'), digits = 0)\n\n\n\n\n\n\n\n\n\n\nTable 5.4: PINs and value summarized by if the property has an incentive class or not in a municipality. AV Adjusted is the amount of assessed value that could be taxed if the property were assessed at 25% instead of the lower level of assessment of approximately 10%.",
    "crumbs": [
      "Reports",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Supporting Content for Cook County C&I Report</span>"
    ]
  },
  {
    "objectID": "incentive_report_content.html#share-of-commercial-industrial-fmv-with-incentive-classification",
    "href": "incentive_report_content.html#share-of-commercial-industrial-fmv-with-incentive-classification",
    "title": "2  Supporting Content for Cook County C&I Report",
    "section": "5.2 Share of Commercial & Industrial FMV with Incentive Classification",
    "text": "5.2 Share of Commercial & Industrial FMV with Incentive Classification\n\n5.2.1 Tables\n\n\nCode\nmuni_incent_share &lt;- ptax_pins %&gt;% \n  # drop munis mostly outside of Cook and unincorporated PINs\nfilter(!agency_num %in% cross_county_line & !is.na(clean_name) ) %&gt;%\n\n  filter(Alea_cat == \"Industrial\" | Alea_cat == \"Commercial\") %&gt;%\n  group_by(clean_name, agency_num) %&gt;% \n  summarize(pin_count = n(),\n            incent_PC = sum(ifelse(class &gt;=600 & class &lt;900, 1, 0), na.rm=TRUE),\n            fmv_w_incent = sum(ifelse(class &gt;=600 & class &lt;900, fmv, 0), na.rm = TRUE),\n            project_count = n_distinct(keypin),\n            fmv_group = sum(fmv, na.rm=TRUE),\n            comind_fmv =sum(fmv, na.rm=TRUE),\n            pins_inTIF = sum(in_tif, na.rm=TRUE)) %&gt;%\n  mutate(\n    fmv_w_incent = ifelse(fmv_w_incent == 0, NA, fmv_w_incent),\n    pct_fmv_w_incent = fmv_w_incent/comind_fmv,\n    pct_fmv_w_incent = ifelse(is.na(pct_fmv_w_incent), 0, pct_fmv_w_incent)\n\n\n) \n\n# muni_incentshare_slice &lt;- muni_incent_share %&gt;%\n#   ungroup() %&gt;%\n#   mutate(pct_fmv_w_incentclass = fmv_w_incent/comind_fmv,\n#          pct_fmv_w_incentclass = ifelse(is.na(pct_fmv_w_incentclass), 0, pct_fmv_w_incentclass)) %&gt;%\n#   select(clean_name, pct_fmv_w_incentclass) |&gt; \n#   arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n#   mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, accuracy = 0.01) ) %&gt;%\n#   slice(c(1:10, 56:65, 110:119)) \n# \n# muni_incentshare_slice %&gt;%\n#   flextable() %&gt;% \n#   border_remove() %&gt;%\n#   hline_top() %&gt;%\n#   hline(i = c(10,20)) %&gt;%\n#   set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV with\\nIncent. Class.\") %&gt;%\n# add_header_row(values = c(\"County Wide\", \"3.25%\"), top = FALSE) %&gt;%\n#     align(j = 2, align = \"right\", part = \"all\") %&gt;%\n# \n# add_footer(\"There are 27 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\", top = FALSE) %&gt;%\n#   set_table_properties( layout = \"autofit\")\n\n\nmuni_incentshare_slice &lt;- muni_incent_share  %&gt;%\nungroup() %&gt;%\nfilter(!agency_num %in% cross_county_lines) %&gt;%\n  mutate(pct_fmv_w_incentclass = fmv_w_incent/comind_fmv,\n    pct_fmv_w_incentclass = ifelse(is.na(pct_fmv_w_incentclass), 0, pct_fmv_w_incentclass)) %&gt;%\n  select(clean_name, pct_fmv_w_incentclass) |&gt; \n  arrange(desc(pct_fmv_w_incentclass)) %&gt;%\n  mutate(pct_fmv_w_incentclass = scales::percent(pct_fmv_w_incentclass, accuracy = 0.01 ) ) %&gt;%\n  slice(c(1:5, 58:62, 115:119))\n  \nmuni_incentshare_slice %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  align(j = 2, align = \"right\", part = \"all\") %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_w_incentclass = \"% FMV with\\nIncent. Class.\") %&gt;%\n#add_header_row(values = c(\"County Wide\", \"3.25%\"), top = FALSE) %&gt;%   align(j = 2, align = \"right\" ) %&gt;%\nbold(i = 8) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\n\nMunicipality% FMV withIncent. Class.Markham78.77%Sauk Village78.23%Mc Cook76.47%North Lake72.93%Matteson65.14%Rolling Meadows10.05%Niles9.92%Palos Heights9.88%Richton Park9.26%Broadview8.73%Stickney0.00%Western Springs0.00%Wilmette0.00%Winnetka0.00%Worth0.00%\n\n\n\nTable 5.5: Municipalities with the largest share of Commercial and Industrial property with incentive classification. Uses tax year 2022 values obtained from PTAXSIM, and levels of assessment from CCAO’s Github. There are 27 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\n\n\n\n\n\n\n5.2.2 Map\n\n\nCode\nmuni_incent_share %&gt;%\n  select(clean_name, pct_fmv_w_incent) %&gt;%\n  left_join(nicknames) %&gt;%\nfilter(clean_name != \"Unincorporated\") %&gt;%\n  full_join(muni_shp, by = c(\"shpfile_name\" = \"MUNICIPALITY\")) %&gt;%\n  \n  ggplot(aes(fill = pct_fmv_w_incent)) +\n  geom_sf(aes(geometry = geometry), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    high = \"brown\", low = \"black\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\n    na.value=\"gray\",\n    n =4,\n    name = \"Percent of Commercial &\\nIndustrial FMV with\\nIncentive Classification\",\n    labels = scales::percent\n) +\n   geom_sf_pattern(data = no_incentives, aes(geometry = geometry), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\n\n\n\nFigure 5.1: Share of Commercial and Industrial FMV that has an incentive property class.",
    "crumbs": [
      "Reports",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Supporting Content for Cook County C&I Report</span>"
    ]
  },
  {
    "objectID": "incentive_report_content.html#share-of-industrial",
    "href": "incentive_report_content.html#share-of-industrial",
    "title": "2  Supporting Content for Cook County C&I Report",
    "section": "5.3 Share of Industrial",
    "text": "5.3 Share of Industrial\n\n\nCode\nindust_share_full &lt;- munilevel  %&gt;%\nungroup() %&gt;%\n#filter(!agency_num %in% cross_county_lines) %&gt;%\n  mutate(pct_fmv_indust_incent =  muni_fmv_indust_incentive/muni_fmv_industrial,\n    pct_fmv_indust_incent = ifelse(is.na(pct_fmv_indust_incent), 0, pct_fmv_indust_incent)) %&gt;%\n  select(clean_name, pct_fmv_indust_incent) |&gt; \n  arrange(desc(pct_fmv_indust_incent)) %&gt;%\n  mutate(pct_fmv_indust_incent = scales::percent(pct_fmv_indust_incent, accuracy = 0.01 ) ) \n\nindust_share &lt;- indust_share_full %&gt;%\n  slice(c(1:5, 58:62, 115:119))\n\nindust_share %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  align(j = 2, align = \"right\", part = \"all\") %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_indust_incent = \"% FMV with\\nIncent. Class.\") %&gt;%\nbold(i = 8) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\n\nMunicipality% FMV withIncent. Class.Matteson92.75%Markham92.46%Homewood91.47%Phoenix90.62%Richton Park89.07%Crestwood20.77%Dolton20.53%Lansing19.36%Forest Park18.97%Lemont18.93%Western Springs0.00%Willow Springs0.00%Wilmette0.00%Winnetka0.00%Worth0.00%\n\n\n\nTable 5.6: Percent of Industrial FMV within each Municipality that has incentive classification. 37 municipalities do not use industrial incentives.",
    "crumbs": [
      "Reports",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Supporting Content for Cook County C&I Report</span>"
    ]
  },
  {
    "objectID": "incentive_report_content.html#share-of-commercial",
    "href": "incentive_report_content.html#share-of-commercial",
    "title": "2  Supporting Content for Cook County C&I Report",
    "section": "5.4 Share of Commercial",
    "text": "5.4 Share of Commercial\n\n\nCode\ncommerc_share_full &lt;- munilevel  %&gt;%\nungroup() %&gt;%\n#filter(!agency_num %in% cross_county_lines) %&gt;%\n  mutate(pct_fmv_commerc_incent =  muni_fmv_commerc_incentive/muni_fmv_commercial,\n    pct_fmv_commerc_incent = ifelse(is.na(pct_fmv_commerc_incent), 0, pct_fmv_commerc_incent)) %&gt;%\n  select(clean_name, pct_fmv_commerc_incent) |&gt; \n  arrange(desc(pct_fmv_commerc_incent)) %&gt;%\n  mutate(pct_fmv_commerc_incent = scales::percent(pct_fmv_commerc_incent, accuracy = 0.01 ) ) \n\ncommerc_share &lt;- commerc_share_full %&gt;%\n  slice(c(1:5, 58:62, 115:119))\n\ncommerc_share %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  align(j = 2, align = \"right\", part = \"all\") %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", pct_fmv_commerc_incent = \"% FMV with\\nIncent. Class.\") %&gt;%\nbold(i = 8) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\n\nMunicipality% FMV withIncent. Class.Sauk Village46.69%Calumet Park29.30%Posen28.73%Ford Heights28.20%Phoenix28.17%Bedford Park1.55%Park Ridge1.49%Oak Park1.38%Hoffman Estates1.29%North Lake1.25%Westchester0.00%Western Springs0.00%Wilmette0.00%Winnetka0.00%Worth0.00%\n\n\n\nTable 5.7: Percent of Commercial FMV within each Municipality that has incentive classification. 49 municipalities do not use commercial incentives.",
    "crumbs": [
      "Reports",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Supporting Content for Cook County C&I Report</span>"
    ]
  },
  {
    "objectID": "incentive_report_content.html#shifted-tax-revenue-and-tax-burden",
    "href": "incentive_report_content.html#shifted-tax-revenue-and-tax-burden",
    "title": "2  Supporting Content for Cook County C&I Report",
    "section": "6.1 Shifted Tax Revenue and Tax Burden",
    "text": "6.1 Shifted Tax Revenue and Tax Burden\n\n\nCode\nccao_loa &lt;- read_csv(\"../inputs/ccao_loa.csv\") %&gt;% \n  filter(year== 2022) %&gt;% \n  select(-year)\n\nmuni_rate &lt;- read_csv(\"../Output/ptaxsim_muni_level_2006-2022.csv\") %&gt;%\n  filter(year == 2022) %&gt;%\n  left_join(nicknames) %&gt;% \n  select(clean_name, muni_current_rate_avg, muni_pct_eav_taxed,# cur_comp_muni_rate\n) %&gt;%\n  rename(cur_munilevel_rate = muni_current_rate_avg)",
    "crumbs": [
      "Reports",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Supporting Content for Cook County C&I Report</span>"
    ]
  },
  {
    "objectID": "incentive_report_content.html#not-taxed-value---pin-aggregated-to-county-level",
    "href": "incentive_report_content.html#not-taxed-value---pin-aggregated-to-county-level",
    "title": "2  Supporting Content for Cook County C&I Report",
    "section": "6.2 Not Taxed Value - PIN aggregated to County Level",
    "text": "6.2 Not Taxed Value - PIN aggregated to County Level\n\n\nCode\ncook_ratechange &lt;- ptax_pins %&gt;%\n  # left_join(muni_rate) %&gt;%\n  filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\",\n                             \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\",\n                             \"Deer Park\", \"Deerfield\")) %&gt;% \n  filter(!agency_num %in% cross_county_lines & !is.na(clean_name) & clean_name!=\"Unincorporated\" )  %&gt;%\n  #group_by(class_group) %&gt;%\n  summarize(\n    \n    ## New Tax Base Calculations\n    new_TEAV_noIncents = sum(ifelse(class &gt;= 600 & class &lt; 900,\n                                    (taxed_av*eq2022/loa)*0.25, taxed_av*eq2022), na.rm=TRUE),\n    \n    ## NewTax Base Calculations\n    new_TEAV_noCommercIncents = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% commercial_classes,\n                                           (taxed_av*eq2022/loa)*0.25, taxed_av*eq2022), na.rm=TRUE),\n\n   new_TEAV_noIndustIncents = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% industrial_classes,\n      (taxed_av*eq2022/loa)*0.25, taxed_av*eq2022), na.rm=TRUE),\n\n    new_TEAV_noC6 = sum(ifelse( class &gt;=600 & class &lt; 700, \n(taxed_av*eq2022/loa)*0.25 , taxed_av*eq2022), na.rm=TRUE),\n\n    new_TEAV_noC7 = sum(ifelse(class &gt;=700 & class &lt; 800,\n(taxed_av*eq2022/loa)*0.25, taxed_av*eq2022), na.rm=TRUE),\n\n    new_TEAV_noC8 = sum(ifelse(class &gt;=800 & class &lt; 900, (taxed_av*eq2022/loa)*0.25, taxed_av*eq2022), na.rm=TRUE),\n    \n    new_TEAV_vacant_props = sum(ifelse(class &gt;=600 & class &lt;900,  # if incentive classes were assessed at 0% (aka not taxedat all) or if the building lost its value completely without the incentive classification.\n                                       0, taxed_av*eq2022), na.rm=TRUE),\n    \n    new_TEAV_noExemps = sum(taxed_av*eq2022 + all_exemptions, na.rm=TRUE), # does not include abatements\n    new_TEAV_noAbates = sum(taxed_av*eq2022 + abatements, na.rm=TRUE), # include only abatements, not other exemption types\n  \n    \n    # TIF increment above the frozen EAV\n    forgone_TIF_EAV = sum(fmv_tif_increment * loa * eq2022, na.rm=TRUE),\n \n\n    cty_PC = n(),\n    # projects = n_distinct(both_ids), # mostly for industrial and commercial properties\n    pins_withincents = sum(ifelse(class &gt;= 600 & class &lt; 900, 1, 0)),\n    fmv_incentive = sum(ifelse(class &gt;=600 & class &lt;900, fmv, 0), na.rm = TRUE),\n    #fmv_taxed =  sum(taxed_fmv, na.rm=TRUE),\n    fmv_incents_inTIFs = sum(ifelse(class &gt;=600 & class &lt;900 & final_tax_to_tif &gt; 0, fmv, 0), na.rm = TRUE),\n    fmv_inTIF = sum(fmv_inTIF, na.rm=TRUE),\n    fmv_tif_increment = sum(fmv_tif_increment, na.rm=TRUE),\n    fmv_untaxable_value = sum(untaxable_value_fmv , na.rm=TRUE),\n    fmv_exemptions = sum(all_exemptions/eq2022/loa, na.rm=TRUE),\n    fmv_abatements = sum(exe_abate/eq2022/loa, na.rm=TRUE),\n    zero_bill = sum(zero_bill, na.rm=TRUE),\n    fmv_residential = sum(ifelse(class %in% c(200:399), fmv, 0), na.rm = TRUE),\n    fmv_C2 = sum(ifelse(class %in% c(200:299), fmv, 0), na.rm = TRUE),\n    \n    fmv_industrial = sum(ifelse(class %in% industrial_classes, fmv, 0), na.rm = TRUE),\n    fmv_commercial = sum(ifelse(class %in% commercial_classes, fmv, 0), na.rm = TRUE),\n    \n    current_rate_avg = mean(tax_code_rate),\n    avg_C2_bill_noexe = mean(ifelse(between(class,200,299) & all_exemptions == 0, (final_tax_to_dist + final_tax_to_tif), NA), na.rm=TRUE),\n    avg_C2_bill_withexe = mean(ifelse(between(class,200,299) & all_exemptions &gt; 0, (final_tax_to_dist + final_tax_to_tif), NA), na.rm=TRUE),\n    av_taxed = sum(taxed_av, na.rm = TRUE),\n    untaxable_value_av = sum(untaxable_value_av, na.rm=TRUE),\n    av = sum(av),\n    eav_taxed = sum(taxed_av*eq2022), \n    eav_untaxable = sum(untaxable_value_eav, na.rm=TRUE),\n    eav_max = sum(fmv*loa*eq2022, na.rm=TRUE),\n    fmv = sum(fmv, na.rm=TRUE),\n    pins_in_class = n(),\n    all_exemptions = sum(all_exemptions),   # in EAV\n    abatements = sum(exe_abate),            # in EAV\n    eav_incents_inTIFs = sum(ifelse(class &gt;=600 & class &lt;=900 & in_tif == 1, eav, 0), na.rm = TRUE),\n\n    final_tax_to_dist = sum(final_tax_to_dist), ## Amount of Total Levy\n    final_tax_to_tif = sum(final_tax_to_tif),\n    eav = sum(eav)) %&gt;%\n  mutate(\n   reducedEAV_comind_incents =  new_TEAV_noIncents - eav_taxed,\n   reducedEAV_commerc_incents  = new_TEAV_noCommercIncents - eav_taxed,\n\n   reducedEAV_indust_incents  = new_TEAV_noIndustIncents - eav_taxed,\n    # Absolute maximum TEAV: No Exemptions, no abatements, no TIFS, no Incentive properties\n    # Commercial and industrial assessed at 25%\n    TEAV_max = eav_taxed + all_exemptions + abatements + forgone_TIF_EAV +    reducedEAV_comind_incents,\n\n    # no exemptions or incentive classifications:\n    TEAV_neither = eav_taxed + all_exemptions + reducedEAV_comind_incents,\n\n    rate_noExe = final_tax_to_dist / new_TEAV_noExemps * 100,\n    rate_noCommercInc = final_tax_to_dist / new_TEAV_noCommercIncents * 100,\n    rate_noIndustInc = final_tax_to_dist / new_TEAV_noIndustIncents * 100,\n\n    rate_noAbate = final_tax_to_dist / new_TEAV_noAbates * 100,\n    rate_noInc = final_tax_to_dist / new_TEAV_noIncents * 100,\n    rate_neither = final_tax_to_dist / TEAV_neither * 100, \n    rate_noTIFs = final_tax_to_dist / (eav_taxed + forgone_TIF_EAV) * 100,\n    rate_vacant = final_tax_to_dist / new_TEAV_vacant_props* 100,\n    rate_lowest = final_tax_to_dist / TEAV_max * 100,\n    rate_current = final_tax_to_dist / eav_taxed * 100,\n    change_noInc = rate_current - rate_noInc,\n\n    forgonerev_noExe = rate_noExe/100 * all_exemptions,\n    forgonerev_noAbate = rate_noAbate/100 * (new_TEAV_noAbates - eav_taxed),\n    forgonerev_noIncents = rate_noInc/100 * (new_TEAV_noIncents - eav_taxed),\n    forgonerev_noCommercIncents = rate_noInc/100 * (new_TEAV_noCommercIncents - eav_taxed),\n\n    forgonerev_noIndustIncents = rate_noInc/100 * (new_TEAV_noIndustIncents - eav_taxed),\n\n    forgone_noExe_or_Inc = rate_neither/100 * (TEAV_neither - eav_taxed),\n    forgonerev_noTIFs = rate_noTIFs/100 * forgone_TIF_EAV,\n    forgonerev_vacant = rate_vacant/100 * (new_TEAV_vacant_props - eav_taxed),\n    forgonerev_maxTEAV = rate_lowest/100 * (TEAV_max - eav_taxed)\n)\n\n\n\n\nCode\ncook_ratechange %&gt;% \nselect(\"Current Composite Rate\" = rate_current, \"Rate if Incentive Props LoA is 25%\" = rate_noInc, \"Tax Rate Change\" =  change_noInc) %&gt;% flextable()\n\n\nCurrent Composite RateRate if Incentive Props LoA is 25%Tax Rate Change8.6390958.4487360.1903587\n\n\n\n\nCode\ncook_ratechange %&gt;% \nselect(\"Commerc. EAV w/Incent\" = reducedEAV_commerc_incents, \"Indust EAV w/ Incent\" = reducedEAV_indust_incents,\n       \"CommInd EAV w/ Incent\" = reducedEAV_comind_incents,\n       \"Homeowner Exemption Exempt EAV\" = all_exemptions) %&gt;% flextable()\n\n\nCommerc. EAV w/IncentIndust EAV w/ IncentCommInd EAV w/ IncentHomeowner Exemption Exempt EAV997,338,1043,046,250,0844,043,588,18814,543,768,233\n\n\n$15 Billion EAV is tax exempt due to homeowners exemptions. All incentive properties combined only have $4 billion EAV that is tax exempt (due to the decreased level of assessment which results in less AV, and therefore, EAV)\n\n6.2.1 Estimates for Revenue Shifted to Non-Incentive Class Properties\n\nTake new tax rate and apply it to new taxbase.\n\n\n\nCode\ncook_ratechange %&gt;% \nselect(contains(\"forgonerev\") ) %&gt;% flextable()\n\n\nforgonerev_noExeforgonerev_noAbateforgonerev_noIncentsforgonerev_noCommercIncentsforgonerev_noIndustIncentsforgonerev_noTIFsforgonerev_vacantforgonerev_maxTEAV1,162,261,990411,711.8341,632,08484,262,462257,369,6231,642,621,487-238,189,2172,817,669,562\n\n\n\n\n6.2.2 Naive Revenue Shift\nUses old current tax rate and multiplies it by the new taxbase.\n\n\nCode\nptax_pins %&gt;%\n  filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\",\n                             \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\",\n                             \"Deer Park\", \"Deerfield\")) %&gt;% \n  filter(!agency_num %in% cross_county_lines & \n           !is.na(clean_name) & clean_name!=\"Unincorporated\" )  %&gt;%\n  summarize(\n    # for homestead exemptions\n    mostnaive_forgone_tax_amt_exe = sum(tax_amt_exe),    \n  \n    # more accurate but still uses current tax rate instead of recalculated tax rate:\n    forgonerev_from_exemptions  = sum(ifelse(class &gt;= 200 & class &lt; 300,\n          (((av*eq2022) - (taxed_av*eq2022))) * tax_code_rate/100, 0), na.rm=TRUE),\n\n   # amount of EAV from taxing an additional 15% of the AV if incentive properties didn't exist\n   # using current tax rate for each property at the tax code level\n    forgonerev_from_comind_incents  = sum(ifelse(class &gt;= 600 & class &lt; 900,\n          (((taxed_av*eq2022)*0.25 - (taxed_av*eq2022))) * tax_code_rate/100, 0), na.rm=TRUE),\n\n    forgonerev_commerc_incents  = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% commercial_classes,\n          (((taxed_av*eq2022)*0.25 - (taxed_av*eq2022))) * tax_code_rate/100, 0), na.rm=TRUE),\n\n    forgonerev_indust_incents  = sum(ifelse(class &gt;= 600 & class &lt; 900 & class %in% industrial_classes,\n         (((taxed_av*eq2022)*0.25 - (taxed_av*eq2022))) * tax_code_rate/100, 0), na.rm=TRUE),\n   \n    #  forgonerev_noTIFs = rate_current/100 * ,\n       # TIF increment above the frozen EAV\n    forgonerev_TIFs = sum(fmv_tif_increment * loa * eq2022*tax_code_rate/100, na.rm=TRUE),\n   \n   # if incentive properties had no tax value (i.e. owners left, or fully tax exempt)\n   # also equal to the current amount collected from incentive properties\n     forgonerev_vacant = sum(ifelse(class &gt;= 600 & class &lt; 900,  taxed_av*eq2022 * tax_code_rate/100, 0), na.rm = TRUE)\n   )",
    "crumbs": [
      "Reports",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Supporting Content for Cook County C&I Report</span>"
    ]
  },
  {
    "objectID": "incentive_report_content.html#change-in-composite-property-tax-rate-due-to-incentives-and-other-policy-scenarios",
    "href": "incentive_report_content.html#change-in-composite-property-tax-rate-due-to-incentives-and-other-policy-scenarios",
    "title": "2  Supporting Content for Cook County C&I Report",
    "section": "6.3 Change in Composite Property Tax Rate Due to Incentives and other Policy Scenarios",
    "text": "6.3 Change in Composite Property Tax Rate Due to Incentives and other Policy Scenarios\n\n\nCode\nmuni_ratechange &lt;- ptax_pins %&gt;%\n  # left_join(muni_rate) %&gt;%\n  filter(!clean_name  %in% c(\"Frankfort\", \"Homer Glen\",  \"Oak Brook\", \"East Dundee\", \"University Park\",  \"Bensenville\", \"Hinsdale\", \"Roselle\", \"Deer Park\", \"Deerfield\")) %&gt;% \nfilter(!agency_num %in% cross_county_lines) %&gt;%\ngroup_by(clean_name) %&gt;%\n  summarize(\nclassgroup_PC = n(),\n    # projects = n_distinct(both_ids), # mostly for industrial and commercial properties\n    pins_withincents = sum(ifelse(class &gt;= 600 & class &lt; 900, 1,0)),\n    fmv_incentive = sum(ifelse(class &gt;=600 & class &lt;900, fmv, 0), na.rm = TRUE),\n    #fmv_taxed =  sum(taxed_fmv, na.rm=TRUE),\n    fmv_incents_inTIFs = sum(ifelse(class &gt;=600 & class &lt;900 & final_tax_to_tif &gt; 0, fmv, 0), na.rm = TRUE),\n    fmv_inTIF = sum(fmv_inTIF, na.rm=TRUE),\n    fmv_tif_increment = sum(fmv_tif_increment, na.rm=TRUE),\n    fmv_untaxable_value = sum(untaxable_value_fmv , na.rm=TRUE),\n    fmv_exemptions = sum(all_exemptions/eq2022/loa, na.rm=TRUE),\n    fmv_abatements = sum(exe_abate/eq2022/loa, na.rm=TRUE),\n    zero_bill = sum(zero_bill, na.rm=TRUE),\n    fmv_residential = sum(ifelse(class %in% c(200:399), fmv, 0), na.rm = TRUE),\n    fmv_C2 = sum(ifelse(class %in% c(200:299), fmv, 0), na.rm = TRUE),\n    \n    fmv_industrial = sum(ifelse(class %in% industrial_classes, fmv, 0), na.rm = TRUE),\n    fmv_commercial = sum(ifelse(class %in% commercial_classes, fmv, 0), na.rm = TRUE),\n    \n    current_rate_avg = mean(tax_code_rate),\n    avg_C2_bill_noexe = mean(ifelse(between(class,200,299) & all_exemptions == 0, (final_tax_to_dist + final_tax_to_tif), NA), na.rm=TRUE),\n    avg_C2_bill_withexe = mean(ifelse(between(class,200,299) & all_exemptions &gt; 0, (final_tax_to_dist + final_tax_to_tif), NA), na.rm=TRUE),\n    av_taxed = sum(taxed_av, na.rm = TRUE),\n    untaxable_value_av = sum(untaxable_value_av, na.rm=TRUE),\n    av = sum(av),\n    eav_taxed = sum(taxed_av*eq2022), \n    eav_untaxable = sum(untaxable_value_eav, na.rm=TRUE),\n    eav_max = sum(fmv*loa*eq2022, na.rm=TRUE),\n    fmv = sum(fmv, na.rm=TRUE),\n    pins_in_class = n(),\n    all_exemptions = sum(all_exemptions),   # in EAV\n    abatements = sum(exe_abate),            # in EAV\n    eav_incents_inTIFs = sum(ifelse(class &gt;=600 & class &lt;=900 & in_tif == 1, eav, 0), na.rm = TRUE),\n    loa = mean((loa*classgroup_PC ) / sum(classgroup_PC), na.rm=TRUE),\n    final_tax_to_dist = sum(final_tax_to_dist),\n    final_tax_to_tif = sum(final_tax_to_tif),\n    eav = sum(eav),\n    new_TEAV_noIncents = sum(ifelse(class &gt;=600 & class &lt;900,\n      (taxed_av*eq2022/loa)*0.25, taxed_av*eq2022), na.rm=TRUE),\n\n    new_TEAV_noC6 = sum(ifelse( class &gt;=600 & class &lt;700, \n(taxed_av*eq2022/loa)*0.25 , taxed_av*eq2022)),\n    new_TEAV_noC7 = sum(ifelse(class &gt;=700 & class &lt;800,\n(taxed_av*eq2022/loa)*0.25, taxed_av*eq2022)),\n    new_TEAV_noC8 = sum(ifelse(class &gt;=800 & class &lt;900, (taxed_av*eq2022/loa)*0.25, taxed_av*eq2022)),\n    \n    new_TEAV_vacant_noIncents = sum(ifelse(class &gt;=600 & class &lt;900,\n                                       0, taxed_av*eq2022)),\n\nnew_TEAV_noExemps = eav_taxed + all_exemptions, # does not include abatements\nnew_TEAV_noAbates = eav_taxed + abatements, # include only abatements, not other exemption types\n\n# amount of EAV from taxing an additional 15% of the AV if incentive properties didn't exist\nforgone_EAV_incent = #class_group %in% incentive_majorclasses,\n  #incent_prop == \"Incentive\", \n  new_TEAV_noIncents - eav_taxed,\n\n# TIF increment above the frozen EAV\nforgone_TIF_EAV = fmv_tif_increment * loa * eq2022) %&gt;%\n  #cbind(table_cook) %&gt;%\n  mutate(\n    # Absolute maximum TEAV: No Exemptions, no abatements, no TIFS, no Incentive properties\n    # Commercial and industrial assessed at 25%\n    TEAV_max = eav_taxed + all_exemptions + abatements + forgone_TIF_EAV + forgone_EAV_incent,\n    \n    # no exemptions or incentive classifications:\n    TEAV_neither = eav_taxed + all_exemptions + forgone_EAV_incent,\n    \n    rate_noExe = final_tax_to_dist / new_TEAV_noExemps * 100,\n    rate_noAbate = final_tax_to_dist / new_TEAV_noAbates * 100,\n    rate_noInc = final_tax_to_dist / new_TEAV_noIncents * 100,\n    rate_neither = final_tax_to_dist / TEAV_neither * 100, \n    rate_noTIFs = final_tax_to_dist / (eav_taxed + forgone_TIF_EAV) * 100,\n    rate_vacant = final_tax_to_dist / new_TEAV_vacant_noIncents* 100,\n    rate_lowest = final_tax_to_dist / TEAV_max * 100,\n    # rate_noC6 = levy / new_TEAV_noC6 * 100,\n    # rate_noC7 = levy / TEAV_noC7 * 100,\n    # rate_noC8 = levy / TEAV_noC8 * 100,\n    rate_current = final_tax_to_dist / eav_taxed * 100,\n    change_noInc = rate_current - rate_noInc,\n    change_neither = rate_current - rate_neither,\n    change_noTIF = rate_current - rate_noTIFs,\n    change_noExe = rate_current - rate_noExe,\n    change_vacant = rate_current - rate_vacant,\n    change_lowest = rate_current - rate_lowest\n  )  %&gt;%\n     mutate(across(contains(\"rate_\"), round, digits = 2))",
    "crumbs": [
      "Reports",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Supporting Content for Cook County C&I Report</span>"
    ]
  },
  {
    "objectID": "incentive_report_content.html#tables---difference-in-composite-tax-rates",
    "href": "incentive_report_content.html#tables---difference-in-composite-tax-rates",
    "title": "2  Supporting Content for Cook County C&I Report",
    "section": "6.4 Tables - Difference in Composite Tax Rates",
    "text": "6.4 Tables - Difference in Composite Tax Rates\n\n\nCode\nmuni_ratechange_sliced &lt;- muni_ratechange %&gt;% \n  select(clean_name, rate_current, rate_noInc, change_noInc) %&gt;% \n  arrange(desc(change_noInc) ) %&gt;%\n  mutate(across(c(rate_current, rate_noInc, change_noInc), round, digits=2)) %&gt;%\n  mutate(change_noInc = abs(round(change_noInc, digits = 2)) ) %&gt;% \n  slice(c(1:5, 58:62, 115:119)) \n\nmuni_ratechange_sliced %&gt;%\n  flextable() %&gt;% \n  border_remove() %&gt;%\n  hline_top() %&gt;%\n  hline(i = c(5,10)) %&gt;%\n  set_header_labels(clean_name = \"Municipality\", rate_current = \"Current Comp.\\nTax Rate\", rate_noInc = \"Tax Rate if No\\nIncent. Class.\",\n                    change_noInc = \"Rate Change\") %&gt;%\n  bold(i = 8) %&gt;%\n  add_footer(\"There are 26 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\", top = FALSE) %&gt;%\n  set_table_properties( layout = \"autofit\")\n\n\n\n\n\nMunicipalityCurrent Comp.Tax RateTax Rate if NoIncent. Class.Rate ChangeFord Heights27.1221.125.99Phoenix30.7025.295.41Matteson18.5014.044.46North Lake12.198.223.97Markham28.1124.193.92Orland Hills11.4211.150.28Rolling Meadows10.089.810.27Countryside8.448.200.24Niles8.057.810.24Chicago Ridge13.3913.190.20Stickney13.1313.130.00Western Springs8.768.760.00Wilmette7.357.350.00Winnetka7.467.460.00Worth14.1214.120.00\n\n\n\nTable 6.1: Composite Tax Rate Change from hypothetical scenario of taxing incentive property at 25% of their FMV instead of 10% of their FMV. There are 26 municipalities that do not use incentives and have a majority of their taxable EAV within Cook County.\n\n\n\n\n\n\nCode\nmuni_ratechange %&gt;% \n  select(clean_name, change_noInc) %&gt;% \nmutate(change_noInc = round(change_noInc)) %&gt;%\n  filter(clean_name != \"Unincorporated\") %&gt;%\n  left_join(nicknames) %&gt;%\n  full_join(muni_shp, by = c(\"shpfile_name\" = \"MUNICIPALITY\")) %&gt;%\n\n  ggplot(aes(fill = change_noInc)) +\n  geom_sf(aes(geometry = geometry), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    low = \"lightblue\", high = \"darkblue\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\nna.value = \"gray50\",\n    n =4,\n    name = \"Tax Rate Change\\nin Percentage Pts\") +\n   geom_sf_pattern(data = no_incentives, aes(geometry = geometry), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\n\n\n\nFigure 6.1: Hypothetical change in composite tax rate if all value that currently receives incentive classification became assessed at 25%.\n\n\n\n\n\n\n\nCode\nmuni_ratechange %&gt;% \n  select(clean_name, change_neither) %&gt;% \nmutate(change_neither = round(change_neither)) %&gt;%\n  filter(clean_name != \"Unincorporated\") %&gt;%\n  left_join(nicknames) %&gt;%\n  full_join(muni_shp, by = c(\"shpfile_name\" = \"MUNICIPALITY\")) %&gt;%\n\n  ggplot(aes(fill = change_neither)) +\n  geom_sf(aes(geometry = geometry), color = \"black\") +\n  theme_void() + \n  theme(axis.ticks = element_blank(), axis.text = element_blank())+\n  scale_fill_steps2(\n    low = \"black\", high = \"brown\",\n    show.limits=TRUE,\n    nice.breaks=FALSE,\nna.value = \"gray50\",\n    n =4,\n    name = \"Tax Rate Change\\nin Percentage Pts\") +\n   geom_sf_pattern(data = no_incentives, aes(geometry = geometry), pattern = 'crosshatch', pattern_spacing = 0.015, pattern_density = 0.1, fill = \"white\", alpha = .5, color = 'gray40')\n\n\n\n\n\n\n\n\nFigure 6.2: Hypothetical change in composite tax rate if all value that currently receives incentive classification became assessed at 25% and exempt EAV from GHE became taxable.\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n filter(change_noInc &gt;0) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current)\n\n# make dot graph\nmuni_ratechange %&gt;% \n filter(change_noInc &gt; .7) %&gt;%\n  select(clean_name, rate_current, rate_noInc) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \"rate_noInc\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(color=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_color_manual(#palette=\"Blues\", \n                     labels = c(\"Current Rate\", \"No Incentives\"),  \n                     values = c(\"#A6CEE3\", \"#1F78B4\" ))+\n  \n  labs(title = \"Difference in Composite Tax Rate if Assessed at 25%\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\n\n\n\nFigure 6.3: Change in tax rate if incentive properties were assessed at 25% of their FMV instead of their reduced level of assessment.\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; 0) %&gt;% \n  arrange(change_noInc) %&gt;%\n  select(clean_name, change_noInc) %&gt;%\n  distinct()\n\n\n# make dot graph\nmuni_ratechange %&gt;% \nfilter(change_noInc &gt; .7) %&gt;%\n  select(clean_name, rate_current, rate_noInc, change_noInc) %&gt;% \n  distinct() %&gt;%\n  pivot_longer(c(\"rate_current\", \"rate_noInc\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  left_join(order) %&gt;%\n    filter(change_noInc &gt; 0 ) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, change_noInc)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette=\"Paired\", labels = c(\"Incentives\", \"No Incentives\"), direction = 1)+\n  \n  labs(title = \"Difference in Composite Tax Rate if Assessed at 25%\",\n       subtitle = \"Ordered by Comp. Rate Change\", x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\n\n\n\nFigure 6.4: Change in Tax Rate from use of Incentives. Ordered by amount of change in the composite tax rate.\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; 0) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current) %&gt;% distinct()\n\n# make dot graph\nmuni_ratechange %&gt;% \n  filter(change_noInc &gt; .7) %&gt;%\n  select(clean_name, rate_current, rate_noInc, rate_neither, rate_vacant, rate_noExe) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \n                 \"rate_noInc\", \n                 \"rate_vacant\", \n                 \"rate_noExe\"# ,\n                #  \"rate_neither\"\n), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\nlegend.position = \"bottom\",\nplot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette = \"RdGy\",\n                    labels = c(\"Current Rate\", \n                             #  \"No Exemps & LoA is 25%\",\n                               \"No Exemptions\", \n                               \"No Incentives:\\nLoA 25%\",\n                               \"Incententive Classification\\nLoA = 0%\"\n                    ), \n                    direction = -1)+\n  labs(title = \"Composite Tax Rate Scenarios\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", \n       x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\n\n\n\n\n\n\nCode\n# as a dot graph ## \n# create order of dots\norder &lt;- muni_ratechange %&gt;%  \n  as_tibble() %&gt;% \n  filter(change_noInc &gt; 0) %&gt;%\n  arrange(rate_current) %&gt;%\n  select(clean_name, rate_current) %&gt;% distinct()\n\n# make dot graph\nmuni_ratechange %&gt;% \n filter(change_noInc &gt; .7) %&gt;%\n  select(clean_name, rate_current, rate_noInc, rate_neither, rate_vacant, rate_noExe) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \n                 \"rate_noInc\", \n                 \"rate_vacant\", \n               #  \"rate_noExe\"# ,\n                #  \"rate_neither\"\n), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\nlegend.position = \"bottom\",\nplot.title.position = \"plot\",\n    plot.background = element_rect(fill='transparent', color=NA) #transparent plot bg\n  )+\n  scale_fill_brewer(palette = \"Greys\", direction = -1,\n                    labels = c(\"Current Rate\", \n                             #  \"No Exemps & LoA is 25%\",\n                             #  \"If no Exemptions\", \n                               \"No Incentive Classes: \\nLoA = 25%\",\n                               \"Incentive Classification\\nLoA = 0%\"\n                    )\n)+\n  labs(title = \"Composite Tax Rate Scenarios\",\n       subtitle = \"Ordered by Current Composite Tax Rate\", \n       x = \"Composite Tax Rate (%)\", y = \"\")\n\n\n\n\n\n\n\n\n\n\n\nCode\nlibrary(ggrepel)\n# make dot graph\nmuni_ratechange %&gt;% \n  filter( clean_name ==\"Markham\" ## | clean_name == \"Matteson\"\n          ) %&gt;%\n  select(clean_name, rate_current, rate_noInc, rate_neither, rate_vacant, rate_noExe) %&gt;% \n  distinct() %&gt;%\n  arrange(rate_current) %&gt;%\n  pivot_longer(c(\"rate_current\", \"rate_noInc\", \n               \n                 \"rate_vacant\", \"rate_noExe\",\n                  \"rate_neither\"), \n               names_to = \"type\", values_to = \"tax_rate\") %&gt;% \n  inner_join(order) %&gt;%\n  ggplot(aes(x = tax_rate, y= reorder(clean_name, rate_current)))+\n  geom_line(aes(group = clean_name))+ \n  geom_point(aes(fill=type), size=3, pch = 21, color = \"black\" )+\n \n  geom_text_repel(aes(x=tax_rate),\n            hjust = 0,\n           vjust = -1,\n            min.segment.length = Inf,\n          #  vjust = -1,\n         #  nudge_y = .3,\n         # nudge_x = 3,\n          size = 3,\n                angle = 30,\n               label = c(\"Current Rate\", \"If LoA 25%\" ,\n                           \"If Vacant\" , \"If no Exemps\",\n                                \"No Exemps & LoA is 25%\") )+\n  theme_minimal() + \n  theme( \n    legend.title = element_blank(),\n    plot.title.position = \"plot\",\n   plot.background = element_rect(fill='transparent', color=NA),\n      legend.position = \"none\"  )+\nscale_fill_manual(\n                          values = c(\"#BDD7E7\", \"#6BAED6\", \"#3182BD\", \"#EFF3FF\",  \"#08519C\")) +\n  # \n  # \n  # scale_fill_brewer(#palette = \"Paired\",\n  #                   # labels = c(\"Current Rate\",\n  #                   #             \"If no GHE\",\n  #                   #             \"No GHE & LoA is 25%\",\n  #                   #             \"If LoA 25%\" ,\n  #                   #            \"If Vacant\"  ),\n  #                    direction = 1)+\n  scale_x_continuous(limits = c(17, 35)) + \n  scale_y_discrete(\n   expand = expand_scale(mult = c(.1, 1)) ,\n           #        limits = c(\"Markham\")#, breaks = \"Markham\"\n                   )  + \n  labs(# title = \"Composite Tax Rate Scenarios\", \n    x = \"Composite Tax Rate (%)\", \n    y = \"\")",
    "crumbs": [
      "Reports",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Supporting Content for Cook County C&I Report</span>"
    ]
  }
]