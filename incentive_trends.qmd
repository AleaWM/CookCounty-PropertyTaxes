---
title: "Incentive Classification Use Descriptive Statistics (2012-2022)"
subtitle: "PIN Level of Analysis"
author: "MVH & AWM"
date: "June 12, 2024"
format: 
  html:
    embed-resources: true
    theme: lumen
    code-fold: true
    code-line-numbers: true
    code-overflow: wrap
    toc: true
    toc-location: left
    tbl-cap-location: margin
    fig-cap-location: top
    grid:
      sidebar-width: 200px
      body-width: 900px
      margin-width: 200px
knitr: 
  opts_chunk:
    warning: false
    message: false
---

# Data

```{r setup}
#| include: false

library(tidyverse)
library(glue)
library(DT)
library(flextable)

set_flextable_defaults(theme_fun = theme_vanilla, 
                       padding = 2,
                       line_spacing = 1,
                       big.mark = ",",
                       )

options(DT.options = list())

# read in class summaries at the tax code level

df <- read_csv("./Output/ptaxsim_TC_Class_summaries_2006-2022.csv")

df %>%
  group_by(year) %>%
  summarize(n = n())

cde <- read_csv("./Necessary_Files/class_dict_expanded.csv") %>%
  rename(class = class_code)

df_all <- left_join(df, cde, by = "class")

# filter to industrial and commercial from 2012 to 2022

ind_comm_cc <- df_all %>%
  filter(between(class, 500, 899)) %>%
  filter(between(year, 2012, 2022))

write_csv(ind_comm_cc, "pin_count_tables.csv")

# just for 2022

ind_comm_cc_2022 <- ind_comm_cc %>%
  filter(year == 2022)

```

# County-Wide

```{r}
#| label: tbl-cooktotals
#| tbl-cap: "Commercial and Industrial PINs in Cook County (2012 - 2022)"
#| tbl-subcap: "Total, Incentive Class, and Non-Incentive Class PIN Counts"

county_pin_count <- ind_comm_cc %>%
  group_by(year, Alea_cat, incent_prop) %>%
  rename(land_use = Alea_cat) %>%
  reframe()
  


```

## Municipality

# Incentive Classification Use Over Time

## County-Wide

## Triad

## Municipality

# Outliers & Oddities

## Outliers

## Incentive Classifications & TIFs

## Introduction of Major Class 8

# Multiverse Analysis
