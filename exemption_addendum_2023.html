<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Property Taxes in Cook County - Tax Year 2023</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./exemption_addendum_2021.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>


</head>

<body class="nav-sidebar floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Property Taxes in Cook County</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/AleaWM/CookCounty-PropertyTaxes.git"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./exemption_addendum_2021.html">Exemption Addendum</a></li><li class="breadcrumb-item"><a href="./exemption_addendum_2023.html"><span class="chapter-title">Tax Year 2023</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Background Information</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Exemption Whitepaper</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exemp_report_2021.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Tax Year 2021</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exemp_report_2022.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Tax Year 2022</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exemp_report_2023.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Tax Year 2023</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Exemption Addendum</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exemption_addendum_2021.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Tax Year 2021</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exemption_addendum_2023.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">Tax Year 2023</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#which-taxpayers-benefit-the-most-and-least-from-homestead-exemptions" id="toc-which-taxpayers-benefit-the-most-and-least-from-homestead-exemptions" class="nav-link active" data-scroll-target="#which-taxpayers-benefit-the-most-and-least-from-homestead-exemptions">Which taxpayers benefit the most and least from homestead exemptions?</a>
  <ul class="collapse">
  <li><a href="#table-1.-comparison-of-tax-bills-for-median-assessed-value-av-class-2-properties-in-selected-municpalities-under-the-status-quo-and-alternative-scenario" id="toc-table-1.-comparison-of-tax-bills-for-median-assessed-value-av-class-2-properties-in-selected-municpalities-under-the-status-quo-and-alternative-scenario" class="nav-link" data-scroll-target="#table-1.-comparison-of-tax-bills-for-median-assessed-value-av-class-2-properties-in-selected-municpalities-under-the-status-quo-and-alternative-scenario">Table 1. Comparison of Tax Bills for Median Assessed Value (AV) Class 2 Properties in Selected Municpalities under the Status Quo and Alternative Scenario</a></li>
  <li><a href="#figure-2.-value-of-median-residential-property-indifferent-to-elimination-of-ghe" id="toc-figure-2.-value-of-median-residential-property-indifferent-to-elimination-of-ghe" class="nav-link" data-scroll-target="#figure-2.-value-of-median-residential-property-indifferent-to-elimination-of-ghe">Figure 2. Value of Median Residential Property Indifferent to Elimination of GHE</a></li>
  </ul></li>
  <li><a href="#how-progressive-are-exemptions" id="toc-how-progressive-are-exemptions" class="nav-link" data-scroll-target="#how-progressive-are-exemptions">How progressive are exemptions?</a>
  <ul class="collapse">
  <li><a href="#figure-3.-ratio-of-tax-bills-to-av-for-25th-and-75th-percentile-av-class-2-properties-with-10000-ghe" id="toc-figure-3.-ratio-of-tax-bills-to-av-for-25th-and-75th-percentile-av-class-2-properties-with-10000-ghe" class="nav-link" data-scroll-target="#figure-3.-ratio-of-tax-bills-to-av-for-25th-and-75th-percentile-av-class-2-properties-with-10000-ghe">Figure 3. Ratio of Tax Bills to AV for 25th and 75th Percentile AV Class 2 Properties with $10,000 GHE</a></li>
  </ul></li>
  <li><a href="#what-would-happen-if-the-ghe-value-were-increased" id="toc-what-would-happen-if-the-ghe-value-were-increased" class="nav-link" data-scroll-target="#what-would-happen-if-the-ghe-value-were-increased">What would happen if the GHE value were increased?</a>
  <ul class="collapse">
  <li><a href="#figure-4.-effect-of-changing-the-ghe-on-progressivity" id="toc-figure-4.-effect-of-changing-the-ghe-on-progressivity" class="nav-link" data-scroll-target="#figure-4.-effect-of-changing-the-ghe-on-progressivity">Figure 4. Effect of Changing the GHE on Progressivity</a></li>
  <li><a href="#table-3.-revenue-neutral-tax-rates" id="toc-table-3.-revenue-neutral-tax-rates" class="nav-link" data-scroll-target="#table-3.-revenue-neutral-tax-rates">Table 3. Revenue Neutral Tax Rates</a></li>
  <li><a href="#figure-5.-ghe-value-and-revenue-neutral-tax-rates" id="toc-figure-5.-ghe-value-and-revenue-neutral-tax-rates" class="nav-link" data-scroll-target="#figure-5.-ghe-value-and-revenue-neutral-tax-rates">Figure 5. GHE Value and Revenue Neutral Tax Rates</a></li>
  </ul></li>
  <li><a href="#paying-for-the-inequitable-effects-of-exemptions" id="toc-paying-for-the-inequitable-effects-of-exemptions" class="nav-link" data-scroll-target="#paying-for-the-inequitable-effects-of-exemptions">Paying for the inequitable effects of exemptions</a>
  <ul class="collapse">
  <li><a href="#figure-6.-exemptions-by-value-in-class-8-municipalities" id="toc-figure-6.-exemptions-by-value-in-class-8-municipalities" class="nav-link" data-scroll-target="#figure-6.-exemptions-by-value-in-class-8-municipalities">Figure 6. Exemptions by Value in Class 8 Municipalities</a></li>
  <li><a href="#figure-7.-exemption-share-in-class-8-municipalities" id="toc-figure-7.-exemption-share-in-class-8-municipalities" class="nav-link" data-scroll-target="#figure-7.-exemption-share-in-class-8-municipalities">Figure 7. Exemption Share in Class 8 Municipalities</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./exemption_addendum_2021.html">Exemption Addendum</a></li><li class="breadcrumb-item"><a href="./exemption_addendum_2023.html"><span class="chapter-title">Tax Year 2023</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-title">Tax Year 2023</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Addendum to Exemption Report - Tax Year 2023</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ptaxsim)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">warning =</span> <span class="cn">FALSE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>i <span class="ot">=</span> params<span class="sc">$</span>year</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>class_dict <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../Necessary_Files/class_dict_singlefamcodes.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">class_code =</span> <span class="fu">as.character</span>(class_code)) <span class="co"># change variable type to character so the join works.</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>eq_factor <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../Necessary_Files/eq_factor.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> i) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">eq_factor =</span> eq_factor_final) <span class="sc">|&gt;</span> <span class="fu">as.numeric</span>()</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>muni_ratechange <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">paste0</span>(<span class="st">"../Output/muni_ratechange_"</span>, i, <span class="st">"_test.csv"</span>))</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>muni_rates <span class="ot">&lt;-</span> muni_ratechange <span class="sc">|&gt;</span> <span class="co"># keep just a couple variables to avoid join variable name conflicts later</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(clean_name, current_rate_avg, rate_noGHE, rate_current)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>pin_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">paste0</span>(<span class="st">"../Output/Dont_Upload/0_joined_PIN_data_"</span>, i, <span class="st">"_test.csv"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">class =</span> <span class="fu">as.character</span>(class))</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>c2pins <span class="ot">&lt;-</span> pin_data <span class="sc">|&gt;</span> </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(class <span class="sc">&gt;</span> <span class="dv">199</span> <span class="sc">&amp;</span> class <span class="sc">&lt;</span> <span class="dv">300</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">eav_postexemptions =</span> taxed_eav)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="co"># All PINs - get AV and exemption amounts -----------------------------</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="co"># create some variables that we need:</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="co"># muni_rates &lt;- pin_data |&gt; </span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="co">#   left_join(tax_codes) |&gt;</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="co">#   left_join(tc_muninames) |&gt;</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="co">#   left_join(tif_distribution) |&gt;</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="co">#     tax_code_distribution_pct = ifelse(is.na(tax_code_distribution_pct), 0, tax_code_distribution_pct),</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="co">#     in_tif = ifelse(tax_code_num %in% tif_distribution$tax_code_num, 1, 0),</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="co">#     has_HO_exemp = ifelse(exe_homeowner &gt; 0, 1, 0),</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="co">#     has_other_exe = ifelse(exe_senior + exe_freeze + exe_longtime_homeowner + exe_disabled +</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="co">#                              exe_vet_returning + exe_vet_dis_lt50 + exe_vet_dis_50_69 + exe_vet_dis_ge70 &gt; 0, 1, 0 ),</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="co">#     </span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="co">#     final_tax_to_tif = tax_bill_total *  tax_code_distribution_pct,   # TIF revenue</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="co">#     final_tax_to_dist = tax_bill_total - final_tax_to_tif,      # local government revenue</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="co">#    all_exemptions = rowSums(across(starts_with("exe_"))),</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="co">#      tif_increment_eav = final_tax_to_tif / tax_code_rate,</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="co">#      nontif_eav_preexe = av_clerk*eq_factor - tif_increment_eav,</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="co">#      nontif_eav_postexe = av_clerk*eq_factor - tif_increment_eav - all_exemptions,</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="co">#     current_taxbase = final_tax_to_dist / tax_code_rate, # should match nontif_eav_postexe amount</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="co">#     eav_postexemptions = av_clerk*eq_factor - all_exemptions, # ignores tif distribution</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="co">#     eav_preexemptions = av_clerk*eq_factor, # ignores tif distribution</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="co">#   ) %&gt;% </span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(av = av_clerk)  |&gt; # av used for calculations is the final av value from the clerk's office</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(clean_name)|&gt;</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="co">#   summarize(</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a><span class="co">#     tax_bill_total = sum(tax_bill_total), # TIF and local government revenue</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="co">#     tif_increment_eav = sum(tif_increment_eav, na.rm=T),  # should be sum of frozen EAV</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a><span class="co">#     muni_taxed_eav = sum(nontif_eav_postexe, na.rm=T),  # non-TIF and non-exempt EAV taxed by government agencies</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="co">#     muni_exempt_eav_from_GHE = sum(exe_homeowner, na.rm=T),</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a><span class="co">#     muni_levy = sum(final_tax_to_dist, na.rm=T),</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a><span class="co">#     </span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a><span class="co">#     muni_min_rate = min(tax_code_rate),</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a><span class="co">#     muni_median_rate = median(tax_code_rate),</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a><span class="co">#     muni_avg_rate = mean(tax_code_rate, na.rm=T),</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a><span class="co">#     muni_max_rate = max(tax_code_rate),</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a><span class="co">#     final_tax_to_dist = sum(final_tax_to_dist, na.rm=T),</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a><span class="co">#     final_tax_to_tif = sum(final_tax_to_tif, na.rm=T)) |&gt;</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(muni_hyp_taxbase = muni_taxed_eav + muni_exempt_eav_from_GHE,   </span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a><span class="co">#          muni_hyp_taxrate =  muni_levy / muni_hyp_taxbase)</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a><span class="co"># ## Tax code level "levies" and tax bases ----------------</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a><span class="co"># tax_code_change &lt;- pin_data |&gt;</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a><span class="co">#   # left_join(tax_codes) |&gt;</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a><span class="co">#   # left_join(tc_muninames) |&gt;</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a><span class="co">#    left_join(tif_distribution) |&gt;</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(</span></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="co">#     tax_code_distribution_pct = ifelse(is.na(tax_code_distribution_pct), 0, tax_code_distribution_pct),</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="co">#     in_tif = ifelse(tax_code_num %in% tif_distribution$tax_code_num, 1, 0),</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a><span class="co">#     has_HO_exemp = ifelse(exe_homeowner &gt; 0, 1, 0),</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a><span class="co">#     has_other_exe = ifelse(exe_senior + exe_freeze + exe_longtime_homeowner + exe_disabled +</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a><span class="co">#                              exe_vet_returning + exe_vet_dis_lt50 + exe_vet_dis_50_69 +</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a><span class="co">#                              exe_vet_dis_ge70 &gt; 0, 1, 0 ),</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a><span class="co">#     all_exemptions = rowSums(across(starts_with("exe_"))),</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a><span class="co">#     final_tax_to_tif = tax_bill_total *  tax_code_distribution_pct/100,</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a><span class="co">#     final_tax_to_dist = tax_bill_total - final_tax_to_tif,</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a><span class="co">#     tif_increment_eav = final_tax_to_tif / tax_code_rate,</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a><span class="co">#     nontif_eav_preexe = av_clerk*eq_factor - tif_increment_eav,</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a><span class="co">#      nontif_eav_postexe = av_clerk*eq_factor - tif_increment_eav - all_exemptions,</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a><span class="co">#     eav_postexemptions = av_clerk*eq_factor - all_exemptions,</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a><span class="co">#     eav_preexemptions = av_clerk*eq_factor,</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a><span class="co">#     total_bill = final_tax_to_tif + final_tax_to_dist</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a><span class="co">#   ) %&gt;%</span></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(clean_name, tax_code_num, tax_code_rate) |&gt;</span></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a><span class="co">#   summarize(</span></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a><span class="co">#     tc_pc = n(),</span></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a><span class="co">#     tc_tax_bill_total = sum(tax_bill_total), # TIF and local government revenue at tax code level</span></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a><span class="co">#     tc_eav_inTIF = sum(tif_increment_eav, na.rm=T),  # should be total taxcode eav - frozen EAV</span></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a><span class="co">#     tc_taxed_eav = sum(nontif_eav_postexe, na.rm=T),  # non-TIF and non-exempt EAV taxed by government agencies</span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a><span class="co">#     tc_exempt_eav_from_GHE = sum(exe_homeowner, na.rm=T),</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a><span class="co">#     tc_final_tax_to_dist = sum(final_tax_to_dist, na.rm=T),</span></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a><span class="co">#     tc_final_tax_to_tif = sum(final_tax_to_tif, na.rm=T)) |&gt;</span></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(tc_hyp_taxbase = tc_taxed_eav + tc_exempt_eav_from_GHE,</span></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a><span class="co">#          tc_hyp_taxrate =  tc_final_tax_to_dist / tc_hyp_taxbase)</span></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify Class 2 Residential PINs ------------- </span></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a><span class="co"># c2pins &lt;- DBI::dbGetQuery(</span></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a><span class="co">#   ptaxsim_db_conn, </span></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a><span class="co">#   glue_sql("</span></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a><span class="co">#              SELECT DISTINCT* </span></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a><span class="co">#              FROM pin </span></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a><span class="co">#              WHERE class &gt; 199 AND class &lt; 300</span></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a><span class="co">#              AND year = 2021</span></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a><span class="co">#              "</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a><span class="co">#            , </span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a><span class="co">#            .con = ptaxsim_db_conn))</span></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a><span class="co"># c2pins &lt;- c2pins |&gt; </span></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(has_HO_exemp = ifelse( exe_homeowner &gt; 0, 1, 0),</span></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a><span class="co">#          has_other_exe = ifelse(exe_senior + exe_freeze + exe_longtime_homeowner + exe_disabled + exe_vet_returning + exe_vet_dis_lt50 + exe_vet_dis_50_69 + exe_vet_dis_ge70 &gt; 0, 1, 0 )) %&gt;% </span></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a><span class="co">#   left_join(tax_codes) |&gt;</span></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a><span class="co">#   left_join(tc_muninames) %&gt;%</span></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(av = av_clerk) |&gt;</span></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a><span class="co">#   left_join(tax_code_change) |&gt;</span></span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a><span class="co">#   left_join(tif_distribution) |&gt;</span></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a><span class="co">#     tax_code_distribution_pct = ifelse(is.na(tax_code_distribution_pct), 0, tax_code_distribution_pct),</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a><span class="co">#     in_tif = ifelse(tax_code_num %in% tif_distribution$tax_code_num, 1, 0),</span></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a><span class="co">#     has_HO_exemp = ifelse(exe_homeowner &gt; 0, 1, 0),</span></span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a><span class="co">#     has_other_exe = ifelse(exe_senior + exe_freeze + exe_longtime_homeowner + exe_disabled +</span></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a><span class="co">#                              exe_vet_returning + exe_vet_dis_lt50 + exe_vet_dis_50_69 + </span></span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a><span class="co">#                              exe_vet_dis_ge70 &gt; 0, 1, 0 ),</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a><span class="co">#     all_exemptions = rowSums(across(starts_with("exe_"))),</span></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a><span class="co">#     final_tax_to_tif = tax_bill_total *  tax_code_distribution_pct/100,</span></span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a><span class="co">#     final_tax_to_dist = tax_bill_total-final_tax_to_tif,</span></span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a><span class="co">#     tif_increment_eav = final_tax_to_tif / tax_code_rate,</span></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a><span class="co">#     </span></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a><span class="co">#     nontif_eav_preexe = av_clerk*eq_factor - tif_increment_eav,</span></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a><span class="co">#     nontif_eav_postexe = av_clerk*eq_factor - tif_increment_eav - all_exemptions,</span></span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a><span class="co">#     </span></span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a><span class="co">#     eav_postexemptions = av_clerk*eq_factor - all_exemptions,</span></span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a><span class="co">#     eav_preexemptions = av_clerk*eq_factor)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>q <span class="ot">=</span> <span class="fu">c</span>(.<span class="dv">1</span>, .<span class="dv">25</span>, .<span class="dv">5</span>, .<span class="dv">75</span>, .<span class="dv">9</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="do">## ranks properties that are considered C2 properties in order of AV for each Muni</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>muni_quartiles <span class="ot">&lt;-</span> c2pins <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name) <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(av) <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count_pins =</span> <span class="fu">n</span>(), </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">min =</span> <span class="fu">min</span>(av),</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">quant10 =</span> <span class="fu">round</span>(<span class="fu">quantile</span>(av, <span class="at">probs =</span> q[<span class="dv">1</span>])), </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">quant25 =</span> <span class="fu">round</span>(<span class="fu">quantile</span>(av, <span class="at">probs =</span> q[<span class="dv">2</span>])), </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">quant50 =</span> <span class="fu">round</span>(<span class="fu">quantile</span>(av, <span class="at">probs =</span> q[<span class="dv">3</span>])),</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">quant75 =</span> <span class="fu">round</span>(<span class="fu">quantile</span>(av, <span class="at">probs =</span> q[<span class="dv">4</span>])),</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">quant90 =</span> <span class="fu">round</span>(<span class="fu">quantile</span>(av, <span class="at">probs =</span> q[<span class="dv">5</span>])),</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">max</span>(av)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">%&gt;%</span> </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(quant50))</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Class 2 Descriptive Stats </span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>C2_munistats <span class="ot">&lt;-</span> c2pins <span class="sc">%&gt;%</span> </span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(class <span class="sc">&gt;</span> <span class="dv">199</span> <span class="sc">&amp;</span> class <span class="sc">&lt;</span> <span class="dv">300</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name)  <span class="sc">%&gt;%</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(av) <span class="sc">%&gt;%</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_eav =</span> <span class="fu">round</span>(<span class="fu">median</span>(taxed_eav)), </span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_av =</span> <span class="fu">round</span>(<span class="fu">median</span>(av)), </span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_av =</span> <span class="fu">round</span>(<span class="fu">mean</span>(av)),</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_eav =</span> <span class="fu">round</span>(<span class="fu">mean</span>(taxed_eav)),</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">C2_pins_in_muni =</span> <span class="fu">n</span>(),</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">C2_current_exemptions =</span> <span class="fu">sum</span>(all_exemptions, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">C2_HO_exemps =</span> <span class="fu">sum</span>(exe_homeowner, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="co"># All Class 2 Properties</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>munis_ranked <span class="ot">&lt;-</span> c2pins  <span class="sc">%&gt;%</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(muni_quartiles, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"clean_name"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">case_when</span>(</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>   av <span class="sc">&gt;</span> (quant10<span class="dv">-500</span>) <span class="sc">&amp;</span> (av<span class="sc">&lt;</span>quant10<span class="sc">+</span><span class="dv">500</span>) <span class="sc">~</span> <span class="st">"q10"</span>,</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    av <span class="sc">&gt;</span> (quant25<span class="dv">-500</span>) <span class="sc">&amp;</span> (av<span class="sc">&lt;</span>quant25<span class="sc">+</span><span class="dv">500</span>) <span class="sc">~</span> <span class="st">"q25"</span>,</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    av <span class="sc">&gt;</span> (quant50<span class="dv">-500</span>) <span class="sc">&amp;</span> (av<span class="sc">&lt;</span>quant50<span class="sc">+</span><span class="dv">500</span>) <span class="sc">~</span> <span class="st">"q50"</span>,</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    av <span class="sc">&gt;</span> (quant75<span class="dv">-500</span>) <span class="sc">&amp;</span> (av<span class="sc">&lt;</span>quant75<span class="sc">+</span><span class="dv">500</span>) <span class="sc">~</span> <span class="st">"q75"</span>,</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    av <span class="sc">&gt;</span> (quant90<span class="dv">-500</span>) <span class="sc">&amp;</span> (av<span class="sc">&lt;</span>quant90<span class="sc">+</span><span class="dv">500</span>) <span class="sc">~</span> <span class="st">"q90"</span>)</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(clean_name, rank, av, pin, class, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Many of the figures and tables in the Exemption Addendum (2024) refer to the “Alternative Scenario” (AS) and the “Status Quo” (SQ). The status quo is simply Cook County’s current property tax regime. The alternative scenario, by way of contrast, sets the <em>general</em> homestead exemption (and only general homestead exemption) to zero.</p>
<p>We believe this decision is a feature and not bug of the analysis in the Addendum, which has an emphasis on equity. The effects of changing the value of the most prevalent homestead exemption illuminate the effect of changing other exemptions.</p>
<section id="which-taxpayers-benefit-the-most-and-least-from-homestead-exemptions" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="which-taxpayers-benefit-the-most-and-least-from-homestead-exemptions">Which taxpayers benefit the most and least from homestead exemptions?</h2>
<section id="table-1.-comparison-of-tax-bills-for-median-assessed-value-av-class-2-properties-in-selected-municpalities-under-the-status-quo-and-alternative-scenario" class="level3">
<h3 class="anchored" data-anchor-id="table-1.-comparison-of-tax-bills-for-median-assessed-value-av-class-2-properties-in-selected-municpalities-under-the-status-quo-and-alternative-scenario">Table 1. Comparison of Tax Bills for Median Assessed Value (AV) Class 2 Properties in Selected Municpalities under the Status Quo and Alternative Scenario</h3>
<!--- Can we say "smooth the values"? --->
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>tax_bill_change_HO <span class="ot">&lt;-</span> c2pins <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(muni_rates) <span class="sc">|&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(av <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(av) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="co">#eq_av = av_clerk*eq_factor,</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">bill_current =</span> (taxed_eav<span class="sc">*</span>tax_code_rate),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">bill_noexemps =</span>  rate_noGHE<span class="sc">*</span>(taxed_eav<span class="sc">+</span>exe_homeowner),</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">bill_change =</span> bill_noexemps <span class="sc">-</span> bill_current) <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name, has_HO_exemp) <span class="sc">%&gt;%</span> </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">median_AV =</span> <span class="fu">median</span>(av),</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">median_EAV =</span> <span class="fu">median</span>(taxed_eav),</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">median_bill_cur =</span> <span class="fu">round</span>(<span class="fu">median</span>(bill_current)),</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">median_bill_new =</span> <span class="fu">round</span>(<span class="fu">median</span>(bill_noexemps)),</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">median_change =</span> <span class="fu">round</span>(<span class="fu">median</span>(bill_change)),</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">pincount=</span><span class="fu">n</span>(),</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">perceived_savings =</span> <span class="fu">median</span>(exe_homeowner<span class="sc">*</span>tax_code_rate)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>tax_bill_change_HO <span class="sc">|&gt;</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Phoenix"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Riverdale"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-taxbillchange" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-taxbillchange-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.1: AV stands for “assessed value” “Tax calculator reduction” refers to the exemption values shown on the tax bill received by taxpayers. Values are estimated using an average of the properties with an AV within $1,000 of it’s municipality’s median AV to enlarge the number of observations. Thus, our calculations do not precisely represent the median.
</figcaption>
<div aria-describedby="tbl-taxbillchange-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["clean_name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["has_HO_exemp"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["median_AV"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["median_EAV"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["median_bill_cur"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["median_bill_new"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["median_change"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["pincount"],"name":[8],"type":["int"],"align":["right"]},{"label":["perceived_savings"],"name":[9],"type":["dbl"],"align":["right"]}],"data":[{"1":"Park Forest","2":"0","3":"12000.0","4":"36195.600","5":"8784","6":"7250","7":"-1406","8":"1857","9":"0.0"},{"1":"Park Forest","2":"1","3":"13999.0","4":"27244.500","5":"6357","6":"7460","7":"1113","8":"3412","9":"2426.9"},{"1":"Phoenix","2":"0","3":"3699.5","4":"11158.802","5":"3066","6":"2398","7":"-668","8":"526","9":"0.0"},{"1":"Phoenix","2":"1","3":"5128.0","4":"4776.854","5":"1313","6":"2917","7":"1682","8":"472","9":"2747.9"},{"1":"Riverdale","2":"0","3":"7999.0","4":"24127.384","5":"6099","6":"5144","7":"-992","8":"1588","9":"0.0"},{"1":"Riverdale","2":"1","3":"8700.0","4":"13593.499","5":"3458","6":"5016","7":"1471","8":"2325","9":"2555.0"},{"1":"Winnetka","2":"0","3":"93591.0","4":"282298.533","5":"21792","6":"21314","7":"-390","8":"1448","9":"0.0"},{"1":"Winnetka","2":"1","3":"108623.0","4":"315760.400","5":"24269","6":"24595","7":"315","8":"3035","9":"768.6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="figure-2.-value-of-median-residential-property-indifferent-to-elimination-of-ghe" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="figure-2.-value-of-median-residential-property-indifferent-to-elimination-of-ghe">Figure 2. Value of Median Residential Property Indifferent to Elimination of GHE</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>muni_breakeven_points <span class="ot">&lt;-</span> c2pins <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(muni_rates) <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(exe_homeowner <span class="sc">==</span> <span class="dv">10000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(exe_senior <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>           exe_freeze <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>           exe_longtime_homeowner <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>           exe_disabled <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>           exe_vet_returning <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>           exe_vet_dis_lt50 <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>           exe_vet_dis_50_69 <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>           exe_vet_dis_ge70 <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>           exe_abate <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name) <span class="sc">%&gt;%</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_AV =</span> <span class="fu">median</span>(av),     <span class="co"># median class 2 AV for properties that did claim the GHE but not other exemptions</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">bill_current =</span> <span class="fu">mean</span>(eav_postexemptions <span class="sc">*</span> tax_code_rate), <span class="co"># money collected by non-TIF agencies</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">bill_noGHE =</span> <span class="fu">mean</span>(rate_noGHE <span class="sc">*</span> (eav_postexemptions<span class="sc">+</span>exe_homeowner)), <span class="co"># this uses tax code tax rate</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>   <span class="co"># rate_change = mean(tax_code_rate - tc_hyp_taxrate),   # avg tax code level rate change </span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">muni_avg_rate_change =</span> <span class="fu">mean</span>(tax_code_rate <span class="sc">-</span> rate_noGHE),</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># nobillchange_propertyEAV = round(mean(exe_homeowner * </span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">#                                         (tax_code_rate / (tax_code_rate-tc_hyp_taxrate)))), #   </span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>     <span class="at">nobillchange_propertyEAV_muni =</span> <span class="fu">round</span>(<span class="fu">mean</span>(exe_homeowner <span class="sc">*</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>                                                 (rate_current<span class="sc">/</span>(rate_current<span class="sc">-</span>rate_noGHE) )))</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nochange_av =</span> nobillchange_propertyEAV_muni <span class="sc">/</span> eq_factor,</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">nochange_av_muni =</span> nobillchange_propertyEAV_muni<span class="sc">/</span> eq_factor,</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>         ) </span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>muni_breakeven_points <span class="sc">%&gt;%</span>       </span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Chicago"</span>,<span class="st">"Park Forest"</span>, <span class="st">"Phoenix"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Winnetka"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span>median_AV, <span class="at">x =</span> clean_name)) <span class="sc">+</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y=</span>median_AV <span class="sc">+</span> <span class="dv">3000</span>, <span class="at">label =</span> <span class="fu">round</span>(median_AV) ) ) <span class="sc">+</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">label =</span> <span class="fu">c</span>(<span class="st">"Chicago"</span>,<span class="st">"Park Forest"</span>, <span class="st">"Phoenix"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Winnetka"</span>)) <span class="sc">+</span> </span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Median Residential AV"</span>, <span class="at">x =</span> <span class="st">""</span>, </span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Median Residential Property Assessed Value - All Class 2 property Types"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<figcaption>Break even points vary across municipalities, sometimes by orders of magnitude</figcaption>
<p><img src="exemption_addendum_2023_files/figure-html/create-muni_breakeven_points-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>muni_breakeven_points <span class="sc">%&gt;%</span>       </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Chicago"</span>,<span class="st">"Park Forest"</span>, <span class="st">"Phoenix"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Winnetka"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span>nochange_av, <span class="at">x =</span> clean_name)) <span class="sc">+</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y=</span>nochange_av <span class="sc">+</span> <span class="dv">3000</span>, <span class="at">label =</span> <span class="fu">round</span>(nochange_av)) ) <span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">label =</span> <span class="fu">c</span>(<span class="st">"Chicago"</span>, <span class="st">"Park Forest"</span>, <span class="st">"Phoenix"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Winnetka"</span>)) <span class="sc">+</span> </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Breakeven Point - AV"</span>, <span class="at">x =</span> <span class="st">""</span>, </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Residential Property AV Breakeven Point"</span>, </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">"Residential properties above these values would have their bills decrease if the GHE were eliminated</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="st">       (if they had claimed the GHE before)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<figcaption>Break even points vary across municipalities, sometimes by orders of magnitude</figcaption>
<p><img src="exemption_addendum_2023_files/figure-html/create-muni_breakeven_points-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Of homeowners who take the GHE, those that gain the largest monetary benefit from the exemption in proportion to their home values are those who own below-average valued properties that are in a municipality with relatively high tax rates. Property owners who benefit the least from taking the exemption (again, relative to the value of their homes) are those with above-average valued homes in jurisdictions with low tax rates. Note that these are not the same homeowners who benefit the most in absolute dollar terms—that outcome depends on both the absolute and relative value of the property and the composition of properties within the jurisdiction.</p>
<div class="cell page-columns page-full">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>muni_breakeven_points <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a> <span class="co"># filter(nochange_av &lt; 300000) %&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span>nochange_av, </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> median_AV, </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">label=</span>clean_name</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>             )) <span class="sc">+</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">alpha =</span> .<span class="dv">5</span>)) <span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a> <span class="co"># geom_smooth(method = "lm" )+</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> (nochange_av<span class="dv">-5000</span>), <span class="at">x =</span> (median_AV)), <span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)<span class="sc">+</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">" Breakeven Point"</span>, </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Median AV - Class 2 Properties in Municipality"</span>, </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>      <span class="co"># title = "Some highly valued homes would have lower tax bills if the GHE were eliminated", </span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>       <span class="co">#caption = "The breakeven point is the assessed values at which a major class 2 </span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>     <span class="co">#  property would not have their taxbill change if the GHE were eliminated."</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>     )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-breakevenToAV-notfiltered" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-breakevenToAV-notfiltered-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.1: Includes all municipalities
</figcaption>
<div aria-describedby="fig-breakevenToAV-notfiltered-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="exemption_addendum_2023_files/figure-html/fig-breakevenToAV-notfiltered-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div></div></div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>muni_breakeven_points <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nochange_av <span class="sc">&lt;</span> <span class="dv">300000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span>nochange_av, </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> median_AV, </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">label=</span>clean_name</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>             )) <span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">alpha =</span> .<span class="dv">5</span>)) <span class="sc">+</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> (muni_breakeven_points <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Riverdale"</span>,<span class="st">"Dolton"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> nochange_av, <span class="at">x =</span> median_AV, <span class="at">color =</span> <span class="st">"red"</span>), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_label_repel</span>(<span class="at">data =</span> (muni_breakeven_points <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> (nochange_av), <span class="at">x =</span> (median_AV)), <span class="at">size =</span> <span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar, <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">170000</span>) ) <span class="sc">+</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar, <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">170000</span>) ) <span class="sc">+</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Municipalities' Median AV &amp; Breakeven Point </span><span class="sc">\n</span><span class="st">Class 2 Properties Only"</span>,</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Breakeven Point"</span>, </span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Median AV"</span>, </span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a> <span class="co"># caption = "The breakeven point is the assessed values at which a major class 2 property would not have their taxbill change if the </span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a> <span class="co"># GHE were eliminated. Excludes outliers: University Park, Bedford Park, McCook, Hodgkins, and Rosemont. Class 2 properties that had</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a> <span class="co"># claimed the GHE would have lower taxbills even if the GHE were removed if the AV is above the breakeven point."</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a> ) <span class="sc">+</span> <span class="fu">coord_fixed</span>()</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a><span class="co">#ggsave("breakevenpoint.svg", bg = "transparent")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-Figure2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-Figure2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.2: Breakeven Point …
</figcaption>
<div aria-describedby="fig-Figure2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="exemption_addendum_2023_files/figure-html/fig-Figure2-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="how-progressive-are-exemptions" class="level2">
<h2 class="anchored" data-anchor-id="how-progressive-are-exemptions">How progressive are exemptions?</h2>
<section id="figure-3.-ratio-of-tax-bills-to-av-for-25th-and-75th-percentile-av-class-2-properties-with-10000-ghe" class="level3">
<h3 class="anchored" data-anchor-id="figure-3.-ratio-of-tax-bills-to-av-for-25th-and-75th-percentile-av-class-2-properties-with-10000-ghe">Figure 3. Ratio of Tax Bills to AV for 25th and 75th Percentile AV Class 2 Properties with $10,000 GHE</h3>
<p>For the different exemption scenarios, we created new exemption variables for alternate exemption amounts that can be subtracted from a properties equalized AV.</p>
<ul>
<li>ex. For <code>exe_neg10</code> all exemption amounts are equal to zero.</li>
<li>For <code>exe_0</code>, This variable should be the same as the current tax system since we did not add or remove any exempt EAV to the PIN. If the EAV for a PIN is less than 10000 EAV and they did claim the general homestead exemption, then their exempt EAV is equal to their EAV.</li>
<li>If the exempt EAV allowable for the GHE was increased to 20,000 EAV, then the variable <code>exe_plus10</code> is used.</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>pin_data <span class="ot">&lt;-</span> pin_data <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(class_dict, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"class"</span> <span class="ot">=</span> <span class="st">"class_code"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  mutate(has_HO_exemp = ifelse( exe_homeowner &gt; 0, 1, 0),</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>         <span class="co"># has_other_exe = ifelse(exe_senior + exe_freeze + exe_longtime_homeowner + exe_disabled + exe_vet_returning + exe_vet_dis_lt50 + exe_vet_dis_50_69 + exe_vet_dis_ge70 &gt; 0, 1, 0 )) %&gt;% </span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a> <span class="co"># left_join(tax_codes) |&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a> <span class="co"># left_join(tc_muninames) %&gt;%</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a> <span class="co"># mutate(av = av_clerk) |&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a> <span class="co"># left_join(tax_code_change) |&gt;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a> <span class="co"># left_join(tif_distribution) |&gt;</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tax_code_distribution_pct = ifelse(is.na(tax_code_distribution_pct), 0, tax_code_distribution_pct),</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># in_tif = ifelse(tax_code_num %in% tif_distribution$tax_code_num, 1, 0),</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># has_HO_exemp = ifelse(exe_homeowner &gt; 0, 1, 0),</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># has_other_exe = ifelse(exe_senior + exe_freeze + exe_longtime_homeowner + exe_disabled +</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">#                          exe_vet_returning + exe_vet_dis_lt50 + exe_vet_dis_50_69 + </span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">#                          exe_vet_dis_ge70 &gt; 0, 1, 0 ),</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># all_exemptions = rowSums(across(starts_with("exe_"))),</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># final_tax_to_tif = tax_bill_total *  tax_code_distribution_pct,</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># final_tax_to_dist = tax_bill_total-final_tax_to_tif,</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">tif_increment_eav =</span> final_tax_to_tif <span class="sc">/</span> tax_code_rate,</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">nontif_eav_preexe =</span> av_clerk<span class="sc">*</span>eq_factor <span class="sc">-</span> tif_increment_eav,</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">nontif_eav_postexe =</span> av_clerk<span class="sc">*</span>eq_factor <span class="sc">-</span> tif_increment_eav <span class="sc">-</span> all_exemptions,</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">eav_postexemptions =</span> av_clerk<span class="sc">*</span>eq_factor <span class="sc">-</span> all_exemptions,</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">eav_preexemptions =</span> av_clerk<span class="sc">*</span>eq_factor) <span class="sc">|&gt;</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Create variables for alternate exemption amounts that can be subtracted from a properties equalized AV</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">eav =</span> eav_preexemptions,</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">exe_neg10 =</span> <span class="dv">0</span>,</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>      <span class="co"># exe_0 implies no additional or removed EAV. Current tax system. </span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>         <span class="at">exe_0 =</span> <span class="fu">ifelse</span>(eav <span class="sc">&lt;</span> <span class="dv">10000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, eav, </span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(eav<span class="sc">&gt;</span><span class="dv">10000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, <span class="dv">10000</span>, <span class="dv">0</span> )),  <span class="co"># no change in current exemptions</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>         <span class="at">exe_plus10 =</span> <span class="fu">ifelse</span>(eav <span class="sc">&lt;</span> <span class="dv">20000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, eav, </span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(eav<span class="sc">&gt;</span><span class="dv">20000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, <span class="dv">20000</span>, <span class="dv">0</span> )),</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">exe_plus20 =</span> <span class="fu">ifelse</span>(eav <span class="sc">&lt;</span> <span class="dv">30000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, eav, </span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(eav<span class="sc">&gt;</span><span class="dv">30000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, <span class="dv">30000</span>, <span class="dv">0</span> ) ),</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>         <span class="at">exe_plus30 =</span> <span class="fu">ifelse</span>(eav <span class="sc">&lt;</span> <span class="dv">40000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, eav, </span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(eav<span class="sc">&gt;</span><span class="dv">40000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, <span class="dv">40000</span>, <span class="dv">0</span>) ),</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>         <span class="at">exe_plus40 =</span> <span class="fu">ifelse</span>(eav <span class="sc">&lt;</span> <span class="dv">50000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, eav, </span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(eav<span class="sc">&gt;</span><span class="dv">50000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, <span class="dv">50000</span>, <span class="dv">0</span>) ),</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">mil_home =</span> <span class="fu">ifelse</span>(major_class_code <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> av<span class="sc">*</span><span class="dv">10</span> <span class="sc">&gt;</span> <span class="dv">1000000</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a><span class="co"># all pins in munis fully within cook county that are some form of single-family, detached home</span></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>singfam_pins <span class="ot">&lt;-</span> pin_data <span class="sc">%&gt;%</span> </span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Option2 <span class="sc">==</span> <span class="st">"Single-Family"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculates tax rates for all exemption scenarios.</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>scenario_calcs <span class="ot">&lt;-</span> pin_data <span class="sc">%&gt;%</span>    </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name) <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">MuniLevy =</span> <span class="fu">sum</span>(final_tax_to_dist, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="co"># amount billed by munis with current exemptions in place</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">current_nonTIF_EAV_post_exemps =</span> <span class="fu">sum</span>(final_tax_to_dist<span class="sc">/</span>(tax_code_rate), <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">current_TIF_increment_EAV =</span> <span class="fu">sum</span>(final_tax_to_tif<span class="sc">/</span>(tax_code_rate), <span class="at">na.rm=</span><span class="cn">TRUE</span>),  </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">current_Exempt_EAV =</span> <span class="fu">sum</span>(all_exemptions, <span class="at">na.rm=</span>T), </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">current_GHE =</span> <span class="fu">sum</span>(exe_homeowner, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">Total_EAV =</span> <span class="fu">sum</span>(all_exemptions<span class="sc">+</span>(final_tax_to_dist<span class="sc">+</span>final_tax_to_tif)<span class="sc">/</span>(tax_code_rate), <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">exe_neg10 =</span> <span class="fu">sum</span>(exe_neg10),</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">exe_0 =</span> <span class="fu">sum</span>(exe_0), <span class="co"># no change, for comparison</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">exe_plus10 =</span> <span class="fu">sum</span>(exe_plus10),</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">exe_plus20 =</span> <span class="fu">sum</span>(exe_plus20),</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">exe_plus30 =</span> <span class="fu">sum</span>(exe_plus30),</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">exe_plus40 =</span> <span class="fu">sum</span>(exe_plus40),</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">mil_home =</span> <span class="fu">sum</span>(mil_home)</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">%&gt;%</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove all GHE (up to 10,000 EAV added back to base per PIN), </span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add exe_homeowner back to taxable base</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">neg10_taxable_eav =</span> Total_EAV <span class="sc">-</span> current_TIF_increment_EAV <span class="sc">-</span> current_Exempt_EAV <span class="sc">+</span> current_GHE,    <span class="co"># adds GHE exempt EAV back to taxable base and decreases tax rates</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">plus10_taxable_eav =</span> Total_EAV <span class="sc">-</span> current_TIF_increment_EAV <span class="sc">-</span> current_Exempt_EAV <span class="sc">+</span> current_GHE <span class="sc">-</span> exe_plus10, <span class="co"># will increase tax rates</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">plus20_taxable_eav =</span> Total_EAV <span class="sc">-</span> current_TIF_increment_EAV <span class="sc">-</span> current_Exempt_EAV <span class="sc">+</span> current_GHE <span class="sc">-</span> exe_plus20,</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">plus30_taxable_eav =</span> Total_EAV <span class="sc">-</span> current_TIF_increment_EAV <span class="sc">-</span> current_Exempt_EAV <span class="sc">+</span> current_GHE <span class="sc">-</span> exe_plus30,</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">plus40_taxable_eav =</span> Total_EAV <span class="sc">-</span> current_TIF_increment_EAV <span class="sc">-</span> current_Exempt_EAV <span class="sc">+</span> current_GHE <span class="sc">-</span> exe_plus40,</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">scenario_noexemptions_taxable_eav =</span> Total_EAV <span class="sc">-</span> current_TIF_increment_EAV) <span class="sc">%&gt;%</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tr_neg10 =</span> MuniLevy <span class="sc">/</span> neg10_taxable_eav,</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">tr_nochange =</span> MuniLevy <span class="sc">/</span> current_nonTIF_EAV_post_exemps,</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>         <span class="at">tr_plus10 =</span> MuniLevy <span class="sc">/</span> plus10_taxable_eav,</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>         <span class="at">tr_plus20 =</span> MuniLevy <span class="sc">/</span> plus20_taxable_eav,</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>         <span class="at">tr_plus30 =</span> MuniLevy <span class="sc">/</span> plus30_taxable_eav,</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>         <span class="at">tr_plus40 =</span> MuniLevy <span class="sc">/</span> plus40_taxable_eav, </span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>         <span class="at">tax_rate_current =</span> MuniLevy<span class="sc">/</span>current_nonTIF_EAV_post_exemps,</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">taxrate_noexemps =</span> MuniLevy <span class="sc">/</span>(Total_EAV <span class="sc">-</span> current_TIF_increment_EAV  ),</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">taxrate_noTIFs =</span> MuniLevy <span class="sc">/</span> (Total_EAV <span class="sc">-</span> current_Exempt_EAV),</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">taxrate_noTIFs_orExemps =</span> MuniLevy <span class="sc">/</span> Total_EAV) <span class="sc">%&gt;%</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(clean_name, MuniLevy, tr_neg10<span class="sc">:</span>taxrate_noTIFs_orExemps, <span class="fu">everything</span>())</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>scenario_taxrates <span class="ot">&lt;-</span> scenario_calcs <span class="sc">%&gt;%</span>  </span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(clean_name, MuniLevy, tr_neg10<span class="sc">:</span>taxrate_noTIFs_orExemps) </span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>scenario_taxrates <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols=</span>(tr_neg10<span class="sc">:</span>taxrate_noTIFs_orExemps), round, <span class="at">digits=</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["clean_name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["MuniLevy"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["tr_neg10"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["tr_nochange"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["tr_plus10"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["tr_plus20"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["tr_plus30"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["tr_plus40"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["tax_rate_current"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["taxrate_noexemps"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["taxrate_noTIFs"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["taxrate_noTIFs_orExemps"],"name":[12],"type":["dbl"],"align":["right"]}],"data":[{"1":"Alsip","2":"9.296677e+07","3":"0.11","4":"0.11","5":"0.12","6":"0.12","7":"0.13","8":"0.14","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Arlington Heights","2":"3.605650e+08","3":"0.09","4":"0.09","5":"0.10","6":"0.10","7":"0.11","8":"0.12","9":"0.09","10":"0.09","11":"0.09","12":"0.09"},{"1":"Barrington","2":"3.119475e+07","3":"0.07","4":"0.07","5":"0.08","6":"0.08","7":"0.08","8":"0.09","9":"0.07","10":"0.07","11":"0.07","12":"0.07"},{"1":"Barrington Hills","2":"1.948965e+07","3":"0.08","4":"0.08","5":"0.08","6":"0.08","7":"0.09","8":"0.09","9":"0.08","10":"0.08","11":"0.08","12":"0.08"},{"1":"Bartlett","2":"5.461886e+07","3":"0.10","4":"0.11","5":"0.11","6":"0.12","7":"0.14","8":"0.15","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Bedford Park","2":"8.045284e+07","3":"0.11","4":"0.11","5":"0.11","6":"0.11","7":"0.11","8":"0.11","9":"0.11","10":"0.11","11":"0.11","12":"0.11"},{"1":"Bellwood","2":"5.987113e+07","3":"0.13","4":"0.15","5":"0.17","6":"0.19","7":"0.22","8":"0.27","9":"0.15","10":"0.12","11":"0.15","12":"0.12"},{"1":"Bensenville","2":"3.534956e+06","3":"0.10","4":"0.10","5":"0.10","6":"0.10","7":"0.10","8":"0.10","9":"0.10","10":"0.10","11":"0.10","12":"0.10"},{"1":"Berkeley","2":"1.857415e+07","3":"0.11","4":"0.12","5":"0.14","6":"0.15","7":"0.17","8":"0.20","9":"0.12","10":"0.11","11":"0.12","12":"0.11"},{"1":"Berwyn","2":"1.257023e+08","3":"0.10","4":"0.11","5":"0.12","6":"0.14","7":"0.16","8":"0.18","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Blue Island","2":"4.866061e+07","3":"0.12","4":"0.13","5":"0.15","6":"0.17","7":"0.18","8":"0.20","9":"0.13","10":"0.11","11":"0.13","12":"0.11"},{"1":"Bridgeview","2":"7.499903e+07","3":"0.11","4":"0.11","5":"0.12","6":"0.13","7":"0.13","8":"0.14","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Broadview","2":"4.139681e+07","3":"0.10","4":"0.10","5":"0.11","6":"0.12","7":"0.12","8":"0.13","9":"0.10","10":"0.10","11":"0.10","12":"0.10"},{"1":"Brookfield","2":"6.048293e+07","3":"0.10","4":"0.11","5":"0.12","6":"0.14","7":"0.16","8":"0.18","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Buffalo Grove","2":"4.460649e+07","3":"0.10","4":"0.11","5":"0.12","6":"0.13","7":"0.15","8":"0.17","9":"0.11","10":"0.09","11":"0.11","12":"0.09"},{"1":"Burbank","2":"7.132588e+07","3":"0.09","4":"0.10","5":"0.12","6":"0.13","7":"0.15","8":"0.17","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Burnham","2":"1.273940e+07","3":"0.17","4":"0.20","5":"0.23","6":"0.26","7":"0.30","8":"0.32","9":"0.20","10":"0.16","11":"0.20","12":"0.16"},{"1":"Burr Ridge","2":"3.438957e+07","3":"0.06","4":"0.07","5":"0.07","6":"0.07","7":"0.07","8":"0.07","9":"0.07","10":"0.06","11":"0.07","12":"0.06"},{"1":"Calumet City","2":"9.887369e+07","3":"0.18","4":"0.21","5":"0.25","6":"0.30","7":"0.35","8":"0.38","9":"0.21","10":"0.17","11":"0.21","12":"0.17"},{"1":"Calumet Park","2":"1.752123e+07","3":"0.14","4":"0.17","5":"0.20","6":"0.24","7":"0.28","8":"0.30","9":"0.17","10":"0.13","11":"0.17","12":"0.13"},{"1":"Chicago","2":"8.361637e+09","3":"0.07","4":"0.07","5":"0.07","6":"0.08","7":"0.08","8":"0.08","9":"0.07","10":"0.07","11":"0.07","12":"0.07"},{"1":"Chicago Heights","2":"8.510483e+07","3":"0.17","4":"0.19","5":"0.21","6":"0.24","7":"0.26","8":"0.27","9":"0.19","10":"0.16","11":"0.19","12":"0.16"},{"1":"Chicago Ridge","2":"4.429115e+07","3":"0.10","4":"0.11","5":"0.12","6":"0.13","7":"0.13","8":"0.14","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Cicero","2":"1.456251e+08","3":"0.10","4":"0.11","5":"0.12","6":"0.13","7":"0.15","8":"0.17","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Country Club Hills","2":"5.884766e+07","3":"0.15","4":"0.17","5":"0.20","6":"0.23","7":"0.27","8":"0.31","9":"0.17","10":"0.14","11":"0.17","12":"0.14"},{"1":"Countryside","2":"2.937386e+07","3":"0.07","4":"0.07","5":"0.07","6":"0.07","7":"0.08","8":"0.08","9":"0.07","10":"0.07","11":"0.07","12":"0.07"},{"1":"Crestwood","2":"4.173996e+07","3":"0.09","4":"0.10","5":"0.10","6":"0.11","7":"0.12","8":"0.13","9":"0.10","10":"0.08","11":"0.10","12":"0.08"},{"1":"Deer Park","2":"7.283405e+04","3":"0.09","4":"0.10","5":"0.11","6":"0.13","7":"0.15","8":"0.17","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Deerfield","2":"1.648595e+07","3":"0.08","4":"0.08","5":"0.08","6":"0.08","7":"0.08","8":"0.08","9":"0.08","10":"0.08","11":"0.08","12":"0.08"},{"1":"Des Plaines","2":"2.502258e+08","3":"0.08","4":"0.09","5":"0.09","6":"0.10","7":"0.10","8":"0.11","9":"0.09","10":"0.08","11":"0.09","12":"0.08"},{"1":"Dixmoor","2":"7.582878e+06","3":"0.14","4":"0.15","5":"0.17","6":"0.18","7":"0.18","8":"0.18","9":"0.15","10":"0.13","11":"0.15","12":"0.13"},{"1":"Dolton","2":"6.016003e+07","3":"0.17","4":"0.20","5":"0.24","6":"0.30","7":"0.37","8":"0.40","9":"0.20","10":"0.16","11":"0.20","12":"0.16"},{"1":"East Dundee","2":"4.287556e+05","3":"0.09","4":"0.09","5":"0.09","6":"0.09","7":"0.09","8":"0.09","9":"0.09","10":"0.09","11":"0.09","12":"0.09"},{"1":"East Hazelcrest","2":"5.232343e+06","3":"0.16","4":"0.17","5":"0.19","6":"0.21","7":"0.23","8":"0.24","9":"0.17","10":"0.15","11":"0.17","12":"0.15"},{"1":"Elgin","2":"5.981469e+07","3":"0.09","4":"0.10","5":"0.10","6":"0.11","7":"0.13","8":"0.14","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Elk Grove Village","2":"2.658764e+08","3":"0.08","4":"0.09","5":"0.09","6":"0.09","7":"0.09","8":"0.10","9":"0.09","10":"0.08","11":"0.09","12":"0.08"},{"1":"Elmwood Park","2":"6.565141e+07","3":"0.09","4":"0.10","5":"0.11","6":"0.12","7":"0.13","8":"0.15","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Evanston","2":"3.176789e+08","3":"0.08","4":"0.08","5":"0.08","6":"0.09","7":"0.09","8":"0.09","9":"0.08","10":"0.08","11":"0.08","12":"0.08"},{"1":"Evergreen Park","2":"6.652775e+07","3":"0.10","4":"0.11","5":"0.13","6":"0.15","7":"0.17","8":"0.19","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Flossmoor","2":"4.443147e+07","3":"0.13","4":"0.14","5":"0.16","6":"0.17","7":"0.20","8":"0.22","9":"0.14","10":"0.12","11":"0.14","12":"0.12"},{"1":"Ford Heights","2":"4.444119e+06","3":"0.20","4":"0.23","5":"0.23","6":"0.23","7":"0.23","8":"0.23","9":"0.23","10":"0.20","11":"0.23","12":"0.20"},{"1":"Forest Park","2":"5.286389e+07","3":"0.09","4":"0.10","5":"0.10","6":"0.11","7":"0.12","8":"0.12","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Forestview","2":"1.122089e+07","3":"0.10","4":"0.10","5":"0.10","6":"0.11","7":"0.11","8":"0.11","9":"0.10","10":"0.10","11":"0.10","12":"0.10"},{"1":"Frankfort","2":"7.596748e+03","3":"0.08","4":"0.08","5":"0.08","6":"0.08","7":"0.08","8":"0.08","9":"0.08","10":"0.08","11":"0.08","12":"0.08"},{"1":"Franklin Park","2":"1.248049e+08","3":"0.10","4":"0.10","5":"0.11","6":"0.11","7":"0.12","8":"0.12","9":"0.10","10":"0.10","11":"0.10","12":"0.10"},{"1":"Glencoe","2":"9.817301e+07","3":"0.08","4":"0.08","5":"0.08","6":"0.08","7":"0.09","8":"0.09","9":"0.08","10":"0.08","11":"0.08","12":"0.08"},{"1":"Glenview","2":"2.887367e+08","3":"0.07","4":"0.07","5":"0.08","6":"0.08","7":"0.08","8":"0.09","9":"0.07","10":"0.07","11":"0.07","12":"0.07"},{"1":"Glenwood","2":"2.686176e+07","3":"0.13","4":"0.14","5":"0.16","6":"0.19","7":"0.22","8":"0.25","9":"0.14","10":"0.12","11":"0.14","12":"0.12"},{"1":"Golf","2":"4.203085e+06","3":"0.08","4":"0.08","5":"0.09","6":"0.09","7":"0.09","8":"0.09","9":"0.08","10":"0.08","11":"0.08","12":"0.08"},{"1":"Hanover Park","2":"4.093711e+07","3":"0.10","4":"0.11","5":"0.12","6":"0.13","7":"0.15","8":"0.17","9":"0.11","10":"0.09","11":"0.11","12":"0.09"},{"1":"Harvey","2":"5.795612e+07","3":"0.19","4":"0.22","5":"0.26","6":"0.27","7":"0.28","8":"0.28","9":"0.22","10":"0.19","11":"0.22","12":"0.19"},{"1":"Harwood Heights","2":"2.789690e+07","3":"0.08","4":"0.08","5":"0.09","6":"0.09","7":"0.10","8":"0.11","9":"0.08","10":"0.07","11":"0.08","12":"0.07"},{"1":"Hazelcrest","2":"4.106404e+07","3":"0.16","4":"0.18","5":"0.21","6":"0.24","7":"0.28","8":"0.32","9":"0.18","10":"0.14","11":"0.18","12":"0.14"},{"1":"Hickory Hills","2":"4.138817e+07","3":"0.09","4":"0.10","5":"0.11","6":"0.12","7":"0.14","8":"0.15","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Hillside","2":"3.986061e+07","3":"0.11","4":"0.12","5":"0.13","6":"0.14","7":"0.15","8":"0.16","9":"0.12","10":"0.11","11":"0.12","12":"0.11"},{"1":"Hinsdale","2":"1.707140e+07","3":"0.07","4":"0.07","5":"0.07","6":"0.07","7":"0.07","8":"0.07","9":"0.07","10":"0.07","11":"0.07","12":"0.07"},{"1":"Hodgkins","2":"2.717438e+07","3":"0.09","4":"0.09","5":"0.09","6":"0.09","7":"0.09","8":"0.09","9":"0.09","10":"0.09","11":"0.09","12":"0.09"},{"1":"Hoffman Estates","2":"1.986963e+08","3":"0.09","4":"0.10","5":"0.10","6":"0.11","7":"0.12","8":"0.13","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Homer Glen","2":"1.776449e+04","3":"0.08","4":"0.08","5":"0.08","6":"0.08","7":"0.08","8":"0.08","9":"0.08","10":"0.08","11":"0.08","12":"0.08"},{"1":"Hometown","2":"7.183343e+06","3":"0.09","4":"0.10","5":"0.12","6":"0.16","7":"0.21","8":"0.28","9":"0.10","10":"0.08","11":"0.10","12":"0.08"},{"1":"Homewood","2":"7.276469e+07","3":"0.12","4":"0.14","5":"0.15","6":"0.17","7":"0.20","8":"0.23","9":"0.14","10":"0.12","11":"0.14","12":"0.12"},{"1":"Indian Head Park","2":"1.445448e+07","3":"0.07","4":"0.07","5":"0.08","6":"0.09","7":"0.10","8":"0.10","9":"0.07","10":"0.07","11":"0.07","12":"0.07"},{"1":"Inverness","2":"4.442344e+07","3":"0.08","4":"0.09","5":"0.09","6":"0.10","7":"0.10","8":"0.11","9":"0.09","10":"0.08","11":"0.09","12":"0.08"},{"1":"Justice","2":"2.377425e+07","3":"0.09","4":"0.10","5":"0.11","6":"0.13","7":"0.14","8":"0.16","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Kenilworth","2":"3.286462e+07","3":"0.08","4":"0.08","5":"0.08","6":"0.09","7":"0.09","8":"0.09","9":"0.08","10":"0.08","11":"0.08","12":"0.08"},{"1":"La Grange","2":"7.986226e+07","3":"0.08","4":"0.08","5":"0.08","6":"0.09","7":"0.09","8":"0.10","9":"0.08","10":"0.08","11":"0.08","12":"0.08"},{"1":"La Grange Park","2":"4.691200e+07","3":"0.08","4":"0.09","5":"0.09","6":"0.10","7":"0.11","8":"0.12","9":"0.09","10":"0.08","11":"0.09","12":"0.08"},{"1":"Lansing","2":"9.139610e+07","3":"0.14","4":"0.16","5":"0.18","6":"0.21","7":"0.24","8":"0.26","9":"0.16","10":"0.13","11":"0.16","12":"0.13"},{"1":"Lemont","2":"6.908429e+07","3":"0.07","4":"0.07","5":"0.07","6":"0.08","7":"0.08","8":"0.09","9":"0.07","10":"0.06","11":"0.07","12":"0.06"},{"1":"Lincolnwood","2":"7.614821e+07","3":"0.09","4":"0.09","5":"0.09","6":"0.10","7":"0.10","8":"0.11","9":"0.09","10":"0.08","11":"0.09","12":"0.08"},{"1":"Lynwood","2":"2.355127e+07","3":"0.10","4":"0.11","5":"0.12","6":"0.13","7":"0.14","8":"0.16","9":"0.11","10":"0.09","11":"0.11","12":"0.09"},{"1":"Lyons","2":"2.668793e+07","3":"0.09","4":"0.10","5":"0.11","6":"0.12","7":"0.13","8":"0.15","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Markham","2":"5.318328e+07","3":"0.18","4":"0.20","5":"0.22","6":"0.25","7":"0.26","8":"0.27","9":"0.20","10":"0.17","11":"0.20","12":"0.17"},{"1":"Matteson","2":"9.747340e+07","3":"0.13","4":"0.14","5":"0.15","6":"0.16","7":"0.17","8":"0.19","9":"0.14","10":"0.12","11":"0.14","12":"0.12"},{"1":"Maywood","2":"5.813178e+07","3":"0.13","4":"0.14","5":"0.16","6":"0.18","7":"0.21","8":"0.25","9":"0.14","10":"0.12","11":"0.14","12":"0.12"},{"1":"Mc Cook","2":"2.466628e+07","3":"0.11","4":"0.11","5":"0.11","6":"0.11","7":"0.11","8":"0.11","9":"0.11","10":"0.11","11":"0.11","12":"0.11"},{"1":"Melrose Park","2":"9.906170e+07","3":"0.10","4":"0.10","5":"0.10","6":"0.11","7":"0.11","8":"0.11","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Merrionette Park","2":"5.797078e+06","3":"0.09","4":"0.10","5":"0.10","6":"0.11","7":"0.12","8":"0.13","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Midlothian","2":"3.442733e+07","3":"0.11","4":"0.12","5":"0.14","6":"0.17","7":"0.20","8":"0.24","9":"0.12","10":"0.10","11":"0.12","12":"0.10"},{"1":"Morton Grove","2":"1.109303e+08","3":"0.09","4":"0.09","5":"0.10","6":"0.11","7":"0.12","8":"0.13","9":"0.09","10":"0.08","11":"0.09","12":"0.08"},{"1":"Mt Prospect","2":"2.099457e+08","3":"0.09","4":"0.09","5":"0.10","6":"0.11","7":"0.11","8":"0.12","9":"0.09","10":"0.08","11":"0.09","12":"0.08"},{"1":"Niles","2":"1.424960e+08","3":"0.08","4":"0.08","5":"0.09","6":"0.09","7":"0.10","8":"0.10","9":"0.08","10":"0.08","11":"0.08","12":"0.08"},{"1":"Norridge","2":"5.129310e+07","3":"0.07","4":"0.08","5":"0.08","6":"0.09","7":"0.10","8":"0.11","9":"0.08","10":"0.07","11":"0.08","12":"0.07"},{"1":"North Lake","2":"6.581117e+07","3":"0.11","4":"0.11","5":"0.12","6":"0.12","7":"0.13","8":"0.14","9":"0.11","10":"0.11","11":"0.11","12":"0.11"},{"1":"North Riverside","2":"2.859513e+07","3":"0.08","4":"0.09","5":"0.09","6":"0.10","7":"0.11","8":"0.11","9":"0.09","10":"0.08","11":"0.09","12":"0.08"},{"1":"Northbrook","2":"2.465565e+08","3":"0.07","4":"0.08","5":"0.08","6":"0.08","7":"0.09","8":"0.09","9":"0.08","10":"0.07","11":"0.08","12":"0.07"},{"1":"Northfield","2":"5.096028e+07","3":"0.07","4":"0.07","5":"0.07","6":"0.08","7":"0.08","8":"0.08","9":"0.07","10":"0.07","11":"0.07","12":"0.07"},{"1":"Oak Brook","2":"5.848148e+04","3":"0.06","4":"0.06","5":"0.07","6":"0.07","7":"0.08","8":"0.08","9":"0.06","10":"0.06","11":"0.06","12":"0.06"},{"1":"Oak Forest","2":"7.485288e+07","3":"0.10","4":"0.11","5":"0.13","6":"0.14","7":"0.17","8":"0.20","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Oak Lawn","2":"1.697242e+08","3":"0.09","4":"0.10","5":"0.11","6":"0.13","7":"0.14","8":"0.16","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Oak Park","2":"2.566992e+08","3":"0.10","4":"0.11","5":"0.11","6":"0.12","7":"0.13","8":"0.13","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Olympia Fields","2":"2.502847e+07","3":"0.13","4":"0.14","5":"0.15","6":"0.17","7":"0.19","8":"0.21","9":"0.14","10":"0.12","11":"0.14","12":"0.12"},{"1":"Orland Hills","2":"1.884494e+07","3":"0.08","4":"0.09","5":"0.10","6":"0.11","7":"0.12","8":"0.13","9":"0.09","10":"0.08","11":"0.09","12":"0.08"},{"1":"Orland Park","2":"2.548991e+08","3":"0.08","4":"0.08","5":"0.09","6":"0.10","7":"0.10","8":"0.11","9":"0.08","10":"0.08","11":"0.08","12":"0.08"},{"1":"Palatine","2":"2.435692e+08","3":"0.09","4":"0.10","5":"0.11","6":"0.11","7":"0.12","8":"0.13","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Palos Heights","2":"5.374651e+07","3":"0.09","4":"0.10","5":"0.10","6":"0.11","7":"0.13","8":"0.14","9":"0.10","10":"0.08","11":"0.10","12":"0.08"},{"1":"Palos Hills","2":"4.772036e+07","3":"0.08","4":"0.09","5":"0.10","6":"0.11","7":"0.13","8":"0.15","9":"0.09","10":"0.08","11":"0.09","12":"0.08"},{"1":"Palos Park","2":"2.555475e+07","3":"0.08","4":"0.08","5":"0.09","6":"0.09","7":"0.10","8":"0.10","9":"0.08","10":"0.07","11":"0.08","12":"0.07"},{"1":"Park Forest","2":"4.500159e+07","3":"0.20","4":"0.24","5":"0.29","6":"0.36","7":"0.45","8":"0.51","9":"0.24","10":"0.19","11":"0.24","12":"0.19"},{"1":"Park Ridge","2":"1.898288e+08","3":"0.09","4":"0.09","5":"0.10","6":"0.10","7":"0.11","8":"0.11","9":"0.09","10":"0.08","11":"0.09","12":"0.08"},{"1":"Phoenix","2":"3.943593e+06","3":"0.21","4":"0.27","5":"0.36","6":"0.41","7":"0.45","8":"0.46","9":"0.27","10":"0.20","11":"0.27","12":"0.20"},{"1":"Posen","2":"1.036214e+07","3":"0.10","4":"0.11","5":"0.13","6":"0.16","7":"0.18","8":"0.20","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Prospect Heights","2":"5.541554e+07","3":"0.10","4":"0.10","5":"0.11","6":"0.12","7":"0.13","8":"0.14","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Richton Park","2":"3.370043e+07","3":"0.13","4":"0.14","5":"0.16","6":"0.18","7":"0.21","8":"0.23","9":"0.14","10":"0.12","11":"0.14","12":"0.12"},{"1":"River Forest","2":"7.004330e+07","3":"0.09","4":"0.09","5":"0.09","6":"0.10","7":"0.10","8":"0.11","9":"0.09","10":"0.09","11":"0.09","12":"0.09"},{"1":"River Grove","2":"3.384979e+07","3":"0.10","4":"0.11","5":"0.12","6":"0.13","7":"0.14","8":"0.16","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Riverdale","2":"3.005231e+07","3":"0.21","4":"0.25","5":"0.31","6":"0.36","7":"0.37","8":"0.37","9":"0.25","10":"0.20","11":"0.25","12":"0.20"},{"1":"Riverside","2":"4.342469e+07","3":"0.10","4":"0.11","5":"0.11","6":"0.12","7":"0.13","8":"0.14","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Robbins","2":"8.032570e+06","3":"0.11","4":"0.12","5":"0.14","6":"0.15","7":"0.16","8":"0.16","9":"0.12","10":"0.11","11":"0.12","12":"0.11"},{"1":"Rolling Meadows","2":"1.054737e+08","3":"0.10","4":"0.10","5":"0.11","6":"0.12","7":"0.12","8":"0.13","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Roselle","2":"1.242703e+07","3":"0.09","4":"0.10","5":"0.10","6":"0.11","7":"0.12","8":"0.14","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Rosemont","2":"9.703139e+07","3":"0.09","4":"0.09","5":"0.09","6":"0.09","7":"0.09","8":"0.09","9":"0.09","10":"0.09","11":"0.09","12":"0.09"},{"1":"Sauk Village","2":"1.837945e+07","3":"0.11","4":"0.13","5":"0.14","6":"0.16","7":"0.16","8":"0.16","9":"0.13","10":"0.11","11":"0.13","12":"0.11"},{"1":"Schaumburg","2":"4.125456e+08","3":"0.09","4":"0.09","5":"0.10","6":"0.10","7":"0.11","8":"0.11","9":"0.09","10":"0.09","11":"0.09","12":"0.09"},{"1":"Schiller Park","2":"5.387136e+07","3":"0.10","4":"0.11","5":"0.11","6":"0.12","7":"0.12","8":"0.13","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Skokie","2":"2.942254e+08","3":"0.08","4":"0.09","5":"0.09","6":"0.10","7":"0.11","8":"0.11","9":"0.09","10":"0.08","11":"0.09","12":"0.08"},{"1":"South Barrington","2":"4.082207e+07","3":"0.08","4":"0.08","5":"0.08","6":"0.08","7":"0.09","8":"0.09","9":"0.08","10":"0.08","11":"0.08","12":"0.08"},{"1":"South Chicago Heights","2":"1.170334e+07","3":"0.11","4":"0.12","5":"0.13","6":"0.14","7":"0.15","8":"0.16","9":"0.12","10":"0.11","11":"0.12","12":"0.11"},{"1":"South Holland","2":"8.908233e+07","3":"0.14","4":"0.16","5":"0.17","6":"0.20","7":"0.23","8":"0.27","9":"0.16","10":"0.13","11":"0.16","12":"0.13"},{"1":"Steger","2":"7.925656e+06","3":"0.10","4":"0.11","5":"0.14","6":"0.16","7":"0.17","8":"0.19","9":"0.11","10":"0.09","11":"0.11","12":"0.09"},{"1":"Stickney","2":"1.908282e+07","3":"0.10","4":"0.11","5":"0.12","6":"0.13","7":"0.15","8":"0.16","9":"0.11","10":"0.09","11":"0.11","12":"0.09"},{"1":"Stone Park","2":"9.428385e+06","3":"0.13","4":"0.14","5":"0.15","6":"0.17","7":"0.18","8":"0.20","9":"0.14","10":"0.12","11":"0.14","12":"0.12"},{"1":"Streamwood","2":"1.079790e+08","3":"0.09","4":"0.10","5":"0.11","6":"0.13","7":"0.14","8":"0.16","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"Summit","2":"2.782782e+07","3":"0.11","4":"0.11","5":"0.12","6":"0.13","7":"0.14","8":"0.16","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Thornton","2":"1.174385e+07","3":"0.15","4":"0.17","5":"0.19","6":"0.21","7":"0.23","8":"0.25","9":"0.17","10":"0.15","11":"0.17","12":"0.15"},{"1":"Tinley Park","2":"1.676516e+08","3":"0.09","4":"0.10","5":"0.11","6":"0.12","7":"0.14","8":"0.16","9":"0.10","10":"0.09","11":"0.10","12":"0.09"},{"1":"University Park","2":"5.515731e+05","3":"0.16","4":"0.16","5":"0.16","6":"0.17","7":"0.17","8":"0.17","9":"0.16","10":"0.16","11":"0.16","12":"0.16"},{"1":"Westchester","2":"5.858668e+07","3":"0.08","4":"0.09","5":"0.09","6":"0.10","7":"0.12","8":"0.13","9":"0.09","10":"0.08","11":"0.09","12":"0.08"},{"1":"Western Springs","2":"7.534099e+07","3":"0.07","4":"0.07","5":"0.08","6":"0.08","7":"0.08","8":"0.09","9":"0.07","10":"0.07","11":"0.07","12":"0.07"},{"1":"Wheeling","2":"1.648242e+08","3":"0.10","4":"0.11","5":"0.12","6":"0.12","7":"0.13","8":"0.14","9":"0.11","10":"0.10","11":"0.11","12":"0.10"},{"1":"Willow Springs","2":"2.921028e+07","3":"0.10","4":"0.11","5":"0.11","6":"0.12","7":"0.13","8":"0.15","9":"0.11","10":"0.09","11":"0.11","12":"0.09"},{"1":"Wilmette","2":"1.818259e+08","3":"0.07","4":"0.08","5":"0.08","6":"0.08","7":"0.08","8":"0.09","9":"0.08","10":"0.07","11":"0.08","12":"0.07"},{"1":"Winnetka","2":"1.360853e+08","3":"0.08","4":"0.08","5":"0.08","6":"0.08","7":"0.08","8":"0.08","9":"0.08","10":"0.08","11":"0.08","12":"0.08"},{"1":"Worth","2":"2.639230e+07","3":"0.10","4":"0.12","5":"0.13","6":"0.15","7":"0.17","8":"0.20","9":"0.12","10":"0.10","11":"0.12","12":"0.10"},{"1":"NA","2":"2.606437e+08","3":"0.08","4":"0.08","5":"0.09","6":"0.09","7":"0.10","8":"0.11","9":"0.08","10":"0.07","11":"0.08","12":"0.07"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>munis_billchange <span class="ot">&lt;-</span> munis_ranked <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(scenario_taxrates) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">eav =</span> eq_av,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">exe_neg10 =</span> <span class="dv">0</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>      <span class="co"># exe_0 implies no additional or removed EAV. Current tax system. </span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">exe_0 =</span> <span class="fu">ifelse</span>(eav <span class="sc">&lt;</span> <span class="dv">10000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, eav, </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(eav<span class="sc">&gt;</span><span class="dv">10000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, <span class="dv">10000</span>, <span class="dv">0</span> )),  <span class="co"># no change in current exemptions</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">exe_plus10 =</span> <span class="fu">ifelse</span>(eav <span class="sc">&lt;</span> <span class="dv">20000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, eav, </span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(eav<span class="sc">&gt;</span><span class="dv">20000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, <span class="dv">20000</span>, <span class="dv">0</span> )),</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">exe_plus20 =</span> <span class="fu">ifelse</span>(eav <span class="sc">&lt;</span> <span class="dv">30000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, eav, </span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(eav<span class="sc">&gt;</span><span class="dv">30000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, <span class="dv">30000</span>, <span class="dv">0</span> ) ),</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">exe_plus30 =</span> <span class="fu">ifelse</span>(eav <span class="sc">&lt;</span> <span class="dv">40000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, eav, </span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(eav<span class="sc">&gt;</span><span class="dv">40000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, <span class="dv">40000</span>, <span class="dv">0</span>) ),</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">exe_plus40 =</span> <span class="fu">ifelse</span>(eav <span class="sc">&lt;</span> <span class="dv">50000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, eav, </span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(eav<span class="sc">&gt;</span><span class="dv">50000</span> <span class="sc">&amp;</span> exe_homeowner<span class="sc">!=</span><span class="dv">0</span>, <span class="dv">50000</span>, <span class="dv">0</span>) ),</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">mil_home =</span> <span class="fu">ifelse</span>(av<span class="sc">*</span><span class="dv">10</span> <span class="sc">&gt;</span> <span class="dv">1000000</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(,</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># current bill = current tax rate * portion of levy billed</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">equalized_AV =</span> av_clerk<span class="sc">*</span>eq_factor,</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>   <span class="co"># ## Made negative tax bills!! ## #</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>          <span class="at">bill_neg10 =</span> tr_neg10<span class="sc">*</span>(equalized_AV<span class="sc">-</span>all_exemptions<span class="sc">+</span> exe_homeowner <span class="sc">-</span>exe_neg10),</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">bill_current =</span> tax_code_rate<span class="sc">*</span>(equalized_AV<span class="sc">-</span>all_exemptions),</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">bill_plus10 =</span>  tr_plus10<span class="sc">*</span>(equalized_AV<span class="sc">-</span>all_exemptions<span class="sc">+</span> exe_homeowner <span class="sc">-</span>exe_plus10),</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>         <span class="at">bill_plus20 =</span> tr_plus20<span class="sc">*</span>(equalized_AV<span class="sc">-</span>all_exemptions<span class="sc">+</span> exe_homeowner <span class="sc">-</span>exe_plus20),</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">bill_plus30 =</span> tr_plus20<span class="sc">*</span>(equalized_AV<span class="sc">-</span>all_exemptions<span class="sc">+</span> exe_homeowner <span class="sc">-</span>exe_plus30),</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>         <span class="at">bill_plus40 =</span> tr_plus20<span class="sc">*</span>(equalized_AV<span class="sc">-</span>all_exemptions<span class="sc">+</span> exe_homeowner <span class="sc">-</span>exe_plus40),</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ## make bills $1 if they had been negative.</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>         <span class="at">bill_neg10 =</span> <span class="fu">ifelse</span>(bill_neg10 <span class="sc">&lt;</span> <span class="dv">1</span>, <span class="dv">1</span>, bill_neg10),</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>         <span class="at">bill_current =</span> <span class="fu">ifelse</span>(bill_current <span class="sc">&lt;</span> <span class="dv">1</span>, <span class="dv">1</span>, bill_current),</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">bill_plus10 =</span> <span class="fu">ifelse</span>(bill_plus10 <span class="sc">&lt;</span> <span class="dv">1</span>, <span class="dv">1</span>, bill_plus10),</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">bill_plus20 =</span> <span class="fu">ifelse</span>(bill_plus20 <span class="sc">&lt;</span> <span class="dv">1</span>, <span class="dv">1</span>, bill_plus20),</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">bill_plus30 =</span> <span class="fu">ifelse</span>(bill_plus30 <span class="sc">&lt;</span> <span class="dv">1</span>, <span class="dv">1</span>, bill_plus30),</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>         <span class="at">bill_plus40 =</span> <span class="fu">ifelse</span>(bill_plus40 <span class="sc">&lt;</span> <span class="dv">1</span>, <span class="dv">1</span>, bill_plus40),</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>         )<span class="sc">%&gt;%</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">zerodol_bills_ghe0 =</span> <span class="fu">ifelse</span>(bill_neg10 <span class="sc">&lt;</span> <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>         <span class="at">zerodol_bills_current =</span> <span class="fu">ifelse</span>(bill_current <span class="sc">&lt;</span> <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>         <span class="at">zerodol_bills_ghe20 =</span> <span class="fu">ifelse</span>(bill_plus10 <span class="sc">&lt;</span> <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>         <span class="at">zerodol_bills_ghe30 =</span> <span class="fu">ifelse</span>(bill_plus20 <span class="sc">&lt;</span> <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>         <span class="at">zerodol_bills_ghe40 =</span> <span class="fu">ifelse</span>(bill_plus30 <span class="sc">&lt;</span> <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>         <span class="at">zerodol_bills_ghe50 =</span> <span class="fu">ifelse</span>(bill_plus40 <span class="sc">&lt;</span> <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name, rank, has_HO_exemp) <span class="sc">%&gt;%</span> </span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">median_AV =</span> <span class="fu">round</span>(<span class="fu">median</span>(av)),</span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>            <span class="at">median_EAV =</span> <span class="fu">round</span>(<span class="fu">median</span>(eav)),</span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_bill_neg10 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(bill_neg10, <span class="at">na.rm=</span><span class="cn">TRUE</span>)),</span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_bill_cur =</span> <span class="fu">round</span>(<span class="fu">mean</span>(bill_current, <span class="at">na.rm=</span><span class="cn">TRUE</span>)),</span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_bill_plus10 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(bill_plus10, <span class="at">na.rm=</span><span class="cn">TRUE</span>)),</span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_bill_plus20 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(bill_plus20, <span class="at">na.rm=</span><span class="cn">TRUE</span>)),</span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_bill_plus30 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(bill_plus30, <span class="at">na.rm=</span><span class="cn">TRUE</span>)),</span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_bill_plus40 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(bill_plus40, <span class="at">na.rm=</span><span class="cn">TRUE</span>)),</span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>            <span class="at">tr_neg10 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(tr_neg10<span class="sc">*</span><span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>), </span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a>            <span class="at">cur_comp_TC_rate =</span> <span class="fu">round</span>(<span class="fu">mean</span>(tax_code_rate<span class="sc">*</span><span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>            <span class="at">tr_plus10 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(tr_plus10<span class="sc">*</span><span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>            <span class="at">tr_plus20 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(tr_plus20<span class="sc">*</span><span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a>            <span class="at">tr_plus30 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(tr_plus30<span class="sc">*</span><span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a>            <span class="at">tr_plus40 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(tr_plus40<span class="sc">*</span><span class="dv">100</span>), <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a>            <span class="at">pincount=</span><span class="fu">n</span>(),</span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a>            <span class="at">zerodol_bills_ghe0 =</span> <span class="fu">sum</span>(zerodol_bills_ghe0),           </span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a>            <span class="at">zerodol_bills_current =</span> <span class="fu">sum</span>(zerodol_bills_current),</span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a>            <span class="at">zerodol_bills_ghe20 =</span> <span class="fu">sum</span>(zerodol_bills_ghe20),</span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a>            <span class="at">zerodol_bills_ghe30 =</span> <span class="fu">sum</span>(zerodol_bills_ghe30),</span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a>            <span class="at">zerodol_bills_ghe40 =</span> <span class="fu">sum</span>(zerodol_bills_ghe40),</span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a>            <span class="at">zerodol_bills_ghe50 =</span> <span class="fu">sum</span>(zerodol_bills_ghe50),</span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-76"><a href="#cb10-76" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb10-77"><a href="#cb10-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">clean_name =</span> <span class="fu">ifelse</span>(clean_name <span class="sc">==</span> <span class="st">"Hazelcrest"</span>, <span class="st">"Hazel Crest"</span>, clean_name)) <span class="sc">%&gt;%</span></span>
<span id="cb10-78"><a href="#cb10-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(has_HO_exemp, rank)</span>
<span id="cb10-79"><a href="#cb10-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-80"><a href="#cb10-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-81"><a href="#cb10-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-82"><a href="#cb10-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-83"><a href="#cb10-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-84"><a href="#cb10-84" aria-hidden="true" tabindex="-1"></a>ratios <span class="ot">&lt;-</span> munis_billchange <span class="sc">%&gt;%</span> </span>
<span id="cb10-85"><a href="#cb10-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(has_HO_exemp <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span>  <span class="sc">!</span><span class="fu">is.na</span>(rank)) <span class="sc">%&gt;%</span> <span class="co"># claimed exemption in 2021</span></span>
<span id="cb10-86"><a href="#cb10-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">currbill_to_AV_25 =</span> <span class="fu">ifelse</span>(rank <span class="sc">==</span> <span class="st">"q25"</span>, mean_bill_cur<span class="sc">/</span>median_AV, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-87"><a href="#cb10-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">currbill_to_AV_75 =</span> <span class="fu">ifelse</span>(rank <span class="sc">==</span> <span class="st">"q75"</span>, mean_bill_cur<span class="sc">/</span>median_AV, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-88"><a href="#cb10-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name) <span class="sc">%&gt;%</span></span>
<span id="cb10-89"><a href="#cb10-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">currbill_to_AV_25 =</span> <span class="fu">max</span>(currbill_to_AV_25, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb10-90"><a href="#cb10-90" aria-hidden="true" tabindex="-1"></a>            <span class="at">currbill_to_AV_75 =</span> <span class="fu">max</span>(currbill_to_AV_75, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-91"><a href="#cb10-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">muni_ratio_25to75 =</span> currbill_to_AV_25<span class="sc">/</span>currbill_to_AV_75) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(muni_ratio_25to75 <span class="sc">&gt;</span> <span class="fl">0.01</span>)</span>
<span id="cb10-92"><a href="#cb10-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-93"><a href="#cb10-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-94"><a href="#cb10-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-95"><a href="#cb10-95" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ratios, <span class="fu">aes</span>(<span class="at">y =</span> currbill_to_AV_25, <span class="at">x =</span> currbill_to_AV_75, <span class="at">label =</span> clean_name)) <span class="sc">+</span> </span>
<span id="cb10-96"><a href="#cb10-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb10-97"><a href="#cb10-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> ratios, <span class="fu">aes</span>(<span class="at">alpha =</span> .<span class="dv">5</span>)) <span class="sc">+</span> </span>
<span id="cb10-98"><a href="#cb10-98" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_label_repel</span>(<span class="at">data =</span> (ratios <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Glencoe"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>, <span class="st">"Markham"</span>, <span class="st">"Chicago Heights"</span>, <span class="st">"Hazel Crest"</span>, <span class="st">"Phoenix"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> currbill_to_AV_25, <span class="at">x =</span> currbill_to_AV_75), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">max.overlaps =</span> <span class="cn">Inf</span>, <span class="at">point.padding =</span> <span class="dv">0</span>, <span class="co"># additional padding around each point</span></span>
<span id="cb10-99"><a href="#cb10-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">min.segment.length =</span> <span class="dv">0</span>, <span class="co"># draw all line segments</span></span>
<span id="cb10-100"><a href="#cb10-100" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb10-101"><a href="#cb10-101" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> (ratios <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Glencoe"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>, <span class="st">"Markham"</span>, <span class="st">"Chicago Heights"</span>, <span class="st">"Hazel Crest"</span>, <span class="st">"Phoenix"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> currbill_to_AV_25, <span class="at">x =</span> currbill_to_AV_75, <span class="at">color =</span> <span class="st">"red"</span>), <span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb10-102"><a href="#cb10-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-103"><a href="#cb10-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb10-104"><a href="#cb10-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"transparent"</span>), </span>
<span id="cb10-105"><a href="#cb10-105" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"transparent"</span>), </span>
<span id="cb10-106"><a href="#cb10-106" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"transparent"</span>), </span>
<span id="cb10-107"><a href="#cb10-107" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb10-108"><a href="#cb10-108" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb10-109"><a href="#cb10-109" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"transparent"</span>, </span>
<span id="cb10-110"><a href="#cb10-110" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">color =</span> <span class="cn">NA</span>) ) <span class="sc">+</span></span>
<span id="cb10-111"><a href="#cb10-111" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb10-112"><a href="#cb10-112" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb10-113"><a href="#cb10-113" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb10-114"><a href="#cb10-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">"Tax Burden as a Share of AV </span><span class="sc">\n</span><span class="st">(25th Percentile)"</span>, <span class="at">x=</span><span class="st">"Tax Burden as a Share of AV </span><span class="sc">\n</span><span class="st">(75th Percentile)"</span>, <span class="at">subtitle =</span> <span class="st">"Current Tax System, GHE = 10,000 EAV"</span>) <span class="sc">+</span> <span class="fu">coord_fixed</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="exemption_addendum_2023_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>pin_data <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(av <span class="sc">&lt;</span> <span class="dv">300000</span>) <span class="sc">%&gt;%</span> <span class="co"># just to see the histogram better</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>av)) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">50</span>)  <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Cook County Class 2 Residential PIN Distribution of AV"</span>, </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Assessed Value ($)"</span>, <span class="at">y=</span><span class="st">"# of Pins"</span>, </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Dropped PINs with AVs over $300,000 for better visual of histogram bins."</span>) <span class="sc">+</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">label =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">label =</span> scales<span class="sc">::</span>comma)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>singfam_pins <span class="sc">%&gt;%</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(av <span class="sc">&lt;</span> <span class="dv">300000</span>) <span class="sc">%&gt;%</span> <span class="co"># just to see the histogram better</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>av)) <span class="sc">+</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">50</span>)  <span class="sc">+</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Cook County Single-Family PIN Distribution of AV"</span>, </span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Assessed Value ($)"</span>, <span class="at">y=</span><span class="st">"# of Pins"</span>, </span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Dropped PINs with AVs over $300,000 for better visual of histogram bins."</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">label =</span> scales<span class="sc">::</span>dollar)<span class="sc">+</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">label =</span> scales<span class="sc">::</span>comma)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<figcaption><strong>Distribution of Assessed Values: Class 2 Properties vs Single-Family Properties</strong> There is a difference in the assessed values depending on if you use all 200 level properties or only a subset of them. All figures and tables were created for both options when writing the report as a robustness check.</figcaption>
<p><img src="exemption_addendum_2023_files/figure-html/pindistribution-1.png" class="img-fluid figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<figcaption><strong>Distribution of Assessed Values: Class 2 Properties vs Single-Family Properties</strong> There is a difference in the assessed values depending on if you use all 200 level properties or only a subset of them. All figures and tables were created for both options when writing the report as a robustness check.</figcaption>
<p><img src="exemption_addendum_2023_files/figure-html/pindistribution-2.png" class="img-fluid figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="what-would-happen-if-the-ghe-value-were-increased" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="what-would-happen-if-the-ghe-value-were-increased">What would happen if the GHE value were increased?</h2>
<section id="figure-4.-effect-of-changing-the-ghe-on-progressivity" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="figure-4.-effect-of-changing-the-ghe-on-progressivity">Figure 4. Effect of Changing the GHE on Progressivity</h3>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>ratios <span class="ot">&lt;-</span> munis_billchange <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(has_HO_exemp <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span>  <span class="sc">!</span><span class="fu">is.na</span>(rank)) <span class="sc">%&gt;%</span> <span class="co"># claimed exemption in 2021</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">currbill_to_AV_25 =</span> <span class="fu">ifelse</span>(rank <span class="sc">==</span> <span class="st">"q25"</span>, mean_bill_neg10<span class="sc">/</span>median_AV, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">currbill_to_AV_75 =</span> <span class="fu">ifelse</span>(rank <span class="sc">==</span> <span class="st">"q75"</span>, mean_bill_neg10<span class="sc">/</span>median_AV, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name) <span class="sc">%&gt;%</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">GHE_0_bill_to_AV_25 =</span> <span class="fu">max</span>(currbill_to_AV_25, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">GHE_0_bill_to_AV_75 =</span> <span class="fu">max</span>(currbill_to_AV_75, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">muni_ratio_25to75 =</span> GHE_0_bill_to_AV_25<span class="sc">/</span>GHE_0_bill_to_AV_75) </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ratios, <span class="fu">aes</span>(<span class="at">y =</span> GHE_0_bill_to_AV_25, <span class="at">x =</span> GHE_0_bill_to_AV_75, <span class="at">label =</span> clean_name)) <span class="sc">+</span> </span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">alpha =</span> .<span class="dv">5</span>)) <span class="sc">+</span> </span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_label_repel</span>(<span class="at">data =</span> (ratios <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Glencoe"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>, <span class="st">"Markham"</span>, <span class="st">"Chicago Heights"</span>, <span class="st">"Hazel Crest"</span>, <span class="st">"Phoenix"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> GHE_0_bill_to_AV_25, <span class="at">x =</span> GHE_0_bill_to_AV_75, <span class="at">label =</span> clean_name), <span class="at">size =</span> <span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> (ratios <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Glencoe"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>, <span class="st">"Markham"</span>, <span class="st">"Chicago Heights"</span>, <span class="st">"Hazel Crest"</span>, <span class="st">"Phoenix"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> GHE_0_bill_to_AV_25, <span class="at">x =</span> GHE_0_bill_to_AV_75, <span class="at">color =</span> <span class="st">"red"</span>), <span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"GHE = $0 EAV"</span>, <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span>)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>ratios<span class="ot">&lt;-</span> munis_billchange <span class="sc">%&gt;%</span> </span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(has_HO_exemp <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span>  <span class="sc">!</span><span class="fu">is.na</span>(rank)) <span class="sc">%&gt;%</span> <span class="co"># claimed exemption in 2021</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">currbill_to_AV_25 =</span> <span class="fu">ifelse</span>(rank <span class="sc">==</span> <span class="st">"q25"</span>, mean_bill_cur<span class="sc">/</span>median_AV, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">currbill_to_AV_75 =</span> <span class="fu">ifelse</span>(rank <span class="sc">==</span> <span class="st">"q75"</span>, mean_bill_cur<span class="sc">/</span>median_AV, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name) <span class="sc">%&gt;%</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">currbill_to_AV_25 =</span> <span class="fu">max</span>(currbill_to_AV_25, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>            <span class="at">currbill_to_AV_75 =</span> <span class="fu">max</span>(currbill_to_AV_75, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">muni_ratio_25to75 =</span> currbill_to_AV_25<span class="sc">/</span>currbill_to_AV_75) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(muni_ratio_25to75 <span class="sc">&gt;</span> <span class="fl">0.01</span>)</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ratios, <span class="fu">aes</span>(<span class="at">y =</span> currbill_to_AV_25, <span class="at">x =</span> currbill_to_AV_75, <span class="at">label =</span> clean_name)) <span class="sc">+</span> </span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> ratios, <span class="fu">aes</span>(<span class="at">alpha =</span> .<span class="dv">5</span>)) <span class="sc">+</span> </span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_label_repel</span>(<span class="at">data =</span> (ratios <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Glencoe"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>, <span class="st">"Markham"</span>, <span class="st">"Chicago Heights"</span>, <span class="st">"Hazel Crest"</span>, <span class="st">"Phoenix"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> currbill_to_AV_25, <span class="at">x =</span> currbill_to_AV_75), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">max.overlaps =</span> <span class="cn">Inf</span>, <span class="at">point.padding =</span> <span class="dv">0</span>, <span class="co"># additional padding around each point</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">min.segment.length =</span> <span class="dv">0</span>, <span class="co"># draw all line segments</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> (ratios <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Glencoe"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>, <span class="st">"Markham"</span>, <span class="st">"Chicago Heights"</span>, <span class="st">"Hazel Crest"</span>, <span class="st">"Phoenix"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> currbill_to_AV_25, <span class="at">x =</span> currbill_to_AV_75, <span class="at">color =</span> <span class="st">"red"</span>), <span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"GHE = $10,000 EAV (Current)"</span>, <span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">""</span>)</span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>new_ratios<span class="ot">&lt;-</span> munis_billchange <span class="sc">%&gt;%</span> </span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(has_HO_exemp <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span>  <span class="sc">!</span><span class="fu">is.na</span>(rank)) <span class="sc">%&gt;%</span> <span class="co"># claimed exemption in 2021</span></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newbill_to_AV_25 =</span> <span class="fu">ifelse</span>(rank <span class="sc">==</span> <span class="st">"q25"</span>, mean_bill_plus10<span class="sc">/</span>median_AV, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newbill_to_AV_75 =</span> <span class="fu">ifelse</span>(rank <span class="sc">==</span> <span class="st">"q75"</span>, mean_bill_plus10<span class="sc">/</span>median_AV, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name) <span class="sc">%&gt;%</span></span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">newbill_to_AV_25 =</span> <span class="fu">max</span>(newbill_to_AV_25, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>            <span class="at">newbill_to_AV_75 =</span> <span class="fu">max</span>(newbill_to_AV_75, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">muni_ratio_25to75 =</span> newbill_to_AV_25<span class="sc">/</span>newbill_to_AV_75) <span class="sc">%&gt;%</span> </span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(muni_ratio_25to75 <span class="sc">&gt;</span> <span class="fl">0.01</span>)</span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> new_ratios, <span class="fu">aes</span>(<span class="at">y =</span> newbill_to_AV_25, <span class="at">x =</span> newbill_to_AV_75, <span class="at">label =</span> clean_name)) <span class="sc">+</span> </span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> new_ratios, <span class="fu">aes</span>(<span class="at">alpha =</span> .<span class="dv">5</span>)) <span class="sc">+</span> </span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_label_repel</span>(<span class="at">data =</span> (new_ratios <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Glencoe"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>, <span class="st">"Markham"</span>, <span class="st">"Chicago Heights"</span>, <span class="st">"Hazel Crest"</span>, <span class="st">"Phoenix"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> newbill_to_AV_25, <span class="at">x =</span> newbill_to_AV_75), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">max.overlaps =</span> <span class="cn">Inf</span>, <span class="at">point.padding =</span> <span class="dv">0</span>, <span class="co"># additional padding around each point</span></span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">min.segment.length =</span> <span class="dv">0</span>, <span class="co"># draw all line segments</span></span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> (new_ratios <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Glencoe"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>, <span class="st">"Markham"</span>, <span class="st">"Chicago Heights"</span>, <span class="st">"Hazel Crest"</span>, <span class="st">"Phoenix"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> newbill_to_AV_25, <span class="at">x =</span> newbill_to_AV_75, <span class="at">color =</span> <span class="st">"red"</span>), <span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb12-64"><a href="#cb12-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb12-65"><a href="#cb12-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb12-66"><a href="#cb12-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span> </span>
<span id="cb12-67"><a href="#cb12-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"GHE = $20,000 EAV"</span>, <span class="at">x=</span> <span class="st">""</span>, <span class="at">y=</span><span class="st">""</span>)</span>
<span id="cb12-68"><a href="#cb12-68" aria-hidden="true" tabindex="-1"></a>new_ratios<span class="ot">&lt;-</span> munis_billchange <span class="sc">%&gt;%</span> </span>
<span id="cb12-69"><a href="#cb12-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(has_HO_exemp <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span>  <span class="sc">!</span><span class="fu">is.na</span>(rank)) <span class="sc">%&gt;%</span> <span class="co"># claimed exemption in 2021</span></span>
<span id="cb12-70"><a href="#cb12-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newbill_to_AV_25 =</span> <span class="fu">ifelse</span>(rank <span class="sc">==</span> <span class="st">"q25"</span>, mean_bill_plus20<span class="sc">/</span>median_AV, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-71"><a href="#cb12-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newbill_to_AV_75 =</span> <span class="fu">ifelse</span>(rank <span class="sc">==</span> <span class="st">"q75"</span>, mean_bill_plus20<span class="sc">/</span>median_AV, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-72"><a href="#cb12-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name) <span class="sc">%&gt;%</span></span>
<span id="cb12-73"><a href="#cb12-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">newbill_to_AV_25 =</span> <span class="fu">max</span>(newbill_to_AV_25, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb12-74"><a href="#cb12-74" aria-hidden="true" tabindex="-1"></a>            <span class="at">newbill_to_AV_75 =</span> <span class="fu">max</span>(newbill_to_AV_75, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-75"><a href="#cb12-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">muni_ratio_25to75 =</span> newbill_to_AV_25<span class="sc">/</span>newbill_to_AV_75) <span class="sc">%&gt;%</span> </span>
<span id="cb12-76"><a href="#cb12-76" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-77"><a href="#cb12-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(muni_ratio_25to75 <span class="sc">&gt;</span> <span class="fl">0.01</span>)</span>
<span id="cb12-78"><a href="#cb12-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-79"><a href="#cb12-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-80"><a href="#cb12-80" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> new_ratios, <span class="fu">aes</span>(<span class="at">y =</span> newbill_to_AV_25, <span class="at">x =</span> newbill_to_AV_75, <span class="at">label =</span> clean_name)) <span class="sc">+</span> </span>
<span id="cb12-81"><a href="#cb12-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-82"><a href="#cb12-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">alpha =</span> .<span class="dv">5</span>)) <span class="sc">+</span> </span>
<span id="cb12-83"><a href="#cb12-83" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_label_repel</span>(<span class="at">data =</span> (new_ratios <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Glencoe"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>, <span class="st">"Markham"</span>, <span class="st">"Chicago Heights"</span>, <span class="st">"Hazel Crest"</span>, <span class="st">"Phoenix"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> newbill_to_AV_25, <span class="at">x =</span> newbill_to_AV_75), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">max.overlaps =</span> <span class="cn">Inf</span>, <span class="at">point.padding =</span> <span class="dv">0</span>, <span class="co"># additional padding around each point</span></span>
<span id="cb12-84"><a href="#cb12-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">min.segment.length =</span> <span class="dv">0</span>, <span class="co"># draw all line segments</span></span>
<span id="cb12-85"><a href="#cb12-85" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb12-86"><a href="#cb12-86" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> (new_ratios <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Glencoe"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>, <span class="st">"Markham"</span>, <span class="st">"Chicago Heights"</span>, <span class="st">"Hazel Crest"</span>, <span class="st">"Phoenix"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> newbill_to_AV_25, <span class="at">x =</span> newbill_to_AV_75, <span class="at">color =</span> <span class="st">"red"</span>), <span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb12-87"><a href="#cb12-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb12-88"><a href="#cb12-88" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb12-89"><a href="#cb12-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-90"><a href="#cb12-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb12-91"><a href="#cb12-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span> </span>
<span id="cb12-92"><a href="#cb12-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"GHE = $30,000 EAV"</span>,</span>
<span id="cb12-93"><a href="#cb12-93" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span>)</span>
<span id="cb12-94"><a href="#cb12-94" aria-hidden="true" tabindex="-1"></a>new_ratios<span class="ot">&lt;-</span> munis_billchange <span class="sc">%&gt;%</span> </span>
<span id="cb12-95"><a href="#cb12-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(has_HO_exemp <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span>  <span class="sc">!</span><span class="fu">is.na</span>(rank)) <span class="sc">%&gt;%</span> <span class="co"># claimed exemption in 2021</span></span>
<span id="cb12-96"><a href="#cb12-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newbill_to_AV_25 =</span> <span class="fu">ifelse</span>(rank <span class="sc">==</span> <span class="st">"q25"</span>, mean_bill_plus30<span class="sc">/</span>median_AV, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-97"><a href="#cb12-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newbill_to_AV_75 =</span> <span class="fu">ifelse</span>(rank <span class="sc">==</span> <span class="st">"q75"</span>, mean_bill_plus30<span class="sc">/</span>median_AV, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-98"><a href="#cb12-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name) <span class="sc">%&gt;%</span></span>
<span id="cb12-99"><a href="#cb12-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">newbill_to_AV_25 =</span> <span class="fu">max</span>(newbill_to_AV_25, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb12-100"><a href="#cb12-100" aria-hidden="true" tabindex="-1"></a>            <span class="at">newbill_to_AV_75 =</span> <span class="fu">max</span>(newbill_to_AV_75, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-101"><a href="#cb12-101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">muni_ratio_25to75 =</span> newbill_to_AV_25<span class="sc">/</span>newbill_to_AV_75) <span class="sc">%&gt;%</span> </span>
<span id="cb12-102"><a href="#cb12-102" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(muni_ratio_25to75 <span class="sc">&gt;</span> <span class="fl">0.01</span>)</span>
<span id="cb12-103"><a href="#cb12-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-104"><a href="#cb12-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-105"><a href="#cb12-105" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> new_ratios, <span class="fu">aes</span>(<span class="at">y =</span> newbill_to_AV_25, <span class="at">x =</span> newbill_to_AV_75, <span class="at">label =</span> clean_name)) <span class="sc">+</span> </span>
<span id="cb12-106"><a href="#cb12-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-107"><a href="#cb12-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">alpha =</span> .<span class="dv">5</span>)) <span class="sc">+</span> </span>
<span id="cb12-108"><a href="#cb12-108" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_label_repel</span>(<span class="at">data =</span> (new_ratios <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Glencoe"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>, <span class="st">"Markham"</span>, <span class="st">"Chicago Heights"</span>, <span class="st">"Hazel Crest"</span>, <span class="st">"Phoenix"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> newbill_to_AV_25, <span class="at">x =</span> newbill_to_AV_75), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">max.overlaps =</span> <span class="cn">Inf</span>, <span class="at">point.padding =</span> <span class="dv">0</span>, <span class="co"># additional padding around each point</span></span>
<span id="cb12-109"><a href="#cb12-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">min.segment.length =</span> <span class="dv">0</span>, <span class="co"># draw all line segments</span></span>
<span id="cb12-110"><a href="#cb12-110" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb12-111"><a href="#cb12-111" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> (new_ratios <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Glencoe"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>, <span class="st">"Markham"</span>, <span class="st">"Chicago Heights"</span>, <span class="st">"Hazel Crest"</span>, <span class="st">"Phoenix"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> newbill_to_AV_25, <span class="at">x =</span> newbill_to_AV_75, <span class="at">color =</span> <span class="st">"red"</span>), <span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb12-112"><a href="#cb12-112" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb12-113"><a href="#cb12-113" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb12-114"><a href="#cb12-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-115"><a href="#cb12-115" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb12-116"><a href="#cb12-116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span> </span>
<span id="cb12-117"><a href="#cb12-117" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"GHE = $40,000 EAV"</span>, </span>
<span id="cb12-118"><a href="#cb12-118" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">x=</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span>)</span>
<span id="cb12-119"><a href="#cb12-119" aria-hidden="true" tabindex="-1"></a>new_ratios<span class="ot">&lt;-</span> munis_billchange <span class="sc">%&gt;%</span> </span>
<span id="cb12-120"><a href="#cb12-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(has_HO_exemp <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span>  <span class="sc">!</span><span class="fu">is.na</span>(rank)) <span class="sc">%&gt;%</span> <span class="co"># claimed exemption in 2021</span></span>
<span id="cb12-121"><a href="#cb12-121" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newbill_to_AV_25 =</span> <span class="fu">ifelse</span>(rank <span class="sc">==</span> <span class="st">"q25"</span>, mean_bill_plus40<span class="sc">/</span>median_AV, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-122"><a href="#cb12-122" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newbill_to_AV_75 =</span> <span class="fu">ifelse</span>(rank <span class="sc">==</span> <span class="st">"q75"</span>, mean_bill_plus40<span class="sc">/</span>median_AV, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-123"><a href="#cb12-123" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name) <span class="sc">%&gt;%</span></span>
<span id="cb12-124"><a href="#cb12-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">newbill_to_AV_25 =</span> <span class="fu">max</span>(newbill_to_AV_25, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb12-125"><a href="#cb12-125" aria-hidden="true" tabindex="-1"></a>            <span class="at">newbill_to_AV_75 =</span> <span class="fu">max</span>(newbill_to_AV_75, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-126"><a href="#cb12-126" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">muni_ratio_25to75 =</span> newbill_to_AV_25<span class="sc">/</span>newbill_to_AV_75) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(muni_ratio_25to75 <span class="sc">&gt;</span> <span class="fl">0.01</span>)</span>
<span id="cb12-127"><a href="#cb12-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-128"><a href="#cb12-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-129"><a href="#cb12-129" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> new_ratios, <span class="fu">aes</span>(<span class="at">y =</span> newbill_to_AV_25, <span class="at">x =</span> newbill_to_AV_75, <span class="at">label =</span> clean_name)) <span class="sc">+</span> </span>
<span id="cb12-130"><a href="#cb12-130" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-131"><a href="#cb12-131" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">alpha =</span> .<span class="dv">5</span>)) <span class="sc">+</span> </span>
<span id="cb12-132"><a href="#cb12-132" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_label_repel</span>(<span class="at">data =</span> (new_ratios <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Glencoe"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>, <span class="st">"Markham"</span>, <span class="st">"Chicago Heights"</span>, <span class="st">"Hazel Crest"</span>, <span class="st">"Phoenix"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> newbill_to_AV_25, <span class="at">x =</span> newbill_to_AV_75), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">max.overlaps =</span> <span class="cn">Inf</span>, <span class="at">point.padding =</span> <span class="dv">0</span>, <span class="co"># additional padding around each point</span></span>
<span id="cb12-133"><a href="#cb12-133" aria-hidden="true" tabindex="-1"></a>    <span class="at">min.segment.length =</span> <span class="dv">0</span>, <span class="co"># draw all line segments</span></span>
<span id="cb12-134"><a href="#cb12-134" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb12-135"><a href="#cb12-135" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> (new_ratios <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Park Forest"</span>, <span class="st">"Chicago"</span>, <span class="st">"Winnetka"</span>, <span class="st">"Glencoe"</span>, <span class="st">"Riverdale"</span>, <span class="st">"Dolton"</span>, <span class="st">"Markham"</span>, <span class="st">"Chicago Heights"</span>, <span class="st">"Hazel Crest"</span>, <span class="st">"Phoenix"</span>))), <span class="fu">aes</span>(<span class="at">y =</span> newbill_to_AV_25, <span class="at">x =</span> newbill_to_AV_75, <span class="at">color =</span> <span class="st">"red"</span>), <span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb12-136"><a href="#cb12-136" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb12-137"><a href="#cb12-137" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb12-138"><a href="#cb12-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-139"><a href="#cb12-139" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb12-140"><a href="#cb12-140" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"GHE = $50,000"</span>, </span>
<span id="cb12-141"><a href="#cb12-141" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell column-page quarto-layout-panel" data-layout-ncol="3" data-layout-nrow="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="exemption_addendum_2023_files/figure-html/casestudies-inred-MC2props-1.png" class="img-fluid" width="672"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="exemption_addendum_2023_files/figure-html/casestudies-inred-MC2props-2.png" class="img-fluid" width="672"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="exemption_addendum_2023_files/figure-html/casestudies-inred-MC2props-3.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="exemption_addendum_2023_files/figure-html/casestudies-inred-MC2props-4.png" class="img-fluid" width="672"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="exemption_addendum_2023_files/figure-html/casestudies-inred-MC2props-5.png" class="img-fluid" width="672"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="exemption_addendum_2023_files/figure-html/casestudies-inred-MC2props-6.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</section>
<section id="table-3.-revenue-neutral-tax-rates" class="level3">
<h3 class="anchored" data-anchor-id="table-3.-revenue-neutral-tax-rates">Table 3. Revenue Neutral Tax Rates</h3>
<p><strong>Revenue Neutral Tax Rates (Percent) for Select Municipalities as a Function of GHE Value</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>scenario_taxrates <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Chicago"</span>, <span class="st">"Dolton"</span>, <span class="st">"Glencoe"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">Municipality =</span> clean_name,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>         <span class="st">"0 GHE"</span> <span class="ot">=</span> tr_neg10,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">"10,000 GHE (Current)"</span> <span class="ot">=</span> tr_nochange,</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>         <span class="st">"20,000 GHE"</span> <span class="ot">=</span> tr_plus10,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">"30,000 GHE"</span> <span class="ot">=</span> tr_plus20,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">"40,000 GHE"</span> <span class="ot">=</span> tr_plus30,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>         <span class="st">"50,000 GHE"</span> <span class="ot">=</span> tr_plus40)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Municipality"],"name":[1],"type":["chr"],"align":["left"]},{"label":["0 GHE"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["10,000 GHE (Current)"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["20,000 GHE"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["30,000 GHE"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["40,000 GHE"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["50,000 GHE"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"Chicago","2":"0.06815254","3":"0.07037700","4":"0.07267704","5":"0.07501988","6":"0.07734736","7":"0.07957363"},{"1":"Dolton","2":"0.16951660","3":"0.19925145","4":"0.24384430","5":"0.30228159","6":"0.36836945","7":"0.40400736"},{"1":"Glencoe","2":"0.07962517","3":"0.08116453","4":"0.08286876","5":"0.08459103","6":"0.08638568","7":"0.08825680"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="figure-5.-ghe-value-and-revenue-neutral-tax-rates" class="level3">
<h3 class="anchored" data-anchor-id="figure-5.-ghe-value-and-revenue-neutral-tax-rates">Figure 5. GHE Value and Revenue Neutral Tax Rates</h3>
<p><strong>Relationship of GHE Value and Revenue Neutral Tax Rates in Chicago, Dolton, and Glencoe</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>scenario_taxrates <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Chicago"</span>, <span class="st">"Dolton"</span>, <span class="st">"Glencoe"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">Municipality =</span> clean_name,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>         <span class="st">"0 GHE"</span> <span class="ot">=</span> tr_neg10,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">"10,000 GHE</span><span class="sc">\n</span><span class="st">(Current)"</span> <span class="ot">=</span> tr_nochange,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>         <span class="st">"20,000 GHE"</span> <span class="ot">=</span> tr_plus10,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">"30,000 GHE"</span> <span class="ot">=</span> tr_plus20,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">"40,000 GHE"</span> <span class="ot">=</span> tr_plus30,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>         <span class="st">"50,000 GHE"</span> <span class="ot">=</span> tr_plus40) <span class="sc">%&gt;%</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">0 GHE</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">50,000 GHE</span><span class="st">`</span>), <span class="at">names_to =</span> <span class="st">"Scenarios"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>Scenarios, <span class="at">y =</span> value, <span class="at">group =</span> Municipality, <span class="at">color =</span> Municipality)) <span class="sc">+</span> <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tax Rates for GHE Scenarios"</span>, <span class="at">x =</span> <span class="st">"GHE Amount"</span>, <span class="at">y =</span> <span class="st">"Tax Rate"</span>) <span class="sc">+</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">label =</span> scales<span class="sc">::</span>percent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="exemption_addendum_2023_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="paying-for-the-inequitable-effects-of-exemptions" class="level2">
<h2 class="anchored" data-anchor-id="paying-for-the-inequitable-effects-of-exemptions">Paying for the inequitable effects of exemptions</h2>
<section id="figure-6.-exemptions-by-value-in-class-8-municipalities" class="level3">
<h3 class="anchored" data-anchor-id="figure-6.-exemptions-by-value-in-class-8-municipalities">Figure 6. Exemptions by Value in Class 8 Municipalities</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>pin_data <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Homeowner =</span> <span class="fu">sum</span>(exe_homeowner),</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Senior =</span> <span class="fu">sum</span>(exe_senior),</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Senior Freeze</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">sum</span>(exe_freeze),</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>   <span class="co"># exe_longtime_homeowner = sum(exe_longtime_homeowner),</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Other =</span> <span class="fu">sum</span>(exe_disabled),</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Blue Island"</span>, <span class="st">"Markham"</span>, <span class="st">"Matteson"</span>, <span class="st">"Park Forest"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(Homeowner<span class="sc">:</span>Other), <span class="at">names_to =</span> <span class="st">"Exemption Type"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x=</span>clean_name, <span class="at">y =</span> value, <span class="at">fill =</span> <span class="st">`</span><span class="at">Exemption Type</span><span class="st">`</span>), <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">label =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span> <span class="fu">theme_classic</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">element_blank</span>(), <span class="at">y =</span> <span class="st">"Exempt EAV"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="exemption_addendum_2023_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="figure-7.-exemption-share-in-class-8-municipalities" class="level3">
<h3 class="anchored" data-anchor-id="figure-7.-exemption-share-in-class-8-municipalities">Figure 7. Exemption Share in Class 8 Municipalities</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>pin_data <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(clean_name) <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">all_exemptions =</span> <span class="fu">sum</span>(all_exemptions),</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">eq_av =</span> <span class="fu">sum</span>(av_clerk<span class="sc">*</span>eq_factor),</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">tif_increment_eav =</span> <span class="fu">sum</span>(final_tax_to_tif<span class="sc">/</span>tax_code_rate)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">taxable_eav =</span> eq_av <span class="sc">-</span> tif_increment_eav <span class="sc">-</span> all_exemptions) <span class="sc">|&gt;</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(clean_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Blue Island"</span>, <span class="st">"Markham"</span>, <span class="st">"Matteson"</span>, <span class="st">"Park Forest"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(all_exemptions<span class="sc">:</span>taxable_eav), <span class="at">names_to =</span> <span class="st">"exe_type"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(exe_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"taxable_eav"</span>, <span class="st">"all_exemptions"</span>))<span class="sc">|&gt;</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x=</span>clean_name, <span class="at">y =</span> value, <span class="at">fill =</span> exe_type), <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">label =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span> </span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">element_blank</span>(), <span class="at">y =</span> <span class="st">"Non-TIF Increment EAV in Municipality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="exemption_addendum_2023_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./exemption_addendum_2021.html" class="pagination-link" aria-label="Tax Year 2021">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">Tax Year 2021</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb17" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Tax Year 2023"</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="an">params:</span><span class="co"> </span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">  year: 2023</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>{{&lt; include exemption-addendum-template.qmd &gt;}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>